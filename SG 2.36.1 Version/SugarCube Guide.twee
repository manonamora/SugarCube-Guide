:: StoryTitle
SugarCube Guide


:: StoryData
{
  "ifid": "C15CE33F-61F6-4909-BB59-73EE7A3D57B1",
  "format": "SugarCube",
  "format-version": "2.36.1",
  "start": "Start",
  "tag-colors": {
    "chapter": "purple",
    "page": "yellow",
    "menu": "blue"
  },
  "zoom": 0.6
}


:: API List {"position":"1200,500","size":"200,100"}
<h1>APIs List</h1>
Below, you will find the list of SugarCube APIs, and where they are discussed in this guide.
> ''Note:'' Most of the elements below are meant for Advanced users.

<h3>Config API</h3>
<h4>Audio Settings</h4>\
* {{{Config.audio.pauseOnFadeToZero}}} : [[Macro-relevant Configurations|Confic-Macro]] 
* {{{Config.audio.preloadMetadata}}} : [[Macro-relevant Configurations|Confic-Macro]] 
<h4>History Settings</h4>\
* {{{Config.history.controls}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.history.maxStates}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
<h4>Macros Settings</h4>\
* {{{Config.macros.maxLoopIterations}}} : [[Macro-relevant Configurations|Confic-Macro]] 
* {{{Config.macros.typeSkipKey}}} : [[Macro-relevant Configurations|Confic-Macro]] 
* {{{Config.macros.typeVisitedPassages}}} : [[Macro-relevant Configurations|Confic-Macro]] 
<h4>Navigation Settings</h4>\
* {{{Config.navigation.override}}} : [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
<h4>Passages Settings </h4>\
* {{{Config.passages.descriptions}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.displayTitles}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.nobr}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.passages.onProcess}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.start}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.transitionOut}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
<h4>Saves Settings  </h4>\
* {{{Config.saves.autoload}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.autosave}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.id}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.isAllowed}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.slots}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.saves.tryDiskOnMobile}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.version}}} : [[Save Configurations|Config-Saves]]
<h4>UI Settings</h4>\
* {{{Config.ui.stowBarInitially}}} : [[Other Config APIs|Config-Misc]]
* {{{Config.ui.updateStoryElements}}} : [[Other Config APIs|Config-Misc]]
<h4>Miscellaneous Settings </h4>\
* {{{Config.addVisitedLinkClass}}} : [[Other Config APIs|Config-Misc]]
* {{{Config.cleanupWikifierOutput}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.debug}}} : [[Other Config APIs|Config-Misc]]
* {{{Config.loadDelay}}} :[[(Un)Locking the Loading Screen|API-Lock]] 

<h3>Dialog API</h3>
* {{{Dialog.append()}}} : [[More Popups APIs|API-Dialog]] 
* {{{Dialog.body()}}} : [[More Popups APIs|API-Dialog]] 
* {{{Dialog.close()}}} : [[Create a PopUp|Basic-API-Dialog]] 
* {{{Dialog.isOpen()}}} : [[More Popups APIs|API-Dialog]] 
* {{{Dialog.open()}}} : [[Create a PopUp|Basic-API-Dialog]]
* {{{Dialog.setup()}}} : [[Create a PopUp|Basic-API-Dialog]]
* {{{Dialog.wiki()}}} : [[Create a PopUp|Basic-API-Dialog]]

<h3>Engine API</h3>
* {{{Engine.lastPlay}}} : [[(Re-)Play a Passage|Engine-Play]]
* {{{Engine.state }}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.backward()}}} : [[Moving back and forth in the History|Basic-API-Engine]]
* {{{Engine.forward()}}} : [[Moving back and forth in the History|Basic-API-Engine]]
* {{{Engine.go()}}} : [[Move through the Player's History|Engine-Go]]
* {{{Engine.goTo()}}} : [[Move through the Player's History|Engine-Go]]
* {{{Engine.isIdle()}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.isPlaying()}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.isRendering()}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.play()}}} : [[(Re-)Play a Passage|Engine-Play]]
* {{{Engine.restart()}}} : [[Restarting without the Built-In PopUp|Engine-Restart]]
* {{{Engine.show()}}} : [[(Re-)Play a Passage|Engine-Play]]

<h3>Fullscreen API</h3>
* {{{Fullscreen.element }}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.isEnabled()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.isFullscreen()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.request()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.exit()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.toggle()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.onChange()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.offChange()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.onError()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.offError()}}} : [[Getting the FullScreen Experience|FullScreen]]

<h3>LoadScreen API</h3>
* {{{LoadScreen.lock()}}} :[[(Un)Locking the Loading Screen|API-Lock]] 
* {{{LoadScreen.unlock()}}} :[[(Un)Locking the Loading Screen|API-Lock]] 

<h3>Macro API</h3>
* {{{Macro.add()}}} : [[The Base APIs for Macros|Macro-API]] 
* {{{Macro.delete()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.get()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.has()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.tags.get()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.tags.has()}}} : [[The Base APIs for Macros|Macro-API]]

<h3>MacroContext API</h3>
* {{{<MacroContext>.args}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.args.full}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.args.raw}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.name}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.output}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.parent}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.parser}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.payload}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.self}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.contextHas()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.contextSelect()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.contextSelectAll()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.createShadowWrapper()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.error()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 

<h3>Passage API</h3>
* {{{<Passage>.domId}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.tags}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.text}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.title}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.description()}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.processText()}}} : [[Managing Passage Properties with APIs|PassageAPI]]

<h3>Save API</h3>
* {{{Save Objects}}} : [[Save Objects and Their Contents|SaveAPI-Objects]] 
* {{{Save.clear()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
* {{{Save.get()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
* {{{Save.ok()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
<h4>Slots </h4>\
* {{{Save.slots.length}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.count()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.delete()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.get()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.has()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.isEmpty()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.load()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.ok()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
* {{{Save.slots.save()}}} : [[Managing the Save Slots|SaveAPI-Slots]]
<h4>Autosave </h4>\
* {{{Save.autosave.delete()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]] 
* {{{Save.autosave.get()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]] 
* {{{Save.autosave.has()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]] 
* {{{Save.autosave.load()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]] 
* {{{Save.autosave.ok()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]] 
* {{{Save.autosave.save()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]] 
<h4>Disk</h4>\
* {{{Save.export()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
* {{{Save.import()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
<h4>Serialization</h4>\
* {{{Save.serialize()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
* {{{Save.deserialize()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]]
<h4>Events </h4>\
* {{{Save.onLoad.add()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onLoad.clear()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onLoad.delete()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onLoad.size}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onSave.add()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onSave.clear()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onSave.delete()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onSave.size}}} : [[Using Save-related Events|SaveAPI-Events]] 

<h3>Setting API</h3>
* {{{Setting.addHeader()}}} : [[Adding Headers|SettingsHeader]]
* {{{Setting.addToggle()}}} : [[Creating a Toggle Setting|SettingsToggle]]
* {{{Setting.addList()}}} : [[Creating a List Setting|SettingsList]]
* {{{Setting.addRange()}}} : [[Creating a Slider|SettingsRange]]
* {{{Setting.load()}}} : [[Going Further with Settings|Settings-More]]
* {{{Setting.reset()}}} : [[Going Further with Settings|Settings-More]]
* {{{Setting.save()}}} : [[Going Further with Settings|Settings-More]]
* {{{settings}}} : [[Going Further with Settings|Settings-More]]

<h3>State API</h3>
* {{{State.active}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.bottom}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.current}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.length}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.passage}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.size}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.temporary}}} : [[Managing the State of Variables|StateAPI-Variable]]
* {{{State.top}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.turns}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.variables}}} : [[Managing the State of Variables|StateAPI-Variable]]
* {{{State.getVar()}}} : [[Managing the State of Variables|StateAPI-Variable]]
* {{{State.has()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.hasPlayed()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.index()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.isEmpty()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.peek()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.metadata.size}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.clear()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.delete()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.entries()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.get()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.has()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.keys()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.set()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.prng.init()}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.prng.isEnabled()}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.prng.pull}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.prng.seed}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.random()}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.setVar()}}} : [[Managing the State of Variables|StateAPI-Variable]]

<h3>Story API</h3>
* {{{Story.domId}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.ifId}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.title}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.get()}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.has()}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.lookup()}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.lookupWith()}}} : [[Managing Story Elements with APIs|StoryAPI]]

<h3>Template API</h3>
* {{{Template.size}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.add()}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.delete()}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.get()}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.has()}}}: [[The Template APIs|TemplateAPI]] 

<h3>UI API</h3>
* {{{UI.alert()}}} : [[More Popups APIs|API-Dialog]] 
* {{{UI.jumpto()}}} : [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.restart()}}} : [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.saves()}}} : [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.settings()}}} : [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.share()}}} : [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]] 

<h3>UIBar API</h3>
* {{{UIBar.destroy()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.hide()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.isHidden()}}} : [[More UIBar APIs|API-UIBar]] 
* {{{UIBar.isStowed()}}} : [[More UIBar APIs|API-UIBar]] 
* {{{UIBar.show()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.stow()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{.unstow()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.update()}}} : [[More UIBar APIs|API-UIBar]] 

<div id="link-menu"><<back "Return to Previous Page">> - [[Back to the Start Menu|Start]]</div>


:: API-Adv [chapter menu] {"position":"1100,1100","size":"200,100"}
<h1>Going Further with Basic APIs and More</h1>
While most of the Basic API were listed [[here|Basic-API]], this chapter will cover more advanced elements for the Dialog Box and the UI SideBar, as well as extra APIs dealing with elements on the screen.

Those APIs are JavaScript-based code that should either be included in the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros to work.

* [[More Popups APIs|API-Dialog]] 
* [[More UIBar APIs|API-UIBar]] 
* [[The Template APIs|TemplateAPI]] 
* [[(Un)Locking the Loading Screen|API-Lock]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: API-Dialog [page] {"position":"1100,1200","size":"100,100"}
<h1>More Popups APIs</h1>
\
<h3>targeting and Appending a Popup</h3>\
\
<h4>{{{Dialog.body()}}}</h4>\
This API will be most used to target the body element of a popup, especially with jQuery code.
> //Adding text to the popup://
{{{
    jQuery(Dialog.body()).append("Cry 'Havoc!', and let slip the <em>ponies</em> of <strong>friendship</strong>.");

    jQuery(Dialog.body()).wiki("Cry 'Havoc!', and let slip the //ponies// of ''friendship''.");
}}}
> ''Note:'' {{{.append()}}} will not parse SugarCube Markup or run macros. You will need to use {{{.wiki()}}} for that.
\
<h4>{{{Dialog.append()}}}</h4>\
This API will append any given content to the body of the popup. This can be helpful when using a popup for multiple situations, but one requires some extra elements.
It is a shortcut for {{{jQuery(Dialog.body()).append(…)}}}. Like the jQuery {{{.append}}}, you ''cannot include'' any SugarCube Markup or macro as content, but use the {{{Dialog.wiki()}}} [[API|Basic-API-Dialog]] instead.
> //Example://
{{{
    Dialog.append("Cry 'Havoc!', and let slip the <em>ponies</em> of <strong>friendship</strong>.");
}}}
<<button "Click for Action">><<run UI.restart()>><<run Dialog.append("Look at what I added here!<br>But we shouldn't mess up with this popup. This is just for an example.");>><</button>>
\
<h3>{{{Dialog.isOpen()}}}</h3>\
If there is code that should only be executed when a popup is (not) open (e.g. for a macro), you can use this API to check. {{{Dialog.isOpen()}}} also let you check if a particular popup is open, by indicating its class.
{{{
    Dialog.isOpen([classNames])
}}}
> //Examples://
{{{
    if (Dialog.isOpen()) {
        /* code to execute if the dialog is open… */
    }

    if (Dialog.isOpen("saves")) {
        /* code to execute if the Saves dialog is open… */
    }
}}}
> ''Note:'' For code that should be triggered every time a popup is opened, it is recommended to use the [[Dialog Event|Events-Dialog]] instead.

\
<h3>Creating an Alert Popup</h3>\
While the [[Dialog API|Basic-API-Dialog]] has many elements and options to customise a popup, there is a quicker way to include an Alert Popup, with {{{UI.alert()}}}. With this one-line API, a popup titled //Alert// will appear on the screen, with an //OK// button to close it.
> ''Note'': this should not be confused with the JavaScript {{{alert()}}} which will create a browser popup.
{{{
    UI.alert(message [, options [, closeFn]])
}}}
\
The API has 3 parameters:
* {{{message}}}, which will be displayed to the player.
** this cannot include any SugarCube macro.
* {{{options}}} (optional) 
** namely {{{ {top: [value]} }}}, to affect the top margin of the popup.
* {{{closeFn}}} (option), the function to execute whenever the popup is closed
\
> //Example://
{{{
    UI.alert("You smell of elderberries!");

    UI.alert("You smell of elderberries!", { top : 500});
}}}
<<button "Alert Hi">><<run UI.alert("You smell of elderberries!");>><</button>> | <<button "Alert Low">><<run UI.alert("You smell of elderberries!", { top : 500});>><</button>>

<div id="link-menu">[[Back to the API Menu|API-Adv]] - [[Back to the Start Menu|Start]]</div>


:: API-Lock [page] {"position":"1200,1300","size":"100,100"}
<h1>(Un)Locking the Loading Screen</h1>
While the Loading Screen will stay visible until all coded assets are imported, like the [[Audio|Macro-Audio]], or loading [[StyleSheets or Scrips|Function-JS]], you can force it to stay locked for a longer period of time. During that time, the player will not be able to interact with the game.
This can be useful when wanting to display multiple elements as a loading sequence, or to run more code at the start. It can also be used during the story.
\
<h3>{{{LoadScreen.lock()}}}</h3>\
You can lock the screen by simply adding {{{LoadScreen.lock();}}} inside the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros directly in a passage. The Loading Screen will then appear on the screen. 

Each use of the {{{LoadScreen.lock()}}} will return a ID (number). It is also preferable to save this id inside a (JavaScript) variable, for when you want to unlock the screen:
{{{
    var lockID = LoadScreen.lock();
}}}
\
<h3>{{{LoadScreen.unlock()}}}</h3>
To unlock the screen, and remove the Loading Screen, you will need to use {{{LoadScreen.unlock()}}} and indicate the lock ID:
{{{
    LoadScreen.unlock(lockId);

    LoadScreen.unlock(2);
}}}
> ''Note:'' the ID must be a number, or an integer variable, saving that number.
\
> //Examples://
{{{
    var lockID = LoadScreen.lock();

    setTimeout(function(){
        LoadScreen.unlock(lockID);
        /* Other functions that could affect the loading screen */
    }, 5000);
}}}
{{{
    var lockID = LoadScreen.lock();

    /* Do something whose timing is unpredictable 
    that should be hidden by the loading screen */

    LoadScreen.unlock(lockID);
}}}
\
<h3>Loading Screens and Config API</h3>\
If your goal is only to delay the dismissal of the loading screen (e.g. to avoid it flashing at the start if too quick), the APIs above are somewhat unnecessary. You can use the {{{Config.loadDelay}}} API instead.

{{{Config.loadDelay}}} will add a timer to the dismissal of the loading screen (indicated in milliseconds), which should normally happen once the game is ready to play. 
> //Example://
{{{
→ Adding 2s of delay:    
    Config.loadDelay = 2000;
}}}

<div id="link-menu">[[Back to the API Menu|API-Adv]] - [[Back to the Start Menu|Start]]</div>


:: API-UIBar [page] {"position":"1200,1200","size":"100,100"}
<h1>More UIBar APIs</h1>
\
<h3>{{{UIBar.update()}}}</h3>\
This API will let you update the whole of the SideBar outside of [[Navigation Update|Events-Passage]]. Runing this API will refresh any element coded in [[Special Passages|SP-UIBar]] (e.g. {{{StoryBanner}}}, {{{StoryCaption}}}, etc...).
{{{
    UIBar.update();
}}}
> ''Note:'' this should be used sparingly, as the refresh does not target a single element. If you need to update the SideBar, it is recommended to target that specific element instead of the whole, or move the player to a new passage. 
\
<h3>{{{UIBar.isHidden()}}} and {{{UIBar.isStowed()}}}</h3>\
These API will check whether the SideBar is currently hidden or stowed respectively, using boolean values as results. These states are particularly useful when wanting to trigger code, whether in JavaScript or with SugarCube macros.
{{{
    if (UIBar.isHidden()) {
	    /* code to execute if the UI bar is hidden… */
    }

    if (!UIBar.isStowed()) {
	    /* code to execute if the UI bar is not stowed… */
    }

    <<if !UIBar.isHidden()>> ... <</if>>

    <<if UIBar.isStowed()>> ... <</if>>
}}}
> ''Note:'' these API will be useless if you removed the SideBar.

<div id="link-menu">[[Back to the API Menu|API-Adv]] - [[Back to the Start Menu|Start]]</div>


:: About [side] {"position":"1200,100","size":"200,100"}
<h1>About Twine and SugarCube</h1>
//''Twine''// is a free and open-source tool to create interactive, non-linear stories, created by Chris Klimas in 2009. It is now maintained by multiple individuals, in [[several repositories|https://github.com/tweecode]]. ''//Twine//'' is also a registered trademark of the [[Interactive Fiction Technology Foundation|https://iftechfoundation.org/]].

''//Twine//'' offers both a desktop and browser application on [[its website|https://twinery.org]], giving creator a visual representation of each passage in their game. The browser version can be opened on tablets and mobile devices.

Over the years, Twine has had [[multiple story formats|http://mcdemarco.net/tools/hyperfic/twine/catalog/]], among others SugarCube. Twine compiles the code of the chosen format to create a file in the format's choice (usually HTML) or Twee. The other base formats of Twine 2 are: Harlowe, Chapbook, and Snowman.

''//SugarCube//'' is a free (gratis and libre) coding format for Twine/Twee created and maintained by Thomas M. Edwards. It is based on JavaScript and jQuery, and can be styled with HTML and CSS.

Thomas M. Edwards is also the creator of //''Tweego''//, a free (gratis and libre) command line compiler for Twine/Twee story formats written in Go. It is an alternative to Twine, and can be used with any Integrated development environment (IDE), like VSCode.
This guide was compiled in Tweego.

If you want to support the parties named above, you can find here the links for:
* Chris Klimas (klembot) : [[Patreon|https://www.patreon.com/klembot]]
* Thomas M. Edwards (TME - The Mad Exile) : [[Patreon|https://www.patreon.com/thomasmedwards]] - [[Ko-Fi|https://ko-fi.com/thomasmedwards]]
* The Interactive Fiction Technology Foundation : [[Donations|https://iftechfoundation.org/give/]]
> ''Note:'' to support other parties creating assets and resources for Twine, check this [[list|https://manonamora-if.tumblr.com/post/700577877042888704/]].

<<back>>


:: Accessibility [page] {"position":"3300,1600","size":"100,100"}
<h1>A Note on Interface Accessibility</h1>
While SugarCube was deliberately built with ARIA (Accessibility) support, any change in the Interface or inclusion of external elements will affect the accessibility of your project. Below are some elements to take into account when creating a project and editing the Built-In Interface.
\
<h3>Colour Compatibility and Contrast</h3>\
As fun as it is to create crazy interface with strange palettes, some colours are not compatible with one another, rendering things difficult to read on the screen because of the poor contrast. For example, <span id="bad-idea">this text has really poor readability</span>. When editing the page, you must be mindful of colour combination.

To help figure out what colour work best together, the WCAG has set [[standards|https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html]] in the minimum contrast for text readability. The minimum contrast of plain text should be of 4.5 between the text colour and the background. For even better contrast, a ration of 7.0 should be reached.
To check whether you achieved those ratio, you can use an [[online contrast checker|https://app.contrast-finder.org/?lang=en]] or use the Inspect Tool of your browser.
> ''Note:'' this [[checker|https://www.myndex.com/APCA/]] goes even further that the WCAG minimum, by including font size and weight into the mix.
\
<h4>Colour Contrast and Image Background</h4>\
This contrast is even more important when the text is brought before an image background. Due to the often varied range of colours in images, it is sometimes difficult to find the correct text colour for a good contrast.
While avoiding busy background altogether is preferred, there are ways to keep your pie and eat it. One option is to add a blurry shadow behing the text with the {{{text-shadow}}} CSS rule. Another is adding a border around each letter, like an outline (again with {{{text-shadow}}} or with {{{-webkit-text-stroke}}}). 
An even easier option is to add a "sreen" between the image and the text:
{{{
    #passages {
        background: #HexcodeWithSomeOpacity;
    }

→ if #passages already has a background 
  you can add a {:before} pseudo-element 
    #passages {
        position: relative;
    }
    #passages:before {
        content: "";
        position: absolute;
        z-index: -1;
        width: 100%;
        height: 100%;
        background: #HexcodeWithSomeOpacity;
    }
}}}
> ''Note:'' it is not recommended to add a background to {{{.passage}}} as it will refresh along with the content of the passage (flash).
\
<h4>Light and Dark Themes</h4>\
Because your project may be played by others, you may want to consider adding multiple themes for comfort. Light mode (bright colours closer to white) tend to be superior for readability and provising less eye straints in bright environment. On the other hand, dark mode (darker colours closer to black) make it easier to the eyes in darker environment, and reduces exposure to blue screen light. Individuals also have their personal preference between light and dark mode.
> ''Note:'' many SugarCube templates will include a Theme [[Setting|SettingsList]] within its code, with a light and dark mode.
\
<h3>Font Choices and Alternatives</h3>\
We all love Papyrus as a font, but it does not make for a legible font for plain text. When considering to use a different font for your project than the one included in the Base StyleSheet (which is {{{Helmet/Freesans/sans-serif}}}), legibility should be a priority. This is extra important for players with dyslexia and other visual impairment, as similarly shaped letters and characters and short ascenders and descenders combinations may increase confusion.

So decorative and overly stylized fonts, such as cursive fonts, which can be difficult to read even for non-impaired users, should be avoided (or an alternative should be provided). Serif fonts, like Times New Roman or Calibri, are preferred for printed items (i.e. books), but doesn't display as nicely on screens as sans-serif fonts do (though those two are still very legible).

Fonts like {{{Arial}}} (sans-serif), {{{Calibri}}} (serif), {{{Georgia}}} (serif), {{{Helvetica}}} (sans-serif), {{{Lucida Sans}}}/{{{Lucida Grande}}} (sans-serif), {{{Tahoma}}} (sans-serif), {{{Times New Roman}}} (serif), and {{{Verdana}}} (sans-serif) are often among lists of recommended fonts. 
There are also fonts created specifically for dyslexic and visually impared users, though many are under copyright or are not free for use. [[OpenDyslexic|https://opendyslexic.org/]] and [[Atkinson Hyperlegible|https://brailleinstitute.org/freefont]] are two freely available sans-serif fonts.

For Twine projects, you may want to consider adding multiple serif and sans-serif fonts, letting the player decided which one they would prefer to use, through a [[Setting|SettingsList]].
> ''Note:'' along with font families, you may want to add different font sizes for player to choose from as well!
\
<h3>Animated Content</h3>\
While animations can help elevate a project, some may also hinder it. Ill-timed animations can become a distraction, too many animations at once could bring confusion on where the eye should focus, poorly designed animations may work fine on computers but may not translate on mobile devices, and certain types of animations (e.g. rapid flashing) could present accessibility issues to users (e.g. espilepsy, visual impairments, etc...).

When including animation, even as simple as the {{{<<type>>}}} macro, you may want to code a [[Toggle Setting|SettingsToggle]] to hide the animated elements. This can be done either in the StyleSheet through a class, or directly in the passage with a conditional statement.
\
<h3>Images and Alternative Text</h3>\
When including assets like images into your project, you must remember that they may not be accessible to users with impairments.

Alternative texts, thanks to the {{{alt}}} attribute, may alleviate this issue for screen readers:
{{{
    <img src="URL" alt="this is the image">
}}}
> ''Note:'' a recommended Alternative text length should be about 125 characters. 
> Extensive and verbose descriptions should be included in the page itself.
For inconsequential elements, such as a fancy paragraph break as an image, you can use an empty {{{alt}}} attribute to "hide" the image from screen readers:
{{{     <img src="URL" alt="">}}} 
> ''Note:'' if not indicated, the screen reader will say //Image//.
\
<h3>Some Links about Accessibility and Guidelines</h3>\
* [[ARIA - Accessibility - MDN|https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA]]
* [[HTML: A good basis for accessibility - MDN|https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML]]
* [[HTML5 Accessibility - Support Status (2022)|https://stevefaulkner.github.io/HTML5accessibility/]]
* [[Web Accessibility Initiative Guidelines 2.2 - WCAG|https://www.w3.org/TR/WCAG22/]]
* [[Game Accessibility Guidelines|https://gameaccessibilityguidelines.com/]]
* [[Can I Use ?|https://caniuse.com/]] (features accepted by which browser)
* [[APCA Contrast Simulator|https://www.myndex.com/APCA/]]

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Accessibility-Cycle [page] {"position":"1500,700","size":"100,100"}
<h1>Make the Cycle Macro Accessible</h1>
While it can be a fun way to have Interactivity in your project, the {{{<<cycle>>}}} [[macro|Macro-Cycle]] has some issues with accessiblity (especially screen readers). This can be remedied with the code below, created by [[HiEv|https://www.reddit.com/r/twinegames/comments/qo1p1j/cycling_links_and_accessibility/]], which you must include in your JavaScript.
{{{
    $(document).on(":passagerender", function (event) {
        var clinks = $(event.content).find(".macro-cycle");
        if (clinks.length) {
            clinks.attr("aria-label", function (event) {
                return "(click to change) " + $(this).text();
            });
            clinks.on("click", function (evnt) {
                //Fix SugarCube bug with <<cycle>>+Config.cleanupWikifierOutput
                    $(this).find("p").contents().unwrap();  
                //End Fix bug 
                $(this).attr("aria-label", "(click to change) " + $(this).text());
            });
        }
    });
}}}
> ''Note:'' if you are not using the {{{Config.cleanupWikifierOutput}}} [[API|Basic-API-Config]] in your project, the Fix Bug code line can be removed.

<div id="link-menu">[[Back to the Interactive Macro Menu|Macro-Interact]] - [[Back to the Start Menu|Start]]</div>


:: Audio-Macro [page] {"position":"2900,1300","size":"100,100"}
<h1>Playing Tracks in a Passage</h1>
After setting tracks in {{{StoryInit}}}, you can those tracks to a passage with the {{{<<audio>>}}} macro. You also use this macro to target track groups, as well as controling the playback (ex: pause, volume change...).

The macro can be coded as is in a passage, or can be nested inside other macros, like a {{{<<link>>}}} or with a delay in {{{<<timed>>}}}.

When started, a track will play until it ends or another action is set with the {{{<<audio>>}}} macro.

The macro has 2 main arguments:
* the ID of the track or the group
* the list of action to perform (can be combined)
{{{
        <<audio "ID" action>>
}}}
\
<h3>Action List</h3>\
There are 14 actions that can be included in the {{{<<audio>>}}} macro to control how a track or group of tracks is played:
<<nobr>>
<table id="audio">
        <tr>
                <th>Argument</th><th>Explanation</th><th>Example</th>
        </tr>
        <tr>
                <td>{{{play}}}</td><td>Start/Restart to play the track(s)</td><td>{{{<<audio "track" play>>}}}</td>
        </tr>
        <tr>
                <td>{{{pause}}}</td><td>Pause the track(s)</td><td>{{{<<audio "track" pause>>}}}</td>
        </tr>
        <tr>
                <td>{{{stop}}}</td><td>Stop the track(s)</td><td>{{{<<audio "track" stop>>}}}</td>
        </tr>
        <tr>
                <td>{{{mute}}}</td><td>Reduce the volume to 0, without pausing the track</td><td>{{{<<audio "track" mute>>}}}</td>
        </tr>
        <tr>
                <td>{{{volume}}}</td><td>Change the volume of the track(s)</td><td>{{{<<audio "track" volume 0.5>>}}}</td>
        </tr>
        <tr>
                <td>{{{loop}}}</td><td>Set the track(s) to repeat when reahcing the end</td><td>{{{<<audio "track" loop>>}}}</td>
        </tr>
        <tr>
                <td>{{{unloop}}}</td><td>Remove the looping (default)</td><td>{{{<<audio "track" unloop>>}}}</td>
        </tr>
        <tr>
                <td>{{{fadein}}}</td><td>Start/Continue to play the track(s), fading in from their current volume to max over 5 seconds</td><td>{{{<<audio "track" fadein>>}}}</td>
        </tr>
        <tr>
                <td>{{{fadeout}}}</td><td>Start/Continues to play the track(s), fading out from their current volume to 0 over 5 seconds</td><td>{{{<<audio "track" fadeout>>}}}</td>
        </tr>
        <tr>
                <td>{{{fadeoverto}}}</td><td>Start/Continue to play the track(s), fading it over a set amount of seconds to a certain volume level </td><td>{{{<<audio "track" 5 0.5>>}}}</td>
        </tr>
        <tr>
                <td>{{{fadeto}}}</td><td>Start/Continue to play the track(s), fading to a certai volume level over 5 seconds</td><td>{{{<<audio "track" fadeto 0.9>>}}}</td>
        </tr>
        <tr>
                <td>{{{goto}}}</td><td>Send the player to a certain passage at the end of the track(s)</td><td>{{{<<audio "track" goto "Home">>}}}</td>
        </tr>
        <tr>
                <td>{{{time}}}</td><td>Move the play of the track to a certain amount of seconds from 0 (start) to the max of the file.</td><td>{{{<<audio "track" time 60>>}}}</td>
        </tr>
</table>
<</nobr>>
Assuming that the track {{{space}}}, inside the group {{{:space}}}, has been cached, here are some extra examples:
{{{
        <<audio ":space" play>>
→ Will start to play the group of tracks called :space, all at the same time.

        <<audio "space" volume 0.65 play>>
→ Will start playing the track {space} at 65% volume

        <<audio "space" time 92 play>>
→ Will start playing the track {space} from the 92th second

        <<audio "space" loop play>>
→ Will start playing the track {space} on repeat

        <<audio "space" volume 10 fadein>>
→ Will start playing the track {space}, fading in from 10% to max volume

        <<audio "space" volume 0.15 fadeto 0.78>>
→ Will start playing the track {space}, fading from 15% to 78% volume 

        <<audio "space" volume 0.04 fadeoverto 27 0.96>>
→ Will start playing the track {space}, fading from 4% to 96% volume over 27 seconds 

        <<audio "space" play goto "Home">>
→ Will start playing the track {space}, and send the player to the passage "Home" when the track ends.
}}}
<h3>Group IDs</h3>\
Aside from targeting groups, the {{{<<audio>>}}} macro can also target the state of tracks.
{{{
        <<audio ":paused" play>>
→ Will start playing all tracks previously paused

        <<audio ":playing" pause>>
→ Will pause all tracks currently playing

        <<audio ":playing" stop>>
→ Will stop all tracks currently playing

        <<audio ":all" stop>>
→ Will stop all tracks (playing and paused)

        <<audio ":playing:not(:space)" stop>>
→ Will stop all tracks currently playing, except the ones in the ":space" group

        <<audio ":all:not(:space)" volume 0.40>>
→ Will change the volume of all tracks not in the ":space" group to 40%
}}}
\
<h3>The {{{<<playlist>>}}} macro</h3>\
This macro will work similarly to the {{{<<audio>>}}} macro, aside from targeting playlists set in {{{StoryInit}}} instead of groups or single tracks.  

The macro has 2 main arguments:
* the ID of the playlist 
* the list of action to perform (can be combined)
{{{
        <<playlist "ID" action>>
}}}
On top of the actions mentioned above for {{{<<audio>>}}}, this macro has three extra: 
* {{{shuffle}}}, shuffling the order of the tracks
* {{{unshuffle}}}, reorganising the order of the tracks to its original form
* {{{skip}}}, skipping the next track in the playlist 
{{{
        <<playlist "playlist" shuffle>>
        <<playlist "playlist" unshuffle>>
        <<playlist "playlist" skip>>
}}}
>'' Note:'' The action {{{goto}}} will not work with {{{<<playlist>>}}}

<div id="link-menu">[[Back to the Audio Macros Menu|Macro-Audio]] - [[Back to the Start Menu|Start]]</div>


:: Audio-Other [page] {"position":"3000,1300","size":"100,100"}
<h1>Other Audio Macros</h1>
There are three extra macros that can affect the played audio.
\
<h3>{{{<<masteraudio>>}}}</h3>\
This macro will control the master volume of the game (overall volume), as well as affect all registered tracks, regardless of their state.

This macro only has one argument, the action:
* {{{mute}}} and {{{unmute}}}, muting or unmuting the master volume of the game.
* {{{muteonhide}}} and {{{nomuteonhide}}}, which will either mute or unmute (default) the master volume when the player moves to another tab or minimize the browser.
* {{{stop}}}, which will stop all registered tracks.
* {{{volume}}}, which will change the master volume to a specified level
{{{
        <<masteraudio action>>
}}}
>'' Note:'' the master audio volume can be changed at will by the player with a [[Slider Setting|SettingsRange]].
\
<h3>{{{<<removeaudiogroup>>}}}</h3>\
This macro will delete a track group, which was previously set with {{{<<createaudiogroup>>}}}, by targeting the ID of the group. As with the latter macro, it will not accept the following IDs: {{{:all}}}, {{{:looped}}}, {{{:muted}}}, {{{:not}}}, {{{:paused}}}, {{{:playing}}}.
{{{
        <<removeaudiogroup ":space">>
}}}
\
<h3>{{{<<removeplaylist>>}}}</h3>\
This macro will delete a playlist, which was previously set with {{{<<createplaylist>>}}}, by targeting the ID of the playlist.
{{{
        <<removeplaylist "playlist">>
}}}

<div id="link-menu">[[Back to the Audio Macros Menu|Macro-Audio]] - [[Back to the Start Menu|Start]]</div>


:: Base-JS-CSS [chapter page] {"position":"2000,725","size":"200,100"}
<h1>About JavaScript and the StyleSheet</h1>
To customise your project even futher, Twine gives you the possibility to use JavaScript and CSS, which you can edit in the //JavaScript// and //StyleSheet// passages (under the //Story Menu// in the Twine app).
\
<h3>JS - JavaScript</h3>\
''JavaScript'' (or JS) is a coding language used in HTML files that will dictate the behaviour of elements on the page. When you click on a link to change the passage to a new one, it is because the JavaScript code is telling the page to do so. The macros in SugarCube are built on JavaScript.

The most common use for JavaScript in a project is:
* to add custom macro for effect not available in the base SugarCube
* to add settings to change how the project looks/acts for the player 
* to change how the page looks/behaves (ex: removing the history arrows)
You could potentially build a whole SugarCube project by only using JavaScript, though you might as well use [[Snowman|https://videlais.github.io/snowman/#/]]...
\
> ''Notes:'' SugarCube also uses jQuery, which is a sub-language of JavaScript, used for navigation, selecting elements or control animation.
> Java and JavaScript are ''two different coding languages'', with no link between each other aside from their name!
\
<h3>CSS - Cascading Style Sheet</h3>\
''Cascading Style Sheet'' (or CSS) is a coding language used in HTML files to dictate the layout and formatting of the page. From the choice of backgrond to the placement of an element, this is usually done in with CSS. The language allows for alternate rules for different settings or screen size, as well as animation.
> ''Note:'' you can use JavaScript/jQuery to change aspects of the page (add/remove an element, change the colour). But, in most cases, CSS will suffice.
\
The most common use for CSS in a project is:
* to change the basic formatting of a page (ex: colour scheme)
* to have alternate rules for coded settings in the JavaScript (ex: font family)
* to have a different formatting of the page on mobile
> ''Note:'' in SugarCube, you can edit some styling with the [[Markup formatting|Markup-Styling]]. For futher use of CSS, see [[this page|Int-JS-CSS]].
\
<h3>Learn more about JavaScript, jQuery, and CSS</h3>\
* the [[W3 School|https://www.w3schools.com/]] has the most beginner explanations, and lets you test and edit their examples.
* [[MDN Web Docs|https://developer.mozilla.org/en-US/]] is more technical but provides a more extensive documentation.
* [[jQuery|https://jquery.com/]] has also a special documentation website.

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Basic-API [chapter menu] {"position":"3500,1100","size":"200,100"}
<h1>Some Useful Basic APIs</h1>
Along with macros, there are further APIs to trigger an event in the game, such as undoing an action, opening a popup, or configuring some functionalities in the engine. For more Basic APIs, see [[this page|API-Adv]].

Those APIs are JavaScript-based code that should either be included in the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros to work.

* [[Moving back and forth in the History|Basic-API-Engine]]
* [[Create a PopUp|Basic-API-Dialog]] 
* [[Handle the SideBar|Basic-API-UIBar]]
* [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
* [[Some Useful Configuration API for your Project|Basic-API-Config]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Basic-API-Config [page] {"position":"3600,1400","size":"100,100"}
<h1>Some Useful Configuration API for your Project</h1>
To customise your project further, here are a few Config APIs you might find useful.
\
<h3>Remove the History Buttons</h3>\
To force players to move forwards, it is possible to remove the //Forward// and //Backwards// buttons at the top of the SideBar, with the following code in the JavaScript:
{{{
    Config.history.controls = false;
}}}
>'' Note:'' this is only useful if the Base UI is in use or the element {{{#ui-bar-history}}} appears on the page. If the UIBar has been removed from editing the {{{StoryInterface}}}, you will not need this API.
> When removing these controls, you may want to give the player ways to go backward and forward in the story (especially relevant if you have codexes).
\
<h3>Change the Max Amount of States</h3>\
To avoid the player rewinding too much, you change the maximum number of state the history can save. These are active passages visited the player can go back to by pressing the //Backwards// button. If the player has visited more passage than the limit, the earlier visited states are moved to an "Expired" state, and won't be available to go back to with the back arrow or {{{Engine.backward()}}}.
{{{
    Config.history.maxStates = 40; //(default)
    Config.history.maxStates = 1; //(will not allow player to go backward)
}}}
>'' Note:'' the larger the {{{maxStates}}}, the bigger the chance of lag when loading new passages.
\
<h3>Change the Number of Save Slots</h3>\
With a default of 8 save slots (+ autosave and export), players have many opportunities to save a play through. Still, the number of save slots can be modified:
{{{
    Config.saves.slots = 4;
}}}
>'' Note:'' the higher the number, the more the game will save in the player's cache. 
> For more Save Config, see [[this page|Config-Saves]].
\
<h3>Removing Unwanted Blank Space</h3>\
Aside from using the {{{<<nobr>>}}} macro or {{{nobr}}} tag, there are two Config APIs which will remove the unnecessary blank space in your project: {{{Config.cleanupWikifierOutput}}} and {{{Config.passages.nobr}}}.

{{{Config.cleanupWikifierOutput}}} will transform any {{{<br>}}} on the page into empty {{{<p>}}} (thus, "disappear"), as well as wrap any non {{{<div>}}} elements with {{{<p>}}}.
>'' Note:'' {{{Config.cleanupWikifierOutput}}} runs into strange issues sometimes, like working strangely with the {{{<<cycle>>}}} macro ([[this can be fixed|Accessibility-Cycle]]).

On the other hand, {{{Config.passages.nobr}}} will only remove any break on the page. This means that you will need to wrap every paragraph or bit of text with a block HTML makrup (i.e. {{{<p>}}}, {{{<div>}}}, {{{<h1>}}}, etc...) manually.
{{{
    Config.cleanupWikifierOutput = true;
    Config.passages.nobr = true;
}}}
>'' Note:'' if both are included, no matter the order, {{{Config.passages.nobr}}} will remove all breaks on the page. 

<div id="link-menu">[[Back to the Basic API Menu|Basic-API]] - [[Back to the Start Menu|Start]]</div>


:: Basic-API-Dialog [page] {"position":"3600,1200","size":"100,100"}
<h1>Create a PopUp</h1>
Instead of moving to another passage to show a bit of text to the player, the Dialog API is here to create <<link "PopUps">><<popup "Basic-UI-Dialog" "Dialog Box">><</link>>!
\
<h3>The Basics of Popups</h3>\
To create a popup, you will need 3 APIs, in this order:
* {{{Dialog.setup()}}}, to prepare the popup, and add a title (optional) and a class (optional)
* {{{Dialog.wiki()}}}, to include text in the popup
* {{{Dialog.open()}}}, to open the dialog box
\
{{{
    Dialog.setup('This a PopUp');
    Dialog.wiki("And here is the text. Even some //italics// and ''bold''!");
    Dialog.open();
}}}
>'' Note:'' be mindful of quotes in {{{Dialog.wiki()}}}, as it could start issues.

For longer popups, you can use {{{Story.get().processText()}}} to pull the content of a separate passage. This is quite handy when you want to avoid messy code blocks, have a bit more control over the text (like line breaks), or when including interactive macros.
{{{
    Dialog.wiki(Story.get("Passage Name").processText());
}}}
\
<h3>Customise the Popup</h3>\
For {{{Dialog.setup()}}} and {{{Dialog.open()}}}, it is possible to add parameters to customise a popup further. This can take multiple forms, from adding a CSS class to the whole popup, changing where the popup is positioned, or triggering a function when closing the popup.

The {{{Dialog.setup()}}} has 2 parameters:
* {{{title}}} (optional): the title displayed for the popup
* {{{classNames}}} (optional): classes to attach to the popup, separated with a space
{{{
    Dialog.setup('This is a PopUp Title', 'a-class and-another-one');
}}}
> ''Note:'' you can target this class in the StyleSheet to change how the popup looks 

The {{{Dialog.open()}}} has also 2 parameters:
* {{{options}}} (optional) 
** namely {{{ {top: [value]} }}}, to affect the top margin of the popup.
* {{{closeFn}}} (option), the function to execute whenever the popup is closed
{{{
    Dialog.open({top : 500}, myFunction())
}}}

>'' Note:'' Chapel has created a [[Macro Set|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/dialog-api-macro-set.md]] to make the process of coding Popups easier. This macro is used in this guide.
\
<h3>{{{Dialog.close();}}}</h3>\
While the Dialog box has a built-in //Close// button in its top-right corner, or can be closed by clicking outside of the dialog box, there is a third way to make the popup disappear: {{{Dialog.close()}}}.
If the popup has interactive elements, especially some triggering more code (e.g. moving to a new passage), this API will automatically close the popup for the player.
{{{
    Dialog.close();

    <<button "Move Forward?">>
        <<if $ready is true>>
            <<goto "Forest">>
            <<run Dialog.close();>>
        <<else>>
            /* Some code :P */
        <</if>>
    <</button>>
}}}

<div id="link-menu">[[Back to the Basic API Menu|Basic-API]] - [[Back to the Start Menu|Start]]</div>


:: Basic-API-Engine [page] {"position":"3500,1200","size":"100,100"}
<h1>Moving back and forth in the History</h1>
Moving back and forth in the Player's History is possible in the base SugarCube UI with the History buttons at the top of the SideBar. They are represented with the {{{←}}} and {{{→}}} arrows in the base styling. 

However, if those buttons are removed, through the [[Config API|Basic-API-Config]] or because the SideBar was removed (with {{{StoryInterface}}} or the [[UIBar API|Basic-API-UIBar]]), it is still possible for the player to undo/redo an action: with the {{{Engine.backward()}}} and {{{Engine.forward()}}}, nested inside a {{{<<link>>}}} or a {{{<<button>>}}}.
{{{
    <<run Engine.backward()>>
    <<script>>Engine.forward()<</script>>

Inside a link/button:
    <<link "Back">><<run Engine.backward()>><</link>>
    <<button "Forward">><<script>>Engine.forward()<</script>><</button>>
}}}

While this API can also be used without player interaction, by simply including the API in a non-interactive macro (e.g. {{{<<timed>>}}}), to automatically rewind/redo the action, I would not recommend it.

<div id="link-menu">[[Back to the Basic API Menu|Basic-API]] - [[Back to the Start Menu|Start]]</div>


:: Basic-API-UI [page] {"position":"3600,1300","size":"100,100"}
<h1>Open the JumpTo, Restart, Saves, and Settings PopUp</h1>
The elements above are included in the base SugarCube UI, as buttons in the menu (if they are populated), but can be called at any time with the APIs below:
* {{{UI.jumpto()}}}, will open the JumpTo Menu, allowing the player to go back in the History to a [[bookmarked passage|Tags-Built]].
** This will ''undo any action'' made by the player since the bookmark. 
* {{{UI.restart()}}}, will open a popup asking the player if they would like to Restart the Game.
** To restart without a popup, you will want to use the [[Engine API|Engine-Restart]].
* {{{UI.saves()}}}, will open the Save popup.
* {{{UI.settings()}}}, will open the Settings popup.
* {{{UI.share()}}}, will open the Share popup.

Those APIs are most useful inside a {{{<<link>>}}} or {{{<<button>>}}} when:
* the UI of the project doesn't include the built-in SideBar 
* when the menu has been removed from the SideBar
* in a Starting Menu Passage or an Ending Passage

<div id="link-menu">[[Back to the Basic API Menu|Basic-API]] - [[Back to the Start Menu|Start]]</div>


:: Basic-API-UIBar [page] {"position":"3500,1300","size":"100,100"}
<h1>Handle the SideBar</h1>
Thanks to the APIs below, you can control when/where the SideBar will appear on the page. These can be included directly on the passage (with either {{{<<run>>}}} or {{{<<script>>}}}), or in the JavaScript.

{{{UIBar.hide()}}} will hide the SideBar on the page, and stay hidden until {{{UIBar.show()}}} is triggered. Even if it won't appear on the page, the element {{{#ui-bar}}} will still be included in the HTML, but with a display value of {{{none}}} when hidden.

Similarly, {{{UIBar.stow()}}} will stow the SideBar to the side (but still visible), and stay stowed until {{{UIBar.unstow()}}} is triggered. The element {{{#ui-bar}}} will receive a special class {{{.stowed}}}, and transition from one state to another with a smooth animation.

{{{UIBar.destroy()}}}, on the other hand will remove the the element {{{#ui-bar}}} completely.
>'' Note:'' if {{{StoryInterface}}} is in use, and does not include the element {{{#ui-bar}}} within this Special Passage, there is no need to include this API.

<div id="link-menu">[[Back to the Basic API Menu|Basic-API]] - [[Back to the Start Menu|Start]]</div>


:: Basic-Config-Navig [page] {"position":"3500,1400","size":"100,100"}
<h1>Overriding the Navigation to a Passage</h1>
While moving from passage to passage is dictated by the Passage Name inside a link or in a {{{<<goto>>}}} macro, it is still possible to override the original destination, sending the player to a new passage. This can be done with {{{Config.navigation.override}}}:
{{{
    Config.navigation.override = function (dest) {
	    /* code */
    };
}}}
>'' Note:'' this requires a bit of JavaScript knowledge to fill in the Config (or edit the example below).

Assuming that you want to send the player to an End Screen ({{{"You Died"}}}) because their {{{$health}}} is too low (0 or less):
{{{
    Config.navigation.override = function (dest) {
        var sv = State.variables;
        if (sv.health <= 0) {
            return "You Died";
        }
    };
}}}
>'' Note:'' {{{State.variables}}} is how to code a variable (here {{{$health}}}) in JavaScript that was set in a SugarCube passage.

If there are multiple situations where the player should be sent to a special passage:
{{{
    Config.navigation.override = function (dest) {
        var sv = State.variables;
        if (sv.health <= 0) {
            return "You Died";
        }
        else if (sv.coins = 0) {
            return "You Poor";
        }
    };
}}}

''An important Note:'' if there is a link to a different passage in the End Screen and the variable still has a value that would run the code above, the Navigation will be overriden again when that link is clicked. You can avoid this by:
* change the value of the variable 
* unset the variable 
* remove any link that would move the player to a new passage
\
<h3>A non-JavaScript Alternative</h3>\
While the method above is prefered, this navigation override is also possible to do in SugarCube code, inside the {{{PassageReady}}} with a couple of conditional statements and {{{<<goto>>}}} macros:
{{{
    ::PassageReady
    <<if !$ending>>
        <<if $health <= 0>>
            <<set $ending to true>>
            <<goto "You Died">>
        <<elseif $coins = 0>>
            <<set $ending to true>>
            <<goto "You Poor">>
        <</if>>
    <</if>>
}}}
Since this runs before the passage is [[fully rendered|SP-PassageReady-Done]], it is important that the {{{$ending}}} variable is included here, and set as true before the {{{<<goto>>}}} macro, otherwise the player will run into an endless loop of reloading the ending passage.

<div id="link-menu">[[Back to the Basic API Menu|Basic-API]] - [[Back to the Start Menu|Start]]</div>


:: Basic-UI-Dialog [popup] {"position":"700,200","size":"100,100"}
You found the dialog box!


:: Basics [chapter menu] {"position":"800,100","size":"200,100"}
<h1>Starting with SugarCube</h1>
When setting up your first project with SugarCube, it is best to start with the Basics. This means linking passages so the player moves to a different part of the story, saving information and players' choices inside [[variables|Variables-Base]], and tracking variables to display variations down the line.

To do this, you essentially need the 3 following macros: {{{<<link>>}}}, {{{<<set>>}}}, and {{{<<if>>}}}.

* [[The Basics of Variables|Variables-Base]]
* [[The Elements on the Page|Basics-UI]]
* [[Linking Passages|Macro-Link-Basic]] 
* [[Tracking Information|Macro-Set-Basic]] 
* [[Display Variation|Macro-If-Basic]]
> ''Note:'' Any code on the page will be displayed top to bottom by the program. Code at the top of the passage can affect code further down.

Want to see this in action? Try this [[Demo|Demo-Basic]] !

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Basics-UI [page BasicUI] {"position":"800,200","size":"100,100"}
<h1>The Elements on the Page</h1>
In a basic SugarCube project, there are essentially 3 main elements on the page:
* the passage (in green)
* the UI-Bar (in red)
* the dialog box (<<link "click here">><<popup "Basic-UI-Dialog" "Dialog Box">><</link>>)
\
The content inside the ''passage'' is generated from the story passages created in Twine. Every time the player clicks on a link to advance the story, the passage will refresh to display the new content.

In the ''UI-Bar'', you will find arrows to go back and forth in the Game History (the visited passages), an arrow to hide/show the UI-Bar/sidebar, and the //Save// and //Restart// buttons. 
The content of the sidebar can be edited through the [[Special Passages|SP-UIBar]], or when adding [[Settings]].

''Dialog boxes'' are elements that will appear at the forefront of the page. It is used by the Menu buttons (//Save// and //Restart//), but can also contain content from a story passage (like the Lexicon link below) or coded through the passage. To create a dialog box, [[visit this page|Basic-API-Dialog]].

To edit how those elements look, you will need to edit the [[Stylesheet|Int-JS-CSS-Elements]] (intermediate).

<div id="link-menu">[[Back to the Basics Menu|Basics]] - [[Back to the Start Menu|Start]]</div>


:: CacheAudio [page] {"position":"2900,1200","size":"100,100"}
<h1>Setting up the Audio Tracks</h1>
To use audio tracks in your project, SugarCube requires you to cache the tracks at the start of the game by using the {{{<<cacheaudio>>}}} macro in the {{{StoryInit}}} [[Special Passage|SP-Init]].

The macro has 2 arguments:
* the ID for the track, as a reference
* the [[URL|URL-Types]] of the file, or files if a track has multiple formats.
{{{
        :: StoryInit
        <<cacheaudio "boom" "music/explosion.mp3">>
        <<cacheaudio "synth" "music/synth.mp3" "music/synth.wav" "music/synth.aac">>
}}}
>'' Note:'' if possible, take into account browser support when adding audio tracks to a project. [[Not every format is compatible|https://caniuse.com/?search=audio%20format]].
\
<h3>Pre-loading some tracks</h3>\
If some tracks will be played from the first few screens and should be pre-loaded, the {{{<<waitforaudio>>}}} macro will do just that, by increasing the loading screen until the track(s) is(are) ready to play. 

Place the macro in {{{StoryInit}}} below the necessary tracks, to load ahead. The tracks below the macro will only be cached.
{{{
       :: StoryInit
        <<cacheaudio "boom" "music/explosion.mp3">>
        <<waitforaudio>>
        <<cacheaudio "synth" "music/synth.mp3">>
        <<cacheaudio "wind" "music/wind.mp3">>
        <<cacheaudio "water" "music/water.mp3">>
}}}

<div id="link-menu">[[Back to the Audio Macros Menu|Macro-Audio]] - [[Back to the Start Menu|Start]]</div>


:: Confic-Macro [page] {"position":"2300,1900","size":"100,100"}
<h1>Macro-relevant Configurations</h1>
The APIs listed below will affect with specific macros, namely {{{<<for>>}}}, {{{<<type>>}}}, and {{{<<audio>>}}}.
\
<h3>{{{Config.macros.maxLoopIterations}}}</h3>\
This API will set the maximum number of iterations allowed for the {{{<<for>>}}} macro, before the macro is terminated with an error message. This setting exists to prevent making the browser unresponsive if a loop is not configured correctly.
The default number is 1.000.
{{{
    Config.macros.maxLoopIterations = 5000;
→ changes the default to 5.000 iterations
}}}
\
<h3>{{{Config.macros.typeSkipKey}}}</h3>\ 
This API will change the default key to press to skip the typing of the {{{<<type>>}}} macro, meaning it will display the rest of the content immediately. The default is {{{" "}}} (the space key).
{{{
    Config.macros.typeSkipKey = "Control";
→ the SkipKey will become {Ctrl}
}}}
> ''Note:'' this is only relevant if the {{{skipkey}}} argument was not included in the [[macro|Macro-Type]].
/
<h3>{{{Config.macros.typeVisitedPassages}}}</h3>\
This API will determine whether to trigger the {{{<<type>>}}} macro on previously visited passages or display the text as is. This is enabled by default, meaning the macro will type out the content even if the passage had previously been visited.
{{{
    Config.macros.typeVisitedPassages = false;
→ will not type out the text as is on visited passages
}}}
\
<h3>{{{Config.audio.pauseOnFadeToZero}}}</h3>
This API will automatically pause any track who've been faded to volume 0 (silent). This is enabled by default.
{{{
    Config.audio.pauseOnFadeToZero = false;
→ will not pause the track when faded to 0
}}}
\
<h3>{{{Config.audio.preloadMetadata}}}</h3>\
This API will attempt to preload the metadata of any track [[cached|CacheAudio]] in the project, meaning the information about the track(s). This element is enabled by default.
> ''Note:'' it is unlikely you will ever need to disable this setting.
{{{
    Config.audio.preloadMetadata = false;
→ will not preload metadata
}}}

<div id="link-menu">[[Back to the Config API Menu|Config-API]] - [[Back to the Start Menu|Start]]</div>


:: Config-API [chapter menu] {"position":"2300,1800","size":"200,100"}
<h1>More Configuration APIs to Customise Interaction</h1>
To configure even more how your project should run, like saving playthroughs or changing how some macros work, here are the rest of the Configuration APIs not mentioned in [[this chapter|Basic-API-Config]].

Those APIs are JavaScript-based code that should be included in the JavaScript (though some can be used along with the {{{<<run>>}}} or {{{<<script>>}}} macros inside a passage).

* [[Macro-relevant Configurations|Confic-Macro]] 
* [[Editing the Behaviour and Display of Passage Elements|Config-Passage]] 
* [[Save Configurations|Config-Saves]] 
* [[Other Config APIs|Config-Misc]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Config-Misc [page] {"position":"2400,2000","size":"100,100"}
<h1>Other Config APIs</h1>
Below are listed the Config APIs not mentioned in other pages of this guide.
\
<h3>{{{Config.ui.stowBarInitially}}}</h3>\
This API allows you to stow the sidebar when the game starts. You can indicate a boolean value to always/never stow the SideBar at the start, or an integer, which will stow the SideBar if the screen/window size is less wide than the specified number.
> ''Note:'' the default of this API is {{{800}}}, as in the SideBar will start stowed if the screen size is less than 800px. 
\
> //Examples://
{{{
    Config.ui.stowBarInitially = true;
→ Always start stowed

    Config.ui.stowBarInitially = false;
→ Never start stowed (for all screens)

    Config.ui.stowBarInitially = 800;
→ Stows at the start if the width is less than 800px
}}}
\
<h3>{{{Config.ui.updateStoryElements}}}</h3>\
Usually, elements in the SideBar are update every time the player moves to a new passage. This affects the //displayed title// //banner//, the //subtitle//, the //author//, the //caption//, and the //menu// populated by the [[Special Passages|SP-UIBar]]. If these elements do not ever need updating, you could choose to toggle off this update.
{{{
    Config.ui.updateStoryElements = false;
}}}
> ''Note:'' this API is unnecessary if you have a custom interface or conditional statements in the Special Passages.
\
<h3>{{{Config.addVisitedLinkClass}}}</h3>\
This API will add a class to links sending the player to an already visited passage (i.e. in the player's history). With this added class, and some extra code in the StyleSheet, you can provide a visual distinction between visited and still-to-visit passages on the screen.
> ''Note:'' turning on this API will still require you to style the visited links, as none is provided by default.
{{{
    Config.addVisitedLinkClass = true;
}}}
The added class is called {{{.link-visited}}}, and you may edit it however you like.
{{{
    .link-visited {
        color: green;
        font-size: 75%;
        text-decoration: line-through;
    } 
}}}
\
<h3>{{{Config.debug}}}</h3>\
This API will indicate whether SugarCube is running in the Test Mode/Debug View. This mode is useful to test code, as it makes the coding markup (i.e. macros) visible on the screen.
> ''Note:'' the Twine app already has a way to trigger the Debug view by either clicking the //Test From Here// button in an passage or the //Test// button under the //Build// menu. In Tweego, you can compile a debug view with {{{-t}}} or {{{--test}}}.
{{{
    Config.debug = true;
}}}
> //Other Examples of use://
{{{
→ Pure JavaScript
    if (Config.debug) {
	    /* do something debug related */
    }

→ TwineScript
    <<if Config.debug>>
        /* do something debug related */
    <</if>>
}}}

<div id="link-menu">[[Back to the Config API Menu|Config-API]] - [[Back to the Start Menu|Start]]</div>


:: Config-Passage [page] {"position":"2400,1900","size":"100,100"}
<h1>Editing the Behaviour and Display of Passage Elements</h1>
The APIs listed below will affect how a passage could behave or how its different elements are displayed.
\
<h3>{{{Config.passages.descriptions}}}</h3>\
In the Saves and Jump To menus, passages are described by an excerpt of the passage's content. This API will allow you to provide an alternate description, like the passage's title. This can be defined through:
* the {{{true}}} boolean value, which will use the passage's title
** you should ensure the title of the passages are meaningful!
* an object, which will replace the description for all listed passages 
* a function, which will either indicate the new description for the passage or use the passage's excerpt
{{{
    Config.passages.descriptions = true;
→ will use the passage title as description

    Config.passages.descriptions = {
        "PassageName" : "the new description",
        "DeadOAlex"   : "Where Alex will end up dying lol"
    };
→ will use the new description for the listed passages

    Config.passages.descriptions = function () {
        if (this.title === "title") {
            return "description";
        }
    };
→ similar to the object, but as a function
}}}
> ''Note:'' for the Save menu, there is an alternative approach with the {{{Save.onSave.add()}}} [[API|SaveAPI-Events]]

\
<h3>{{{Config.passages.displayTitles}}}</h3>\
This API can display the title of the passage, along with the story title, in the browser/tab's titlebar:
{{{Passage Name | Story Name}}}
{{{
    Config.passages.displayTitles = true;
}}}
\
<h3>{{{Config.passages.onProcess}}}</h3>\
This API allows custom text progressing, like changing words on the page for another. It will trigger with every passage displayed and when the {{{<Passage>.processText()}}} [[method]] is called.
This can be a useful for swears replacement.
{{{
    Config.passages.onProcess = function (p) {
        return p.text.replace(/\bcat(s?)\b/g, 'dog$1');
    };
→ will replace any instance of {cat} for {dog}
}}}
> ''Note:'' knowledge of JavaScript will most likely be required here.
\
<h3>{{{Config.passages.start}}}</h3>\
This API will indicate which passage should be displayed first.
There will be very few instances where this would be needed, as the Twine app requires you to select the starting passage, and the Twee formating needs this information in the {{{:: StoryData}}}.
{{{
    Config.passages.start = "This Is The Actual Starting Passage";
}}}
\
<h3>{{{Config.passages.transitionOut}}}</h3>\
This API will enable transition for outgoing passages. You can either indicate the name of the CSS rule being animated (e.g. opacity), after which the outgoing passage will be removed, or an integer delay (in milliseconds).
You will also need extra CSS, with the {{{.passage-out}}} class to make the transition smoother.
> ''Note:'' this API will mess with the position of the new passage displayed (or when going back in the player history). Extensive testing is required.
{{{
    Config.passages.transitionOut = "opacity";
→ remove outgoing passage when the opacity animation ends

    Config.passages.transitionOut = 1010;
→ remove outgoing passage after 1010ms (1.01s)
}}}
> ''Note:'' when using an integer delay, it is recommended to indicate a number higher than the transition delay, by at least 10ms. The transition delay in the Built-In style-sheet is 1s. 
\
In the StyleSheet, you should at least indicate the transition's end state with the {{{.passage-out}}} class.
> //Example:// 
{{{
    .passage-out {
        opacity: 0;
    }
}}}
It is still recommended to add more rules for it to be pleasing to the eye. The example in the Documentation provides the following:
{{{
    #passages {
        position: relative;
    }
    .passage {
        left: 0;
        position: absolute;
        top: 0;
        transition: opacity 1s ease;
    }
    .passage-out {
        opacity: 0;
    }
}}}

<div id="link-menu">[[Back to the Config API Menu|Config-API]] - [[Back to the Start Menu|Start]]</div>


:: Config-Saves [page] {"position":"2300,2000","size":"100,100"}
<h1>Save Configurations</h1>
The APIs below will allow you to enable autosaves, as well as restricting the player's ability to saves, or set up save versions.
> ''Note:'' you may need to use some [[Save API|SaveAPI]] along with these Config.
\
<h3>{{{Config.saves.autoload}}}</h3>\
This API will check if an autosave exists, and will load said autosave during startup. You can load autosaves automatically, prompt the player about it with a popup, or include a function that could load autosaves at start.
If an autosave cannot be loaded, the player will be shown the starting passage instead.
{{{
    Config.saves.autoload = true;
→ will load the autosave automatically 

    Config.saves.autoload = "prompt";
→ will prompt the player about loading saves

    Config.saves.autoload = function () {
        /* code */
    };
→ will load the autosave if the function returns truthy
}}}
\
<h3>{{{Config.saves.autosave}}}</h3>\
This API will determine whether and when a autosave is triggered when passages are displayed. 
It will accept:
* boolean values
** //true// to autosave at every passage
** //false// to never autosave
* an array of strings of tags 
** the autosave will be triggered when a passage with a listed tag is visited
* a function with truthy/falsy values
{{{
    Config.saves.autosave = true;
→ autosave on every passage

    Config.saves.autosave = false;
→ only manual saving

    Config.saves.autosave = ["bookmark", "autosave"];
→ autosave only on passages taged "bookmark" and "autosave"

    Config.saves.autosave = function () {
        /* code */
    };
→ autosaves only when the function returns truthy
}}}
> //Example://
{{{
    Config.saves.autosave = function () {
        if (settings.autosave) {
            return true
    }};
}}}
> ''Note:'' when using a {{{true}}} value (first example), you may want to use {{{Config.saves.isAllowed}}} to disallow saving on the starting passage (or any non-story screens) to enable the player to load the autosave, or any new playthrough will override the previous one.
\
<h3>{{{Config.saves.id}}}</h3>\
This API will set a story ID for the saves. Every save is associated with a story ID with Twine, which is automatically generated from the title of the project.
However, if you would like to use a different IF, you can use this API.
{{{
Config.saves.id = "here-is-a-new-ID-because-who-cares-part-40394857";
}}}
\
<h3>{{{Config.saves.isAllowed}}}</h3>\
With a defined function, this API will determine saving is allowed depending on the context. It will be triggered every time a save is requested, and will only save if the function allows it.
{{{
    Config.saves.isAllowed = function () {
        /* code */
    };
}}}
> //Example://
{{{
    config.saves.isAllowed = function () {
        if (passage() === "Start" || tags().contains("nosave") || State.variables.test > 5) {
            return false;
        }
        return true;
    };

→ this won't allow saving:
    → on the passage called "Start"
    → with any passage tagged with "nosave"
    → if the variable $test is greated than 5
}}}
> ''Note:'' this API will affect both manual and auto- saves.
\
<h3>{{{Config.saves.tryDiskOnMobile}}}</h3>\
This API will determine whether you can download a savefile on mobile devices (i.e. smartphones, tablets, ...). It is enabled by default.
> ''Note:'' mobile browsers can be fickle, saving to disk at times may lead to unexpected results. 
{{{
    Config.saves.tryDiskOnMobile = false;
→ will disable saving to disk
}}}
\
<h3>{{{Config.saves.version}}}</h3>\
With this API, you can set the version of saves.
However, it is only useful if you plan to upgrade out-of-date saves (e.g. missing new variables added in StoryInit), and use the {{{Save.onLoad.add()}}} [[API]] callback.
{{{
→ version as an integer
Config.saves.version = 2;

→ version as a string
Config.saves.version = "v2";
}}}
> ''Note:'' though the API will accept any form of value, an integer is recommended over other forms.

<div id="link-menu">[[Back to the Config API Menu|Config-API]] - [[Back to the Start Menu|Start]]</div>


:: Credits [side popup] {"position":"1900,400","size":"100,100"}
This guide was constructed by ''manonamora''.
It is based on the SugarCube official documentation, created by Thomas M. Edwards, the developer of the SugarCube format.

<h3>manonamora</h3>\
You can find:
* my other templates on [[Itch|https://manonamora.itch.io/]], as well as my guides:
** [[Ready-to-Use Tweego and Guide|https://manonamora.itch.io/ready-to-use-tweego-folder]]
** [[ChoiceScript to SugarCube Guide|https://manonamora.itch.io/choicescript-sugarcube-tweego-folder]]
* my games and IF experiments on [[Itch|https://manonamora.itch.io/]]
* me, and ask me questions, over on [[Tumblr|https://manonamora-if.tumblr.com]] or [[my website|https://manonamora.neocities.org/]]
* my Twine Resource Masterlist [[on Tumbr|https://manonamora-if.tumblr.com/post/700577877042888704/]] or the [[IntFiction Forum|https://intfiction.org/t/twine-resource-masterlist-wiki/65903]] (more up to date).

<h3>Twine and SugarCube</h3>\
[[About Twine and SugarCube|About]]
You can download Twine over on the [[Twinery.org|https://twinery.org/]] website, which includes the SugarCube format.
Thomas M. Edwards hosts the Documentation for the SugarCube format over on [[his website|https://www.motoslave.net/sugarcube/2/docs/]].

You can also find resources and help with Twine and SugarCube:
* on the [[IntFiction Forum|https://intfiction.org/c/authoring/twine/46]]
* on the [[Twine Subreddit|https://www.reddit.com/r/twinegames/]]
* in the [[Twine Discord|https://discord.gg/n5dJvPp]]
* and more listed in this [[Masterlist|https://manonamora-if.tumblr.com/post/700577877042888704/]] ([[IntFiction Forum copy|https://intfiction.org/t/twine-resource-masterlist-wiki/65903]])

<h3>HTML, CSS, JavaScript</h3>\
There are many online courses to learn the basics (or further) of the Twine-adjacent languages: HTML, CSS, JavaScript/jQuery.
* the [[W3 School|https://www.w3schools.com/]] has the most beginner explanations, and lets you test and edit their examples.
* [[MDN Web Docs|https://developer.mozilla.org/en-US/]] is more technical but provides a more extensive documentation.
* [[jQuery|https://jquery.com/]] has also a special documentation website.

<h3>This Guide also uses...</h3>\
The {{{<<message>>}}} and {{{Dialog API}}} macros from [[Chapel|https://github.com/ChapelR/custom-macros-for-sugarcube-2/]].
The Accessibility Fix for the {{{<<cycle>>}}} macro by [[HiEv|https://www.patreon.com/HiEv]].

<h3>A Special Thanks to...</h3>\
* Chris Klimas for creating Twine, and TME for making the SugarCube format and the Tweego compiler.
* Cycy for making the Twee 3 Language Tool extension for VScode.
* The Twine Discord, especially Crepes, TRBRY, Gwen, Cyrus, Sjoerd, SleepyFool, TME, for their help and sharing examples when I forgot what certain macros were supposed to do!


:: Custom-Macro [page] {"position":"1400,1400","size":"100,100"}
<h1>Using Custom Macro</h1>
Aside from the built-in macros, there are many custom ones created by other SugarCube users, from official [[add-ons|http://www.motoslave.net/sugarcube/2/]] on the SugarCube page, to code repositories (mainly on GitHub - see <<link "Credits">><<popup "Credits" "Credits">><</link>>). These custom macros will almost always have their specific documentation, with examples or guides on how to use them.

As they are not included with SugarCube, you will need to "install" the custom macro by copy-pasting the relevant code into the JavaScript tab, the StyleSheet tab, or inside a [[Widget Passage|Macro-Widget]]. Not including this code inside the project (in the correct place) will trigger errors on the page.

> ''Note:'' when using multiple macros, it is important to check that ''no two macros have the same name''. Otherwise, it will create issues when loading the game.
\
<h3>Creating your own Macro</h3>\
If you need a custom macro for your project, because it cannot be done with base SugarCube or with the {{{<<script>>}}} [[macro|Macro-Script-Run]], and you have enough knowledge of JavaScript and jQuery, you could attempt to create your own Macro.
> ''Note:'' this option should be for very advanced users with JavaScript knowledge. Many game functionalities do not require a custom macro, or may have already been created by someone. See the Masterlist link in the Credits for a non-exhaustive list of macro creators.

To do so, you will need to use the [[Macro API|Macro]] and code away!
The most important things to remember will be to:
* ensure the name of the macro is different to the Base SugarCube macrs (or other custom ones you may be using)
* test it extensively 

<div id="link-menu">[[Back to the Advanced interactive Macro Menu|Macro-Interact-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Demo-Basic [page demo] {"position":"900,400","size":"100,100"}
A simple choice.

In front of you sit three boxes: a blue one, a green one, and a red one. Inside each box but one, there is a treat.

//Which box do you choose?//
* [[the blue box|Demo-Basic-Reveal][$box to "blue"]]
* [[the green box|Demo-Basic-Reveal][$box to "green"]]
* [[the red box|Demo-Basic-Reveal][$box to "red"]]
* [[no box|Demo-Basic-Reveal][$box to false]]
<hr>
<<message "Code">>
{{{
    A simple choice.

    In front of you sit three boxes: a blue one, a green one, and a red one. Inside each box but one, there is a treat.

    //Which box do you choose?//
    * [[the blue box|Demo-Basic-Reveal][$box to "blue"]]
    * [[the green box|Demo-Basic-Reveal][$box to "green"]]
    * [[the red box|Demo-Basic-Reveal][$box to "red"]]
    * [[no box|Demo-Basic-Reveal][$box to false]]
}}}
<</message>>


:: Demo-Basic-Reveal [page demo] {"position":"1000,400","size":"100,100"}
<<if $box is false>>You did not choose a box.<<else>>You chose the <<if $box is "blue">>blue box, and found a cookie.<<elseif $box is "red">>red box, but found nothing.<<else>>green box, and found an apple<</if>><</if>>

* [[Try again?|Demo-Basic]]
<hr>
<<message "Code">>
{{{
    <<if $box is false>>You did not choose a box.<<else>>You chose the <<if $box is "blue">>blue box, and found a cookie.<<elseif $box is "red">>red box, but found nothing.<<else>>green box, and found an apple<</if>><</if>>

    * [[Try again?|Demo-Basic]]
}}}
<</message>>

<div id="link-menu">[[Back to the Basics Menu|Basics]] - [[Back to the Start Menu|Start]]</div>


:: Engine-API [chapter menu] {"position":"1700,1800","size":"200,100"}
<h1>The Engine APIs</h1>
Aside from [[moving back and forth|Basic-API-Engine]] in the player history, the Engine APIs has some useful functions to customize the gameplay of your project. Some of these APIs are more useful in JavaScript code than in TwineScript code in the relevant passage.

* [[Checking the State of the Game|Engine-State]]
* [[Move through the Player's History|Engine-Go]]
* [[(Re-)Play a Passage|Engine-Play]]
* [[Restarting without the Built-In PopUp|Engine-Restart]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Engine-Go [page] {"position":"1800,1900","size":"100,100"}
<h1>Move through the Player's History</h1>
While there are already [[options to go back and forth|Basic-API-Engine]] in the player's history, you can move further back and forth with the {{{Engine.go()}}} API. 
{{{
    Engine.go(number)
}}}
By indicating a number - positive to move forward, negative to move back - you will be telling the engine to undo or redo the player's actions as many times as the number. For example:
{{{
    Engine.go(2)   → Redoes two moments, forwards the player twice
    Engine.go(-4)  → Undoes four moments, send the player back four times
}}}

Another method, to target a specific turn in the player's history is to use {{{Engine.goTo()}}}:
{{{
    Engine.goTo(number)
}}}
Unlike the previous method, the number indicates the specific passage in the player's history, with {{{0}}} being the starting page.
{{{
    Engine.goTo(0)  → Goes to the first screen
    Engine.goTo(9)  → Goes to the tenth screen
}}}
> ''Note:'' it is hard to predict how a player will interact with a game, and what path they take, so this method can be quite unreliable.

<div id="link-menu">[[Back to the Engine API Menu|Engine-API]] - [[Back to the Start Menu|Start]]</div>


:: Engine-Play [page] {"position":"1700,2000","size":"100,100"}
<h1>(Re-)Play a Passage</h1>
While you can use links to move the player to a new passage, there is as well an Engine API to show said passage to the player:
{{{
    Engine.play("PassageName" [, noHistory])
}}}

In a passage, you will need to use the API the {{{<<run>>}}} or {{{<<script>>}}} macro:
{{{
    <<run Engine.play("PassageName")>>
}}}
The passage will then load, and will be added to the history of the player.

> ''Note:'' if you want to know when the last time {{{Engine.play()}}} was used, {{{Engine.lastPlay}}} will give you that information.
\
<h3>Not adding to the History</h3>\
{{{Engine.play()}}} allows showing a passage without adding to the player's history. To do so, you need to code it as follow:
{{{
    Engine.play("PassageName", true)
}}}
> ''Note:'' if the passage you want to show is the same as the current passage (a sort of refreshing the page), you can use {{{Engine.show()}}} instead.

When triggered, the page will display the new passage. It will also change the value of variables if coded, which may affect what is displayed ont the screen. For example:
{{{
    :: StoryInit
    <<set $words = 'I say hello'>>

    :: Passage
    <<print $words>>
    <<button " Click">>
        <<set $words = 'You say goodbye'>>
        <<run Engine.play('beat', true)>>
    <</button>>
}}}
When the passage is first displayed, the page will show {{{I say hello}}}. After clicking on the button, the passage will refresh and will now show: {{{You say goodbye}}}.

''HOWEVER'', any changed value in the previous passage or the currently displayed one ''won't'' save until a new moment is created in the player's history. If the player refreshed the browser tap (F5) after {{{Engine.play("PassageName", true)}}} has been triggered, any action done or change in value since the display of the original passage will be lost.

<div id="link-menu">[[Back to the Engine API Menu|Engine-API]] - [[Back to the Start Menu|Start]]</div>


:: Engine-Restart [page] {"position":"1800,2000","size":"100,100"}
<h1>Restarting without the Built-In PopUp</h1>
Outside of the base [[Restart API|Basic-API-UI]], SugarCube has another way to restart a game, withe {{{Engine.restart()}}}. Unlike its counterpart {{{UI.restart()}}}, which will create a popup warning the player to save their progress, {{{Engine.restart()}}} will restart the file when triggered and without warning.

This method can useful when wanting a more custom Restart screen, if the game does not have any saves, or at an end screen.
Whatever reason for its use, {{{Engine.restart()}}} should be triggered through a link or a button, inside the {{{<<run>>}}} or {{{<<script>>}}} macro:
{{{
    <<button "Restart">>
        <<run Engine.restart()>>
    <</button>>
}}}
Another way to edit the Built-In PopUp is to change the relevant [[l10nStrings|Local-L10n]] in the JavaScript.

<div id="link-menu">[[Back to the Engine API Menu|Engine-API]] - [[Back to the Start Menu|Start]]</div>


:: Engine-State [page] {"position":"1700,1900","size":"100,100"}
<h1>Checking the State of the Game</h1>
There are instences where knowing the state of the game before triggering a certain bit of code is important, such as with macros needing the passage to be fully idle to change something on the screen, or if the game has a server connection, this set of Engine API will show whether the game is in one of the following three states:
* {{{idle}}}: the page is idle (default)
* {{{playing}}}: nagivation to a new passage has been triggered
* {{{rendering}}}: a passage is rendering on the screen 

You can check which state the game is currently at with {{{Engine.state}}}:
{{{
    <<print Engine.state>>

in JavaScript:
    if (Engine.state === "rendering") { /* your JS code */ }
}}}

SugarCube has also three other Engine API to check for a specific state:
* {{{Engine.isIdle()}}}, checking if the page is idle
* {{{Engine.isPlaying()}}}, checking is the navigation to a new passage has been triggered
* {{{Engine.isRendering()}}}, checking if a passage is rendering on the screen
{{{
    if (Engine.isIdle()) { /* your JS code */ }
    else if (Engine.isRendering()) { /* your JS code */ }
}}}

> ''Note:'' while those are useful, if you are looking to target a more specific time during the redering of a passage or element, you may want to check the [[Events]], instead.

<div id="link-menu">[[Back to the Engine API Menu|Engine-API]] - [[Back to the Start Menu|Start]]</div>


:: Events [chapter menu] {"position":"2600,1800","size":"200,100"}
<h1>Trigger Code with Special Events</h1>
Events are messages sent by the code within the game file to notify other bits of code that something has happened (automated or through player interaction). These are built-in the code of SugarCube, and can be used when creating a [[Custom Macro|Macro]], or wanting to customise elements on the page at a very specific moment (e.g. having a sound when closing a popup).

Each event is formatted as an object and contains information about the state at the moment of the event and what happened during the event. You can find these events used plainly in JavaScript (e.g. scroll back to the top) or within macros.
> ''Note:'' The events discussed here are specific to SugarCube. The format, however, does accept more [[standardized browser events|https://developer.mozilla.org/en-US/docs/Web/Events]].
\
* [[Dialog Events|Events-Dialog]]
* [[Passage and Navigation Events|Events-Passage]]
* [[System Events|Events-System]]
* [[Type Macro Events|Events-Type]] 
/* [[Audio Events|Events-Audio]]*/
<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Events-Dialog [page] {"position":"2600,1900","size":"100,100"}
<h1>Dialog Events</h1>
The following events allow the execution of JavaScript code at specific points during the opening and closing of popups. The events will be triggered when using the [[Dialog API|Basic-API-Dialog]]. They happen in the following order:
{{{
    :dialogopening
    :dialogopened 

        //Player Interaction inside the Dialog Box//

    :dialogclosing
    :dialogclosed
}}}
> ''Note:'' The events are triggered by the body element of the popup {{{#ui-dialog-body}}}. 
\
<h3> {{{:dialogopening}}}</h3>\
This event is triggered as the popup is opening (as the first step of {{{Dialog.open()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogopening', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3> {{{:dialogopened}}}</h3>\
This event is triggered when the popup is fully rendered (as the last step of {{{Dialog.open()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogopened', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
An useful example, where any new popup with overflow will have its text displayed from the top.
{{{
    $(document).on(':dialogopened', function (ev) {
        $("#ui-dialog-body").scrollTop(0);
    });
}}}
\
<h3> {{{:dialogclosing}}}</h3>\
This event is triggered as the popup is closing (as the first step of {{{Dialog.close()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogclosing', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3> {{{:dialogclosed}}}</h3>\
This event is triggered when the popup is fully closed (as the last step of {{{Dialog.close()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogclosed', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.

<div id="link-menu">[[Back to the Events Menu|Events]] - [[Back to the Start Menu|Start]]</div>


:: Events-Passage [page] {"position":"2700,1900","size":"100,100"}
<h1>Passage and Navigation Events</h1>
The following events allow the execution of JavaScript code at specific points during the rendering of a passage, as well as [[Special Passages|Special-Passage]], a.k.a passage navigation. The order of those events go as follow:
{{{
1- Passage initiation (before change in history)
    :passageinit event

2- Passage start (before passage rendering)
    PassageReady
    :passagestart event
    PassageHeader

3- Passage render (after passage rendering)
    PassageFooter
    :passagerender event

4- Passage display (after passage displayed)
    PassageDone
    :passagedisplay event

5- UI bar special passages update (if relevant)
    StoryBanner
    StoryDisplayTitle 
    StorySubtitle 
    StoryAuthor 
    StoryCaption 
    StoryMenu
    
6- Passage end (end of passage navigation)
    :passageend event
}}}
\
<h3>{{{:passageinit}}}</h3>\
This event is triggered before the player's history is modified (a.k.a just after the start to navigation is called). It also will contain the elements of the passage to display next.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passageinit', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3>{{{:passagestart}}}</h3>\
This event is triggered before the rendering of the incoming passage. It will also contain the elements of the passage to display next, and the HTML (currently empty) elements to render.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passagestart', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3>{{{:passagerender}}}</h3>\
This event is triggered after the rendering of the incoming passage. It will also contain the elements of the passage rendering, and the HTML elements rendered.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passagerender', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3>{{{:passagedisplay}}}</h3>\
This event is triggered after the incoming passage is displayed. It will also contain the elements of the passage displayed, and the HTML elements rendered.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passagedisplay', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
An example where the incoming passage with overflow will be displayed from the top, useful when the previous passage required some scrolling.
{{{
    $(document).on(":passagedisplay", function() {
        $("#passages").scrollTop(0);
    });
}}}
> ''Note:'' this is especially useful with custom UI.
\
<h3>{{{:passageend}}}</h3>\
This event is triggered at the end of the passage navigation. It will also contain the elements of the passage displayed, and the HTML elements rendered.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passageend', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.

<div id="link-menu">[[Back to the Events Menu|Events]] - [[Back to the Start Menu|Start]]</div>


:: Events-System [page] {"position":"2600,2000","size":"100,100"}
<h1>System Events</h1>
The following events allow the execution of JavaScript code at specific points during story startup and restart.
\
<h3>{{{:storyready}}}</h3>\
This is a global event that will be triggered just before the loading screen disappears at startup.
You can include any JavaScript code inside the following container:
{{{
    $(document).one(':storyready', function (ev) {
	    /* JavaScript code */
    });
}}}
\
<h3>{{{:enginerestart}}}</h3>\
This is a global event that will be triggered just before the page is reloaded when using {{{Engine.restart()}}}.
You can include any JavaScript code inside the following container:
{{{
    $(document).one(':enginerestart', function (ev) {
	    /* JavaScript code */
    });
}}}

> ''Note:'' these events are only triggered ''once''.

<div id="link-menu">[[Back to the Events Menu|Events]] - [[Back to the Start Menu|Start]]</div>


:: Events-Type [page] {"position":"2700,2000","size":"100,100"}
<h1>Type Macro Events</h1>
The {{{<<type>>}}} macro has events allowing the execution of JavaScript code at specific points during typing. They are sequenced as follow:
{{{
    :typingstart
    :typingstop
    :typingcomplete
}}}
> ''Note:'' every new addition of the {{{<<type>>}}} macro after a {{{:typingcomplete}}} is triggered will start the sequence again.
\
<h3>{{{:typingstart}}}</h3>\
This is a local event that will be triggered when the typing of a section starts.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':typingstart', function (ev) {
	    /* JavaScript code */
    });
}}}
> //Adding a Mouse Click as a SkipKey//
{{{
    (function () {
        var skipKeyEv = jQuery.Event('keydown', {
            key : Config.macros.typeSkipKey
        });

        jQuery(document).on(':typingstart', function (ev) {
            jQuery(ev.target).one('mousedown', function (ev) {
                ev.stopImmediatePropagation();
                ev.preventDefault();
                jQuery(document.body).trigger(skipKeyEv);
            });
        });
    })();
}}}
\
<h3>{{{:typingstop}}}</h3>\
This is a local event that will be triggered when the typing of a section stops.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':typingstop', function (ev) {
	    /* JavaScript code */
    });
}}}
\
<h3>{{{:typingcomplete}}}</h3>\
This is a global event that will be triggered all the {{{<<type>>}}} macros within a passage have been completed.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':typingcomplete', function (ev) {
	    /* JavaScript code */
    });
}}}

<div id="link-menu">[[Back to the Events Menu|Events]] - [[Back to the Start Menu|Start]]</div>


:: FullScreen [chapter page] {"position":"3500,1800","size":"200,100"}
<h1>Getting the FullScreen Experience</h1>
The FullScreen API provides you access to the player's browser's fullscreen abilities. It comes with some built-in limitations, namely the fullscreen request having to be initiated by the player, through player interaction with the page (e.g. link, button, etc...). Running the executing APIs listed below in the Browser Console will not work, returning errors instead.

<<link "Toggle FullScreen">><<run Fullscreen.toggle()>><</link>>

When the fullscreen mode is active, it will save the current and whole HTML page inside the {{{Fullscreen.element}}} object. If the fullscreen mode is not active, {{{Fullscreen.element}}} will return null.
> ''Note:'' Pressing F11 won't activate the fullscreen mode, but it will deactivate it. 
\
<h3>Checking for FullScreen</h3>\
\
<h4>{{{Fullscreen.isEnabled()}}}</h4>\
This API will check whether fullscreen is both supported and available for the device.
{{{
    Fullscreen.isEnabled()
}}}
\
<h4>{{{Fullscreen.isFullscreen()}}}</h4>\
This API will check whether the fullscreen mode is currently active.
{{{
    Fullscreen.isFullscreen()
}}}
\
<h3>(De-)Activating the FullScreen Mode</h3>\
\
<h4>{{{Fullscreen.request()}}}</h4>\
This API will request the browser to enter fullscreen mode.
{{{
    Fullscreen.request([options [, requestedEl]])
}}}
It has 2 parameters:
* {{{options}}} (optional), the fullscreen options 
** {{{navigationUI}}}, dtermines the fullscreen navigation UI preference 
*** only valid values: {{{auto}}} (no preference), {{{hide}}} (hidden navigation), {{{show}}} (shown navigation)
*** this may not be honoured by the browser
* {{{requestedEl}}} (optional), the element to enter fullscreen mode
** if omitted, it will show the entire page.
\
> //Examples://
{{{
    Fullscreen.request();
→ Basic usage (recommended)

    Fullscreen.request({ navigationUI : "show" }, myElement);
→ Usage with option (show the navigation UI)
  and given an element
}}}
> ''Note:'' it may be easier to use {{{Fullscreen.toggle()}}}, as it will merge both this API and {{{Fullscreen.exit()}}}
\
<h4>{{{Fullscreen.exit()}}}</h4>\
This API will request the browser to exit the fullscreen mode.
{{{
    Fullscreen.exit()
}}}
> ''Note:'' it may be easier to use {{{Fullscreen.toggle()}}}, as it will merge both this API and {{{Fullscreen.request()}}}
\
<h4>{{{Fullscreen.toggle()}}}</h4>\
This API will toggle the fullscreen mode, entering or exiting the mode depending on the current state.
{{{
    Fullscreen.toggle([options [, requestedEl]])
}}}
It has 2 parameters:
* {{{options}}} (optional), the fullscreen options 
** {{{navigationUI}}}, dtermines the fullscreen navigation UI preference 
*** only valid values: {{{auto}}} (no preference), {{{hide}}} (hidden navigation), {{{show}}} (shown navigation)
*** this may not be honoured by the browser
* {{{requestedEl}}} (optional), the element to enter fullscreen mode
** if omitted, it will show the entire page.
\
> //Examples://
{{{
    Fullscreen.toggle();
→ Basic usage (recommended)

    Fullscreen.toggle({ navigationUI : "show" }, myElement);
→ Usage with option (show the navigation UI)
  and given an element
}}}
This API is the one used in the interactive element at the top of the page:
{{{
    <<link "Toggle FullScreen">><<run Fullscreen.toggle()>><</link>>
}}}
\
<h3>FullScreen Mode and Event Handlers</h3>\
\
<h4>{{{Fullscreen.onChange()}}}</h4>\
This API will attach an event handler to the fullscreen.
{{{
    Fullscreen.onChange(handlerFn [, requestedEl])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to invoke when the fullscreen mode changes 
* {{{requestedEl}}}, the HTML element to attach the handler to
\
> //Examples//
{{{
    Fullscreen.onChange(function (ev) {
        /* Fullscreen mode changed, so do something. */
    });
→ Basic usage (recommended)

    Fullscreen.onChange(function (ev) {
        /* Fullscreen mode changed on myElement, so do something. */
    }, myElement);
→ With a specified element
}}}
\
<h4>{{{Fullscreen.offChange()}}}</h4>\
This API will removes an event handler to the fullscreen.
{{{
    Fullscreen.offChange([handlerFn [, requestedEl]])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to remove 
** if omitted, it will remove ALL handlers
* {{{requestedEl}}}, the HTML element to remove the handler(s) from
\
> //Examples//
{{{
    Fullscreen.offChange();
    Fullscreen.offChange(originalHandlerFn);
→ Basic usages (recommended)

    Fullscreen.offChange(null, myElement);
    Fullscreen.offChange(originalHandlerFn, myElement);
→ With a specified element
}}}
> ''Note:'' for each case, the first line will remove ALL handlers
\
<h4>{{{Fullscreen.onError()}}}</h4>\
This API will attach an error handler to the fullscreen mode.
{{{
    Fullscreen.onError(handlerFn [, requestedEl])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to invoke when the fullscreen mode encounters an error 
* {{{requestedEl}}}, the HTML element to attach the handler to
\
> //Examples//
{{{
    Fullscreen.onError(function (ev) {
        /* Fullscreen mode changed, so do something. */
    });
→ Basic usage (recommended)

    Fullscreen.onError(function (ev) {
        /* Fullscreen mode changed on myElement, so do something. */
    }, myElement);
→ With a specified element
}}}
\
<h4>{{{Fullscreen.offError()}}}</h4>\
This API removes an error event handler to the fullscreen mode.
{{{
    Fullscreen.offError([handlerFn [, requestedEl]])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to remove 
** if omitted, it will remove ALL handlers
* {{{requestedEl}}}, the HTML element to remove the handler(s) from
\
> //Examples//
{{{
    Fullscreen.offError();
    Fullscreen.offError(originalHandlerFn);
→ Basic usages (recommended)

    Fullscreen.offError(null, myElement);
    Fullscreen.offError(originalHandlerFn, myElement);
→ With a specified element
}}}
> ''Note:'' for each case, the first line will remove ALL handlers

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Function-Clone-Random [page] {"position":"2300,1200","size":"100,100"}
<h1>Cloning Variables, and Random Values Functions</h1>
SugarCube has a handful of functions to set variables, from cloning objects to randomising a value.
\
<h3>The {{{clone()}}} function</h3>\
Unlike simple variables or arrays, copying an object in another variable will not just copy the current value of the orginal variable but any future changes to that original variable. Assuming that {{{$object = {turn : 1} }}}:
{{{
    <<set $var to $object>>
    <<set $object.turn to 6>>

    → $object.turn = 6
    → $var.turn = 6
}}}
This is where the {{{clone()}}} function comes in. The function will clone the values of an object, but not any future change. 
{{{
    <<set $var to clone($object)>>
    <<set $object.turn to 6>>

    → $object.turn = 6
    → $var.turn = 1
}}}
\
<h3>Random Values Functions</h3>\
To randomise a value, there are two main functions: {{{either()}}} for strings and arrays, and {{{random()}}}/{{{randomFloat()}}} for integer (only). Both functions can be used in setting variables or simply printed on the page:
{{{
    <<set $var to either('Blueberries', 'Cherries', 'Peaches')>>
→ this will set $var with one of the listed values

    <<print random(5)>>
→ this will print on the page a number between 0 and 5 (incl)

    <<set _temp to randomFloat(0.0, 5.0)>>
→ this will set _temp a number between 0.0 and 4.99999...
}}}
> ''Note:'' {{{either()}}} will also accept integer and boolean values.
\
Instead of listing values, other variables can be used inside the functions. Assuming that {{{_min = 0}}}, {{{_max = 10}}}, {{{_array = ["Apple", "Chocolate"]}}}, {{{_array2 = [1, 2]}}}:
{{{
    <<set
        $var to either(_array),
        $var2 to either(_array, _array2),
        $var3 to either(_array, "Peaches"),
        $var4 to random(_max),
        $var5 to random(_min, _max)
    >>
}}}

<div id="link-menu">[[Back to the Functions Menu|Functions]] - [[Back to the Start Menu|Start]]</div>


:: Function-JS [page] {"position":"2400,1300","size":"100,100"}
<h1>JavaScript-only Functions</h1>
The functions below can only be used in the JavaScript tab or inside a {{{<<script>>}}} macro.
\
<h3>Importing outside code</h3>\
SugarCube functions allows for importing JavaScript and CSS from outside sources, to use in a project:
{{{
To import JavaScript:
    importScripts(URL);

To import CSS:
    importStyles(URL);
}}}

You can import multiple scripts or styles in one import:
{{{
    importScripts(
        "https://somesite/a/path/a.js",
        "https://somesite/a/path/b.js",
        "https://somesite/a/path/c.js",
        "https://somesite/a/path/d.js"
    );
    importStyles([
        "https://somesite/a/path/a.css",
        "https://somesite/a/path/b.css",
        "https://somesite/a/path/c.css",
        "https://somesite/a/path/d.css"
    ]);
}}}
> ''Note:'' the use of square {{{[ ]}}} brackets will determine whether the sheets should be loaded one after the other or not.
\
<h3>Calling SugarCube variables in JS code</h3>\
Sometimes, your JavaScript code will need a variable set in SugarCube to run. This is where {{{temporary()}}} and {{{variables()}}} come in.
> ''Note:'' knowledge of JavaScript is required.
{{{
    temporary().test    → _test
    variables().colour  → $colour
}}}
> ''Note:'' those functions are equivalent to {{{State.temporary}}} and {{{State.variables}}}
{{{
    if (variables().hasGoldenKey) {
	    temporary().unlock = true
    }
→ if the variable $hasGoldenKey is true, the code will change the value of _unlock to true
}}}

<div id="link-menu">[[Back to the Functions Menu|Functions]] - [[Back to the Start Menu|Start]]</div>


:: Function-Metadata [page] {"position":"2300,1300","size":"100,100"}
<h1>Memorizing Information and Metadata</h1>
Aside form the Built-In Saves, SugarCube has another way of saving information, in the story metadata. While it ''is not'' a save and ''should not'' replace saves, the following functions can be useful for tracking achievements or statistics, or having a New Game+ feature.
> ''Note:'' this //will not work with private browsing//, and may affect how the game progresses.
> It will also affect all playthroughs of the game.
{{{
    memorize() → save information
    recall()   → bring up information 
    forget()   → delete information
}}}

The functions will need the {{{<<run>>}}} macro to be used and is set as follow:
* the function 
* the name of the information to save/edit/delete, as a string
* (optional) the value of the information, can be a boolean, string or integer
{{{
    <<run function('name': value)>>
}}}
{{{
    <<run memorize('achievement1': true)>>
    <<run forget('achievement1')>>
}}}

The {{{recall}}} function can also be used in conditional statements and saving the information in variables:
{{{
    <<if recall('achievement') is true>>
        You already achieved this.
    <</if>>
    <<set $variable to recall('achievement')>>
}}}

<div id="link-menu">[[Back to the Functions Menu|Functions]] - [[Back to the Start Menu|Start]]</div>


:: Function-Pass-Tag [page] {"position":"2400,1200","size":"100,100"}
<h1>Using Play, Passage, and Tags information</h1>
SugarCube functions can also track where players have (or have not) been, or how many times they have visited a certain passage. These can be useful to show variation, whether certain links appear in a menu, or changing the content of the Header/Footer depending on a location.
\
<h3>Using the {{{tags()}}} and {{{visitedTags()}}} functions</h3>\
To track where the player is or has been based on the tags coded on the passages, we can use respectively the {{{tags()}}} and {{{visitedTags()}}} functions. This is quite useful when trying to target a group of passages rather than a handful of them (and having to list those). 

{{{tags()}}} should mainly be used in Special Passages, widgets, or JavaScript code outside of the passage, as it contains the list of tags of the current passage. As passages may have multiple tags, it should be treated as if they were an array variable.
{{{
    :: PassageHeader
    <<if tags().includes('forest')>>The Dark Forest
    <<elseif tags().includes('town')>>The Lovely Town 
    <<elseif tags().includes('tavern')>>The Thick Table Tavern :P
    <</if>>

Display tags:
    <<print tags()>>

Set as a value:
    <<set $var to tags()>>
}}}

{{{visitedTags()}}} will save all the different tags attached to the previously visited passages, and should be mainly be used in conditional statements:
{{{
    <<if visitedTags("forest")>> … </if>>
→ has visited at least one passage tagged 'forest'

    <<if visitedTags("forest", "haunted") is 1>> … <</if>>
→ has visited a passage tagged with both 'forest' and 'haunted' exactly once

    <<if visitedTags("forest", "burned") gt 3>> … <</if>>
→ has visited a passage tagged with both 'forest' and 'burned' more than three times
}}}
> ''Note:'' this functions works similarly to the {{{visited()}}} function. As such, when using more strict conditional statements, as players may unknowingly visit a passage more than once (see {{{<<return>>}}} [[macro|Macro-Back-Return]] or the [[Arbitrarily Long Return|Long-Return-JS]]).
\
<h3>Using the Passage-related functions</h3>\
One can track where the player is or has been based on the passages' name. Aside from {{{passage()}}}, all other functions deal with past events, with {{{visited()}}} and {{{lastVisited()}}} handling both current and past events.

{{{passage()}}} will ''only'' look at the current passage. It can be used both in conditional statements, setting variables, or reloading a page:
{{{
    <<if passage() is "Forest">>...<</if>>
    <<set $var to passage()>>
    <<link "Reload" `passage()`>><</link>>
}}}
> ''Note:'' while it is possible to reload as passage with {{{passage()}}}, this is not recommended, as issues may arise from reloading one passage too many times. If used, it should be done so parsimoniously.
> It is best to use {{{<<replace '.passage'>><<include `passage()`>><</replace>>}}} instead.

{{{previous()}}} will log the most recent previous passage. It will be most useful in conditional statements or links:
{{{
    <<if previous() is "Forest">>...<</if>>
    <<link "Go Back" `previous()`>><</link>>
}}}
> ''Note:'' using {{{previous()}}} in a link will be the same as using the {{{<<back>>}}} [[macro|Macro-Back-Return]]. 

{{{visited()}}} will look at the amount of time a passage has been visited, and is mainly used in conditional statements. When landing on a passage, the {{{visited()}}} counter will increase by 1. The following examples will check if:
{{{
    <<if visited() is 2>>...<</if>>
→ this is currently the second visit on this passage

    <<if visited('Tavern')>>...<</if>>
→ the player has visited the passage "Tavern" at least once 

    <<if visited('Tavern') is 2>>...<</if>>
→ the player has visited the passage "Tavern" exactly two times 

    <<if visited('Tavern', 'Forest')>>...<</if>>
→ the player has visited the passages "Tavern" AND "Forest" at least once
}}}
> ''Note:'' when using more strict conditional statements, as players may unknowingly visit a passage more than once (see {{{<<return>>}}} [[macro|Macro-Back-Return]] or the [[Arbitrarily Long Return|Long-Return-JS]]).

{{{lastVisited()}}} works similarly to the {{{previous()}}} function, though it will look at the length of turns between the current passage and the one in question. The following examples will check if:
{{{
    <<if lastVisited('Tavern') is 0>>...<</if>>
→ the player is currently in the passage "Tavern"

    <<if lastVisited('Tavern') is -1>>...<</if>>
→ the player has not yet visited the passage "Tavern"

    <<if lastVisited('Tavern') is 1>>...<</if>>
→ the previous passage visited by the player is "Tavern"

    <<if lastVisited('Tavern', 'Forest') is 2>>...<</if>>
→ the player has visited BOTH the "Tavern" and "Forest" passage, most recently 2 turns ago
}}}
> ''Note:'' the {{{lastVisited()}}} function will look at all passages visited in the order they were visited, even if those passages are not part of the story (i.e. Codex).
> To avoid seeing those passages in the history, consider avoiding using the {{{<<return>>}}} [[macro|Macro-Back-Return]] or a regular link with the the [[Arbitrarily Long Return|Long-Return-JS]], favouring the {{{<<back>>}}} [[macro|Macro-Back-Return]] instead.

{{{hasVisited()}}} will only check if a passage has been visited or not. The following examples will check if:
{{{
    <<if hasVisited('Tavern')>>...<</if>>
→ the player has visited the passage 'Tavern'

    <<if not hasVisited('Tavern')>>...<</if>>
→ the player has not yet visited the passage 'Tavern'

    <<if hasVisited('Tavern', 'Forest')>>...<</if>>
→ the player has visited BOTH the passages 'Tavern' and 'Forest'

    <<if not hasVisited('Tavern', 'Forest')>>...<</if>>
→ the player has not visited 'Tavern', or not visited 'Forest', or not visited both
}}}
\
<h3>Other Play Functions</h3>\
{{{turns()}}} will look at the amount of turns a player has taken since the start of the playthrough. It will count all passages visited as a singular path (including starting menus and codexes). As such, rewound/undone actions are not counted. It can be used to display said count on the page, in conditional statements, or saved in a variable.
{{{
    <<= turns()>> 
→ will print the number of turns 

    <<print "Turn #" + turns()>>
→ will print the number of turns, with some extra text 

    <<if turns() gt 5>>...<</if>>
    <<set $var to turns()>>
}}}

{{{time()}}} will look at the time spent in the current passage, in milliseconds. It can be useful in forcing the player to do quick decisions, or track how long a player goes through a section.
{{{
    <<set $time += time()>>

    <<if time() lt 5000>>...<</if>>
→ if the time spent on the passage is less than 5 seconds.

    <<link "Run Away!">>
        <<if time() lt 5000>>
            <<goto "Escaped">>
        <<else>>
            <<goto "Caught">>
        <</if>>
    <</link>>
}}}
    
<div id="link-menu">[[Back to the Functions Menu|Functions]] - [[Back to the Start Menu|Start]]</div>


:: Function/Method List {"position":"1200,400","size":"200,100"}
<h1>Functions and Methods List</h1>
Below, you will find the list of Functions and Methods included in SugarCube, and where they are discussed in this guide.
> ''Note:'' As SugarCube is built on JavaScript, you can use any JavaScript and jQuery functions and methods, even ones you create and define yourself.

<h3>Functions</h3>
* {{{clone()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{either()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{forget()}}} : [[Memorizing Information and Metadata|Function-Metadata]]
* {{{hasVisited()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{lastVisited()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{importScripts()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{importStyles()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{memorize()}}} : [[Memorizing Information and Metadata|Function-Metadata]]
* {{{passage()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{previous()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{random()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{randomFloat()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{recall()}}} : [[Memorizing Information and Metadata|Function-Metadata]]
* {{{tags()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{temporary()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{time()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{turns()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{variables()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{visited()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{visitedTags()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  

<h3>Methods</h3>
* {{{<Array>.concat()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.concatUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.count()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.delete()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.deleteAt()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.first()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.flat()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.includes()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.includesAll()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.includesAny()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.last()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pluck()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pluckMany()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pop()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.push()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pushUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.random()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.randomMany()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.shift()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.shuffle()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.unshift()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.unshiftUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{Math.clamp()}}} : [[Methods and Numbers|Method-Number]]
* {{{Math.round()}}} : [[Methods and Numbers|Method-Number]]
* {{{Math.trunc()}}} : [[Methods and Numbers|Method-Number]]
* {{{<Number>.clamp()}}} : [[Methods and Numbers|Method-Number]]
* {{{<String>.count()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.first()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.includes()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.last()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLocaleLowerCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLowerCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLocaleUpperCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toUpperCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLocaleUpperFirst()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toUpperFirst()}}} : [[Methods and String Variables|Method-String]]

<div id="link-menu"><<back "Return to Previous Page">> - [[Back to the Start Menu|Start]]</div>


:: Functions [chapter menu] {"position":"2300,1100","size":"200,100"}
<h1>Harness the Power of Functions</h1>
Functions are JavaScript blocks of code designed to do a specific task, from importing outside scripts, to save information, or setting variables. While some of the functions explained in this chapter can be used in any passage in combination with SugarCube macros, some should be restricted to the JavaScript passage only.

* [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* [[Memorizing Information and Metadata|Function-Metadata]]
* [[JavaScript-only Functions|Function-JS]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: HTML-Full-List [page] {"position":"3300,1200","size":"100,100"}
<h1>The Full List of Targetable Elements</h1>\
This page includes the full list of targetable elements (with a defined {{{#id}}} or {{{.class}}}) in a Basic SugarCube project (i.e. no custom UI, macro, elements). The HTML page contains other "hidden" element, like the Story date, which are not visible on the page.
> ''Note:'' you can also find the wanted element to target by using the Inspect Tool.
\
The targetable elements are organised as follow:
* the base elements of a page
* the base elements of the Built-In Menus
* the HTML elements defined in the StyleSheet
* the macro classes

To see how all these elements are styled by default or when special events happen, see the [[Built-In StyleSheets|http://www.motoslave.net/sugarcube/2/docs/#css-built-ins]].
\
<h3>The Base Elements of the Page</h3>\
Assuming that you have not changed the Base UI with {{{StoryInterface}}} and are using all SideBar Special Passages, here are the base targetable elements inside a basic page, including the parent/child order.
Inside the {{{html}}} wrapper you will find:
* {{{body}}}
** {{{#init-screen}}} (hidden after the game is loaded)
*** {{{#init-loading}}}
** {{{#ui-overlay}}} (hidden when no popup is active)
** {{{#ui-dialog}}} (hidden when no popup is active)
*** {{{#ui-dialog-titlebar}}}
**** {{{h1#ui-dialog-title}}}
**** {{{button#ui-dialog-close}}}
*** {{{#ui-dialog-body}}}
** {{{#ui-bar}}}
*** {{{#ui-bar-tray}}}
**** {{{button#ui-bar-toggle}}}
**** {{{#ui-bar-history}}}
***** {{{button#history-backward}}}
***** {{{button#history-jumpto}}}
***** {{{button#history-forward}}}
*** {{{#ui-bar-body}}}
**** {{{#title}}}
***** {{{#story-banner}}}
***** {{{h1#story-title}}}
***** {{{#story-subtitle}}}
***** {{{#story-title-separator}}}
***** {{{p#story-author}}}
**** {{{#story-caption}}}
**** {{{nav#menu}}}
***** {{{ul#menu-story}}}
***** {{{ul#menu-core}}}
****** {{{li#menu-item-saves}}}
****** {{{li#menu-item-settings}}}
****** {{{li#menu-item-restart}}}
****** {{{li#menu-item-share}}}
** {{{#story}}}
*** {{{#passages}}}
*** {{{.passage}}}
** {{{#debug-bar}}} (for Testing/Debug Mode)
\
> ''Note:'' when targetting a base element, you don't have to indicate the type of element ({{{div}}}/{{{h1}}}/{{{button}}}/etc...). However, their specific default CSS settings may affect how they look (e.g. margin).
\
<h3>The Base Elements of the Built-In Menus</h3>\
The targetable elements below can be found in the //Saves//, //Settings//, and //Restart// menus.
\
<h4>The Saves Menu</h4>\
In the body of the //Saves// menu ({{{.saves}}} class), you will find:
* {{{table#saves-list}}}
** {{{ ... }}}
*** {{{button#saves-load-[i]}}} or {{{button#saves-save-[i]}}}
*** {{{div.datestamp}}}
*** {{{button#saves-delete-[i]}}}
* {{{ul.buttons}}}
** {{{button#saves-export}}}
** {{{button#saves-import}}}
** {{{button#saves-clear}}}
> ''Note:'' since the //Saves// menu includes more than one save slot (and the autosave), replace the [1] with the number of the relevant save slot (starting with 0) or {{{auto}}} (for autosave).
> Other targetable elements includes the rows and cells of the save tables, and the {{{li}}} elements for the buttons.
\
<h4>The Settings Menu</h4>\
The elements inside the //Settings// Menu will depend on what settings were coded in the project's JavaScript. 
Each setting will be coded as follow, with [setting] being the defined name of the setting:
* {{{#setting-body-[setting]}}}
** {{{label#setting-label-[setting]}}}
** {{{#setting-control-[setting]}}} (attached to {{{input}}}, {{{select}}} or {{{button}}})
** {{{p#setting-desc-[setting]}}}
As for the Header, [header] will use the sluggified version of the header text:
* {{{#header-body-[header]}}}
** {{{h2#header-heading-[header]}}}
** {{{p#header-desc-[header]}}}
The bottom of the //Settings// Menu also includes:
* {{{ul.buttons}}}
** {{{button#settings-ok}}}
** {{{button#settings-reset}}}
\
<h4>The Restart Menu</h4>\
The //Restart// Menu only includes on main block inside the body of the popup ({{{.restart}}} class):
* {{{ul.buttons}}}
** {{{button#restart-ok}}}
** {{{button#restart-cancel}}}
\
<h3>The HTML Elements Defined in the StyleSheet</h3>\
Below are the different HTML elements defined in the StyleSheet. 
* clickables: {{{a}}}, {{{button}}}
* interactive: {{{input}}}, {{{select}}}, {{{textarea}}}
* headers: {{{h1}}}, {{{h2}}}
* horizontal rule: {{{hr}}}
* lists: {{{ul}}}, {{{li}}}, {{{ol}}}
* tables: {{{table}}}, {{{tr}}}, {{{th}}}, {{{td}}}
* multimedia: {{{img}}}, {{{audio}}}, {{{video}}}
* other: {{{area}}}, {{{canvas}}}, {{{progress}}}
> ''Note:'' this is not an exhaustive list of HTML elements, and you can even create your own (ex: {{{<y>}}}).
\
<h3>The Macro Classes</h3>\
Some macros, mainly the interactive ones with outputs, will add an extra class to elements to indicate it is an interactive element created by a macro, or that certain outputs were added on the page with a macro.
{{{
    .macro-[name of the macro]
}}}
> //Examples://
{{{
    .macro-link 
    .macro-button
    .macro-linkappend
    .macro-linkprepend
    .macro-replace
    .macro-include
    .macro-type
    .macro-checkbox
    .macro-cycle 
    .macro-listbox
    {...}
}}}
For linking macros and markups, the element can be defined with these classes:
{{{
    .link-internal
    .link-external

    .link-broken
    .link-disabled
    .link-visited
}}}
Similarly, some macros may see their class change depending on their use.
> //Examples://
{{{
    .macro-linkappend-insert
    .macro-linkprepend-insert
    .macro-linkreplace-insert
    .macro-append-insert
    .macro-prepend-insert
    .macro-replace-insert
    .macro-repeat-insert
    .macro-timed-insert
→ adding new element to the page

    .macro-linkappend-in
    .macro-linkprepend-in
    .macro-linkreplace-in
    .macro-append-in
    .macro-prepend-in
    .macro-replace-in
    .macro-repeat-in
    .macro-timed-in
→ the starting class for page addition 
  when {t8n} is an argument
}}}

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Index {"position":"1200,200","size":"200,100"}
<h1>Index</h1>\
<h3>The Basics</h3>\
* ''[[About Twine and SugarCube|About]]''
* ''[[Starting with SugarCube|Basics]]''
** [[The Elements on the Page|Basics-UI]]
** [[Linking Passages|Macro-Link-Basic]]
** [[Tracking Information|Macro-Set-Basic]]
** [[Display Variation|Macro-If-Basic]]
** [[The Basics of Variables|Variables-Base]]
** [[Basic Demo|Demo-Basic]]
\
<h3> The Basics+</h3>\
* ''[[SugarCube Markup and Basic Styling|Markup]]''
** [[Showing the Value of a Variable|Markup-Variable]]
** [[Using a Variable inside a Link|Markup-Link]]
** [[Display an Image, and turn an Image into a Link|Markup-Image]]
** [[Removing a Line-break|Markup-Nobr]]
** [[Basic Text Styling|Markup-Styling]] (long)
* ''[[Going Further with the Basics|Macro-Basic]]''
** [[Displaying more than text in Links|Macro-Link]]
** [[Setting and Changing Variables|Macro-Set]]
** [[Unsetting Variables|Macro-Unset]]
** [[More Conditional Statements|Macro-If]]
** [[Display Variables, the Print Macro and Variants|Macro-Print]]
* ''[[Adding some Interactivity|Macro-Interact]]''
** [[Multi or Single Option Choices|Macro-CheckRadio]]
** [[Cycles and Conditional Options|Macro-Cycle]]
*** [[Make the Cycle Macro Accessible|Accessibility-Cycle]]
** [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
** [[Listboxes and Conditional Options|Macro-Listbox]]
** [[Player Input in three macros|Macro-Input]]
* ''[[Basic Special Passages|Special-Passage]]''
** [[Headers and Footers|SP-HeaderFooter]]
** [[Special Passages for the UI Bar|SP-UIBar]]
** [[Setting Important Variables before Start|SP-Init]]
** [[Special Passage Demo|SP-Demo]]
* ''[[About JavaScript and the StyleSheet|Base-JS-CSS]]''
* ''[[ULRs for Assets and Testing|URL-Types]]''
\
<h3>Intermediate Use</h3>\
* ''[[More SugarCube Markup|Markup-Int]]''
** [[Special Attributes and Directives|Markup-Attribute]]
** [[Displaying Code and Verbatim Text|Markup-Code-Verbatim]]
** [[Display Small Variation with Templates|Markup-Template]]
* ''[[Going Further with Basic APIs and More|API-Adv]]''
** [[More Popups APIs|API-Dialog]]
** [[More UIBar APIs|API-UIBar]]
** [[The Template APIs|TemplateAPI]]
** [[(Un)Locking the Loading Screen|API-Lock]]
* ''[[More Interactivity Macros|Macro-Interact-Adv]]''
** [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
** [[Single-Use Choice Lists|Macro-Action-Choice]]
** [[Delaying Displaying Text or Running Code|Macro-Timed]]
** [[Displaying Text Letter by Letter|Macro-Type]]
** [[Using Custom Macro|Custom-Macro]]
* ''[[Macros of Convenience|Macro-Conv]]''
** [[An Alternative to Conditional Statements|Macro-Switch]]
** [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
** [[Including a Passage inside another|Macro-Include]]
** [[Creating and Using a Widget|Macro-Widget]]
** [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
*** [[Arbitrarily Long Returns|Long-Return-JS]]
** [[Sending the Player to a Passage|Macro-Goto]]
** [[Using JavaScript in the Passage|Macro-Script-Run]]
* ''[[More Special Passages and Tags|Special-Tags]]''
** [[Special Tags creating Special Passages and Functionalities|Tags-Built]]
** [[Process Code Before and After Rendering a Passage|SP-PassageReady-Done]]
** [[Changing the UI of the Project|SP-StoryInterface]]
** [[Customising Passages with Tags|Tags-CSS]]
** [[Including Assets with Tags|Tags-Asset]]
** [[The Special Variables|SP-Variables]]
* ''[[Harness the Power of Functions|Functions]]''
** [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
** [[Using Play, Passage, and Tags information|Function-Pass-Tag]]
** [[Memorizing Information and Metadata|Function-Metadata]]
** [[JavaScript-only Functions|Function-JS]]
* ''[[Using Methods to change Variables|Methods]] ''
** [[Methods and String Variables|Method-String]]
** [[Methods and Numbers|Method-Number]]
** [[Methods and Arrays|Method-Array]]
* ''[[Adding Sound with the Audio Macros|Macro-Audio]]''
** [[Setting up the Audio Tracks|CacheAudio]]
** [[Create Track Groups and Playlists|Macro-Group-Playlist]]
** [[Playing Tracks in a Passage|Audio-Macro]]
** [[Other Audio Macros|Audio-Other]]
* ''[[Going further in Styling with CSS and JavaScript|Int-JS-CSS]]''
** [[The Different Targetable Elements|Int-JS-CSS-Elements]]
*** [[The Full List of Targetable Elements|HTML-Full-List]]
** [[Ensuring that Elements Start at the Top when Opened|Int-JS-CSS-Events]]
** [[Import and Change the Font|Int-JS-CSS-Font]]
** [[Using the Root and CSS var|Int-JS-CSS-Root]]
** [[Formating for Different Screen Size|Int-JS-CSS-Media]]
** [[Intro to Animation|Int-JS-CSS-Animation]]
** [[Creating Stats, Meter, and Progress Bars|Int-JS-CSS-Stat]] (long)
** [[Editing the Loading Screen|Int-JS-CSS-LoadingScreen]]
** [[A Note on Interface Accessibility|Accessibility]]
* ''[[Some Useful Basic APIs|Basic-API]]''
** [[Moving back and forth in the History|Basic-API-Engine]]
** [[Create a PopUp|Basic-API-Dialog]]
** [[Handle the SideBar|Basic-API-UIBar]]
** [[Open the JumpTo, Restart, Saves, and Settings PopUp|Basic-API-UI]]
** [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
** [[Some Useful Configuration API for your Project|Basic-API-Config]]
* ''[[Edit the Built-In Text or Change the Game's Language|Localization]]''
** [[l10nStrings, and How to Edit Them|Local-L10n]]
** [[Localization, and Pre-Translated Templates|Local-Trans]]
** [[Providing Multiple Languages In-Game|Local-Setting]]
\
<h3>''Advanced Mode''</h3>\
> ''Note:'' Many of the elements included in the following chapters will require knowledge of JavaScript, jQuery, and understanding of the core processed of SugarCube.
* ''[[Advanced Macros|Macro-Adv]]''
** [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]] 
** [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
** [[Capturing the Value of a Variable|Macro-Capture]]
** [[Emulating PassageDone for one Passage|Macro-Done]]
* ''[[More Variable and Interaction Methods|Methods-Adv]]''
** [[More Methods to change Variables|Method-Variables]]
** [[jQuery Methods and Interactivity|Method-jQuery]]
* ''[[The Settings API|Settings]]''
** [[Adding Headers|SettingsHeader]]
** [[Creating a Toggle Setting|SettingsToggle]]
** [[Creating a List Setting|SettingsList]]
** [[Creating a Slider|SettingsRange]]
** [[Going Further with Settings|Settings-More]]
* ''[[Going further with the Engine API|Engine-API]]''
** [[Checking the State of the Game|Engine-State]]
** [[Move through the Player's History|Engine-Go]]
** [[(Re-)Play a Passage|Engine-Play]]
** [[Restarting without the Built-In PopUp|Engine-Restart]]
* ''[[The Save APIs and Further Saving Configurations|SaveAPI]]''
** [[Save Objects and Their Contents|SaveAPI-Objects]]
** [[The Basic APIs of the Save Elements|SaveAPI-General]]
** [[Managing the Save Slots|SaveAPI-Slots]]
** [[Managing the Autosave Slot|SaveAPI-Autosave]]
** [[Using Save-related Events|SaveAPI-Events]]
* ''[[More Configuration APIs to Customise Interaction|Config-API]]''
** [[Macro-relevant Configurations|Confic-Macro]]
** [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
** [[Save Configurations|Config-Saves]]
** [[Other Config APIs|Config-Misc]]
* ''[[Getting the FullScreen Experience|FullScreen]]''
* ''[[Trigger Code with Special Events|Events]]''
** [[Dialog Events|Events-Dialog]]
** [[Passage and Navigation Events|Events-Passage]]
** [[System Events|Events-System]]
** [[Type Macro Events|Events-Type]]
* ''[[Creating your Own Macro|Macro]]''
** [[The Base APIs for Macros|Macro-API]]
** [[Using Macro Context Objects in the handler|Macro-Context]]
* ''[[Managing Story Elements with APIs|StoryAPI]]''
* ''[[Managing Passage Properties with APIs|PassageAPI]]''
* ''[[Dealing with the State of Play|StateAPI]]'' 
** [[Managing the State of Variables|StateAPI-Variable]]
** [[Exploring the Different Moments inside the State|StateAPI-State]]
** [[Using the Story Metadata|StateAPI-Metadata]]
** [[Initialising a Seedable PRNG|StateAPI-PRNG]]

<div id="link-menu"><<back "Return to Previous Page">> - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS [chapter menu] {"position":"3200,1100","size":"200,100"}
<h1>Going further in Styling with CSS and JavaScript</h1>
When wanting to change how a page looks or behave, you will need to edit either the StyleSheet, the JavaScript or a combination of both. If it is behaviour that needs setting, then you will most likely need the JavaScript. For most visual elements, you should turn to the StyleSheet.

While editing the StyleSheet, you may find the Inspect Tool of your browser to be a useful thing. From testing for different screen sizes and accessibility, to view the source code (HTML/CSS) of the displayed passage, or even messing with the CSS rules without going back and forth between the StyleSheet and the file, the tool will let you ensure a great visual for your project.

* [[The Different Targetable Elements|Int-JS-CSS-Elements]] 
** [[The Full List of Targetable Elements|HTML-Full-List]] 
* [[Ensuring that Elements Start at the Top when Opened|Int-JS-CSS-Events]]
* [[Import and Change the Font|Int-JS-CSS-Font]] 
* [[Using the Root and CSS var|Int-JS-CSS-Root]] 
* [[Formating for Different Screen Size|Int-JS-CSS-Media]] 
* [[Intro to Animation|Int-JS-CSS-Animation]]
* [[Creating Stats, Meter, and Progress Bars|Int-JS-CSS-Stat]] (long) 
* [[Editing the Loading Screen|Int-JS-CSS-LoadingScreen]] 
* [[A Note on Interface Accessibility|Accessibility]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Animation [page] {"position":"3200,1500","size":"100,100"}
<h1>Intro to Animation</h1>
To elevate your project and customize it further, you can decide to animate elements on the page of your game (e.g. text, images, other...). Animations can be as simple as a flicker, to more complex movement over the page. 
It might seem daunting to create animations, as animation code published on CodePen and the like can look quite complicated. But, animations rests only on three essential elements in the StyleSheet:
* the {{{@keyframes}}}: defining the trajectory of the animation (e.g. change of position, or colour, or opacity, etc...)
* the {{{animation}}} CSS rule: linking and setting the animation to the relevant block (e.g. length, looping, delay, etc...)
* the element targeted: which can be an HTML markup ({{{h1}}}, {{{span}}}), a class ({{{.class}}}), or an ID ({{{#id}}})
> ''Note:'' certain animations may require the element to have {{{display: block}}}, {{{display: inline-block}}}, {{{display: absolute}}} to work.
\
<h3>{{{@keyframes}}}</h3>\
Every keyframe is set up in the same way:
{{{
    @keyframes animation-name {
        keyframes-selector {css-styles;}
    }
}}}
As such, you will need to indicate the following:
* {{{animation-name}}}: or the name you will give to the animation. 
** For example, let's take {{{flicker}}}.
* {{{keyframes-selector}}}: the percentage in the animation sequence where something changes for the element.
** can be set with percentages ({{{0-100%}}}), or with {{{from}}}/{{{to}}} (same as 0% and 100%), or a combination of both.
*** Here, let's have the flicker happen half-way through the animation (50%).
* {{{css-styles}}}: or the css rules to indicate what changes at that step. 
** Here, the flickering will need {{{opacity}}}.
\
If we combine it all, we get the following example:
{{{
    @keyframes flicker {
        0% { opacity:1; }
        50% { opacity:0; } 
        100% { opacity:1; }
    }
}}}
> ''Note:'' Testing and tweaking is ''very important'' here.
\
<h3>The {{{animation}}} Rule</h3>\
Linking the animation to an element is necessary for the animation to display on the page. The {{{animation}}} CSS rule is a compiled version of 8 different separate rules ({{{animation-[insertname]}}}):
{{{
    animation: name duration timing-function delay iteration-count direction fill-mode play-state;
}}}
To function, it only requires at minimum the following:
{{{
    animation: name duration iteration-count;
}}}
\
So, you will need to define:
* {{{name}}} (or {{{animation-name}}}): the name of the keyframe animation. 
** Here, we defined it as {{{flicker}}}.
* {{{duration}}} (or {{{animation-duration}}}): the duration of the whole animation.
** Let's make it {{{1 second}}} here.
* {{{iteration-count}}} (or {{{animation-iteration-count}}}): how many times the animation goes. 
** Let's make it {{{infinite}}}.
{{{
    animation: flicker 1s infinite;
}}}
\
If you want to go further, you can also defined the following aspects:
* {{{timing-function}}} (or {{{animation-timing-function}}}): indicates the curve of the animation speed (slow start, slow end, etc...) 
* {{{delay}}} (or {{{animation-delay}}}): delaying the start of an animation.
* {{{direction}}} (or {{{animation-direction}}}): whether an animation should be played forward, backward, or alternating.
* {{{fill-mode}}} (or {{{animation-fill-mode}}}): define whether an animation takes the styling in the start of the animation or the one at the end.
* {{{play-state}}} (or {{{animation-play-state}}}): define whether the animation is playing or paused.
\
<h3>Linking to an element</h3>\
Finally, we need to add the {{{animation}}} rule in an element, to make it flicker.
> Assuming the passage has the following block:
{{{
    <span class="flickering">Some Text</span>
}}}
> //In the StyleSheet//:
{{{
    .flickering {
        animation: flicker 1s infinite;
    }
→ the {flicker} animation was added to the span class {flickering}
}}}
> Giving the following result: 
<span class="flickering">Some Text</span>
\
<h3>A note on Accessibility</h3>\
While animations can be quite fun to have, giving some spice to the displayed elements, some players may not find it comfortable. Fast moving elements, flickering animation, or bright flashes, may causes sensory issues for some. It is generally a good idea to warn player of such animation before they start the game, as well as create an [[Accessible Setting|SettingsToggle]], so player can toggle on/off the animation.

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Elements [page] {"position":"3200,1200","size":"100,100"}
<h1>The Different Targetable Elements</h1>
With its [[base UI|http://www.motoslave.net/sugarcube/2/docs/#html]], SugarCube creates multiple elements on the page, which can be targeted in the StyleSheet with some CSS or in the JavaScript.

The elements have also relationships with one another, as they are nested within one another. Depending on where they are located within the nesting, and how the Built-In StyleSheet targets them, any edit made may affect more than the targeted elements.
> ''Note:'' when an element is located inside another, the first is called a child of the second, while the second is the parent of the first. CSS rules in the parent element may affect the child element.
\
<h3>Main Block Elements</h3>\
<table>
    <tr>
        <th>Selector</th><th>Description</th><th>Relationship</th>
    </tr>
    <tr>
        <td>{{{html}}}</td>
        <td>The document element, necessary to set up the HTML page. ''Should not be included inside'' {{{StoryInterface}}}.
        If a story-passage is tagged, {{{data-tags}}} will be added to this element.
        If the project includes Settings, classes and attributes will be added to this element. 
        The element sets the font size for the whole document.</td>
        <td>{{{html}}} is the parent element to all elements below, but most closely to {{{body}}}</td>
    </tr>
    <tr>
        <td>{{{body}}}</td>
        <td>The body of the page. ''Should not be included in'' {{{StoryInterface}}}.
        If a story-passage is tagged, the {{{data-tags}}} and special classes will be added to this element.
        The element sets the default background and font colours.</td>
        <td>{{{body}}} is the child element of {{{html}}}, and the parent element of all the elements below, most closely {{{#ui-dialog}}}, {{{#ui-bar}}}, and {{{#story}}}.</td>
    </tr>
    <tr>
        <td>{{{#ui-dialog}}}</td>
        <td>The popup element container. ''Should not be included in'' {{{StoryInterface}}}.</td>
        <td>{{{#ui-dialog}}} is the child element of {{{body}}}, and the parent element of {{{#ui-dialog-titlebar}}} and {{{#ui-dialog-body}}}. </td>
    </tr>
    <tr>
        <td>{{{#ui-bar}}}</td>
        <td>The left sidebar. Can be included in {{{StoryInterface}}}, if want to be kept.
        This element will affect how {{{#story}}} is positionned on the page.</td>
        <td>{{{#ui-bar}}} is a child element of {{{body}}}, and the parent element of the Special Passage elements, among others.</td>
    </tr>
    <tr>
        <td>{{{#story}}}</td>
        <td>Container for the {{{#passages}}} element.
        This element's width and position is affected by {{{#ui-bar}}}'s position on the page.</td>
        <td>{{{#story}}} is the child element of {{{body}}}, and the parent of {{{#passages}}}</td>
    </tr>
    <tr>
        <td>{{{#passages}}}</td>
        <td>Container for the passage element. ''HAS TO BE included in'' {{{StoryInterface}}}.
        All created passages will appear as a children of this element, in {{{.passage}}}.</td>
        <td>{{{#passages}}} is the child element of {{{#story}}}, and the parent element of {{{.passage}}}</td>
    </tr>
    <tr>
        <td>{{{.passage}}}</td>
        <td>The passage element. ''Should not really be included'' in {{{StoryInterface}}}.
        The active story-passage will determine the ID of this element.
        If a story-passage is tagged, the {{{data-tags}}} and special classes will be added to this element.</td>
        <td>{{{.passage}}} is the child element of {{{#passages}}}, and the parent element of any element coded in the story-passage.</td>
    </tr>
</table>
> ''Note:'' When using the base UI, the {{{StoryInterface}}} [[Special Passage|SP-StoryInterface]] is not a necessary passage to have in your project.
> You can find the complete list of targetable elements in a base UI [[here|HTML-Full-List]].
\
<h3>Notes on the Links Elements and Special Link Classes</h3>\
targeting the links with the element {{{a}}} or the buttons with {{{button}}} without including a parent element before, the CSS rules will affect every link and button in the project (the passage, the sidebar, and the dialog box). On the other hand, if you indicate {{{.passage a}}} or {{{.passage button}}} in the StyleSheet, it will only target the links or buttons in the passage element.

The {{{a}}} element will affect any interactive macro using a link, such as {{{<<link>>}}}, {{{<<linkappend>>}}}, {{{<<linkprepend>>}}}, {{{<<linkreplace>>}}}, and the {{{<<cycle>>}}} macros, as well as the {{{[[link]]}}} markup. targeting a certain macro can be done as follow: {{{a.macro-[name]}}} or {{{.macro-[name]}}}.
> ''Note:'' targeting the macro class will not affect the [[link]] markup.

To differenciate internal and external links, aside from the icon at the end of the link, a specific class is added to every link(-related) element: {{{.link-internal}}} or {{{.link-external}}}. Only the links going to another website will get the second class, all others will get the first.
> ''Note:'' the macros listed in the paragraph above will have the {{{.link-internal}}} class. 

To change how a link looks when hovered/in focus/being clicked on, compared to the link when not in use, you can add a special selector to the link: {{{:hover}}}, {{{:focus}}}, and {{{:active}}}. If all these three states will look the same, {{{a:hover, a:focus { /* CSS rules */ }}}} will be sufficient.

If the {{{a}}} has not been modified in the StyleSheet, you may notice some links going nowhere will be formatted differently than working links. This is because those "broken" links have a special class: {{{.link-broken}}}.
If you did modify {{{a}}} in the StyleSheet, you can always add {{{a.link-broken}}} to it to be able to see those broken link during testing/playing.

When using the macro {{{<<choice>>}}}, links will become disabled, and get the class {{{.link-disabled}}} attached to them. It is possible to add this class to other links on the screen with a [[DOM Macro|Macro-DOM-Adv]].
> ''Note:'' this should not be mistaken for the {{{.disabled}}} class added by the {{{<<disable>>}}} [[Custom Macro from Chapel|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/disable-macro.md]].

If the project should display to the player whether a passage has been visited through the link, you can target the {{{.link-visited}}} class.
> ''Note:'' the class is not enabled by default, but should be unlocked with {{{Config.addVisitedLinkClass = true;}}} in the JavaScript. See more about it, [[here|Config-Misc]].

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Events [page] {"position":"3200,1300","size":"100,100"}
<h1>Ensuring that Elements Start at the Top when Opened</h1>
When going from one long passage to another, or opening a multiple popups whose content does not fit the container, the system might not automatically scroll the element to the top of the page/element. 
> ''Note:'' This should mainly apply to modified UI.

However, this can be easily fixed with a bit of jQuery in the JavaScript passage, and [[Events]]:
{{{
    $(document).on(":passagedisplay", function() {
        $("#passages").scrollTop(0);
    });
}}}
> //For the Dialog Box://
{{{
    $(document).on(":dialogopened", function() {
        $("#ui-dialog-body").scrollTop(0);
    });
}}}
> ''Note:'' you can change {{{#passages}}} with any other relevant container, like {{{#story}}}.

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Font [page] {"position":"3300,1300","size":"100,100"}
<h1>Import and Change the Font</h1>
As different device come with different fonts, you may want to have a unified experience accross the playerbase through one-same font. For this, you will need to import the chosen font(s) and set it in the StyleSheet.
As with [[images|URL-Types]], how to import fonts will depend on the location of the font. A local import will require a different rule than an import from a third-party server (e.g. Google).

> ''IMPORTANT:'' the import of a font should be ''the first thing'' in your StyleSheet, before any other CSS rules!
\
<h3>The Different Imports</h3>\
For a server import, the {{{@import url()}}} should be used. You only need to add the relevant URL of the font. For example, Google will provide one on their GoogleFont website, just as the one below.
{{{
    @import url('https://fonts.googleapis.com/css2?family=Georgia:wght@400;700&display=swap');
}}}
> ''Note:'' when selecting multiple fonts (type or families), Google will provide one link for all selected fonts.
\
Depending on the services used, the URL for the font may look differently. For comparison, here's the one of an old FontAwesome version:
{{{
    @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css’);
}}}
> ''Note:'' you should ensure to always get the official import URL.

On the other hand, local import will use the {{{@font-face}}}, with a relative URL, and require a few more information. This will include the name of the font-family, the URL, the format of the file, the style (normal/italic) and the weight (400-normal/700-bold).
> ''Note:'' while it requires a few more lines of code, local imports are not dependent on server up-times or shared user information.
\
For example, trying to import an OpenDyslexic font (normal, italics, bold, bold+italic):
{{{
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-Regular.otf) format("opentype");
        font-style: normal;
        font-weight: 400;
    }
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-Italic.otf) format("opentype");
        font-style: italic;
        font-weight: 400;
    }
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-BoldItalic.otf) format("opentype");
        font-style: italic;
        font-weight: 700;
    }
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-Bold.otf) format("opentype");
        font-style: normal;
        font-weight: 700;
    }
}}}
> ''Note:'' a new {{{@font-face}}} is required for each new font type.
\
<h3>Changing the Font of the project</h3>\
In the Base UI, the font is defined inside the {{{html}}} element. If the new font should apply to the whole project, you can simply do: 
{{{
    html {
        font-family: 'Font-Name', type;
    }

→ For the OpenDyslexic, "imported" above:
    html {
        font-family: 'Dyslexic', sans-serif;
    }
}}}

If the font should only apply to a specific element, you must target that element instead. 
For example, if you want to change the font of the header:
{{{
    h1 {
        font-family: 'Roboto', sans-serif;
    }

→ to target the title of the popup:
    #ui-dialog-title {
        font-family: 'Bacasime Antique', serif;
    }
}}}
\
<h3>Let the Player Change the Font*</h3>\
*from a preset list of fonts that you set up in the code.

To accomodate players, you can let them change the reading font through a [[List Setting|SettingsList]], within which you have indicated a list of imported fonts (serif, sans-serif, monospace) to choose from.
For accessibility, it is recommended to have multiple legible //serif// and //sans-serif// fonts, especially for story text.
> ''Note:'' you can find a Font setting in my [[Setting Template|https://manonamora.itch.io/twine-sugarcube-templates]].

Assuming that a font //Georgia//, //Montserrat// and //OpenDyslexic// have been imported, the code below could be added to the JavaScript:
{{{
    var settingFontFamily = ["Georgia", "Montserrat", "OpenDyslexic"];
    var fontFamily = function() {
        var $html = $("html");
            $html.removeClass("sansserif serif opendyslexic");
        switch (settings.fontFamily) {
            case "Georgia":
                $html.addClass("serif");
                break;
            case "Montserrat":
                $html.addClass("sansserif");
                break;
            case "OpenDyslexic":
                $html.addClass("opendyslexic");
                break;
        }
    };
    Setting.addList("fontFamily", {
        label       : "Change font style.",
        list        : settingFontFamily,
        default     : "Georgia",
        onInit      : fontFamily,
        onChange    : fontFamily
    });
}}}
And in the CSS:
{{{
    .sansserif body {font-family: var(–sansserif);}
    .opendyslexic body {font-family: var(–opendyslexic);}
    .serif body {font-family: var(–serif);}
}}}
> ''Note:'' this will affect all elements on the page. Change the {{{body}}} to another element.

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-LoadingScreen [page] {"position":"3200,1600","size":"100,100"}
<h1>Editing the Loading Screen</h1>
If you are looking to change how the Loading Screen looks, to fit your project better, you will need to use a combination of JavaScript/jQuery and CSS. Since there is not Special Passage to edit the content of the Loading Screen, JavaScript/jQuery will help you empty the Built-In elements and add the one you wish.
\
<h3>The Loading Screen</h3>\
The Loading Screen is composed of two elements: {{{#init-loading}}} nested inside {{{#init-screen}}}. {{{#init-loading}}} is the animated element: a rounded square, where only the top and bottom borders are coloured, with a spinning animation
{{{
    html[data-init="loading"] #init-loading {
        display: block;
        border: 24px solid transparent;
        border-radius: 50%;
        border-top-color: #7f7f7f;
        border-bottom-color: #7f7f7f;
        width: 100px;
        height: 100px;
        animation: init-loading-spin 2s linear infinite;
    }
}}}
> ''Note:'' there are more CSS rules at play here. You may want to [[lock to Loading Screen|API-Lock]] and use the Inspect Tool when testing code.
\
If you just want to edit what is already there, you can do so in the JavaScript:
{{{
    $("#init-loading").css({ animation: "none", border: "none", width: "100%", height: "100%" });
→ this will remove the current loading aninmation
  and size the element to the screen
}}}
Or directly in the StyleSheet:
{{{
    html[data-init="loading"] #init-loading {
        /* New CSS code */
    }
}}}
> ''Note:'' if you are planning to add things to {{{#init-loading}}}, you may want to edit its CSS rules too.

If you are looking to add elements to {{{#init-loading}}}, like the logo of SugarCube bouncing around, you will need the following:
{{{
    $("#init-loading").empty().append('/* the new elements */');
}}}
Inside the {{{.append()}}}, you should indicate the HTML elements to add. A {{{<div>}}}, a {{{<span>}}}, an {{{<img>}}}... Whatever you end up adding should be edited in the StyleSheet.
{{{
    #init-loading [element] {
        /* CSS rules */
    }
}}}
\
<h3>Adding a Splash Screen</h3>\
A Splash Screen is a a graphical element appearing when a program/game is launching. It will often contain an image or logo of the program/game or developer/company. 
In SugarCube, you can create a Splash screen which would fade in-and-out, with some JavaScript and CSS, by adding an overlay on the page.
> ''Note:'' the code below was taken from this [[Forum page|https://twinery.org/forum/discussion/7910/intro-screen]], and assumes an image should appear on the screen and the Base SugarCube StyleSheet is used.
\
> In the JavaScript
{{{
    (function () {
        // Duration of the splash image's fade in.
        var fadeIn  = 3000; // in milliseconds

        // Delay before the splash screen begins to fade out.
        var linger  = 6000; // in milliseconds

        // Duration of the splash screen's fade out.
        var fadeOut = 3000; // in milliseconds

        // Splash image.
        var $image  = $('<img src="splash-image.jpg">').hide();

        // Display the splash screen.
        $(document.body)
            .append('<div id="splash-screen"></div>')
            .find('#splash-screen')
                .append($image)
                .find('img')
                    .fadeIn(fadeIn)
                    .end()
                .delay(linger)
                .fadeOut(fadeOut);

        // Set up the removal of the splash screen.
        setTimeout(function () {
            $('#splash-screen').remove();
        }, fadeIn + linger + fadeOut + 1000);
    })();
}}}
> In the StyleSheet:
{{{
    #splash-screen {
        position: fixed;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        z-index: 100;
        background-color: #111;
        color: #eee;
    }
    #splash-screen > img {
        display: block;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translateX(-50%) translateY(-50%);
    }
}}}

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Media [page] {"position":"3300,1400","size":"100,100"}
<h1>Formating for Different Screen Size</h1>
While the Base UI of SugarCube is already optimised for different screens/devices, any change in the interface, whether it be changing the size and display of elements in the StyleSheet or in {{{StoryInterface}}}, will need to be fitted for those different screen sizes. 

This can be done with the {{{@media}}} rule inside the StyleSheet.
{{{
    @media screen and (size) {
        [element] {
            /* CSS Rule */
        }
    }
}}}
Inside the {{{(size)}}}, you can target a specific range or screen size or ratio to apply different CSS rules. You will need to use as many {{{@media}}} rules as your interface would require (it will depend on the elements on the page). Each iteraction of this rule should be ordered from most-restrictive size/ratio range to most-inclusive.
> //Example://
{{{
    #passages {
        width: 50vw;
    }

    @media screen and (max-width: 585px) {
        #passages {
            width: 100%;
        }
    }

    @media screen and (max-width: 800px) {
        #passages {
            width: 85%;
        }
    }
}}}
If the screen used is 585px wide or smaller, the width of the passage will take the whole screen. For screen size is larger than wider than 585px but 800px wide or smaller, the width of the passage will take 85% of the screen. If the screen size is larger than 800px, the width of the passage will be half of the screen width.

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Root [page] {"position":"3200,1400","size":"100,100"}
<h1>Using the Root and CSS var</h1>
As the UI gets more complex, whether because of its base customisation, or with the addition of [[Settings]], you may want to organise certain values within the StyleSheet, like colours, fonts, or asset URL. This can be done through the creation of CSS variables ({{{--var}}}) inside the {{{:root}}} selector.
> ''Note:'' this is used quite often in templates, to make changing colours of the UI easier for the user. Instead of finding all the different iterations of a value, there is only one to change!
\
In your StyleSheet, after any imported element:
{{{
    :root {
        /* the listed variable */
    }

    :root {
        --sansserif: 'Montserrat', sans-serif;
        --font-colour: #000;
        --dm-font-colour: #eee;
        --width: 50px;
        --timer: 3s;
        --gradient: linear-gradient(-90deg, blue, green, red);
    }
}}}
> ''Note:'' new versions of {{{:root}}} can be included inside the {{{@media}}} selector if a certain variable need to change for a different screen size.

The CSS variable can then be used as many times as needed in relevant CSS rules in other elements:
{{{
    .passage {
        color: var(--font-colour);
    }
    .dm #ui-dialog-body {
        color: var(--dm-font-colour);
    }
    .sansserif .passage {
        font-family: var(--sansserif);
    }
}}}
>''Note:'' the classes {{{.dm}}} and {{{.sansserif}}} would have been created with a [[Setting API|SettingsList]].
\
Setting a CSS variables can also be done outside of {{{:root}}}:
{{{
    .parent-element {
        --color: blue;
    }
    .child-element-1 {
        background : var(--color);
    }
    .child-element-2 {
        color: var(--color);
    }
}}}

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Int-JS-CSS-Stat [page] {"position":"3300,1500","size":"100,100"}
<h1>Creating Stats, Meter, and Progress Bars</h1>
Whether to show a character's abilities or affections, or a visual timer for quick-time event actions, these bars will allows for a meaningful visual to display the value of a variable, aside from a number.
There are different ways of achieving this, namely:
* using the {{{<progress>}}} or the {{{<meter>}}} HTML elements 
* building it from scratch with {{{<div>}}} or {{{<span>}}} elements 
* using custom macros (like [[Chapel's|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/meter-macros.md]]), which often ends up doing one of the options above but with more pazaaz and less HTML to deal with.
** See the macro's documentation for use.
\
<h3>The {{{<progress>}}} HTML element</h3>\
Like it's name suggests, {{{<progress>}}} is an HTML element used to create a progress bar. While it //can// be used for static bars, this element is more meant to represent the completion of a task/a timer.
<progress max="100"></progress> (indeterminate form)
<progress value="43" max="100"></progress> (determinate form)
> ''Note:'' when unstyled, the progress bar will look different between browsers.
\
The element had two specific attributes:
* {{{max}}} (optional) to indicate the completion value.
** default is 1.0
* {{{value}}} to indicate the current state of the progress. 
** must either be {between 0.0 and 1.0 incl.} or {less than or equal to the {{{max}}}}
** if used but left empty, you will get its indeterminate form 
** if not indicated, you will get its indeterminate form
> ''Note:'' the minimum will always be 0.
{{{
    <progress value="" max="100"></progress>
    <progress max="100"></progress> 
→ indeterminate form

    <progress value="43" max="100"></progress> 
    <progress value="0.43"></progress> 
→ determinate form
}}}
If either the {{{value}}} or the {{{max}}} should be related to the value of a set variable, you will need to use the {{{@}}} [[directive|Markup-Attribute]] to link it.
Assuming that {{{<<set $intext to 42>>}}}: <<set $intext to 42>>
{{{
    <progress @value="$intext" max="100"></progress>
}}}
→ will render as: <progress @value="$intext" max="100"></progress>

The {{{<progress>}}} element will also accept other global attributes, such as {{{.class}}}, {{{#id}}}, or ARIA-related elements. These attribues can make it easier to target a specific progress bar during styling.

If you want the {{{<progress>}}} element to look the same across browsers, you will need to edit the StyleSheet:
* {{{progress}}} to target the {{{<progress>}}} elements as a whole 
* {{{progress:not([value])}}} to target the {{{<progress>}}} if {{{value}}} is not indicated
* {{{progress:indeterminate}}} to target {{{<progress>}}} elements if {{{value}}} is not indicated or defined
* {{{progress[value]}}} to target {{{<progress>}}} elements if {{{value}}} is indicated (defined or empty)
\
To edit the value bar however, you will need to use browser specific Pseudo-Code:
* For Chrome and Chromium browsers:
** {{{::-webkit-progress-bar}}} to edit the appearance of the background bar 
** {{{::-webkit-progress-value}}} to edit the appearance of the value bar
* For Firefox :
** {{{no-pseudo-code}}} to edit the appearance of the background bar 
** {{{::-moz-progress-bar}}} to edit the appearance of the value bar
> //Example, if the progress bar has the id:// {{{#test-bar}}}
{{{
#test-bar {
    background: #0b1f0b;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #013c01;
}
→ will set the base for the whole element
  + the background for Firefox

#test-bar::-moz-progress-bar {
  background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
  border-radius: 20px;
}
→ will set the appearance of the value bar in Firefox

#test-bar::-webkit-progress-bar {
	background: #0b1f0b;
    border-radius: 20px;
}
→ will set the appearance of the background in Chromium

#test-bar::-webkit-progress-value {
    background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
    border-radius: 20px;
}
→ will set the appearance of the value bar in Chromium
}}}
<progress id="test-bar" @value="$intext" max="100"></progress>

\
<h3>The {{{<meter>}}} HTML element</h3>\
The {{{<meter>}}} element is meant to showcase static values, when the range is known, like the capacity of a device or the health of a character. 
<meter @value="$intext" min="0" low="10" optimum="50" high="90" max="100"></meter> | <meter value="12" min="0" low="20" optimum="50" high="90" max="100"></meter> | <meter value="25" min="0" low="50" optimum="85" high="75" max="100"></meter>
> ''Note:'' when unstyled, the meter bar will look different between browsers.
\
The element has 6 specific attributes:
* {{{value}}} to indicate the current value of the measured range
** must be between {{{min}}} and {{{max}}}
* {{{min}}} (optional) to indicate the minimum value of the range 
** default is 0
** can be any value (even negative) as long as it is lower than {{{max}}}
* {{{max}}} (optional) to indicate the maximum value of the range 
** default i 1.0
** can be any value (even negative) as long as it is higher than {{{max}}}
* {{{low}}} (optional) to specify what is a low value in the range 
** must be higher than {{{min}}}, but lower than {{{high}}} and {{{max}}}
* {{{high}}} (optional) to specify what is a high value in the range 
** must be lower than {{{max}}}, but higher than {{{low}}} and {{{min}}}
* {{{optimum}}} (optional) to specifiy the optimal value in the range
** if used along {{{low}}} and {{{high}}}, it will indicate the preferred zone for the range
** can be any value within the {{{min}}}/{{{max}}} range
> ''Note:'' when {{{high}}}, {{{low}}}, and {{{optimum}}} are used, it will change the colour of the meter bar. See examples above.
{{{
    <meter value="0.5"></meter>

    <meter value="50" min="0" max="100"></meter>

    <meter value="42" min="0" low="10" optimum="50" high="90" max="100"></meter>
}}}
If any of those attributes should be related to the value of a set variable, you will need to use the {{{@}}} [[directive|Markup-Attribute]] to link it.
Assuming that {{{<<set $intext to 42>>}}}: <<set $intext to 42>>
{{{
    <meter @value="$intext" min="0" max="100"></meter>
}}}
→ will render as: <meter @value="$intext" min="0" max="100"></meter>

The {{{<meter>}}} element will also accept other global attributes, such as {{{.class}}}, {{{#id}}}, or ARIA-related elements. These attribues can make it easier to target a specific progress bar during styling.

If you want the {{{<meter>}}} element to look the same across browsers, you will need to edit the StyleSheet:
* {{{meter}}} to target the {{{<meter>}}} elements as a whole 
* {{{meter:not([value])}}} to target the {{{<meter>}}} if {{{value}}} is not indicated
* {{{meter[value]}}} to target {{{<meter>}}} elements if {{{value}}} is indicated (defined or empty)
\
To edit the value bar however, you will need to use browser specific Pseudo-Code:
* For Chrome and Chromium browsers:
** {{{::-webkit-meter-bar}}} to edit the appearance of the background bar 
** {{{::-webkit-meter-optimum-value}}} to edit the appearance of the value bar
* For Firefox :
** {{{no-pseudo-code}}} to edit the appearance of the background bar  
** {{{::-moz-meter-bar}}} to edit the appearance of the value bar
> ''Note:'' if you are using {{{high}}}/{{{low}}}/{{{optimum}}}, and want to change how the meter looks depending on where the value is in the range, you can also use the Pseudo-Elements:
> For Chromium: {{{::-webkit-meter-suboptimum-value}}}, {{{::-webkit-meter-even-less-good-value}}}
> For Firefox: {{{:-moz-meter-optimum}}}, {{{:-moz-meter-sub-optimum}}}, {{{:-moz-meter-sub-sub-optimum}}}
\
> //Example, if the progress bar has the id:// {{{#test-metbar}}}
{{{
#test-metbar {
    background: #1d0b1f;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #3a013c;
}
→ will set the base for the whole element
  + the background for Firefox

#test-metbar::-moz-meter-bar {
    background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
    border-radius: 20px;
}
→ will set the appearance of the value bar in Firefox

#test-metbar::-webkit-meter-bar {
    background: #1d0b1f;
    border-radius: 20px;
    height: 2em;
    border: 2px solid #3a013c;
}
→ will set the appearance of the background in Chromium

#test-metbar::-webkit-meter-optimum-value {
    background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
    border-radius: 20px;
}
→ will set the appearance of the value bar in Chromium
}}}
<meter id="test-metbar" @value="$intext" min="0" max="100"></meter>

\
<h3>Build your own from {{{<div>}}} and {{{<span>}}}</h3>\
While progress and meter bars can be pretty neat to use, they do have some issues with compatibility with older browsers (especially {{{<meter>}}}), and require the use of Pseudo-Code to style the bar for the different browsers. And, if you are looking to add some [[animations|Int-JS-CSS-Animation]] to your bar, you would most likely require some JavaScript code.
> ''Note:'' the examples below will only use {{{<div>}}} but you could technically use any block elements. Though you may need to add a few more CSS rules.

This bit of a headache can be avoided if you build your start bar from scratch with basic elements. Something like this:
{{{
    <div class="statBarContainer">
        <div class="statBar" style="width:33%"></div>
    </div>
}}}
<div class="statBarContainer"><div class="statBar" style="width:33%"></div></div>
> //In the StyleSheet//:
{{{
    .statBarContainer {
        background: #660303;
        width: 100%;
        height: 2em;
        border-radius: 20px;
        border: 2px solid #a40606;
    }
    .statBar {
        background: linear-gradient(-90deg, #ff489e78, #6effc2, #ff489e78);
        border-radius: 20px;
        height: inherit;
    }
}}}

If any attribute defined in those {{{<div>}}} should be related to the value of a set variable, you will need to use the {{{@}}} [[directive|Markup-Attribute]] to link it.
{{{
    <div class="statBarContainer">
        <div class="statBar" @style="'width:' + $intext + '%;'"></div>
    </div>

→ the quotes are required to parse the value of the variable.
  otherwise it will not work.
}}}
<div class="statBarContainer"><div class="statBar" @style="'width: ' + $intext + '%;'"></div></div>

Instead of an attribute directive, you can also use some JavaScript/jQuery.
The example below assumes the stat-bar is coded as follow:
{{{
    <div class="statBarContainer">
        <div id="#intext" class="statBar"></div>
    </div>
}}}
{{{
    $(document).on(":passagedisplay", function() {
        var attributeStat = State.getVar("$intext") + "%";
        $("#intext").attr("style", "width: " + attributeStat);
    });
}}}

<h3>Using a {{{<<widget>>}}}</h3>
If you are planning on adding multiple stat bars in one spot and want to avoid cluttering a passage with code, you can use the {{{<<widget>>}}} [[macro|Macro-Widget]].

Assuming we want to use the {{{<div>}}} stat bar introduced above, but want to assign a different {{{#id}}} and link it to the relevant stat variable:
{{{
    <div class="statBarContainer">
        <div id="#intext" class="statBar" @style="'width:' + $intext + '%;'"></div>
    </div>
}}}
The widget could look something like this, requiring 2 arguments, one for the {{{#id}}} and one for the relevant stat variable:
{{{
    :: Widget [widget]
    <<widget "StatBars">>
        <div class="statBarContainer">
            <div @id="_args[1]" class="statBar" @style="'width:' + _args[0] + '%;'"></div>
        </div>
    <</widget>>

    :: Passage 
    <<StatBar $statValue "#idForTheBar">>
}}}
> ''Note:'' this is a basic example. You could add more {{{<div>}}} to include a label for the bar, or the numerical value of the stat.

<div id="link-menu">[[Back to the Styling Menu|Int-JS-CSS]] - [[Back to the Start Menu|Start]]</div>


:: Lexicon [side popup] {"position":"1500,400","size":"100,100"}
__Types of Values__
//String//	: type of value, word, wrapped in {" "}
//Boolean// : type of value, true/false 
//Integer// : type of value, number
//Object//  : type of variable, can have multiple variables nested inside
	//Property//  : a sub element of an object
//Array//   : type of variable, can have multiple values inside

__Types of Variables__
//Temporary variable// ({{{_temp}}}) : an editable variable that disappears when moving to a new passage.
//Permanent variable// ({{{$var}}})  : an editable variable that tracks a value until changed or unset. 
//Setup variable// ({{{setup.var}}}) : a variable set at the start of the game, and cannot be edited.
//Settings variable// ({{{settings.var}}}) : a variable set with a Setting in the JavaScript passage.

__Other Concepts__
//UI//		 : User Interface, the page shown to the player
//API//      : Application Programming Interface, code that will trigger hidden built-in fuctions
//Macro//    : a block of code designed to do a specific task
	//Container// : (ref to macro) a block a code wrapped between an opening and closing tag 
	//Argument//  : (ref to macro) items set in the macro to process code.
//Function// : JavaScript blocks of code designed to do a specific task
//Method//   : JavaScript blocks of code designed to do a specific task, linked to a reciever

> If something is missing here, let me know!!!!


:: Local-L10n [page] {"position":"3800,1200","size":"100,100"}
<h1>{{{l10nStrings}}}, and How to Edit Them</h1>
{{{l10nStrings}}} are strings of words which can only be edited in JavaScript. These strings populate your project pages in very specific spots, as defined by the property attached to it. Depending on the property chosen, it can affect visible text on the screen, text only visible when hovering over an element, text inside a browser alert, or when the game is in Debugging Mode (Test).
{{{
    l10nStrings.property = "New Text";
}}}
> //For example://
{{{
    l10nStrings.restartTitle = "Restart";
    l10nStrings.restartTitle = "Are You Sure?";
}}}
> ''Note:'' any {{{l10nStrings}}} added to your JavaScript will override the built-in text. If multiple iteration of the same property is edited in your file, only the last one will be shown on the page.

You can find the whole list of accepted property on [[this page|https://github.com/tmedwards/sugarcube-2/blob/develop/locale/l10n-template.js]] of the SugarCube repository. 
Just Copy-Paste the necessary lines into your JavaScript, and edit the text. The code will accept any [[Unicode Character and Symbols|https://en.wikipedia.org/wiki/List_of_Unicode_characters]] (testing for fonts advised).
> ''Note:'' If you remove an element in the UI, like the backward button, the related {{{l10nStrings.propery}}} (here {{{l10nStrings.uiBarBackward}}}) will not need to be included in your project.

You can also use the text of other properties inside an {{{l10nStrings}}} to avoid writing it multiple times, either by using the property itself ({{{l10nStrings.propery}}}) or creating a template ({{{l10nStrings._template}}}). For example, in the Built-In {{{l10nStrings}}}:
{{{
    l10nStrings.identity = 'game';

    l10nStrings._warningIntroLacking  = 'Your browser either lacks or has disabled';

    l10nStrings._warningOutroDegraded = ', so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.';

    l10nStrings.warningNoWebStorage   = '{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}';
}}}
The three first {{{l10nStrings}}} (one a property, the two others templates) are used by the last string to create the following text:
> //Your browser either lacks or has disabled// the Web Storage API, //so this ''game'' is running in a degraded mode. You may be able to continue, however, some parts may not work properly.//

<div id="link-menu">[[Back to the Localization Menu|Localization]] - [[Back to the Start Menu|Start]]</div>


:: Local-Setting [page] {"position":"3800,1300","size":"100,100"}
<h1>Providing Multiple Languages In-Game</h1>
If you want to include more than one language to your project, how to code it will depend on the UI of your project (Base or Custom) and whether the functionalities in your game (i.e. Settings, Saves, ...) use the [[Built-In text|Local-L10n]]. It may be as simple as creating seperate passage paths per language (with a starting screen displaying a list of available languages), to more complex, like having a Setting the player can use to change the language at anytime.
\
<h3>No Built-In Text and Language Choice at Start</h3>\
In this first case (which can be attainable by removing the Sidebar or creating a Custom UI), an easy way to achieve including localization would be to start with a passage where the player can choose the language from a list of links, each of which would send the player to a path of passages for that specific language:
{{{
    :: Start
    THIS IS A GAME, REALLY...
    [[English|EN-Passage]]
    [[Français|FR-Passage]]
    [[Español|ES-Passage]]
    [[Nederlands|NL-Passage]]

    :: EN-Passage
    This passage is English.
    [[Continue|EN-Next]]

    :: FR-Passage
    Ce Passage est en Français. 
    [[Continuer|FR-Next]]
    
    :: EN-Passage
    Este pasaje esta en español.
    [[Continuar|ES-Next]]
    
    :: EN-Passage
    Deze passage is in het Nederlands.
    [[Doorgaan|NL-Next]] 
}}}
You can also choose to merge every translated passage into one, tracking the language choice through a variable:
{{{
    :: Start
    THIS IS A GAME, REALLY...
    [[English|Passage][$language to "English"]]
    [[Français|Passage][$language to "French"]]
    [[Español|Passage][$language to "Spanish"]]
    [[Nederlands|Passage][$language to "Dutch"]]

    :: Passage
    <<switch $language>><<case "English">>
        This passage is English.
        [[Continue|Next]]
    <<case "French">>
        Ce Passage est en Français. 
        [[Continuer|Next]]
    <<case "Spanish">>
        Este pasaje esta en español.
        [[Continuar|Next]]
    <<case "Dutch">>    
        Deze passage is in het Nederlands.
        [[Doorgaan|Next]]
    <</switch>>
}}}
> ''Note:'' this last example can work with a Custom UI, where other UI elements need to be displayed in the chosen language.
\
<h3>Built-In Text and Settings</h3>\
If Built-In Text appears on the page (throug the Base UI or while using Settings or Saves), you will need to not only show the proper Story Text within passages, but the correct version of this Built-In text. This should be done via JavaScript and include [[l10nStrings|Local-L10n]].

While you may choose to built your own, TME has already created a custom version ([[code here|https://gist.github.com/tmedwards/33f3b4b7ada317fc9cc70aa8580c03f0]]), which includes a Setting for the player to switch from one language to another at any time, and explained below.
\
<h4>TME Internalization Code</h4>\
First, Copy-Paste the JavaScript code between the {{{:: Language Switching [script]}}} and {{{:: Start}}} lines into your project's JavaScript. Then, edit the code to fit your project's need. 
Two parts are the most important: changing the list of languages to choose from, and changing the Built-In text for each language. 
> ''Note:'' TME indicates where to edit the code with his {{{// ''Note:'' User customization required here.}}} comment.
{{{
    langs : {
        // ''Note:'' User customization required here.

		'Deutsche' : 'de',
		'English'  : 'en',
		'Français' : 'fr',
	},
}}}
In this part, you will want to list the languages you want to display, followed by a language code. This is required for the latter part of the code to work.
You will need to remove unnecessary cases as well. 

{{{
    switch (setup.i18n.langs[settings.lang]) {
		/*
			NOTE 1: User customization required here.
			NOTE 2: The `l10nStrings` properties shown in the cases below are an
			abbreviated set for example purposes.  There are many more properties
			within the `l10nStrings` object which you'll need to handle.
		*/
		case 'de':
			l10nStrings.settingsTitle = 'Einstellungen';
			l10nStrings.settingsOff   = 'Deaktivieren';
			l10nStrings.settingsOn    = 'Aktivieren';
			l10nStrings.settingsReset = 'Auf Standardeinstellung zurücksetzen';
			break;

		case 'fr':
			l10nStrings.settingsTitle = 'Paramètres';
			l10nStrings.settingsOff   = 'Désactiver';
			l10nStrings.settingsOn    = 'Activer';
			l10nStrings.settingsReset = 'Réinitialiser les paramètres par défaut';
			break;
	}
}}}
In this part, you will need to create the relevant cases with the language codes you created in the first part of the code, and list the relevant {{{l10nStrings}}}, so the Built-In text is shown in the chosen language.
The {{{case 'en':}}} is not listed here, since it already uses the Built-In text. If you want to change any of the [[l10nStrings|Local-L10n]] for English, you will need to add its case there.
> ''Note:'' you can find [[pre-translated packages|Local-Trans]] for the {{{l10nStrings}}}.
\
<h4>Setting up the Passages</h4>\
After the JavaScript code is set, you will have to set the passages. While similar to the first method, this way requires an empty passage to act as an anchor for the JavaScript code. From that anchor, the code will check the langugage chosen, add the relevant language code as a suffic to the anchor, and display the corresponding passage. 
For example, with the passage {{{Start}}}:
# Anchor {{{Start}}}
# Language: {{{English}}}
# Code into Suffix: {{{en}}} -> {{{_en}}}
# Passage to display: {{{Start_en}}}
So, you will need to create as many passages as there are defined languages, on top of the anchor (e.g. 3 languages = 4 passages). In a project, it will look like this:
{{{
    :: Start
        /* You can add code, macros and notes here, but no text will show. */
    
    :: Start_de
        Deutsche.
        [[Nächster|Next]]

    :: Start_en
        English.
        [[Next]]

    :: Start_fr
        Français.
        [[Prochain|Next]]

}}}
And so on and so forth...
> ''Note:'' The links to the next passage MUST go towards the anchor passage. If you link it to a suffixed passage ({{{Start_en}}}), it will add another suffix ({{{Start_en_en}}}) and display and error.
\
<h4>Language Choice at Start and Window Reload</h4>\
While the player can go into the settings to change the language of the game, it is also possible to give the player the option to choose a language as a starting passage. You will need to create a link, where you save the language choice in a setting variable.
{{{
    <<link "Français" "Next">>
        <<set settings.lang to "Français">>
        <<run Setting.save()>>
    <</link>>
}}}

If you are using Build-in elements or the Base UI, you will need to force a page refresh to ensure the next page loads {{{l10nStrings}}} correctly. This is because this method links the {{{l10nStrings}}} to the {{{lang}}} attribute attached to {{{<html>}}}, so changing the setting without changing the attribute is not enough for those elements. A page refresh, however, will be able to fix that.
This can be done by adding a tad extra code:
{{{
    <<link "Français" "Next">>
        <<set settings.lang to "Français">>
        <<run Setting.save()>>
        <<run window.location.reload()>>
    <</link>>
}}}
> ''Note:'' In a fully Custom UI, this //may// not be necessary. Though a refresh is still recommended.
\
<h4>Edit Settings Language or Other Custom Elements</h4>\
While TME's code allows the automation in displaying different version of Built-In text through the {{{l10nStrings}}}, you will need to do the same for custom text, such as Settings lables and descriptions, or whatever element you created on the page (e.g. Custom Menu in the UI). This, however, can easily be remedied with the {{{<<switch>>}}} macro.
> //In a Non-Story Passage://
{{{
    <<switch settings.lang>>
        <<case "English">>Settings
        <<case "Français">>Paramètres
    <</switch>>
}}}
> //In JavaScript Settings://
{{{
    Setting.addList('lang', {
		label    : `<<switch settings.lang>><<case "English">>Language<<case "Français">>Langue<</switch>>`,
        desc     : `<<switch settings.lang>><<case "English">>Select the wanted language<<case "Français">>Choisissez la langue voulue<</switch>>`,
		list     : setup.i18n.labels(),
		default  : setup.i18n.labelFromCode('en'),
		onInit   : initLanguage,
		onChange : changeLanguage
	});
}}}
> ''Note:'' the backticks {{{` `}}} allows the includions of SugarCube code inside JavaScript here.

<div id="link-menu">[[Back to the Localization Menu|Localization]] - [[Back to the Start Menu|Start]]</div>


:: Local-Trans [page] {"position":"3900,1200","size":"100,100"}
<h1>Localization, and Pre-Translated Templates</h1>
If your project is not in English and you want the Built-In text to reflect this, you will need to include and edit most of the [[l10nStrings|Local-L10n]] defined in the format's code. This can be done by Copy-Pasting into your JavaScript the code from [[this page|https://github.com/tmedwards/sugarcube-2/blob/develop/locale/l10n-template.js]] of the SugarCube repository, and edit the text.
> ''Note:'' you can forgo the first and last line of the code in that page (i.e. the {{{function()}}}).

There may be a faster way to translate this built-in text if your language is included in the following list:
{{{
    Arabic (ar-EG)
    Chinese (chs)
    German (de)
    Spanish (es-ES)/(es-UNKNOWN)
    French (fr)
    Italian (it-IT)
    Dutch (nl)
    Polish (pl)
    Portuguese (pt-BR)/(pt-PT)
    Russian (ru)
    Turk (tr)
}}}
> ''Note:'' this was last checked on 3-Dec-2023.
These languages already have a Localization package, downloadable on the [[SugarCube website|http://www.motoslave.net/sugarcube/2/#downloads]], that you can Copy-Paste without needing to translate.
> ''Note:'' you //may// want to check the translated version fits with your project, or whether some edits may be required.

If your language (or its regional version) is unfortunately not included in the list above, you will need to edit every {{{l10nStrings}}} manually.
> ''Note:'' You may also want to provide this translation to TME, so it may be included in this list for future users. This can be done by forking the GitHub repository, edit [[this folder|https://github.com/tmedwards/sugarcube-2/tree/master/locale]] to include your translation, and open a pull request.

<div id="link-menu">[[Back to the Localization Menu|Localization]] - [[Back to the Start Menu|Start]]</div>


:: Localization [chapter menu] {"position":"3800,1100","size":"200,100"}
<h1>Edit the Built-In Text or Change the Game's Language</h1>
Further customisation of a SugarCube project can be done with the {{{l10nStrings}}}, bits of JavaScript code that will change what text the Built-In elements will show. This can affect the buttons on the Sidebar, as well as the Restart, Saves, and Settings Popup. You can edit these strings to fit the vibe of your project, change its language entirely, or link them to a function to provide translation of your work. 

* [[l10nStrings, and How to Edit Them|Local-L10n]]
* [[Localization, and Pre-Translated Templates|Local-Trans]]
* [[Providing Multiple Languages In-Game|Local-Setting]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Long-Return-JS [page] {"position":"1800,1400","size":"100,100"}
<h1>Arbitrarily Long Returns</h1>
While the {{{<<return>>}}} macro or {{{previous()}}} function can be useful in sending the player back to the Story when visiting a Codex or Inventory page, it can also create inescapable loops, making it impossible for the player to go back to the Story. 

This can be solved in different ways:
* Using the {{{<<back>>}}} macro as is or the {{{Engine.backwards()}}} API,
** If multiple non-Story passages are clicked, the player will have to click each //Back// link.
* Creating Popups to display those non-Story passages,
** This will avoid navigating between passages.
* Using the JavaScript code below.
\
<h3>How to Code the Arbitrarily Long Return</h3>\
The //Arbitrarily Long Return// will record the last Story passage the player visited and store it in a variable, which can then be used inside a link, to send the player back to the Story. We will call here the variable {{{$return}}}.

The code also requires something to differenciate Story and non-Story passages: a tag. We will calle it here {{{noreturn}}}. 

When all your non-Story passages are tagged correctly, add this code in your JavaScript passage:
{{{
    $(document).on(':passagestart', function (ev) {
        if (!ev.passage.tags.includes('noreturn')) {
            State.variables.return = ev.passage.title;
        }
    });
}}}
> ''Note:'' you may change the name of the variable or the tag, if you prefer another name for either.
> If you want to use multiple tags instead of one, change {{{!ev.passage.tags.includes('one-tag')}}} into {{{!ev.passage.tags.includesAny('one-tag two-tags')}}}.

When this is set, you can add your links in the non-Story passages to send the player back to the Story:
* {{{[[Return|$return]]}}}
* {{{<<link "Return" $return>><</link>>}}}
* {{{<<return $return>>}}} / {{{<<return [[Return|$return]]>>}}}
* {{{<<back $return>>}}} / {{{<<back [[Return|$return]]>>}}}
> ''Note:'' since Twine automatically creates a new passage when using the {{{[[link]]}}} Markup, you will need to delete the new passage (here {{{$passage}}}) after coding the macros. Otherwise, the player will be sent to a blank page instead of the wanted passage. Or you can use the {{{<<link>>}}} macro instead.
\
<h3>A Note on Navigating to a Previous Passage</h3>\
Navigating back to a previously visited passage can be problematic, especially when code could run into issues when re-executing the content of the passage. Code may have some side-effect, like changing the value of a variable, or printing a different text on the page (ex: using the [[-visited() functions|Function-Pass-Tag]] to display variation). 

This can be avoided if you:
* ensure the passages contain no code with side effect,
* wrap the code in something to prevent re-execution,
** ex: {{{<if visited() is 1>>only show on the first view<</if>>}}}
* use the code above with {{{<<back>>}}} macro to send the player back to the passage, erasing the record of visiting the non-Story passages,
** ex: {{{<<back $return>>}}} / {{{<<back [[Return|$return]]>>}}}
* move the non-Story passages into a PopUp with the Dialog API.

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro [chapter menu] {"position":"2900,1800","size":"200,100"}
<h1>Creating your Own Macro</h1>
If you are looking to include a specific behaviour in your project that is not covered by the macros already built in SugarCube or custom ones available on the internet, you may want to consider creating your own.
SugarCube has many API to help you build your custom macros, or even chose to edit already-included macros.
> ''Note:'' Knowledge of JavaScript and understanding of the SugarCube format is very important here! 

* [[The Base APIs for Macros|Macro-API]] 
* [[Using Macro Context Objects in the handler|Macro-Context]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-API [page] {"position":"2900,1900","size":"100,100"}
<h1>The Base APIs for Macros</h1>
\
<h3>{{{Macro.add()}}}</h3>\
If you want to create a custom macro in SugarCube, you will need to use this API. Knowledge of JavaScript/jQuery and understanding on how SugarCube works is required.

The API has 2 parameters:
* {{{name}}}: the name (or array of names) of the macro to add
** must start with a letter, and consist of characters from the basic Latin alphabet (A → Z)
** you can also use numbers, underscores, and hyphens after the letter 
* {{{definition}}}: how the macro will behave (see below)
** to copy the definition of an existing macro, you can indicate the name of //that// macro instead.
{{{
    Macro.add(name , definition)

    Macro.add(['link', 'button'] , {/* definition code */})
→ <<link>> and <<button>> will behave the same

    Macro.add('run', 'set');
→ <<run>> is an alias of <<set>>
}}}

The definition of a macro will be an object with multiple properties:
* {{{skipArgs}}} (optional): disable processing arguments into a discrete form (i.e. use the whole expression as an arguments)
** you can indicate {{{true}}} to affect the macro and macro tags (if defined), or the array of tags where it is relevant.
* {{{tags}}} (optional): will signify that the macro is a container macro (with an opening and closing tag)
** you can indicate an array of child tags (sub-macro) or {{{null}}} for a simpler container
* {{{handler}}}: the macro's function, called without arguments
** you may need some [[macro context objects|Macro-Context]] to parse the function
> ''Note:'' you can add other properties for internal use (JavaScript knowledge required)
\
> //Example from the Documentation for a simple implementation of// {{{<<if>>}}}
{{{
    Macro.add('if', {
        skipArgs : true,
        tags     : ['elseif', 'else'],
        handler  : function () {
            try {
                for (var i = 0, len = this.payload.length; i < len; ++i) {
                    if (
                        this.payload[i].name === 'else' ||
                        !!Scripting.evalJavaScript(this.payload[i].args.full)
                    ) {
                        jQuery(this.output).wiki(this.payload[i].contents);
                        break;
                    }
                }
            }
            catch (ex) {
                return this.error('bad conditional expression: ' + ex.message);
            }
        }
    });
}}}
\
<h3>{{{Macro.delete()}}}</h3>\
Like the code implies, this API will remove any existed macro listed inside its parentheses.
This can be useful if you are looking to edit one of the Built-In [[macros|Macros List]] (by deleting the macro, and using {{{Macro.add()}}} to reintroduce it).
{{{
    Macro.delete("amacro")
    Macro.delete(["amacro", "bmacro"])
}}}
> ''Note:'' The macros targeted ''must be defined prior'' to using this API.
\
<h3>{{{Macro.has()}}}</h3>\
This API will check whether the indicated macro exists in the code. 
{{{
    Macro.has("print")
}}}
\
<h3>{{{Macro.get()}}}</h3>\
This API will look at the definition of the targeted macro, or return NULL if there is none.
The output of this API is an oject containing the definition of the macro
{{{
    Macro.get("print")
}}}
\
<h3>{{{Macro.tags.has()}}}</h3>\
This API will check whether the indicated macro tag exists - the macro tag being any child macro inside a container macro (e.g. {{{<<else>>}}} and {{{<<elseif>>}}} for {{{<<if>>}}}).
{{{
    Macro.tags.has("else")
}}}
\
<h3>{{{Macro.tags.get()}}}</h3>\
This API will return with the name of the all the macros which have included the targeted macro tag within their definition, or NULL on failure.
{{{
    Macro.tags.get("option")
→ will result in ['cycle', 'listbox']
}}}

<div id="link-menu">[[Back to the Macro API Menu|Macro]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Action-Choice [page] {"position":"1500,1200","size":"100,100"}
<h1>Single-Use Choice Lists</h1>
SugarCube has two macros that will automatically create lists of links, which will disappear when used: the {{{<<actions>>}}} and the {{{<<choice>>}}} macros. 
<<actions [[You won't be able to go there|LOL]] [[This one also doesn't work|LOL]] [[But here is a list of actions|LOL]]>>\
\
While both macros are coded and are formatted  the same, they actually work differently:
* {{{actions}}} will only remove the links where the passages have already been visited by the player.
* {{{choice}}} will deactivate all listed links when one of them is clicked.

The macros have only 1 argument:
* the passage(s) you want listed
{{{
Indicating the passages names only:  
	<<actions "Home" "Garden" "Cinema">>
→ this will list the passages as links 

Using the Link Markup:
	<<choice [[Go Home|Home]] [[Go to the Garden|Garden]] [[Go to the Cinema|Cinema]]>>

Using the Image Markup:
	<<actions [img[URL][PassageName]]>>
}}}

> ''Note:'' Both macros are quite limiting, both in terms of coding and player use. 
> If the player needs to go back to the passage where the macro is coded, or has visited every passage of the listed options, they will get stuck.
> If the code required is more complex than the base Link Markup (i.e. setting variables or conditional display of a link), you will get an error.
> In general, using regular links and manually formatting them into a list (with potential conditional statements) will be preferable. 

<div id="link-menu">[[Back to the Advanced interactive Macro Menu|Macro-Interact-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Adv [chapter menu] {"position":"800,1800","size":"200,100"}
<h1>Advanced Macros</h1>
Below you will find the last of the macros not discussed in the previous chapters. These macros are considered advanced, as they will either require some HTML/CSS knowledge, or full control of coding logics. They are usually not needed for basic projects. 

* [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]] 
* [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* [[Capturing the Value of a Variable|Macro-Capture]]
* [[Emulating PassageDone for one Passage|Macro-Done]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-ApPreRepCopy [page] {"position":"1400,1200","size":"100,100"}
<h1>DOM Macros and Revealing Text in Targeted Spots</h1>
DOM (Document Object Model) Macros target HTML elements on a page and affect the displayed content of that element. Those macros have the same functionality as the {{{<<link[insert-DOM]>>}}} [[macros|Macro-Link-AppPreRep]], but have more flexibility and do not require a link to work.

There are four main macros and one extra:
* {{{<<append>>}}}, which will add content after the targeted element. 
* {{{<<prepend>>}}}, which will add content before the targeted element.
* {{{<<replace>>}}}, which will replace the content of the targeted element.
* {{{<<remove>>}}}, which will remove the targeted element.
* {{{<<copy>>}}}, which will copy the content of the targeted element.
\
The macros have each argument:
* the element to target: which can be an {{{#id}}}, a {{{.class}}} or an HTML {{{element}}}, or a combination.
> ''Note:'' if you are targeting an element that is on the page multiple time, the macro will affect all these elements.
\
{{{
	<<append "#chocolate">>
		This text will append the element with the ID "chocolate".
		It will appear after the content inside that element.
	<</append>>
	
	<<prepend h1>>
		This text will prepend every h1 element.
		It will appear before the content inside that element.
	<</prepend>>
	
	<<replace ".dog">>
		This text will replace the content of 
		the element with the Class "dog".
	<</replace>>
	
	<<remove p.test>> 
→ will remove the element <p class="test"> from the page
	
	<<copy span#sweet>> 
→ will copy the content of the element <span id="sweet">
}}}
> ''Notes:'' if the element you are trying to target is //not// on the page, you will get an error.
> If you want to empty an element, it is best to use an empty {{{<<replace>>}}} than a {{{<<remove>>}}}.
\
<h3>Transition or no transition</h3>\
Like with their {{{<<link[insert-DOM]>>}}} counterparts, {{{<<append>>}}}, {{{<<prepend>>}}} and {{{<<replace>>}}} have an optional extra argument:
* {{{t8n}}} or {{{transition}}} (optional) whether to show the new text with a transition.
{{{
	<<append "#chocolate" t8n>>
		This text will append the element with the ID "chocolate".
		It will do so with a transition.
	<</append>>
}}}
<span id="coco">This is a sentence.</span>
	<<link "Replace as is">><<replace "#coco">>This replaces the element without a transition.<</replace>><</link>> | <<link "Replace with transition">><<replace "#coco" t8n>>This replaces the element with a transition.<</replace>><</link>>
\
<h3>In combination with other macros</h3>\
The DOM macros are best used in combination with other interative elements, like {{{<<link>>}}}, {{{<<button>>}}}, or even {{{<<timed>>}}}. Here are some examples:
<span id="dog">The dog is barking</span>.
	<<link "Throw a ball">><<append "#dog">> at the ball<</append>><</link>>
{{{
Code:
	<span id="dog">The dog is barking</span>.
	<<link "Throw a ball">><<apprend "#dog">> at the ball<</append>><</link>>
}}}
> //Replacing a list of links with more text://
{{{
	<span id="choices">
		<<link "Go Home">>
			<<replace "#choices">>
				You went home. Nothing much happened.
				[[Next|Next Day]] 
			<</replace>>
		<</link>>
		<<link "Go to the Cinema">>
			<<replace "#choices">>
				You went to the Cinema, and met Charlie after the movie ended.
				[[Next|Convo Charlie]] 
			<</replace>>
		<</link>>
	</span>
}}}
> //Copying and Pasting://
{{{
	This is a <span class="one">terrible</span> idea!
	Well, I think this is <span class="two">a grand idea!</span>

	<<link "Or is it?">>
		<<replace ".two">>actuall a <<copy ".one">> as well...<</replace>>
	<</link>>
}}}
\
<h3>An important note on DOM Macros</h3>\
Since the macros require the targeted element to be on the page, they ''cannot'' be coded as is on the page, due to how the [[page renders|SP-PassageReady-Done]]. As such, you will need either to:
* use the {{{<<link>>}}} or {{{<<button>>}}} macro, letting the player interact with the element,
* use the {{{<<done>>}}} [[macro|Macro-Done]], which will trigger when the page is fully rendered,
* use the {{{<<timed>>}}} [[macro|Macro-Timed]], which will delay the trigger long after the page is rendered,
* code it inside the {{{PassageDone}}} [[special passage|SP-PassageReady-Done]] (same as the {{{<<done>>}}} macro, but will trigger at every passage render).

<div id="link-menu">[[Back to the Advanced interactive Macro Menu|Macro-Interact-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Audio [chapter menu] {"position":"2900,1100","size":"200,100"}
<h1>Adding Sound with the Audio Macros</h1>
Adding any asset to a project can be daunting, especially when it can involve so many macros. But adding audio is actually quite simple and, at the minimum, only requires the use of 2 macros: {{{<<audio>>}}} and {{{<<cacheaudio>>}}}.

* [[Setting up the Audio Tracks|CacheAudio]]
* [[Create Track Groups and Playlists|Macro-Group-Playlist]]
* [[Playing Tracks in a Passage|Audio-Macro]]
* [[Other Audio Macros|Audio-Other]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-Back-Return [page] {"position":"1700,1400","size":"100,100"}
<h1>Going Back or Returning to a Passage with a Special Link</h1>
Whether it is to return to the story from a codex page, or going back to a certain location, the {{{<<back>>}}} and {{{<<return>>}}} macros create an easy link towards previously visited passages.
> ''Note:'' If the player has not visited the coded passage, they //will// get an error message.
\
Both macros are formatted the same way and only requires 1 argument:
* (optional) the text to display on the page, the passage to send the player, or the image to show
{{{
→ Going back one passage:
    <<back>>
    <<return>>

→ Going back one passage, showing the text "Home" in the link:
    <<back "Home">>
    <<return "Home">>

→ Going back to a passage with the Link Markup:
    <<back [[Home]]>>
    <<return [[Going Home|Home]]>>

→ Going back to a passage with an image:
    <<back [img[URL]]>>
    <<return [img[URL][Home]]>>  
}}}
> ''Note:'' Going back one passage is essentiall the same as {{{[[Text|previous()]]}}}, see the {{{previous()}}} [[function|Functions]].
\
<h3>{{{<<back>>}}} or {{{<<return>>}}}?</h3>\
Though they seem to perfrom the same action (going to a specific passage), the macros behave differently under the hood. The {{{<<back>>}}} macro goes back in the player history, undoing any action made between the current passage and the targeted one. The {{{<<return>>}}} macro goes to the passage by going forward in the player history (like a regular {{{<<link>>}}}), keeping any action performed between the two passages safe.

For example, the player goes to "NPC Codex Page" from the "Tavern" passage. Their history would look like this:
{{{State.history = ["Tavern", "NPC Codex Page"]}}}
In the Codex page, if the player clicks on the {{{<<return>>}}} macro, the history would look liks this:
{{{State.history = ["Tavern", "NPC Codex Page", "Tavern"]}}}
On the other hand, if the player clicks on the {{{<<back>>}}} macro, the history would look like this:
{{{State.history = ["Tavern"]}}}
\
<h3>Using a variable as the targeted passage</h3>\
If your project includes Codex pages, and you want to send the player back to the story with one easy link, you can use the [[Long Arbitrarily Return|Long-Return-JS]] in combination with the {{{<<back>>}}} or {{{<<return>>}}} macros. Thanks to that code, you can include a variable where the last visited Story Passage is stored.
This method is particularly helpful to avoid neverending loops.
{{{
    <<back [[Return to the Story|$passage]]>>
    <<return [[Return to the Story|$passage]]>>
}}}
> ''Note:'' since Twine automatically creates a new passage when using the {{{[[link]]}}} Markup, you will need to delete the new passage (here {{{$passage}}}) after coding the macros. Otherwise, the player will be sent to a blank page instead of the wanted passage. Or you can use the {{{<<link>>}}} macro instead.
> {{{<<link "Return to the Story" $passage>><</link>>}}}

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Basic [chapter menu] {"position":"1100,600","size":"200,100"}
<h1>Going Further with the Basics</h1>
After [[linking passages|Macro-Link-Basic]], [[setting variables|Macro-Set-Basic]], and creating some simple [[conditional statements|Macro-If-Basic]], you would have the basis required to make a textual game. You can add onto this base, with more complex use of those macros, as well as including a few more related ones. This chapter is meant to expand the use of the basic macros.

* [[Displaying more than text in Links|Macro-Link]]  
* [[Setting and Changing Variables|Macro-Set]]
* [[Unsetting Variables|Macro-Unset]]  
* [[More Conditional Statements|Macro-If]]   
* [[Display Variables, the Print Macro and Variants|Macro-Print]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-Capture [page] {"position":"800,2000","size":"100,100"}
<h1>Capturing the Value of a Variable</h1>
The {{{<<capture>>}}} macro is considered one of the hardest macro to grasp for most Twine users, as its use is pretty limited (to the more complex form of code). Essentially, the macro allows to create a copy of the value of a variable, for the current passage, regardless of whatever happens to that variable later on.

The macro is most useful with interactive macros, loop macros, or delayed ones.

Assuming {{{_n = 1}}} at the start, but changing later down the code:<<nobr>>
	<<set _n = 1>>
	<<button "Non-Captured Value">>
		<<run alert(_n)>>
	<</button>>
	<<capture _n>>
        <<button "Captured Value">>
            <<run alert(_n)>>
        <</button>>
	<</capture>>
	<<set _n = 4>>
<</nobr>>

The macro has 1 argument:
* {{{variableList}}}: the variable, or list of variables, whose value need to be captured 
** the macro will work with both {{{$var}}} and {{{_temp}}}
{{{
    <<capture $var>>...<</capture>>
    <<capture _var, $var, $varvar>>...<</capture>>
}}}
\
<h3>Some Examples</h3>\
> //Below is the code for the interactive example at the top of this passage://
{{{
    <<nobr>>
        <<set _n = 1>>
        <<button "Non-Captured Value">>
            <<run alert(_n)>>
        <</button>>
        <<capture _n>>
            <<button "Captured Value">>
                <<run alert(_n)>>
            <</button>>
        <</capture>>
        <<set _n = 4>>
    <</nobr>>
}}}
While the value of {{{_n}}} changes, only the first button will show the updated value when clicked, as it will take the most recent value of {{{_n}}} (" 4 "). The second button, on the other hand, copied the value of {{{_n}}} before the variable changed (" 1 "), and kept that value.

> //A more complex example involving a loop and an interactive element://
<<nobr>><<set _what to ["a crab rangoon", "a gaggle of geese", "an aardvark", "the world's smallest violin"]>>
<<for _i to 0; _i lt _what.length; _i++>>
	<<capture _i>>
		I spy with my little <<linkappend "eye" t8n>>, _what[_i]<</linkappend>>.
	<</capture>>
<</for>><</nobr>>
{{{
    <<set _what to [
        "a crab rangoon",
        "a gaggle of geese",
        "an aardvark",
        "the world's smallest violin"
    ]>>
    <<for _i to 0; _i lt _what.length; _i++>>
        <<capture _i>>
            I spy with my little <<linkappend "eye" t8n>>, _what[_i]<</linkappend>>.
        <</capture>>
    <</for>>
}}}
For each element of the array {{{_what}}}, the loop will create a new sentence, within which is linked a different variable of that array.

<div id="link-menu">[[Back to the Advanced Macro Menu|Macro-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-CheckRadio [page] {"position":"1500,800","size":"100,100"}
<h1>Multi or Single Option Choices</h1>
Anoter way to display choice options aside from link can be found with the {{{<<checkbox>>}}} and {{{<<radiobutton>>}}} macros. The first allows the player to choose multiple options from a list, while the second only give the player one option to select. Both let player make choices without moving to a new passage.
These macros are great for customising characters!
\
<h3>{{{<<checkbox>>}}}</h3>\
The {{{<<checkbox>>}}} creates a visual checkbox, which will modify the value of a variable, depending on whether the box is checked or not.

<<checkbox "_warning" false true>> I've read the warnings...

This macro has 5 arguments:
* the variable saving the player's choice
* the value to give the variable when the checkbox is //unchecked//
* the value to give the variable when the checkbox is //checked//
* {{{autocheck}}} (optional): whether the checkbox should match the state of the named variable 
** this will check the box if the variable has the same current value as when the checkbox is checked
* {{{checked}}} (optional): whether the checkbox should be checked when the passage loads
{{{
    <<checkbox "_example" false true autocheck>> Displayed Text
    <<checkbox "_object.property" 1 0 autocheck>> Displayed Text
    <<checkbox "_array[0]" "Tim" "Tom" autocheck checked>> Displayed Text
}}}
> ''Note:'' unlike {{{<<radiobutton>>}}}, you cannot use the same variable (or array position or object property) for more than one {{{<<checkbox>>}}}. Otherwsie, the last iteration with that re-used variable will override any previous choice.
\
<h3>{{{<<radiobutton>>}}}</h3>\
The {{{<<radiobutton>>}}} creates a visual radio button, which will modify the value of a variable. You can use multiple of these linked to one variable to create a group of options.

<<radiobutton "_pieBlueberry" false>> I've read the warnings...

This macro has 4 arguments:
* the variable saving the player's choice
* the value to give the variable when the option is //checked//
* {{{autocheck}}} (optional): whether the radiobutton should match the state of the named variable 
** this will check the option with the same current value of the variable 
* {{{checked}}} (optional): whether the option should be checked from the start (only for one per group)
{{{
    <<radiobutton "_exmaple" false>> Displayed Text
    <<radiobutton "_object.property" 1>> Displayed Text
    <<radiobutton "_array[0]" "Tim" checked>> Displayed Text

A radiobutton group:
    <<radiobutton "$pie" "blueberry" checked>> Blueberry?
    <<radiobutton "$pie" "cherry">> Cherry?
    <<radiobutton "$pie" "coconut cream">> Coconut cream?
}}}
\
<h3>Using a {{{<label>}}}</h3>\
For accessiblity reasons, it is recommended to wrap each option of the macros above with the HTML markup {{{<label>}}}. Rather than forcing the player to click on a small checkbox or radiobutton, they will be able to click on the displayed text to trigger the macro.
{{{
    <label><<checkbox "_example" false true autocheck>> Displayed Text</label>
    <label><<radiobutton "_exmaple" false>> Displayed Text</label>
}}}
<label><<checkbox "_example" false true autocheck>> Displayed Text</label>
<label><<radiobutton "_exmaple" false>> Displayed Text</label>

<div id="link-menu">[[Back to the Interactive Macro Menu|Macro-Interact]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Context [page] {"position":"3000,1900","size":"100,100"}
<h1>Using Macro Context Objects in the handler</h1>
While Macro [[handlers|Macro-API]] are called with no arguments, you can use {{{this}}} and the context object properties below to refer to different components of the macro (e.g. macro arguments and expressions, data, methods).
\
<h3>Refering to the Macro Arguments and Expressions</h3>\
\
<h4>{{{<MacroContext>.args}}}</h4>\
This property will refer to the arguments you can indicate in a macro. It is saved as an array.
> Assuming that {{{<<someMacro "a" "b" "c">>}}}:
{{{
    this.args.length  → 3
    this.args[0]      → 'a'
    this.args[1]      → 'b'
    this.args[2]      → 'c'
}}}
\
<h4>{{{<MacroContext>.args.full}}}</h4>\
This property will convert the argument into native JavaScript code. It is useful for expression arguments.
> Assuming that {{{<<if "a" is "b">>}}}:
{{{
    this.args.full  → '"a" === "b"'
}}}
\
<h4>{{{<MacroContext>.args.raw}}}</h4>\
This property will take the unprocessed expression.
> Assuming that {{{<<if "a" is "b">>}}}:
{{{
    this.args.raw  → '"a" is "b"'
}}}
\
<h3>Referencing the Macro Information</h3>\
\
<h4>{{{<MacroContext>.name}}}</h4>\
This property will refer to the name of the macro.
> Assuming that {{{<<someMacro...>>}}}
{{{
    this.name  → 'someMacro'
}}}
\
<h4>{{{<MacroContext>.self}}}</h4>\
This property will refer to the definition of the macro, indicated in the second property of {{{Macro.add()}}}
{{{
    this.self → { /* definition object */ }
}}}
\
<h4>{{{<MacroContext>.parent}}}</h4>\
This property will refer to the macro's parent (or null, if it does not have a parent).
{{{
    this.parent → /* name of parent or NULL */
}}}

\
<h4>{{{<MacroContext>.output}}}</h4>\
This property references the output element, as an HTML Elment object.
{{{
    this.output
}}}
\
<h4>{{{<MacroContext>.parser}}}</h4>\
This property will refer to the parser instance that generated the macro call.
{{{
    this.parser
}}}
\
<h4>{{{<MacroContext>.payload}}}</h4>\
This property is only useful for container macros, and will not work otherwise. The text of the macro is parsed into discrete payload objects by tag, each having the following properties:
* {{{name}}}: name of the current tag 
* {{{args}}}: similar to {{{<MacroContext>.args}}}, but regarding the current tag
** {{{args.full}}} will be similar to {{{<MacroContext>.args.full}}}, and {{{args.raw}}} to {{{<MacroContext>.args.raw.}}}
* {{{contents}}}: the content between the current tag and the next.
{{{
    this.payload 
    this.payload.name 
    this.payload.args 
    this.payload.contents

    this.payload[0] → the text between the first and second tag of the macro
}}}
\
<h3>Macro Context Methods</h3>\
\
<h4>{{{<MacroContext>.contextHas()}}}</h4>\
This method will look at whether the macro's parent(s) passed the test implemented by the defined filter function.
> //Example for// {{{<<break>>}}}:
{{{
    if (this.contextHas(ctx => ctx.name === 'for')) {
        TempState.break = this.name === 'continue' ? 1 : 2;
    }
    else {
        return this.error('must only be used in conjunction with its parent macro <<for>>');
    }
→ if <<break>> is not used inside a <<for>>, you will get an error
}}}
\
<h4>{{{<MacroContext>.contextSelect()}}} and {{{<MacroContext>.contextSelectAll()}}}</h4>\
These two methods work similarly to {{{<MacroContext>.contextHas()}}}, in that it will check whether the macro's ancestor(s) passed the test implemented byt the given filter function.
If passed:
* {{{<MacroContext>.contextSelect()}}} will return an object of the first ancestor 
* {{{<MacroContext>.contextSelectAll()}}} will return an array of objects of all ancestors 
If failed:
* {{{<MacroContext>.contextSelect()}}} will return NULL
* {{{<MacroContext>.contextSelectAll()}}} will return an empty array 
> //Examples://
{{{
    var includeAncestor = function (ctx) { return ctx.name === "include"; };
    this.contextSelect(includeAncestor);  
→ Returns the first <<include>> macro ancestor

    var includeAncestor = function (ctx) { return ctx.name === "include"; };
    this.contextSelectAll(includeAncestor);  
→ Returns an array of all <<include>> macro ancestors
}}}
\
<h4>{{{<MacroContext>.createShadowWrapper()}}}</h4>\
> ''Forenote:'' this method is only useful when you have asynchronous callback that invokes code/content that needs to access story and/or temporary variables shadowed by {{{<<capture>>}}}. ''Do not use this if you don't know what this means''. /* 
    Honestly, I have no idea what this does really, but it's macro relevant I guess.
    TME (the creator of SugarCube) REALLY does not recommend using this API unless you are absolutely sure what you are doing. And even then, cases where you would need it are super small... 
*/
This method creates a callback wrapper around the given parameters, which are themselves callbacks, that shadows variables, as necessary, for its first callback parameter. You can use up to 3 parameters (all functions):
* {{{callback}}}: The main callback function, executed when the wrapper is invoked. Receives access to variable shadows.
* {{{doneCallback}}}: (optional) The finalization callback function, executed after the main callback returns. Does not receive access to variable shadows.
* {{{startCallback}}}: (optional) The initialization callback function, executed before the main callback is invoked. Does not receive access to variable shadows.
\
> Basic Example:
{{{
    $someElement.on(
        'some_event', 
        this.createShadowWrapper(function (ev) {
            /* main asynchronous code */
        })
    );
}}}
> //With an optional doneCallback//
{{{
    $someElement.on('some_event', this.createShadowWrapper(
        function (ev) {
            /* main asynchronous code */
        },
        function (ev) {
            /* asynchronous code invoked after the main code */
        }
    ));
}}}
> //With an optional doneCallback and startCallback//
{{{
    $someElement.on('some_event', this.createShadowWrapper(
        function (ev) {
            /* main asynchronous code */
        },
        function (ev) {
            /* asynchronous code invoked after the main code */
        },
        function (ev) {
            /* asynchronous code invoked before the main code */
        }
    ));
}}}
> //Example from the macro// {{{<<link>>}}}:
{{{
    $link
		.addClass(`macro-${this.name}`)
		.ariaClick({
			namespace : '.macros',
			role      : passage != null ? 'link' : 'button', // equality for null
			one       : passage != null // lazy equality for null
		}, this.createShadowWrapper(
			this.payload[0].contents !== ''
				? () => Wikifier.wikifyEval(this.payload[0].contents.trim())
				: null,
			passage != null // lazy equality for null
				? () => Engine.play(passage)
				: null
		))
		.appendTo(this.output);

→ the code will look at whether there is code to trigger inside the <<link>> macro 
    then it will look at whether there is a passage to go to
}}}

\
<h4>{{{<MacroContext>.error()}}}</h4>\
This property will render an error message for then the macro can't be processed. It requires an error message in the form of a string.
> //Assugming that// {{{<<someMacro …>>}}}
{{{
    return this.error("oops");

→ will output on the page as:
    '<<someMacro>>: oops'
}}}
The message can include full expressions, including pure JavaScript rendering.
> //Error message from// {{{<<if>>}}}
{{{
    return this.error(`whitespace is not allowed between the "else" and "if" in <<elseif>> clause${i > 0 ? ' (#' + i + ')' : ''}`)
}}}

<div id="link-menu">[[Back to the Macro API Menu|Macro]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Conv [chapter menu] {"position":"1700,1100","size":"200,100"}
<h1>Macros of Convenience</h1>
Whether for a more convinent way to format code and passages, send players to a specific part of the story, or include more JavaScript in the story, SugarCube has a handful of very convenient macros. 

* [[An Alternative to Conditional Statements|Macro-Switch]] 
* [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
* [[Including a Passage inside another|Macro-Include]] 
* [[Creating and Using a Widget|Macro-Widget]] 
* [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
** [[Arbitrarily Long Returns|Long-Return-JS]]
* [[Sending the Player to a Passage|Macro-Goto]]
* [[Using JavaScript in the Passage|Macro-Script-Run]]  

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-Cycle [page] {"position":"1400,700","size":"100,100"}
<h1>Cycles and Conditional Options</h1>
Cycles can be a fun way to have the player interact with the story, and give a different way to format choices or display different variations. The {{{<<cycle>>}}} macro can be useful to lists MC characteristics options, or environmental observations.

I looked at her and she <<cycle "_example">>
	<<option "seemed fine">>
	<<option "was distraught">>
	<<option "was in tears">>
	<<option "smiled">>
<</cycle>>.

The macro has two sets of arguments: one for the container {{{<<cycle>>}}} and one set for the {{{<<option>>}}}/{{{<<optionfrom>>}}}.
* {{{<<cycle>>}}}:
** the variable to save the player's choice
** {{{once}}} (optional): whether the cycle stops at the last option
** {{{autoselect}}} (optional): will autoselect the option from the list, if the value of the variable is included in the list of options
* {{{<<option>>}}}
** the name of the option.
** (optional) the value of the option (if different from the name).
* {{{<<optionfrom>>}}}:
** the variable containing the list of options (array or object).

Assuming that the array {{{_pieOptions = ["blueberry", "cherry", "coconut cream"]}}}:
{{{
    <<cycle "_example" autoselect>>
        <<option "seemed fine" false>>
        <<option "was distraught">>
        <<option "was in tears" 0>>
        <<option "smiled" "bad">>
    <</cycle>>
→ this cycle is the same as shown above, aside from most options having different values from their labels.

    <<cycle "$pie" once autoselect>>
        <<optionsfrom _pieOptions>>
    <</cycle>>
→ this cycle will display the options from the array _pieOptions, and will stop when reaching the end.
}}}
\
<h3>Why {{{<<optionfrom>>}}} instead of {{{<<option>>}}}?</h3>\
The reason for choosing one rather than the other will depend on preferences and situations. 

{{{<<optionfrom>>}}} allows for cleaner/less code on the page, as well as giving the option to provide different options to players depending on how the list variable is set before use. While the {{{<<cycle>>}}} macro is a container, it will not accept any other macros inside, except the option ones. This means you cannot add or remove options within the cycle code (i.e. you cannot do {{{<<if $var>><<option "value">><</if>>}}}).
> ''Note:'' you can also hide all your cycles inside [[widgets|Macro-Widget]].
\
If the list of options is set ahead of the passage, and unchanging, {{{<<option>>}}} might be the easiest way to go. If the list's content is conditional on specific paths, then {{{<<optionfrom>>}}} might be more fitting.
> ''Note:'' You can also have different {{{<<cycle>>}}}/{{{<<option>>}}} combo for each situation...
\
With {{{<<optionfrom>>}}}, you also have two options to set the cycle: using an array or an object. The first is the simplest, as you set a list of options inside an array, but it will mean the displayed text will also be the value of the cycled variable. On the other hand, objects seem a bit more complex to set up, but will allow you to display a different text than the value. 
For example, assuming that:
{{{
    _pieOptionsArray = ["blueberry", "cherry", "coconut cream"]

    _pieOptionsObject = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }
}}}
<<set _pieOptions = ["blueberry", "cherry", "coconut cream"], _pieOptions2 = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }>>\
The array will show : <<cycle "_pie" autoselect>>
	<<optionsfrom _pieOptions>>
<</cycle>> (value of the first option: _pie)
While the object will show: <<cycle "_pie2" autoselect>>
	<<optionsfrom _pieOptions2>>
<</cycle>> (value of the first option: _pie2)

> ''Note on the cycle macro:'' this macro has some issues with accessiblity (screen readers). While this can be remedied with some [[extra code|Accessibility-Cycle]], this should be taken into account when creating a project.

<div id="link-menu">[[Back to the Interactive Macro Menu|Macro-Interact]] - [[Back to the Start Menu|Start]]</div>


:: Macro-DOM-Adv [page] {"position":"800,1900","size":"100,100"}
<h1>DOM Macros and Changing Class of an Element</h1>
As [[DOM Macros|Macro-ApPreRepCopy]] can affect the content displayed on the page, so can they change //how// elements on the page look, by adding or removing an HTML class from that element. There are three macros in this set:
* {{{<<addclass>>}}}, which will add a class to the targeted element.
* {{{<<removeclass>>}}}, which will remove a class from the targeted element.
* {{{<<toggleclass>>}}}, which will either add or remove a class from the targeted element, depending on whether the class was there in the first place.

<<button "Click Me to Change the Title Colour!">>
    <<toggleclass ".passage h1" "colour">>
<</button>>

The macros have 2 arguments:
* {{{selector}}}, or the targeted element 
* {{{className(s)}}}, the classe(s) to add/remove/toggle from the element 
** This one is optional for {{{<<removeclass>>}}} 
\
The macro will target any element you indicate in the first argument. It can be as simple as {{{h1}}}, which will target //all// large header on the page, to more specific like {{{.passage h1}}}, which will only target the large header in the passage.
{{{
    <<addclass "h1" "colour">> 
→ will add ".colour" to the "h1" element

    <<removeclass "#passages">>
→ will remove ALL classes from "#passages"

    <<toggleclass ".dog" "sweet">>
→ will add/remove the class ".sweet" from the ".dog" element
}}}
> ''Note:'' the element indicated in the macro should be on the page. Otherwise, this will trigger an error.
> When using {{{<<removeclass>>}}} to remove classes, please note that it can also affect class created by the Passage Tags, or in JavaScript settings. You can check what class were removed with the macro via the Inspect Tool of your browser.
\
<h3>An important note on DOM Macros</h3>\
Since the macros require the targeted element to be on the page, they ''cannot'' be coded as is on the page, due to how the [[page renders|SP-PassageReady-Done]]. As such, you will need either to:
* use the {{{<<link>>}}} or {{{<<button>>}}} macro, letting the player interact with the element,
* use the {{{<<done>>}}} macro, which will trigger when the page is fully rendered,
* use the {{{<<timed>>}}} macro, which will trigger long after the page is rendered,
* code it in the {{{PassageDone}}} special passage (same as the {{{<<done>>}}} macro, but will trigger at every passage render).

<div id="link-menu">[[Back to the Advanced Macro Menu|Macro-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Done [page] {"position":"900,2000","size":"100,100"}
<h1>Emulating PassageDone for one Passage</h1>
While it is possible to target one single passage with the [[Special Passage|SP-PassageReady-Done]] {{{PassageDone}}}, the same can be achieved with the {{{<<done>>}}} macro inside that particular passage. Instead of having the code run on every visited passage, it will only trigger where {{{<<done>>}}} has been coded.
> ''Note'': for multiple passages use, {{{PassageDone}}} should be preferred. Or even assigning code to the {{{:passagedisplay}}} [[event|Events-Passage]] in the JavaScript.

This macro is especially useful to trigger DOM Macros whether it is [[adding elements to the page|Macro-ApPreRepCopy]] or [[changing the class of that element|Macro-DOM-Adv]].
> ''Note:'' the player will not see any delay between the rendering of the passage and triggering the macro. For delayed needs, use the {{{<<timed>>}}} macro.
{{{
    @@#spy;@@

    <<done>>
        <<replace "#spy">>I spy with my little eye, a crab rangoon.<</replace>>
    <</done>>
}}}

<div id="link-menu">[[Back to the Advanced Macro Menu|Macro-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-For-Repeat [page] {"position":"900,1900","size":"100,100"}
<h1>Loops and Repeats - Two Ways</h1>
There may be situations and mechanics that will require a looping function to repeat code or print elements on the page. This can be done with the {{{<<for>>}}} and {{{<<repeat>>}}} macros.

While both {{{<<for>>}}} and {{{<<repeat>>}}} will loop and repeat their action, they do it in different ways. The {{{<<repeat>>}}} macro will trigger its content at an indicated interval until stopped, while the {{{<<for>>}}} macro will trigger an indicated amount of time (almost) at once. Whether time is involved is the biggest difference.
\
<h3>The {{{<<repeat>>}}} macro</h3>\
The macro will repeatedly execute its content after the indicated delay. It can be useful as a countdown, check the value of a variable before triggering some code, or replace elements on the page. It can be stopped either by using the {{{<<stop>>}}} macro inside the container or moving to a new passage.

The macro has 2 arguments:
* {{{delay}}}, or the interval between each iteration, should be indicated in seconds or milliseconds.
** the minimum is 40ms
* {{{t8n}}}/{{{transition}}} (optional), whether any insertion on the page should be done with an animation 
{{{
    <<repeat 1s t8n>> 
        /* Your Code */ 
    <</repeat>>
}}}

When creating a loop, it should be remembered that the macro ''will not stop'' until it encounters a {{{<<stop>>}}} macro within the code (or when moving to a different passage).

An example of a loop, as a countdown timer, updating the text every second, before sending the player to an end passage:
{{{
    <<set $seconds to 10>>

    Countdown: <span id="countdown">$seconds seconds</span> remaining!

	<<repeat 1s>>
		<<set $seconds to -->>
		<<if $seconds is 1>>
            <<replace "#countdown">>$seconds second<</replace>>
        <<elseif $seconds gt 0>>
			<<replace "#countdown">>$seconds seconds<</replace>>
		<<else>>
			<<replace "#countdown">>Too Late<</replace>>
            <<timed 3s>>
                <<goto "Too Late END">>
            <</timed>>
			<<stop>>
		<</if>>
	<</repeat>>
}}}
\
<h3>The {{{<<for>>}}} macro</h3>\
The macro will repeatedly execute its content for a certain amount of times, set in three forms: conditional, 3-part conditional, and range. Unless used in combination with the submacros {{{<<break>>}}} and {{{<<continue>>}}}, the loop will execute until the condition in the form is fulfilled.
> ''Note:'' while the macro does not allow for a set number in the macro ({{{<<for 4>>}}} will give an error), there is a way to circumvent it (see end).

This macro is quite useful in displaying content of an inventory, or doing code loop.
\
<h4>The Conditional forms</h4>\
The conditional forms come in two ways: simple and 3-part. They will execute the content of the macro until the condition is no longer true.
{{{<<for [init]; [conditional]; [post]>>}}}

For this form, the macro has three arguments:
* {{{init}}} (optional), or the initialisation of a counter variable (ex: {{{_i}}})
* {{{conditional}}}, or the conditional expression which should be check at the start of every loop, triggering the code until it is no longer true
* {{{post}}} (optional), the change of value of the counter variable, happening at the end of each loop.
> ''Note:'' the arguments HAVE to be seperated by a semi-colon {{{ ; }}}
\
> //Single Conditional://
{{{
    <<set _filling to ["Apple", "Chocolate", "Cherry", "Pumpkin"]>>
    <<for _done isnot true>>
        <<if _filling.length is 0>>
            <<set _done to true>>
            The Pies Have ALL Been Eaten!
        <<else>>
            <<set _taste to _filling.pluck()>>
            You eat the _taste Pie!
        <</if>>
    <</for>>

→ This will print //You eat the [type] Pie!// untill all {{{_filling}}} have been listed.
}}}
> //3-Part Conditional://
{{{
    <<set $dwarves to ["Doc", "Dopey", "Bashful", "Grumpy", "Sneezy", "Sleepy", "Happy"]>>

    <ol>
        <<for _i to 0; _i lt $dwarves.length; _i++>>
            <li> $dwarves[_i]</li>
        <</for>>
    </ol>

→ This will print the array as an ordered list
}}}
\
<h4>The Range form</h4>\
This form will go through all entries of a given collection (ex: values of an array), and stop executing the content when the collection has run out.

There are 4 arguments for this form:
* {{{keyVariable}}} (optional), a temporary variable holding the loop iteration number (starting at 0)
* {{{valueVariable}}}, as a {{{$var}}} or {{{_temp}}}, holding the value of the current loop iteration
* {{{range}}}, required to tell the system this is a range form
* {{{collection}}}, the variable holding as many entries are there will be iterations
** among others, it will accept: arrays, objects, strings (as an array of characters)
{{{
    <<set $dwarves to ["Doc", "Dopey", "Bashful", "Grumpy", "Sneezy", "Sleepy", "Happy"]>>

    <<for _i, _name range $dwarves>>
        <<print _i + 1>>. _name
    <</for>>

→ will print the content of the array as a list (#. value)
}}}
\
<h4>Using a set number as the amount of iteration</h4>\
While it is not possible to simply do {{{<<for 4>>}}} to have the loop onyl run four times, you can circumvent this in two ways:
* use Maliface's {{{<<times>>}}} [[Custom Macro|https://github.com/MalifaciousGames/Mali-s-Macros#the-times-macro]]
* use a widget to "hide" the 3-part contidional form (below)
{{{
    :: Widget [widget]
    <<widget "times" container>>
        <<for _i = 0; _i lt _args[0]; _i++>>
            _contents
        <</for>>
    <</widget>>

    :: Story Passage
    <<times 5>>
        → Run code or output stuff five times
    <</times>>
}}}
\
<h4>Using {{{<<break>>}}} and {{{<<continue>>}}}</h4>\
The {{{<<for>>}}} macro has also two submacros to skip finishing an iteration or stop the loop altogether before it is completed, respectively with the {{{<<continue>>}}} and {{{<<break>>}}} macros. 

For example, the code below is set to run 10 times, and will check if the number of iteration and:
* not print a number if the iteration is 2, 3, or 5
* stop the looping altogether if the iteration is greater than 8 
{{{
    <<for _i to 0; _i lt 10; _i++>>
        <<if [2,3,5].includes(_i)>>
            <<continue>>
        <<elseif _i gt 8>>
            <<break>>
        <</if>>
        <<print _i>>
    <<for>>

→ Printed output:
    0 1 4 6 7 8
}}}

<div id="link-menu">[[Back to the Advanced Macro Menu|Macro-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Goto [page] {"position":"1700,1500","size":"100,100"}
<h1>Sending the Player to a Passage</h1>
The [[Link Markup|Markup-Link]] and {{{<<link>>}}} [[macro|Macro-Link]] are not the only macros to send the player to a specific passage. You also have {{{<<goto>>}}}.
While it should not be overused, as it adds to the player history, and is alreayd included as an argument in the {{{<<link>>}}} macro, there are situations where {{{<<goto>>}}} is necessary. Like the destination of the next passage being conditional.
> ''Note:'' using {{{<<goto>>}}} outside of a macro (like a {{{<<link>>}}}, {{{<<button>>}}}, or {{{<<timed>>}}}) will send the player to that passage without loading the previous passage completely. Both the incomplete and new passage will be included in the player's visited passages.

The macro has 1 argument:
* the name of the wanted passage, variable or function
{{{
    <<goto "PassageName">>
    <<goto [[PassageName]]>> ← will create an arrow in Twine
    <<goto $passage>>
    <<goto [[$passage]]>>
    <<goto `previous()`>>
}}}
> ''Note:'' on Twine, using the Link Markup with the variable will automatically create a passage. When using the variable or function, don't forget to remove that newly created passage.
\
> //Some example of uses://
{{{
    <<link "Attack!">>
        <<if $attack gt 5>>
            <<goto "Success">>
        <<else>>
            <<goto "Failure">>
        <</if>>
    <</link>>

    <<timed 3s>>
        <<goto "No Action">>
    <</timed>>
}}}
\
> ''Note:'' in some instances, it is preferrable to use the [[Navigation Override|Basic-Config-Navig]] instead of {{{<<goto>>}}}.

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Group-Playlist [page] {"position":"3000,1200","size":"100,100"}
<h1>Create Track Groups and Playlists</h1>
On top of adding audio tracks to your project, you can also create groups of tracks, for a better control over multiple tracks at once, and playlists. The first is set by the {{{<<createaudiogroup>>}}} macro, while the second is done through {{{<<createplaylist>>}}}. Both macros need to be set in {{{StoryInit}}} ''after'' the tracks are cached (with {{{<<cacheaudio>>}}}).
\
<h3>Create a Track Group</h3>\
The macro only has one argument for the container, and one arugment for the sub-macro:
* {{{<<createaudiogroup>>}}}
** the name of the group, starting with {{{:}}}
* {{{<<track>>}}}
** the ID of the track(s)
Assuming that the tracks {{{beep}}}, {{{boop}}}, and {{{swish}}} were defined above:
{{{
       <<createaudiogroup ":controls">>
                <<track "beep">>
                <<track "boop">>
                <<track "swish">>
        <</createaudiogroup>> 
}}}
>'' Note:'' You cannot name your group with the following: {{{:all}}}, {{{:looped}}}, {{{:muted}}}, {{{:not}}}, {{{:paused}}}, {{{:playing}}}, as they are used for [[audio control|Audio-Macro]].
\
<h3>Create a Playlist</h3>\
The macro only has one argument for the container, and three arugment for the sub-macro:
* {{{<<createplaylist>>}}}
** the ID of the playlist
* {{{<<track>>}}}
** the ID of the track
** {{{volume}}} (optional), to set the volume of the track, set from 0 (for 0%) to 1 (for 100%).
** {{{own}}} (optional), to create an independant copy of the track for the playlist
Assuming that the tracks {{{beep}}}, {{{boop}}}, and {{{swish}}} were defined above:
{{{
       <<createplaylist "controls">>
                <<track "beep" own>>
                <<track "boop" volume 0.5>>
                <<track "swish" volume 0.3 own>>
        <</createplaylist>> 
}}}

<div id="link-menu">[[Back to the Audio Macros Menu|Macro-Audio]] - [[Back to the Start Menu|Start]]</div>


:: Macro-If [page] {"position":"1200,700","size":"100,100"}
<h1>More Conditional Statements</h1>
While the {{{is}}} operator will often cover many situations where you would need a [[conditional statement|Macro-If-Basic]], there are other operators that can include more than one specific condition at a time. Since SugarCube is based on JavaScript, you can use either form, or mix-n-match:
<<nobr>>
    <table class="ifses">
        <tr>
            <th>SugarCube</th><th>JavaScript</th><th>Description</th><th>Example</th>
        </tr>
        <tr>
            <td>{{{is}}}</td><td>{{{===}}}</td><td>Check if //strickly// equal</td><td>{{{<<if $test is 1>>}}} {{{<<if $test === 1>>}}}</td>
        </tr>
        <tr>
            <td>{{{isnot}}}</td><td>{{{!==}}}</td><td>Check if //strickly// NOT equal</td><td>{{{<<if $test isnot "apple">>}}} {{{<<if $test !== "apple">>}}}</td>
        </tr>
        <tr>
            <td>{{{eq}}}</td><td>{{{==}}}</td><td>Check if equivalent</td><td>{{{<<if $test eq 45>>}}} {{{<<if $test == 45>>}}}</td>
        </tr>
        <tr>
            <td>{{{neq}}}</td><td>{{{!=}}}</td><td>Check if NOT equivalent</td><td>{{{<<if $test neq "dinner">>}}} {{{<<if $test != "dinner">>}}}</td>
        </tr>
        <tr>
            <td>{{{gt}}}</td><td>{{{>}}}</td><td>Check if greater than</td><td>{{{<<if $test gt 12>>}}} {{{<<if $test > 12>>}}}</td>
        </tr>
        <tr>
            <td>{{{gte}}}</td><td>{{{>=}}}</td><td>Check if greater or equal</td><td>{{{<<if $test gte $tries>>}}} {{{<<if $test >= $tries>>}}}</td>
        </tr>
        <tr>
            <td>{{{lt}}}</td><td>{{{<}}}</td><td>Check if lower than</td><td>{{{<<if $test lt ($tries + 2)>>}}} {{{<<if $test < ($tries +2)>>}}}</td>
        </tr>
        <tr>
            <td>{{{lte}}}</td><td>{{{<=}}}</td><td>Check if lower or equal</td><td>{{{<<if $test lte $listparticipant.length>>}}} {{{<<if $test <= $listparticipant.length>>}}}</td>
        </tr>
        <tr>
            <td>{{{def}}}</td><td>/</td><td>Check if variable is defined</td><td>{{{<<if def $test>>}}}</td>
        </tr>
        <tr>
            <td>{{{ndef}}}</td><td>/</td><td>Check if variable is NOT defined</td><td>{{{<<if ndef $test>>}}}</td>
        </tr>
        <tr>
            <td>{{{not}}}</td><td>{{{!}}}</td><td>Check if condition is //false// or Falsy</td><td>{{{<<if not $test>>}}} {{{<<if !$test>>}}}</td>
        </tr>
        <tr>
            <td>{{{ }}}</td><td>{{{ }}}</td><td>Check if condition is //true// or Truthy</td><td>{{{<<if $test>>}}}</td>
        </tr>
        <tr>
            <td>{{{and}}}</td><td>{{{&&}}}</td><td>Evaluate if //all// conditions are true</td><td>{{{<<if $test is 1 and $name is "Jane">>}}} {{{<<if $test === 1 && $name === "Jane">>}}}</td>
        </tr>
        <tr>
            <td>{{{or}}}</td><td>{{{||}}}</td><td>Evaluate if //one// of the conditions is true</td><td>{{{<<if $test is 1 or $test if 4>>}}} {{{<<if $test === 1 || $test === 4>>}}}</td>
        </tr>
    </table>
<</nobr>>\
<h3>Ordering your Conditional Statements</h3>\
When checking for multiple conditions with one {{{<<if>>}}} block, you need to order the conditional statements from ''most strict'' to //least//. This is because Twine reads code from top to bottom, so the program will stop at the first fulfilled condition, even if there is a more fitting situation below. For example:
{{{
    <<if $turn gt 3>>
        The Code will stop here and only show this text...
    <<elseif $turn gt 3 && $turn lt 5>>
        ... even if the value of $turn is 4.
    <</if>>

    <<if $turn gt 3 && $turn lt 5>>
        But this code will only show if the value of $turn is 4...
    <<elseif $turn gt 3>>
        ...while this one will show if the value of $turn is greater then 3 
        and does not meet the condition above.
    <</if>>
}}}
\
<h3>Mixing AND and OR</h3>\
Instead of having a long list of {{{<<elseif>>}}} to show the same variation of text for each condition to be met, you can merge conditional statements with linking operator. 
If a variation requires multiple conditions to be met, you can merge them into one statement using the {{{and}}} operator (or {{{&&}}}). For a variation that could be applied to different conditions, you can merge them into one statement using the {{{or}}} operator (or {{{||}}}). 
It is also possible to mix and match those operators for more complex merge of conditional statements (see below). To organise the different conditions, it is recommended to uses parentheses {{{( )}}}.
> ''Note:'' you must remember that the order of which the operators are applied, work like maths. Inside parentheses first, then layers by layers.
{{{
    <<if ($turn is 1) and ($name is "Jane")>>
→ will only work if $turn has a value of 1 >AND< $name is "Jane"

    <<if ($turn is 3) or ($pet is "dog")>>
→ will work if $turn has the value of 3 >OR< $pet is "dog"

    <<if ($turn is 4 or $pet is "dog") && ($name is "Jane" or $credit gt ($cost * 2))>>
→ will only work if one of the conditions in >EACH< block is true:
    → if $turn has the value of 4 >OR< $pet is "dog"
    → if $name is "Jane" >OR< the value of $credit is greater than 
      the value of $cost multiplied by 2
}}}
> ''Note:'' for example 1 and 2, the parentheses are not mandatory, but it IS for example 3 to work as explained.
\
<h3>True/False and Truthy/Falsy</h3>\
There is a difference between //True/False// and //Truthy/Falsy//:
* //True/False// is strickly related to Boolean values and situations
** {{{$var is true}}} or {{{hasVisited("PASSAGE") is false}}}
* //Truthy/Falsy// will look at whether a variable is defined, and what types of value it holds (including //True/False//)
<table id="truthy">
    <tr>
        <th>Truthy values</th><th>Falsy values</th>
    </tr>
    <tr>
        <td>true
        any number that is not 0
        any filled string (inc. 'false' and '0')
        {{{[]}}} (defined but empty arrays)
        {{{{}}}} (defined but empty objects)
        </td>
        <td>false
        0
        {{{''}}} (empty string)
        null
        undefined
        NaN
        </td>
    </tr>
</table>\
Assuming that {{{$test = ''}}}:
{{{
    <<if $test>>
        This text will not show because $test is an empty string, and so a falsy condition.
    <</if>>
    <<if !$test>>
        This text //will// show, because $test is an empty string, and so a falsy condition.
    <</if>>

Note:
    <<if def $test>>
        This text //will// show, because $test is defined, even as an empty string.
    <</if>>
}}}
<style>.ifses td:nth-child(1), .ifses td:nth-child(2) {text-align:center;}.ifses th:nth-child(3), .ifses td:nth-child(3) {width: 33%;} #truthy td:first-child {width: 260px;}</style>
<div id="link-menu">[[Back to the Base Macro Menu|Macro-Basic]] - [[Back to the Start Menu|Start]]</div>


:: Macro-If-Basic [page] {"position":"900,300","size":"100,100"}
<h1>Display Variation and the {{{<<if>>}}} Macro</h1>
Following a player's choice, you may want to show a specific variant of the next passage, based on that choice. This will be possible with ''conditional statements'', through the {{{<<if>>}}} Macro (you will need to [[set a variable|Macro-Set-Basic]] first).
> ''Note:'' the example below showcase different types of [[values|Variables-Base]].
\
> //A single variation://
{{{
    <<if $choice is 1>>
        This text will only show if the value of variable $choice is 1.
    <</if>>
}}}
> //Two variations://
{{{
    <<if $choice is true>>
        This text will show if the variable $choice is true.
    <<else>>
        If not, this text will show.
    <</if>>
}}}
> //Two specific variations://
{{{
    <<if $choice is "stone">>
        This text will show if the value of variable $choice is "stone".
    <<elseif $choice is "grass">>
        But if the value of the variable $choice is "grass", then this text will show.
    <</if>>
}}}
> //Three variations://
{{{
  At the store you picked <<if $pet is "dog">>a dog<<elseif $pet is "car">>a cat<<else>>a bird<</if>>.
}}}
> ''Note:'' the code of the examples above are indented to showcase it better.

Conditional statements can also be nested inside one another:
{{{
    <<if $choice is 1>>       ← first contidional 
        <<if $pet is "dog">>  ← nested conditional
            This will show this sentence on the page.
        <<elseif $pet is "cat">>
            Or maybe this one.
        <</if>>
    <<else>>
        Otherwise it will be this one.
    <</if>>
}}}

For other operators and more advanced uses of the {{{<<if>>}}} Macro, see [[this page|Macro-If]].

<div id="link-menu">[[Back to the Basics Menu|Basics]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Include [page] {"position":"1700,1300","size":"100,100"}
<h1>Including a Passage inside another</h1>
The {{{<<include>>}}} macro is quite helpful when it comes to including a bit of text or code inside multiple passages, or simple helping organising the content of a passage (especially if it includes quite a bit of code) to avoid unnecessary clutter. It essentially includes the content of a passage inside the one where the macro is coded.

The macro has 2 arguments:
* the passage name 
* the HTML element type (optional) to wrap the included passage (ex: h1, div, p, etc...)
{{{
    <<include "Passage Name">>
    <<include [[Passage Name]]>> ← will create an arrow in Twine
    <<include "Passage Name" "div">> ← will wrap the passage in a 'div'
    <<include [[Passage Name]] "h1">> ← will wrap the passage in the largest header 
}}}

You can use {{{<<include>>}}} in any passage you want, even the [[Special Passages|Special-Passage]]! It can be pretty practical for {{{StoryInit}}} if you have a lot of variables or macros to set up and want to organise them.

If an HTML element is included in the macro, that element will also include a class (if you want to edit it with some CSS). That class will be defined after the name of the included passage, only in lowercases, with hyphens {{{-}}} replacing spaces, and removing any punctuation.
So {{{Passage Name}}} will have the class {{{passage-passage-name}}}, or {{{To the Left !}}} will look like {{{passage-to-the-left-}}}.
> ''Note:'' It is not recommended to use punctuation in a passage name.
{{{
    :: Start 
    This is the Start. 
    <<include "Left">>

    :: Left 
    And now you go left!

→ will appear on the page as:
    This is the Start.
    And now you go left!
}}}
> ''Note:'' unlike the {{{<<widget>>}}} [[macro|Macro-Widget]], {{{<<include>>}}} will add the whole passage called to the page, whether it is one line or a hundred long (space, line breaks and all).

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Input [page] {"position":"1400,900","size":"100,100"}
<h1>Player Input in three macros</h1>
SugarCube offers three variations of input boxes: the {{{<<textbox>>}}}, the {{{<<textarea>>}}}, and the {{{<<numberbox>>}}}. The latter deals with integer (numbers), while the other two save inputs into strings (words).
\
<h3>The {{{<<textbox>>}}} macro</h3>\
The textbox allows the player to indicate a string of word(s). This can be useful for short and simple inputs, like a name.

<<textbox "_wager" "Jane">>

The macro has four arguments:
* the variable to save the player input (must be wrapped inside quotes/apostrophes)
* the default text visible to the player
* {{{"PassageName"}}} (optional) whether the player will be sent to another passage when pressing //Enter//
* {{{autofocus}}} (optional) whether the area is automatically in focus when the passage loads
{{{
    <<textbox "$variable" "Default Text" "NextPassage" autofocus>>
→ this will be in focus, showing "Default Text", with the final value saved in $variable, and the player sent to "NextPassage" when pressing Enter.

    <<textbox "$variable" "">>
→ this will not be in focus, showing 0 as the default value, and saving the input in $variable.
}}}
> ''Note:'' if you need to check the value of the {{{<<textbox>>}}} before the player moves to another passage, I would not recommend indicating a passage name in the macro, but use a separate button/link.
\
<h3>The {{{<<numberbox>>}}} macro</h3>\
The macro works similarly to the {{{<<textbox>>}}}, aside from saving the input as an integer instead of a string.

<<numberbox "_wager" 100>>

The macro has four arguments:
* the variable to save the player input (must be wrapped in quotes/apostrophes)
* the default number visible to the player
* {{{PassageName}}} (optional) whether the player will be sent to another passage when presseing //Enter//
* {{{autofocus}}} (optional) whether the area is automatically in focus 
{{{
    <<numberbox "$variable" 10 "NextPassage" autofocus>>
→ this will be in focus, showing the number 10, with the final value saved in $variable, and the player sent to "NextPassage" when pressing Enter.

    <<numberbox "$variable" "">>
→ this will not be in focus, showing 0 as the default value, and saving the input in $variable.
}}}
> ''Notes:'' while the macro does not have min or max value, [[the Numberpool custom macro|http://www.motoslave.net/sugarcube/2/#downloads]] does.
> If you need to check the value of the {{{<<numberbox>>}}} before the player moves to another passage, I would not recommend indicating a passage name in the macro, but use a separate button/link.
\
<h3>The {{{<<textarea>>}}} macro</h3>\
This macro creates a multi-line area for the player to input text, and saves this input inside a variable. This is a good interactive macro to save longer bits of text, like journal entries.
Unlike the two previous macros, the {{{<<textarea>>}}} allows the player to resize the input box (unless disabled with some CSS).

<<textarea "_example" "This is an example of a text area.">>

The macro has three arguments:
* the variable to save the player input (must be wrapped in quotes/apostrophes)
* the default text visible to the player
* {{{autofocus}}} (optional) whether the area is automatically in focus 
{{{
    <<textarea "$variable" "Visible Text" autofocus>> 
→ this will be in focus and the player will see "Visible Text" in the box, and the player input will be saved in $variable

    <<textarea "$variable" "">> 
→ this will not be in focus, and will not show any text, but the final input will be saved in $variable
}}}

> ''Note on autofocus:'' As of SugarCube 2.36.1, the autofocus function has some issues when: it is located outside of a passage, the passage with those macros is the first one loaded (also during page refresh), more than one macros on the page has autofocus on.
> This can be fixed(-ish) with some [[jQuery]].

<div id="link-menu">[[Back to the Interactive Macro Menu|Macro-Interact]] - [[Back to the Start Menu|Start]]</div>
/* TODO!! TODO WAHT? of the jQuery....*/


:: Macro-Interact [chapter menu] {"position":"1400,600","size":"200,100"}
<h1>Adding some Interactivity</h1>
Aside from links, there are other macros to make your project a bit more interactive. SugarCube is built with multiple that can help add different kinds of gameplay elements. The macros mentioned in the pages listed below are quite useful for character creation, including puzzles, or even a combat system!
\
* [[Multi or Single Option Choices|Macro-CheckRadio]]
* [[Cycles and Conditional Options|Macro-Cycle]] 
** [[Make the Cycle Macro Accessible|Accessibility-Cycle]]
* [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* [[Listboxes and Conditional Options|Macro-Listbox]] 
* [[Player Input in three macros|Macro-Input]]
\
> ''Note:'' For a concrete example of interactive character creator, see the [[Character Creator Template|https://manonamora.itch.io/twine-sugarcube-templates]].
\
<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-Interact-Adv [chapter menu] {"position":"1400,1100","size":"200,100"}
<h1>More Interactivity Macros</h1>
While a previous chapter touched upon the [[Base Interactive Macros|Macro-Interact]], SugarCube also includes more intermediate interactive macros. These will give the project a different kind of interactivity, or more flexibility in said interactivity.

* [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]] 
* [[Single-Use Choice Lists|Macro-Action-Choice]]
* [[Delaying Displaying Text or Running Code|Macro-Timed]]
* [[Displaying Text Letter by Letter|Macro-Type]] 
* [[Using Custom Macro|Custom-Macro]]

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Macro-Link [page] {"position":"1100,700","size":"100,100"}
<h1>Displaying more than text in Links</h1>
Like the [[Link Markup|Markup-Link]], you can display more than just plain text as links. This includes the content of variables, widgets, or even images (similar to the [[Image Markup|Markup-Image]]). 

You can use variables to display the text of the link, or send the player to a certain passage.
Assuming that {{{$passage = "Garden"}}} and {{{$text = "Go take a walk"}}}:
{{{
    <<link $text $passage>><</link>>

→ will work the same way as
    <<link [[Go take a walk|Garden]]>><</link>> 
→ or 
    <<link "Go take a walk" "Garden">><</link>>
}}}

Displaying ''the value of a variable'' is a bit more straightforward than with the [[Link Markup|Markup-Link]]. 
Assuming that {{{$name = "Jane"}}} and {{{$location = "Garden"}}}:<<set $name to "Jane">>
{{{<<link "I am $name" "Passage">><</link>>}}} → <<link "I am $name" "Passage">><</link>>

You can even use ''conditional statements'' to display variation inside a link. In the example below, depending on the value of {{{$location}}}, the text will show a different text.
{{{
<<link '<<if $location is "Garden">>Go back to the house<<else>>Go to the house<</if>>' "House">><</link>>

<<link `($location === "Garden") ? "Go back to the house" : "Go to the house"` "House">><</link>>
}}}
> ''Note:'' the second example is called a //ternary conditional operator//, used in JavaScript as a one-line if-else statement. You will require a backtick {{{`}}} instead of a quote or apostrophe, as it is technically JavaScript code.
\
Similarly, for ''widgets'', assuming that {{{<<widget "SomeWidget">>Wow Some Text<</widget>>}}}:
{{{<<link "<<SomeWidget>>" "Passage">><</link>>}}} → <<link "<<SomeWidget>>" "Passage">><</link>>
> ''Note:'' you need to wrap the widget with quotes/apostrophe inside the link! Otherwise, you will get an error.
\
As for ''images'', you can use the [[Image markup|Markup-Image]] inside the {{{<<link>>}}} macro, or the HTML markup ({{{<img>}}}). You will also need to know the [[URL|URL-Types]] of the relevant image.
{{{
    <<link [img[URL][Passage]]>><</link>>

    <<link "[img[URL]]" "Passage">><</link>>

    <<link '<img src="URL">' "Passage">><</link>>
}}}
\
<h3>Quotes or Apostrophes... or both?</h3>\
To use the {{{<<link>>}}} macro, you need to either include the [[Link Markup|Markup-Link]] or wrap the wanted text (and potentially the passage) with either Apostrophes {{{' '}}} or Quotes {{{" "}}}, which are essentially interchangeable (see examples). 

However, this can become an issue if the wrapped text/element contains apostrophes or quotes to function (like the image or the conditional statement examples above), or to format the text (like with [[bolding|Markup-Styling]]). In this case, you have multiple solutions:
> //Nest one inside the other// {{{' " " '}}} or {{{" ' ' "}}}: 
{{{
    <<link '"I am speaking!"' "Passage">><</link>>
    <<link "I don't think this is a good idea..." "Passage">><</link>>
    <<link '<img src="URL">' "Passage">><</link>>
    <<link "//''HEY!''//" "Passage">><</link>>
}}}
> //Use the backslash before the nested character// {{{\}}}:
{{{
    <<link "\"I am speaking!\"" "Passage">><</link>>
    <<link 'I don\'t think this is a good idea...' "Passage">><</link>>
    <<link "<img src=\"URL\">" "Passage">><</link>>
    <<link "//\'\'HEY!\'\'//" "Passage">><</link>>
}}}
> ''Note:'' For story text requiring an apostrophe or quotes, I would recommend the use of the curly type ({{{“ ”}}} and {{{‘ ’}}}) rather than straight ones. This way, you would not run into the nesting issue mentioned above.
> {{{<<link '“I am speaking!”' "Passage">><</link>>}}} → <<link '“I am speaking!”' "Passage">><</link>>

<div id="link-menu">[[Back to the Base Macro Menu|Macro-Basic]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Link-AppPreRep [page] {"position":"1500,900","size":"100,100"}
<h1>Revealing Extra Text and Disappearing Links</h1>
Instead of forcing the player to another passage to continue the story, or if you want to add extra flavour text, SugarCube includes three link macros with a twist: {{{<<linkappend>>}}}, {{{<<linkprepend>>}}} and {{{<<linkreplace>>}}}. Like their name suggests, when the link is clicked, the macro will add text after the link ({{{<<linkappend>>}}}), add text before the link ({{{<<linkprepend>>}}}), or replace the link with a new text ({{{<<linkreplace>>}}}).

The three container macros have each 2 arguments:
* the text to display in the link
* (optional) whether to show the new text with a transition : {{{t8n}}} or {{{transition}}}
\
<h3>{{{<<linkappend>>}}}</h3>\
This macro is essentially a combination of the {{{<<link>>}}} and {{{<<append>>}}} macros, by creating a one-time use link that deactivates itself when clicked and prints the content coded inside the container ''after'' that link.
{{{
    <<linkappend "text in link" t8n>>text to appear after the link<</linkappend>>
    <<linkappend "text in link" t8n>>/* Code */<</linkappend>>
}}}
Ex: I ate a <<linkappend "cookie" t8n>>, which was filled with chocolate<</linkappend>>.
\
<h3>{{{<<linkprepend>>}}}</h3>\
This macro is essentially a combination of the {{{<<link>>}}} and {{{<<prepend>>}}} macros, by creating a one-time use link that deactivates itself when clicked and displays the content coded inside the container ''before'' that link.
{{{
    <<linkprepend "text in link" t8n>>text to appear before the link<</linkprepend>>
    <<linkprepend "text in link" t8n>>/* Code */<</linkprepend>>
}}}
Ex: I ate a <<linkprepend "cookie" t8n>>delicious <</linkprepend>>.
\
<h3>{{{<<linkreplace>>}}}</h3>\
This macro is essentially a combination of the {{{<<link>>}}} and {{{<<replace>>}}} macros, by creating a one-time use link that replaces itself with the content coded inside the container when clicked.
{{{
    <<linkreplace "text in link" t8n>>text to appear before the link<</linkreplace>>
    <<linkreplace "text in link" t8n>>/* Code */<</linkreplace>>
}}}
Ex: I ate a <<linkreplace "cookie" t8n>>slice of pie<</linkreplace>>.

> ''Note:'' if you are looking for more flexibility in the placement of the link and/or the display of the added text, you may want to use their respective [[DOM macros|Macro-ApPreRepCopy]] nested inside a {{{<<link>>}}} instead.

<div id="link-menu">[[Back to the Interactive Macro Menu|Macro-Interact]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Link-Basic [page] {"position":"900,200","size":"100,100"}
<h1>Linking Passages and the {{{<<link>>}}} Macro</h1>
To move the player from one part of the story to the next, you need to link the passages. This can be done in two ways: the {{{[[Link]]}}} markup or the {{{<<link>>}}} macro. Boths ways will achieve the same thing, but the macro will give you more flexibility with interactivity. 
> ''Note:'' in some cases, the {{{<<link>>}}} macro will not create a visual link between passage blocks in the Twine map of the project.
\
<h3>The {{{[[Link]]}}} markup</h3>\
To create a link with the {{{[[Link]]}}} markup, you need to wrap the relevant text with double square brackets {{{[[ ]]}}}.
> ''Note:'' in the Twine application, wrapping a bit of text with the square brackers will automatically create a passage with the text inside the brackets as that passage's name.
{{{
[[Go to the Garden]] 
    → will send the player to the passage called "Go to the Garden"

[[Home234]]
    → will send the player to the passage called "Home234"
}}}

If you want to display something else than the Passage name in the link, you can use a pipe separator {{{ | }}}, or an arrow ({{{->}}} or {{{<-}}}) to separate the displayed text and the name of the passage. Formatting links this way is pretty useful when you have multiple links going to one same passage.
{{{
[[Go to the Garden|Garden]] 
    → display the text "Go to the Garden" and send the player to the passage called "Garden"

[[Go to the Garden->Garden]] 
[[Garden<-Go to the Garden]] 
    → the arrow should be pointing towards the passage's name
}}}
> For more advanced uses of the link markup, see [[the Link Markup page|Markup-Link]].
\
<h3>The {{{<<link>>}}} macro</h3>\
One of the use of the {{{<<link>>}}} macro is to send the player to a different passage. This can be formatted in different ways.
> //In combination with the link markup://
{{{
<<link [[Go to the Garden]]>><</link>> 
    →  will send the player to the passage called "Go to the Garden"

<<link [[Go to the Garden|Garden]]>><</link>> 
    → display the text "Go to the Garden" and send the player to the passage called "Garden"
}}}
> //Without the link markup://
{{{
<<link "Go to the Garden" "Garden">><</link>> 
    → display the text "Go to the Garden" and send the player to the passage called "Garden"
}}}
> ''Note:'' Without the link markup, this ''won't create a visual link between passage blocks'' in the Twine map of the project.

Since the {{{<<link>>}}} macro is a container macro (with an opening and a closing block), you can add more code inside the blocks, like another macro or pure JavaScript code.
{{{
    <<link "Text">>  ← opening block
        /*Code Here*/
    <</link>>        ← closing block

Example:
    <<link "Take Coin">><<unset $coin>><</link>>
}}}
> ''Note:'' you can switch the {{{<<link>>}}} macro for the {{{<<button>>}}} macro, as their only difference is how they are formatted on the page (a simple link or a button).
\
> For more advanced uses of the link macro, see [[the Link Macro page|Macro-Link]].

<div id="link-menu">[[Back to the Basics Menu|Basics]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Listbox [page] {"position":"1400,800","size":"100,100"}
<h1>Listboxes and Conditional Options</h1>
Listboxes are an easy way to have the player interact with the story, and give a different way to format choices. The {{{<<listbox>>}}} can be useful to lists options for a character's characteristics, or choosing a location to travel to.

Where to go next? <<listbox "_example">>
	<<option "Home">>
	<<option "Garden">>
	<<option "Cinema">>
	<<option "School">>
<</listbox>>

The macro has two sets of arguments: one for the container {{{<<listbox>>}}} and one set for the {{{<<option>>}}}/{{{<<optionfrom>>}}}.
* {{{<<listbox>>}}}:
** the variable to save the player's choice.
** {{{autoselect}}} (optional): will autoselect the option from the list, if the current value of the variable is included in the list of options
* {{{<<option>>}}}
** the name of the option.
** (optional) the value of the option (if different from the name).
* {{{<<optionfrom>>}}}:
** the variable containing the list of options (array or object).

Assuming that the array {{{_pieOptions = ["blueberry", "cherry", "coconut cream"]}}}:
{{{
    <<listbox "_example" autoselect>>
        <<option "Home" false>>
        <<option "Garden">>
        <<option "Cinema" 0>>
        <<option "School" "bad">>
    <</listbox>>
→ this list is the same as shown above, aside from most options having different values from their labels.

    <<listbox "$pie" autoselect>>
        <<optionsfrom _pieOptions>>
    <</listbox>>
→ this list will display the options from the array _pieOptions.
}}}
\
<h3>Why {{{<<optionfrom>>}}} instead of {{{<<option>>}}}?</h3>\
The reason for choosing one rather than the other will depend on preferences and situations. 

{{{<<optionfrom>>}}} allows for cleaner/less code on the page, as well as giving the option to provide different options to players depending on how the list variable is set before use. While the {{{<<listbox>>}}} macro is a container, it will not accept any other macros inside, except the option ones. This means you cannot add or remove options within the listbox code (i.e. you cannot do {{{<<if $var>><<option "value">><</if>>}}}).
> ''Note:'' you can also hide all your cycles inside [[widgets|Macro-Widget]].
\
If the list of options is set ahead of the passage, and unchanging, {{{<<option>>}}} might be the easiest way to go. If the list's content is conditional on specific paths, then {{{<<optionfrom>>}}} might be more fitting.
> ''Note:'' You can also have different {{{<<listbox>>}}}/{{{<<option>>}}} combo for each situation...
\
With {{{<<optionfrom>>}}}, you also have two options to set the cycle: using an array or an object. The first is the simplest, as you set a list of options inside an array, but it will mean the displayed text will also be the value of the cycled variable. On the other hand, objects seem a bit more complex to set up, but will allow you to display a different text than the value. 
For example, assuming that:
{{{
    _pieOptionsArray = ["blueberry", "cherry", "coconut cream"]

    _pieOptionsObject = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }
}}}
<<set _pieOptions = ["blueberry", "cherry", "coconut cream"], _pieOptions2 = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }>>\
The array will show : <<listbox "_pie" autoselect>>
	<<optionsfrom _pieOptions>>
<</listbox>> (value of the first option: _pie)
While the object will show: <<listbox "_pie2" autoselect>>
	<<optionsfrom _pieOptions2>>
<</listbox>> (value of the first option: _pie2)

<div id="link-menu">[[Back to the Interactive Macro Menu|Macro-Interact]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Nobr-Silent [page] {"position":"1800,1200","size":"100,100"}
<h1>Removing Blank Space and Hiding Code</h1>
It can be //very// frustrating to code and format a whole passage, only to realise when playing it that unwanted blank space is everywhere. While some of it can be resolved with the [[nobr Markup|Markup-Nobr]], for longer block of text or code, you may want to use the {{{<<nobr>>}}} and {{{<<silently>>}}} macros. 
\
<h3>{{{<<nobr>>}}} or {{{<<silently>>}}}</h3>\
Both macros will remove any blank space created by the code inside its container, making them quite useful when indenting the code for a clearer read through (especially for complex code).

The main difference between the macros is whether an output is expected within the macro. As in: is there text inside the container that should appear on the screen where the macro is coded?

{{{<<silently>>}}} will run any code inside the macro, but will not print anything on the page (unless you play the game in //Test/Debug// mode). {{{<<nobr>>}}} will run the code inside the macro, as well show any output on the page, without any linebreak (like the [[nobr Markup|Markup-Nobr]]). 
> //An example for// {{{<<nobr>>}}}
{{{
    I'd like a <<nobr>>
        <<if $feeling eq "blue">>
            blueberry
        <<else>>
            cherry
        <</if>>
    <</nobr>> pie.

→ will show the result in one line
}}}
> //An example for// {{{<<silently>>}}}
{{{
    <<silently>>
    	You'll never see any of this! But this code will run...
        <<set _time to "9s">>
        <<timed _time>>
            <<goto "END">>
        <</timed>>
    <</silently>>

→ will send you to the passage "END" but nothing will appear on the page
}}}
\
> ''Note:'' another method is to enable the [[nobr Config API|Basic-API-Config]], which will remove ALL line breaks inside the project.

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Print [page] {"position":"1100,900","size":"100,100"}
<h1>Display Variables, the {{{<<print>>}}} Macro and Variants</h1>
There are essentially four ways of displaying a variable:
* [[bare|Markup-Variable]]: {{{$variable}}}
* with the {{{<<print>>}}} macro: {{{<<print $variable>>}}}
* with the {{{<<=>>}}} macro: {{{<<= $variable>>}}}
* with the {{{<<->>}}} macro: {{{<<- $variable>>}}}

Unlike the bare version, the macros will display [[special variables|Variables-Base]] and functions attached to variables. 

Assuming that {{{$choice = "dog"}}}: <<set $choice = "dog">>
{{{$choice}}} → $choice
{{{<<print $choice>>}}} → <<print $choice>>
{{{<<= $choice>>}}} → <<= $choice>>
{{{<<- $choice>>}}} → <<- $choice>>

Assuming that {{{$name = "jane"}}}: <<set $name = "jane">>
{{{$name.toUpperCase()}}} → $name.toUpperCase()
{{{<<print $name.toUpperCase()>>}}} → <<print $name.toUpperCase()>>
{{{<<= $name.toUpperCase()>>}}} → <<= $name.toUpperCase()>>
{{{<<- $name.toUpperCase()>>}}} → <<- $name.toUpperCase()>>
> ''Note:'' For more functions, [[see this page|Functions]].
\
All three macros are interchangeable, aside from one distinction: the {{{<<->>}}} macro will show HTML markup and some nested SugarCube code as regular characters.
Assuming that {{{$example = "<i>this</i>"}}} <<set $example = "<i>this</i>">>
{{{$example}}} → $example
{{{<<print $example>>}}} → <<print $example>>
{{{<<= $example>>}}} → <<= $example>>
{{{<<- $example>>}}} → <<- $example>>

Assuming that {{{$test = "<<SomeWidget>>"}}} and the widget {{{<<widget "SomeWidget">>Wow Some Text<</widget>>}}}: <<set $test = "<<SomeWidget>>">>
{{{$test}}} → $test
{{{<<print $test>>}}} → <<print $test>>
{{{<<= $test>>}}} → <<= $test>>
{{{<<- $test>>}}} → <<- $test>>
\
<h3>Display all the values of an object:</h3>\
To print whole object variables on the page, you need to use a bit of JavaScript:
Assuming that {{{$npc = {name: 'Jane', age: '53'} }}}: <<set $npc = {name: 'Jane', age: '53'}>>
{{{<<print Object.values($npc)>>}}} → <<print Object.values($npc)>>
{{{<<print JSON.stringify($npc)>>}}} → <<print JSON.stringify($npc)>>
<<unset $choice, $name, $example, $test, $npc>>
<div id="link-menu">[[Back to the Base Macro Menu|Macro-Basic]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Script-Run [page] {"position":"1800,1500","size":"100,100"}
<h1>Using JavaScript in the Passage</h1>
While you can add JavaScript or jQuery code inside the JavaScript tab, it is sometimes necessary to include it directly inside the passage. This can be done inside the {{{<<script>>}}} or the {{{<<run>>}}} macro.

While both macros will run code, {{{<<run>>}}} is usually used for one-line type of codes (e.g. calling SugarCube [[APIs|Basic-API]], functions defined in the JavaScript tab, etc..), while {{{<<script>>}}} is more fitted for longer and more complex code.
> ''Note:'' some knowledge of JavaScript/jQuery is necessary to have, especially if the code runs into issues.

If added as is on the page, the code will triggers as soon at the passage is loaded. But it can also be included inside a {{{<<link>>}}} macro, or triggered at a later time with the {{{<<timed>>}}} macro.
{{{
    <<script>>
        /*Your JavaScript/jQuery code*/
    <</script>>

    <<script>>
        setup.Hi = function (name) {
            if (name == undefined) {
                return "Hi.";
            } else {
                return "Hi, " + name + ".";
            }
        };
    <</script>>

    <<run $(document.body).append('<div id="report-down"></div>').find('#report-down')>>
    <<run setup.ScrollDown()>>
}}}
> ''Note:'' when using the {{{<<script>>}}} macro with {{{<<nobr>>}}}, the latter macro will transform the code into one line. If comments are included with backslash {{{//}}}, it will render the rest of the code unuseable. {{{/* Comments */}}} is prefered in this case.
\
> ''Note:'' the {{{<<script>>}}} macro has the same use as the {{{<script>}}} HTML markup, though the latter will only work inside the {{{StoryInterface}}} passage.

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Set [page] {"position":"1100,800","size":"100,100"}
<h1>Setting and Changing Variables</h1>
To first [[set a variable|Macro-Set-Basic]], you would most commonly use the {{{to}}} operator, as the example below:
{{{<<set $var to "a value">>}}}

But, to change the value of a variable, especially if that value is numerical, the {{{<<set>>}}} macro will accept other JavaScript (mathematical) operators: 
<<nobr>>
<table>
    <tr>
        <th>Operator</th><th>Explanation</th><th>Example</th>
    </tr>
    <tr>
        <td>{{{ = }}}</td><td>Works like {{{to}}}.<br> Assign the value to the variable.</td><td>{{{<<set $apples = 6>>}}}</td>
    </tr>
    <tr>
        <td>{{{+=}}}</td><td>Adds to the current value.</td><td>{{{<<set $apples += 6>>}}} or {{{<<set $apples to $apples + 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{-=}}}</td><td>Substract to the current value.</td><td>{{{<<set $apples -= 6>>}}} or {{{<<set $apples to $apples - 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{*=}}}</td><td>Multiplies the current value.</td><td>{{{<<set $apples *= 6>>}}} or {{{<<set $apples to $apples * 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{/=}}}</td><td>Divides the current value.</td><td>{{{<<set $apples /= 6>>}}} or {{{<<set $apples to $apples / 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{%=}}}</td><td>Removes a percentage of the current value.</td><td>{{{<<set $apples %= 6>>}}}</td>
    </tr>
    <tr>
        <td>{{{++}}}</td><td>Adds 1 to the current value.</td><td>{{{<<set $apples ++>>}}}</td>
    </tr>
    <tr>
        <td>{{{--}}}</td><td>Removes 1 to the current value.</td><td>{{{<<set $apples -->>}}}</td>
    </tr>
</table>
<style>td:first-of-type {width: 15%;text-align: center;}</style>
<</nobr>>
\
Aside from setting a variable with a value, you can also set it with the value of another variable, or a combination of values from multiple variables.
Assuming that {{{$test = 6}}} and {{{$apple = 4}}}:
{{{
    <<set $test to $apple>>
→ $test will have the value of $apple (= 4)

    <<set $test += $apple>>
→ $test will have the value of ($test + $apple) (= 10)

    <<set $test to (($apple * 4)/($test - 2))>>
→ $test will have the value of ($apple multiplied by 4) divided by ($test minus 2) (= 4)
}}}
> ''Note:'' when handling complex calculations of variable, using parentheses {{{( )}}} will help order the code.
\
It is also possible to use some of these operators with string values and variables.
Assuming that {{{$name = "Jane"}}} and {{{$surname = "Doe"}}}, and the widget {{{<<widget "SomeWidget">>Wow Some Text<</widget>>}}}:
{{{
    <<set $wholename to $name + $surname>>
→ $wholename will have the value "JaneDoe"
    <<set $wholename to $name + " " + $surname>>
→ $wholename will have the value "Jane Doe"

    <<set $address to "Hello, $name">>
→ $address will print "Hello, Jane" on the page.
}}}
> ''Note:'' if the value {{{$name}}} changes or if {{{$name}}} is unset during the story, this will affect how {{{$address}}} is displayed, but not {{{$wholename}}}. 
> {{{$address}}} will not show "Hello, Jane" if {{{$name}}} changes, but will show the current value of {{{$name}}} (or the name of the variable, if unset). 
{{{
    <<set $text to "<<SomeWidget>>">>
→ $text will print the content of the widget, here "Wow Some Text".
}}}

You can also mix the types of values when combining them, similarly to the examples above. Mixing anything with a string value will result in a string value. Mixing integer with a boolean will result in a integer.
Assuming that {{{$name = "Jane"}}} and {{{$apple = 4}}}
{{{
    <<set $test to $name + $apple>>
→ $test will have the value "Jane4" (string)
}}}
> ''Note:'' using some mathematical operators on a string-based variable will give an error: {{{<<set $name /= 2>>}}}.
\
<h3>Setting up Arrays and Objects</h3>\
To use an array or object variable, you need to define it as an array or object ahead of time. This can be done at the earliest inside [[StoryInit|SP-Init]], and, at the lastest, just before you use them. Defined arrays and objects can be empty before use.
Arrays need to be defined with square brackets {{{[ ]}}}, while objects need curly brackets {{{ {} }}}
{{{
→ Array:
    <<set $array to []>> → defined but empty
    <<set $array to [1, "word", true]>>
    <<set $inventory to ["pen", "coins", "apple"]>>

→ Object:
    <<set $object to {}>> → defined but empty
    <<set $object to {number: 1, string: "word", boolean: true}>>
    <<set $mc to {age: 51, hair: "bald", degree: true}>>
}}}
After an object is defined, you can add any property to it, even if they were not listed when the main variable was set. You can also change the value of an already defined property the same way you would a regular variable.
{{{
    <<set $object.newproperty = "value of your choice">>
    <<set $object.definedproperty = "new value">>
}}}

As for arrays, adding or removing elements require methods, which you can learn about [[in this page|Method-Array]].
\
<h3>Going further:</h3>\
You can also use [[functions|Functions]] and [[methods|Methods]] when setting a variable, or edit its value. 
They are most useful when changing the formatting of a string (upper/lowercase), or with statistics (e.g. health level).

<div id="link-menu">[[Back to the Base Macro Menu|Macro-Basic]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Set-Basic [page] {"position":"800,300","size":"100,100"}
<h1>Tracking Information and the {{{<<set>>}}} Macro</h1>
To track information and choices made by the player, you need to set [[variables|Variables-Base]], and save the tracked information as a value in the variable, by using the {{{<<set>>}}} Macro.

While there are multiple ways to [[store information|Variables-Base]], the most relevant way is through using ''temporary'' or ''permanent'' variables. As their name suggests, a temporary variable is temporary, disappearing when the player moves to another passage, while the permanant variable will stick around (until you [[destroy|Macro-Unset]] it or change its value).
{{{
    <<set $variable to 5>>
    <<set $variable to 'some words'>>
    <<set $variable to true>>
    <<set _temporary to 5>>
}}}

You can also set multiple variables at once, by separating each with a {{{,}}} comma:
{{{
    <<set $var to 5, $var2 to 'some words', $var3 to true, _temp to 5>>

    <<set 
        $var to 5, 
        $var2 to 'some words', 
        $var3 to true, 
        _temp to 5
    >>
}}}
> ''Note:'' the type of value stored in a variable is not set in stone when the variable is first set.
> You can set a variable as an //integer// (number), before setting it as a //string// (words) a few passages later, without needing the unset it in between.

If you want to track the player's choice of action, before the passage changes, you will need to set a variable inside a link. This method is often the best way to store information, and avoid a variable to change value if the player revisit a passage.
> ''Note:'' setting a temporary variable in a forwarding link is useless...
{{{
Link markup:
    [[Displayed Text|PassageName][$var to {value}]]

    [[Pick apples|Garden][$apple to 5]]
    [[Displayed Text|PassageName][$variable to 5, $var2 to 'some words', $var3 to true]]
}}}
{{{
Link macro:
    <<link [[Displayed Text|PassageName]]>><<set $variable to 5>><</link>>
    <<link [[Displayed Text|PassageName]]>>
        <<set $var to 5, $var2 to 'some words', $var3 to true, _temp to 5>>
    <</link>>
}}}

For other mathematical operators or advanced uses of the {{{<<set>>}}} Macro, [[see the Set Macro page|Macro-Set]].
For setting up links, [[see this page|Macro-Link-Basic]].

<div id="link-menu">[[Back to the Basics Menu|Basics]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Switch [page] {"position":"1700,1200","size":"100,100"}
<h1>An Alternative to Conditional Statements</h1>
If you are looking at multiple values from one variable or function, with the conditional statement only looks at one variable/function for the whole block, the {{{<<switch>>}}} macro might be a useful alternative to the {{{<<if>>}}} macro.

The Macro has one argument for the container, and one for the submacro:
* {{{<<switch>>}}}:
** the element whose value you want to check.
* {{{<<case>>}}}
** the value(s) of the element for the particular case.
* {{{<<default>>}}} (optional) does not have an argument, works exactly like {{{<<else>>}}}
\
> //Using a variable://
{{{
    <<switch $dice>>
        <<case 1>>You rolled a 1, this is a critical failure...
        <<case 2>>You rolled a 2, this is a failure.
        <<case 5>>You rolled a 5, this is a success.
        <<case 6>>You rolled a 6, this is a critical success!
        <<default>>You rolled a $dice. Nothing happens.
    <</switch>>

→ the <<switch>> will look at the value of $dice and display the text depending on the value.
}}}
> //Using a function://
{{{
    <<switch previous()>>
        <<case "Home">>Leaving your house, you soon arrive at the park.
        <<case "Work">>Finally done with work, you skip towards the park.
        <<case "Cinema" "Theater">>Waking up after a boring movie, you sluggishly walk towards the park.
    <</switch>>

→ here, the macro will look at the name of the previously visited passage, and if this name is either "Home", "Work" or "Cinema"/"Theater", it will display the text. For any other case, it will not display anything.
}}}

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Timed [page] {"position":"1400,1300","size":"100,100"}
<h1>Delaying Displaying Text or Running Code</h1>
If a text should be displayed with some delay or a bit of code should not be triggered as soon as the passage is loaded, the {{{<<timed>>}}} macro should be used. As its name suggest, the macro will run a timer before triggering the code and displaying text.

<<timed 4s>>//Whoop, there it is!//<</timed>>
The macro has 2 arguments for its container, and 1 for the submacro:
* {{{<<timed>>}}}:
** the delay before the macro triggers, can be indicated in seconds or milliseconds.
*** the minumum delay is 40ms.
** {{{t8n}}}/{{{transition}}}, whether the text appearing does so like the transition between passages.
* {{{<<next>>}}}:
** (optional) the delay before the next part of the macro triggers, can be indicated in seconds or milliseconds.
*** the minumum delay is 40ms.
*** if not indicated, it will take the delay from the {{{<<timed>>}}} macro.

{{{
	<<timed 2s t8b>>
		This will appear with a transition after 2 seconds.
	<<next>>
		And this will appear 2 seconds after the previous text.
	<<next 4s>>
		While this will appear 4 seconds after the previous block.
	<</timed>>
}}}

Aside from displaying text, you can use the {{{<<timed>>}}} macro to trigger code:
{{{
→ sending the player to another passage:
	<<timed 10s>><<goto "END">><</timed>>

→ replacing some text on the page:
	Can I by some <span id="text">eggs</span>?
	<<timed 2s>><<replace "#text">>milk<</replace>><</timed>>
}}}
\
> ''Note:'' When using this macro, it is important to test the passage extensively, to ensure it works as intended.

<div id="link-menu">[[Back to the Advanced interactive Macro Menu|Macro-Interact-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Type [page] {"position":"1500,1300","size":"100,100"}
<h1>Displaying Text Letter by Letter</h1>
Whether wanting to emulate a computer monitor or a typewriter, by displaying a text letter by letter, the {{{<<type>>}}} macro will do the job!

<<type 80ms>>Here is the macro in action! It can also do [[links|Macro-Type]] and ''formatting''...<</type>>
\
The macro has 8 arguments:
* speed: the amount of time between each letter, can be indicated in seconds or milliseconds.
** 20-60ms is a good printing rate. 0s will show the whole text with a flash.
* {{{start}}} (optional): adding a delay before the typing starts, indicated in seconds or milliseconds
** if only {{{start}}} is indicated, the default will be 400ms.
* {{{class}}} (optional): will assign an extra CSS {{{.class}}} to the typing container.
* {{{id}}} (optional): will assign a CSS {{{#id}}} to the typing container.
* {{{element}}} (optional): will transform the container from a {{{<div>}}} to another HTML element.
* {{{keep}}} (optional): will keep the cursor even after the typing is complete.
* {{{none}}} (optional): will not use the cursor during typing.
* {{{skipkey}}} (optional): when the key is pressed, the typing will display the whole text immediately.
** If only {{{skipkey}}}, the default value must be indicated with the {{{Config.macros.typeSkipKey}}} [[API|Confic-Macro]].
\
{{{
	<<type 40ms>>I ate an apple.<</type>>
→ The base required, with characters showing every 40 milliseconds.

	<<type 40ms start 2s none>>Oh no, I'm late...<</type>>
→ After a 2-second delay, this will show characters every 40 milliseconds, without the cursor.

	<<type 40ms class "menu">>[[Start Now!]]<</type>>
→ This will type the characters of the link every 40 milliseconds, and add the class '.menu' to the container.

	<<type 40ms element "span" keep>>Now I'm a span!<</type>>
→ Instead of the base container, this will be a '<span>'. When all text is displayed, the cursor will stay on the page.

	<<type 40ms id "words" skipkey "Enter">>Last one!<</type>>
→ This will type the characters every 40 milliseconds, unless the key 'Enter' is pressed to display everything at once. The container will also get the id '#words' added to it.
}}}
\
<h3>Order of triggers</h3>\
You can have as many iteration of {{{<<type>>}}} inside one passage, thought they will trigger one after the other.
If you nest a {{{<<type>>}}} macro inside another one, the nested {{{<<type>>}}} will only start ''after all non-nested'' iteration have been completed.
{{{
	<<type 40ms>>First.
		<<type 40ms>>Fourth.
			<<type 40ms>>Sixth.<</type>>
		<</type>>
	<</type>>
	<<type 40ms>>Second.<</type>>
	<<type 40ms>>Third.
		<<type 40ms>>Fifth.<</type>>
	<</type>>
}}}
> ''Note:'' Because the macro is time dependant, it is important to test the passages extensively, to ensure it works as wanted.
\
<h3>Customising the typed text with CSS</h3>\
While the typed text does not have default styling (aside from the cursor), the macro includes special classes you can target and edit:
* {{{.macro-type}}}, to change the base styling of the macro (e.g. colour, font...)
* {{{.macro-type-done}}}, to change the styling when all iteractions of the macro are complete
* {{{.macro-type-cursor:after}}}, to edit the cursor
{{{
	.macro-type {
		color: limegreen;
		font-family: monospace, monospace;
	}
	.macro-type-cursor:after {
		color: limegreen;
		content: "\269C\FE0F"; /* Fleur-de-lis emoji */
		font-family: monospace, monospace;
	}
}}}

> ''Note:'' for even more advanced customisation of the macro, you can also add custom JavaScript code with the [[Typing Events|Events-Type]].

<div id="link-menu">[[Back to the Advanced interactive Macro Menu|Macro-Interact-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Unset [page] {"position":"1200,800","size":"100,100"}
<h1>Unsetting Variables with {{{<<unset>>}}}</h1>
To avoid bloating the loading time of passages (lag), it is recommended to keep the number of variables set at any time to a minimum. One way is to use [[temporary variables|Variables-Base]] {{{_temp}}}, which disappear automatically when the player moves to another passage, another is to rely more on [[functions|Functions]]. The one covered here focuses on unseting permanant variables {{{$var}}} you don't need anymore, with the {{{<<unset>>}}} macro.
{{{
    <<unset $variable>>

→ multiple at once:
    <<unset $var, $var2, $var3>>
}}}
The macro can be used as is, or inside other container macros, like a {{{<<link>>}}} or a {{{<<button>>}}}.
\
<h3>Using the {{{<<run>>}}} macro.</h3>\
The {{{<<run>>}}} macro will, as the name suggest, [[run|Macro-Script-Run]] any one-line JavaScript/jQuery code given. It can also help unset (or delete) variables from the game state. This is particularly helpful in cases where the {{{<<unset>>}}} macro doesn't work: like unseting a property of an opject ({{{$object.property}}}).

Currently, trying to unset a property inside an object ({{{<<unset $object.property>>}}}) will not just delete that property, but also unset the whole object variables (so all the other properties saved inside). To resolve this, you should use the {{{<<run>>}}} macro coupled with the JavaScript {{{delete}}} operator:  
{{{<<run delete $object.property>>}}}

Assuming that {{{$mc = {name: "Jane", nickname: "Janie", age: 10} }}}:
{{{
    <<run delete $mc.nickname>>
→ will only remove the {nickname} property from the object

    <<run delete $mc.nickname, delete $mc.age>>
→ this will remove both the {nickname} and {age} properties from the object 
}}}
> ''Note'': you can also unset any other variable with this method.

<div id="link-menu">[[Back to the Base Macro Menu|Macro-Basic]] - [[Back to the Start Menu|Start]]</div>


:: Macro-Widget [page] {"position":"1800,1300","size":"100,100"}
<h1>Creating and Using a Widget</h1>
Widgets are a pretty practical macro that lets you create "special macros" with basic SugarCube. You can call bits of texts or codes as many times as you want, or create containers to format text, without cluttering the code of the passage. A defined widget can be used as many times as you want inside a project, or even within a passage.
The {{{<<widget>>}}} macro is also useful for: creating shortcuts for pronouns, grouping list of links to appear on multiple passages (e.g. exposition conversation), adding special hovertext of elements (e.g. images, translation), formatting dialogue with character portraits...

For widgets to work they need to be:
* set inside a non-story passage [[tagged|Tags-Built]] with {{{widget}}}
** the passage can have any non-[[Special|Special-Passage]] name.
* called inside another passage:
** the name of the widget wrapped with double arrowheads {{{<<WIDGETNAME>>}}}
\
You can have as many widgets as you want inside one widget-tagged passage. You can also have multiple widget passages (though they should be kept to a minimum).
It is recommended to either wrap the code inside the {{{<<widget>>}}} with [[line-break remover macro|Macro-Nobr-Silent]] or add the {{{nobr}}} [[tag|Tags-Built]] to the widget passage. This will remove any unwanted space.

The macro has 2 arguments:
* the name of the widget, which:
** has to be one word
** is case sensitive
** canot include punctuation 
** cannot start with a number
** cannot have the same name as a Base SugarCube Macro or any custom macro included in your JavaScript
* {{{container}}} (optional), to create a container macro.
{{{
    <<widget "Name" container>>
        /* Your code */
    <</widget>>
}}}
> //Example://
{{{
    :: Widget [widget]
    <<widget "SimonSays">>
        <<set _array to ["Raise your hands!", "Jump!", "Dance!"]>>
        <<print _array.random()>>
    <</widget>>

    :: Story Passage 
    > Simon says: <<SimonSays>>
}}}
> Simon says: <<SimonSays>> [ [[Reload|Macro-Widget]] ]
\
<h3>Arguments and Contents</h3>\
Aside from using basic SugarCube code (or even JavaScript/jQuery inside a {{{<<run>>}}} or {{{<<script>>}}} [[macro|Macro-Script-Run]]), widgets allows the use of exta arguments when called, as well as becoming containers.
This is possible thanks to the special temporary variables: {{{_args[]}}} and {{{_contents}}} 

An argumented widget is used to create more complex but general macros. Arguments can be in the form of base value or variables, and will be stored in an array called {{{_args[]}}} (starting with the position 0).
> //Example://
{{{
    :: Widget [widget]
    <<widget "SimonSpecialSay">>
        <<if _args[0]>>
            <<print _args[0]>>
        <<else>>
            <<SimonSays>>
        <</if>>
    <</widget>>

→ this will check whether an argument has been included when calling the widget, and if so show the content of the argument.

    :: Story Passage
    > Simon says? <<SimonSpecialSay>>
    > Simon says: <<SimonSpecialSay "Fooled you!">>
}}}
> Simon says: <<SimonSpecialSay>>
> Simon says: <<SimonSpecialSay "Fooled you!">>

A container widget will create a special "macro", with an opening and closing brackets that can be wrapped around some text in the main passage to format it in a special way. It uses the variable {{{_contents}}} to link that text with the macro. 
> //Example://
{{{
    :: Widget [widget]
    <<widget "SimonDoes" container>>
        <div class="simon">
            <hr class="before-simon">
            <p class="simon-does">_contents</p>
        </div>
    <</widget>>

    :: StyleSheet [sheet]
    .simon {
        width: 134px;
        margin: auto;
    }
  
    hr.before-simon {
        border-color: darkgreen;
    }
  
    .simon-does {
        text-transform: capitalize;
    }

    :: Story Passage
    <<SimonDoes>>And so he does!<</SimonDoes>>
}}}
<<SimonDoes>>And so he does!<</SimonDoes>>
\
It is also possible to combine both types of widgets, making is an argumented container widget.
> //Example from the Documentation://
{{{
    <<widget "say" container>>
        <div class="say-box">
            <img class="say-image" @src="'images/' + _args[0].toLowerCase() + '.png'">
            <p class="say-text">_contents</p>
        </div>
    <</widget>>

    <<say "Chapel">>
        Tweego is a pathway to many abilities some consider to be… unnatural.
    <</say>>
}}}
This code will create a dialogue box ({{{<div>}}}), showing an image ({{{<img>}}}) next to the text ({{{<p>}}}). The url of image is pulled by the argument ({{{images/chapel.png}}}).

Though it should not be abused, you can call a widget inside another widget:
{{{
    <<widget "Test">>This is a test<</widget>>

    <<widget "whoops">>
        <<if $var is 0>>
            <<Test>>
        <<else>>
            This is a bug.
        <</if>>
    <</widget>>
}}}

> ''Note:'' this macro differs from the {{{<<include>>}}} [[macro|Macro-Include]], in that {{{<<include>>}}} will include the whole passage on the page, while {{{<<widget>>}}} will only call what is defined inside the macro.

<div id="link-menu">[[Back to the Convenient Macro Menu|Macro-Conv]] - [[Back to the Start Menu|Start]]</div>


:: Macros List {"position":"1200,300","size":"200,100"}
<h1>Macro List</h1>
Below, you will find the alphabetical list of SugarCube macro, and where they are discussed in this guide.

* {{{<<actions>>}}}: [[Single-Use Choice Lists|Macro-Action-Choice]]
* {{{<<addclass>>}}}: [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]]
* {{{<<append>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<audio>>}}}: [[Playing Tracks in a Passage|Audio-Macro]]
* {{{<<back>>}}}: [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
* {{{<<break>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<button>>}}}: See {{{<<link>>}}}
* {{{<<cacheaudio>>}}}: [[Setting up the Audio Tracks|CacheAudio]]
* {{{<<capture>>}}}: [[Capturing the Value of a Variable|Macro-Capture]]
* {{{<<checkbox>>}}}: [[Multi or Single Option Choices|Macro-CheckRadio]]
* {{{<<choice>>}}}: [[Single-Use Choice Lists|Macro-Action-Choice]]
* {{{<<continue>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<copy>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<createaudiogroup>>}}}: [[Create Track Groups and Playlists|Macro-Group-Playlist]]
* {{{<<createplaylist>>}}}: [[Create Track Groups and Playlists|Macro-Group-Playlist]]
* {{{<<cycle>>}}}: [[Cycles and Conditional Options|Macro-Cycle]]
* {{{<<done>>}}}: [[Emulating PassageDone for one Passage|Macro-Done]]
* {{{<<for>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<if>>}}}: [[Display Variation|Macro-If-Basic]], [[More Conditional Statements|Macro-If]]
* {{{<<include>>}}}: [[Including a Passage inside another|Macro-Include]]
* {{{<<goto>>}}}: [[Sending the Player to a Passage|Macro-Goto]], [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
* {{{<<link>>}}}: [[Linking Passages|Macro-Link-Basic]], [[Displaying more than text in Links|Macro-Link]]
* {{{<<linkappend>>}}}: [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* {{{<<linkprepend>>}}}: [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* {{{<<linkreplace>>}}}: [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* {{{<<listbox>>}}}: [[Listboxes and Conditional Options|Macro-Listbox]]
* {{{<<masteraudio>>}}}: [[Other Audio Macros|Audio-Other]]
* {{{<<nobr>>}}}: [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
* {{{<<numberbox>>}}}: [[Player Input in three macros|Macro-Input]]
* {{{<<playlist>>}}}: [[Playing Tracks in a Passage|Audio-Macro]]
* {{{<<prepend>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<print>>}}} / {{{<<=>>}}} / {{{<<->>}}}: [[Display Variables, the Print Macro and Variants|Macro-Print]]
* {{{<<radiobutton>>}}}: [[Multi or Single Option Choices|Macro-CheckRadio]]
* {{{<<remove>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<removeaudiogroup>>}}}: [[Other Audio Macros|Audio-Other]]
* {{{<<removeclass>>}}}: [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]]
* {{{<<removeplaylist>>}}}: [[Other Audio Macros|Audio-Other]]
* {{{<<repeat>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<replace>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<return>>}}}: [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
* {{{<<run>>}}}: [[Unsetting Variables|Macro-Unset]], [[Using JavaScript in the Passage|Macro-Script-Run]]
* {{{<<script>>}}}: [[Using JavaScript in the Passage|Macro-Script-Run]]
* {{{<<set>>}}}: [[Tracking Information|Macro-Set-Basic]], [[Setting and Changing Variables|Macro-Set]]
* {{{<<silently>>}}}: [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
* {{{<<stop>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<switch>>}}}: [[An Alternative to Conditional Statements|Macro-Switch]]
* {{{<<textarea>>}}}: [[Player Input in three macros|Macro-Input]]
* {{{<<textbox>>}}}: [[Player Input in three macros|Macro-Input]]
* {{{<<timed>>}}}: [[Delaying Displaying Text or Running Code|Macro-Timed]]
* {{{<<toggleclass>>}}}: [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]]
* {{{<<type>>}}}: [[Displaying Text Letter by Letter|Macro-Type]]
* {{{<<unset>>}}}: [[Unsetting Variables|Macro-Unset]]
* {{{<<waitforaudio>>}}}: [[Setting up the Audio Tracks|CacheAudio]]
* {{{<<widget>>}}}: [[Creating and Using a Widget|Macro-Widget]]

<div id="link-menu"><<back "Return to Previous Page">> - [[Back to the Start Menu|Start]]</div>


:: Markup [chapter menu] {"position":"800,600","size":"200,100"}
<h1>SugarCube Markup and Basic Styling</h1>
Whether to format text or code in a specific way, SugarCube includes some special markup code, separate from HTML and macros. The ones mentioned in the listed pages below would be most relevant to basic and starting projects. For more advanced Markup, see [[this page|Markup-Int]].

* [[Showing the Value of a Variable|Markup-Variable]]
* [[Using a Variable inside a Link|Markup-Link]] 
* [[Display an Image, and turn an Image into a Link|Markup-Image]]s
* [[Removing a Line-break|Markup-Nobr]] (Empty space on the page)
* [[Basic Text Styling|Markup-Styling]] (long) 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Markup-Attribute [page] {"position":"800,1200","size":"100,100"}
<h1>Special Attributes and Directives</h1>
While macros allow for interaction or affect elements on the page, it is also possible to link variables or passages directly to HTML elements, and enable special behaviour unatainable with built-in macros.
\
<h3>Special Attributes</h3>\
SugarCube provides some special HTML attributes to enable special behaviour from HTML elements. There are two main ones: {{{data-passage}}} and {{{data-setter}}}. While the latter will set a variable to a value (like {{{<<set>>}}}), the former will behave differently depending on the element (i.e. create a link towards a passage or display the content of the passage).
\
<h4>{{{data-setter}}}</h4>\
The {{{data-setter}}} attribute can be added to interactive elements like a link ({{{<a>}}}), a button ({{{<button>}}}) or an area inside a clickable image ({{{<area>}}}). It will set any SugarCube variable to a wanted value:
{{{
    data-setter="$var to 'value'"
}}}
> ''Note:'' be mindful when using quotes/apostrophes, or the attribute will not work!
{{{
    <a data-passage="Passage" data-setter="$checked to true">Check the Room</a>

    <button data-passage="Passage" data-setter="$thing to 'done'">Do the thing</button>

    <area shape="rect" coords="25,25,75,75" data-passage="Passage"
	data-setter="$treasure to 'empty'">
}}}
\
<h4>{{{data-passage}}}</h4>\
The {{{data-passage}}} will link a passage to an element, creating either a link between passages (like a {{{<<link>>}}}), displaying images or videos, or playing audio. 
    
Using {{{data-passage}}} to create a link between passages can be used for elements such as a link ({{{<a>}}}), a button ({{{<button>}}}) or an area inside a clickable image ({{{<area>}}}). It is most useful for map images, or custom elements to hide a link.
{{{
    <a data-passage="PassageName">Do the thing</a>

    <button data-passage="PassageName">Do the thing</button>

    <area shape="rect" coords="25,25,75,75" data-passage="PassageName">
}}}
> ''Note:'' This method will not create an arrow between passages on the Twine app.

As for multi-media elements, such as {{{<audio>}}}, {{{<img>}}}, {{{<source>}}} or {{{<video>}}}, {{{data-passage}}} will become the link between the element and the asset to use in the passage. These can be helpful when wanting to include external online assets.
> ''Note:'' this should be used in combination with the [[Asset Passage Tags|Tags-Asset]]
{{{
    <audio data-passage="AudioPassageName">

    <img data-passage="ImagePassageName">

    <source data-passage="AudioOrVideoPassageName">

    <video data-passage="VideoPassageName">
}}}
\
<h3>Attribute Directive</h3>\
SugarCube also allows variables to affect the class or id of an element, how they are styled, or even how they behave. It can be used for any attribute of an element, except for {{{data-setter}}}.

It is particularly useful when wanting to use HTML interactive element not included in SugarCube (e.g. slider in passage), creating stat bars without diving into JavaScript code, or formatting an element depending on the state of the game.

The directives can be coded two ways: {{{sc-eval:}}} or {{{@}}} before the relevant attribute.
Assuming that {{{_id = "foo"}}}:
{{{
    <span sc-eval:id="_id">…</span>
    <span @id="_id">…</span>

→ will work the same as:
    <span id="foo">…</span>
}}}
Assuming that {{{$stat = 45}}}
{{{
    <progress @value="$stat" max="100"></progress>
→ will display a simple stats bar
}}}

<div id="link-menu">[[Back to the Markup Menu|Markup-Int]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Code-Verbatim [page] {"position":"900,1200","size":"100,100"}
<h1>Displaying Code and Verbatim Text</h1>
This page might not be the most useful for game projects, as it involve displaying code or text without formatting. However, for projects like this guide, the markup below will prove quite helpful.

To do so, you can follow the Code Markup, with triple curvy brakets {{{ { } }}}, or the Verbatim Markup with triple quotes {{{ " " }}}. The difference between the markups will be on how it is translated into HTML.

The Code Markup will take two forms: an in-line one (HTML: {{{<code></code>}}}) and a block one (HTML: {{{<pre><code></code></pre>}}}). This guide has displayed both form with the different coloured blocks elements when showcasing code examples.
> //In-Line Code//:
{{{
    {{{<<set $var to true>>}}}

→ will be rended into:

    <code><<set $var to true>></code>
}}}
> //Block Code//:
{{{
    {{{
        <<set $var to true>>
    }}}

→ will be rended into:

    <pre><code><<set $var to true>></code></pre>
}}}
> ''Note:'' there should not be any space after the opening bracket or before the closing bracket. Othewise the code will be displayed as //in-line//. 

The Verbatim Markup will require triple quotes {{{ " " }}} (HTML: {{{<nowiki></nowiki>}}})
{{{
    """No //format//"""

→ will be rended into:
    <nowiki>No //format//</nowiki>
}}}

<div id="link-menu">[[Back to the Markup Menu|Markup-Int]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Image [page] {"position":"800,800","size":"100,100"}
<h1>Display an Image, and turn an Image into a Link</h1>
The Markup code to display an image works similarly to the [[Link Markup|Markup-Link]], though you will need to include the [[URL of an image|URL-Types]] for it to work:
{{{[img[URL]]}}}
> ''Note:'' When compiling the code into an HTML file, the code will transorm the SugarCube markup into the HTML version: {{{<img src="URL">}}}

This required URL can be an absolute, relative or online [[URL|URL-Types]]:
{{{
→ absolute URL:
    [img[C:/Users/YourAcount/Documents/Folder/image/garden.png]]

→ relative URL:    
    [img[images/garden.png]]

→ online URL:
    [img[https://your-domain.com/garden.png]]
}}}
> ''Note:'' I do not recommend using absolute URLs, especially if you are sharing your project with others, as it is easy for the link to break.

The URL of the image can also be stored inside a variable. Assuming that {{{$url = "garden.png"}}}:
{{{
[img[$url]]
    → will work the same way as
[img[garden.png]]
}}}

You can also turn the image into a clickable one, sending the player to another passage, like you would have with the [[Link Markup|Markup-Link]]. For example, the image below will send you to the Wikipedia website:
[img[https://upload.wikimedia.org/wikipedia/en/8/80/Wikipedia-logo-v2.svg][https://en.wikipedia.org/wiki/Main_Page]]
{{{
    [img[URL][PASSAGE]]
}}}
> //using variables//: {{{$passage = "Garden"}}} and {{{$url = "garden.png"}}}
{{{
[img[$url][$passage]]
    → will work the same way as
[img[garden.png][Garden]]
}}}
You can go even further and set a variable inside that Image Link:
{{{[img[URL][PASSAGE][$var to true]]}}}

> ''Note:'' for the Image Link, I would recomment using the {{{<<link>>}}} macro with the {{{<img>}}} HTML markup instead.

<div id="link-menu">[[Back to the Markup Menu|Markup]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Int [chapter menu] {"position":"800,1100","size":"200,100"}
<h1>More SugarCube Markup</h1>
While [[Markup]] can help format text on the screen, display an image or create a link, it can also be useful in affecting HTML elements on the page (like stats bars), or display small variation (like pronouns).

* [[Special Attributes and Directives|Markup-Attribute]] 
* [[Displaying Code and Verbatim Text|Markup-Code-Verbatim]] 
* [[Display Small Variation with Templates|Markup-Template]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Markup-Link [page] {"position":"900,700","size":"100,100"}
<h1>Using a Variable inside a Link</h1>
Aside from [[storing information|Macro-Set-Basic]], or being used in [[conditional statements|Macro-If-Basic]], you can use a variable inside links: to display a spefic text or send the player to a specific passage.
Assuming that {{{$passage = "Garden"}}} and {{{$text = "Go take a walk"}}}:
{{{
[[$text|$passage]]
    → will work the same way as
[[Go take a walk|Garden]]
}}}
> ''Note:'' using a variable to send the player to a passage is quite useful as a //Back to the Story// link for Codex pages (like [[this|Long-Return-JS]]).

You can also display the value of a variable with another string of text inside a link, by wrapping the text in quotes. Assuming that {{{$name = "Jane"}}}:<<set $name to "Jane">>
{{{[["I am " + $name|Passage]]}}} → [["I am " + $name|Passage]]
{{{[["She is " + $name + ", a friend."|Passage]]}}} → [["She is " + $name + ", a friend."|Passage]]
> ''Note:'' Do not use this markup as {{{[["Text" + $var]]}}}, as it will break the game!
> Note 2: You can use apostrophes {{{' '}}} instead of quotes {{{" "}}}.

If your link includes a quoted sentence and a variable, or a combination of straight quotes and apostrophes, you may run into issue with the printed link. I recommend using the curly types of quotes {{{“ ”}}} and apostrophes {{{‘ ’}}} for the text itself, as it is not recognised as code by Twine/SugarCube, and the straight version for the code. 
It is also possible to use {{{\}}} before the non-code character, as shown below:
{{{[["\"She\'s " + $name + ", a friend.\""|Passage]]}}} → [["\"She\'s " + $name + ", a friend.\""|Passage]]
<<unset $name>>
<div id="link-menu">[[Back to the Markup Menu|Markup]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Nobr [page] {"position":"900,800","size":"100,100"}
<h1>Removing a Line-break</h1>
Everytime you start a new line (of code or text) in a passage, Twine will automatically add a {{{<br>}}} HTML markup (also called a line-break) to match. This can become an issue when using macros or fomatted text (header, lists, etc..), as Twine may create more extra space than wanted. 

If you want to remove a line-break, you can do so with a backslash {{{\}}}:
{{{
    This is bat of a sentence... \
    ... that is broken in two.

or 

    This is bat of a sentence... 
    \... that is broken in two.

→ will show as:
    This is bat of a sentence... ... that is broken in two.
}}}
> ''Note:'' Though the backslash is quite useful, the {{{<<nobr>>}}} [[macro|Macro-Nobr-Silent]], the {{{nobr}}} [[special tag|Special-Tags]], or the [[Config setting|Basic-API-Config]] can help remove more {{{<br>}}} at once.

<div id="link-menu">[[Back to the Markup Menu|Markup]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Styling [page] {"position":"800,900","size":"100,100"}
<h1>Basic Text Styling</h1>
From using headers to changing the colour of one word, you can use some HTML (coupled with some CSS) OR use some formatting markup...
> ''Note:'' when {{{Beginning a line with...}}} is indicated, that character has to be the first on the line. If you have a space or an intentation at the start of the line, the text will not transform. 
> Also, if the text, passage, or project uses one of the [[Line-Break features|Markup-Nobr]], the Style Markup will not work. However, the HTML markup will!
\
<h3>Headings</h3>\
Beginning a line with an exclamation point {{{!}}}, you can define different levels of headings. Starting with one (for the largest heading), all the way to 6 (for the smallest one), each new exclamation point will decrease the importance and size of the header.
{{{
        Markup          HTML
          --             --
    !Level 1        → <h1></h1>
    !!Level 2       → <h2></h2>
    !!!Level 3      → <h3></h3>
    !!!!Level 4     → <h4></h4>
    !!!!!Level 5    → <h5></h5>
    !!!!!!Level 6   → <h6></h6>
}}}
\
<h3>Styling</h3>\
To render a text ''bold'' or //italics//, you need to wrap the text with special characters. You can mix and match the different stylings, as long as you nest one inside the other(s).
{{{
    //Italics//         → <em></em>
    ''Bold''            → <strong></strong>
    __Underline__       → <u></u>
    ==Strikethrough==   → <s></s>
    ^^Superscript^^     → <sup></sup>
    ~~Subscript~~       → <sub></sub>
}}}
> //Nesting styles//
{{{''//Bold and Italics//''}}} → ''//Bold and Italics//''
> ''Note:'' using styling markup (SugarCube or HTML) to style some text inside a [[Link Markup|Markup-Link]] often leads to strange results (or plainly won't work). The use of the {{{<<link>>}}} [[macro|Macro-Link]] in this case is recommended.
\
<h3>Lists - ordered and unordered</h3>\
Beginning the line with an asterisk {{{*}}} or a number/pound sign {{{#}}}, you can create respectively unordered or ordered lists of items (or code). Similarly the headings, adding more than one character consecutively will define the indentation of the list.
{{{
    * Item 1
    ** Item a
    * Item 2
→ will be the same as:
    <ul>
        <li> List
            <ul>
                <li>List</li>
            </ul>
        </li>
        <li>List</li>
    </ul>
}}}
* Item 1
** Item a
* Item 2
{{{
    # Item 1
    ## Item a
    # Item 2
→ will be the same as:
    <ol>
        <li> List
            <ol>
                <li>List</li>
            </ol>
        </li>
        <li>List</li>
    </ol>
}}}
# Item 1
## Item a
# Item 2
\
<h3>Horizontal Rule</h3>\
Beginning the line with four hyphen {{{-}}} characters, will create a horizontal line (like the one at the bottom of the page) marking a thematic break:
{{{
    ---- 
→ will be the same as:
    <hr>
}}}
\
<h3>Blockquotes</h3>\
Beginning the line with a right angle bracket {{{>}}}, you can create blockquote elements to include quotes on the page. This styling has been used in this quite for ''notes''.
Similarly the headings, adding more than one character consecutively will define the indentation of the list.
{{{
    >Main 1
    >>Nested 1
    >>Nested 2
    >Main 2
→ will be the same as:
    <blockquote>Line 1<br>
        <blockquote>Nested 1<br>
        Nested 2<br>
        </blockquote>
    Line 2<br>
    </blockquote>
}}}
>Main 1
>>Nested 1
>>Nested 2
>Main 2
\
<h3>Custom Style</h3>\
To create a block (like a {{{<span>}}} or a {{{<div>}}}) to target a spcecific bit of text, you need to wrap it with two at signs{{{@@}}}:
{{{
    @@Text@@ → <span>Text</span>

    @@
    Text     → <div>Text<div>
    @@

}}}
> ''Note:'' a {{{<div>}}} will create a block of text, while a {{{<span>}}} will stay inside a line.

To further customise a block, you can assign it a class {{{.class}}}, id {{{#id}}}, or CSS rule to it, seperating each and it from the text with a semi-colon {{{;}}}:
{{{
    @@#id;.class;color:red;Text@@ 
→ <span id="id" class="class" style="color:red;"></span>

    @@#id;.class;color:red;
    Text
    @@    
→ <div id="id" class="class" style="color:red;"><div>
}}}
> ''Note:'' you should only have one id per element, and no element on the page should share the same id. Multiple classes can be added to an element, and can be used for multiple elements at once.
\
<h3>Comments</h3>\
There are three ways of leaving a note in your passage which will be hidden to the player:
{{{
    /* A comment */     → Passage, JavaScript, Stylesheets
    /% A comment %/     → Passage
    <!-- A comment -->  → Passage, Special Passages
}}}

<div id="link-menu">[[Back to the Markup Menu|Markup]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Template [page] {"position":"800,1300","size":"100,100"}
<h1>Display Small Variation with Templates</h1>
The Template makrup is essentially a text replacement code that will display small variation (usually of one word). It works in combination with the [[Template API|TemplateAPI]], where the variation is defined. It is most useful for displaying pronouns, especially pronoun sets defined before player input.
> ''Note:'' For an example of Pronoun Template, see [[Chapel's Macro|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/pronoun-templates.md]] or [[HiEv's Widget|https://hiev-heavy-ind.com/Sample_Code/Sample_Code.html#Pronoun%20Templates]]. 

The markup is set with a question mark {{{?}}} before the defined template name ({{{?this}}}). If a Template has been defined in JavaScript, the code will look for any template markup on the page, and display the relevant element on the screen.
> ''Note:'' if the API is not set or the element is not defined in the Template, the markup will display the text as is, like {{{?this}}.}

Assuming that the template sets {{{?He}}} into //She// and {{{?his}}} into //her://
{{{
    ?He was always willing to lend ?his ear to anyone.
→ will be rended into:
    She was always willing to lend her ear to anyone.
}}}

<div id="link-menu">[[Back to the Markup Menu|Markup-Int]] - [[Back to the Start Menu|Start]]</div>


:: Markup-Variable [page] {"position":"800,700","size":"100,100"}
<h1>Showing the Value of a Variable</h1>
While you may be tempted to use a [[macro|Macro-Print]] to display the value of a variable, there is a much simpler way to do so. You only need to code the variable as such {{{$variable}}} in the passage.

Assuming that {{{$name}}} was set with the value {{{"Jane"}}}, you would see here its value:<<set $name to "Jane">>
{{{$name}}} → $name

For [[arrays|Variables-Base]], you can print either the full list of values or a specific value on the page. Assuming that {{{$list}}} has been set with the following values {{{[1, 9, 3, 4, 7]}}}, you would see:<<set $list = [1, 9, 3, 4, 7]>>
> //the whole array//:
{{{$list}}} → $list
> //one specific value// (here, the third in the list):
{{{$list[2]}}} → $list[2]
> ''Note:'' the first value inside an array is at position {{{[0]}}}, the second has the position {{{[1]}}}, etc...

For [[objects|Variables-Base]], there are two ways to show a stored value: indicating the specific propery inside square brackets {{{[' ']}}} or after a dot {{{.}}}. Assuming {{{$npc}}} has been set as {{{$npc = {name: 'Jane', age: '53'} }}}: <<set $npc = {name: 'Jane', age: '53'}>>
> //property after a dot://
{{{$npc.name}}} → $npc.name
> //property inside brackets://
{{{$npc['age']}}} → $npc['age']
> ''But'' you can't show the whole object as is:
{{{$npc}}} → $npc

> ''Note:'' See [[the Print Macro page|Macro-Print]] for other ways to show a value on the page.
<<unset $name, $list, $npc>>
<div id="link-menu">[[Back to the Markup Menu|Markup]] - [[Back to the Start Menu|Start]]</div>


:: Method-Array [page] {"position":"2600,1200","size":"100,100"}
<h1>Methods and Arrays</h1>
Arrays are where the methods are the most useful, as they are the main way to edit them or check its content. These methods can be used with the {{{<<set>>}}}/{{{<<run>>}}} macros, or in conditional statements.
> ''Note:'' These methods do not need to be attached to a variable, they can be attached to a non-saved array (see the {{{<Array>.includes()}}} examples).
\
<h2>Add elements to an array</h2>\
There are multiple ways to add elements to an array, but the methods listed below will do so differently.
The examples below will assume that {{{_array = ['Apple', 'Potatoe', 'Sausage']}}} and {{{_array2 = [1, 2, 3]}}}
<h4>{{{<Array>.concat()}}}</h4>\
{{{<Array>.concat()}}} will merge other arrays or lists of values to the original array, with the new values added at the end of the orginal array:
{{{
    _array.concat(value/variable)
}}}
{{{
    _array.concat(_array2) 
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3]

    _array.concat(_array2, 'words')
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3, 'words']

    _array.concat('words')
        → ['Apple', 'Potatoe', 'Sausage', 'words']
}}}
As the method will not edit the original variable, you would need to use the {{{<<set>>}}} macro for the change the stay constant:
{{{<<set _array to _array.concat(_array2)>>}}}
> ''Note:'' if you want to only include new values to the array, you would need to use {{{<Array>.concatUnique()}}}
<h4>{{{<Array>.push()}}}</h4>\
{{{<Array>.push()}}} will add values to the original array, with the new values to be added at the end of the orignal array:
{{{
    _array.push(value/variable)
}}}
{{{
    _array.push(_array2)
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3]

    _array.push(_array2, 'words')
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3, 'words']

    _array.push('words')
        → ['Apple', 'Potatoe', 'Sausage', 'words']
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.push(_array2)>>
    <<set _array.push(_array2)>>
    <<run _array.push(_array2)>>
}}}
> ''Note:'' if you want to only include new values to the array, you would need to use {{{<Array>.pushUnique()}}}
<h4>{{{<Array>.unshift()}}}</h4>\
{{{<Array>.unshift()}}} will add values to the original array, with the new values to be added at the ''beginning'' of the orignal array:
{{{
    _array.unshift(value/variable)
}}}
{{{
    _array.unshift(_array2)
        → [1, 2, 3, 'Apple', 'Potatoe', 'Sausage']

    _array.unshift(_array2, 'words')
        → [1, 2, 3, 'words', 'Apple', 'Potatoe', 'Sausage']

    _array.unshift('words')
        → ['words', 'Apple', 'Potatoe', 'Sausage']
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.unshift(_array2)>>
    <<set _array.unshift(_array2)>>
    <<run _array.unshift(_array2)>>
}}}
> ''Note:'' if you want to only include new values to the array, you would need to use {{{<Array>.unshiftUnique()}}}
\
<h3>Remove elements from an array</h3>\
There are multiple ways to remove elements from an array, but the methods listed below will do so differently.
The examples below will assume that {{{_array = ['Apple', 'Apple', 'Potatoe', 'Sausage', 1, 2, 3]}}} and {{{_array2 = [1, 2, 3]}}}
\
<h4>{{{<Array>.delete()}}}</h4>\
{{{<Array>.delete()}}} will remove any instance of the targeted value.
{{{
    _array.delete(value/variable)
}}}
{{{
    _array.delete(_array2)
        → ['Apple', 'Apple', 'Potatoe', 'Sausage']
    _array.delete(_array2, 'Apple')
        → ['Potatoe', 'Sausage']
    _array.delete('Apple')
        → ['Potatoe', 'Sausage', 1, 2, 3]
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.delete(_array2)>>
    <<set _array.delete(_array2)>>
    <<run _array.delete(_array2)>>
}}}
<h4>{{{<Array>.deleteAt()}}}</h4>\
{{{<Array>.deleteAt()}}} will work similarly to the previous method, but will target the element at a certain position in the array.
> ''Note:'' the first element in an array starts at 0.
> You can use an array filled with numbers instead of of multiple values.
{{{
    _array.deleteAt(value/variable)
}}}
{{{
    _array.deleteAt(_array2)
        → ['Apple', 1, 2, 3]
    _array.deleteAt(0, _array2)
        → [1, 2, 3]
    _array.deleteAt(6)
        → ['Apple', 'Apple', 'Potatoe', 'Sausage', 1, 2,]
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.deleteAt(_array2)>>
    <<set _array.deleteAt(_array2)>>
    <<run _array.deleteAt(_array2)>>
}}}
<h4>{{{<Array>.pluck()}}}</h4>\
{{{<Array>.pluck()}}} and {{{<Array>.pluckMany()}}} are two methods what will respectively remove an element/multiple elements from the array in a random manner.
> ''Note:'' for {{{<Array>.pluckMany()}}}, you can use an integer variable to indicate the number of elements you want to remove.
{{{
    _array.pluck()
    _array.pluckMany(number/variable)
}}}
{{{
    _array.pluckMany(3)
    _array.pluckMany(_var)
}}}
These methods can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.pluck(_array2)>>
    <<set _array.pluckMany(_array2)>>
    <<run _array.pluck(_array2)>>
}}}
<h4>{{{<Array>.pop()}}} and {{{<Array>.shift()}}}</h4>\
{{{<Array>.pop()}}} and {{{<Array>.shift()}}} will remove respectively the last and first element in an array.
{{{
    _array.pop()
→ will remove the element "3" from the array

    _array.shift()
→ will remove the element "Apple" from the array
}}}
These methods can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.pluck(_array2)>>
    <<set _array.pluckMany(_array2)>>
    <<run _array.pluck(_array2)>>
}}}
\
<h3>Check the properties of an array</h3>\
There are multiple ways to check the properties of an array. Depending on what you are looking for, you may find one method working better than another. 
<h4>{{{<Array>.includes()}}} and its alternatives</h4>\
{{{<Array>.includes()}}} will check whether an element is included in the array. It also comes in two other flavours: {{{<Array>.includesAll()}}}, which will check if all listed elements are included in an array, and {{{<Array>.includesAny()}}}, which will check whether one of the elements listed is included in an array.
{{{
    <Array>.includes(value, position)
    <Array>.includesAll(value/variable)
    <Array>.includesAny(value/variable)
}}}
> ''Note:'' the {{{position}}} parameter of {{{<Array>.includes()}}} will start the search for the wanted element starting that position in the array.
\
The method is best used in conditional statements:
{{{
    <<if _array.includes("Apple")>>...<</if>>
→ since the array has the element "Apple", it will run the content
    <<if _array.includes("Apple", 3)>>...<</if>>
→ this won't run, since the elements "Apple" are in positions 0 and 1

    <<if _array.includesAll(_array2, "Apple")>>...<</if>>
→ since the array has those elements, it will run the content
    <<if _array.includesAll(_array2, 4)>>...<</if>>
→ won't run, since the array does not have the element 4

    <<if _array.includesAny(_array2, "Apple")>>...<</if>>
    <<if _array.includesAny(_array2, 4)>>...<</if>>
→ since the array has those elements, it will run the content

Using a non-variable array as the receiver:
    <<if ["John", "Jane", "Sylvia"].includes($var)>>...<</if>>
→ if the value of the variable is included in this array, the code will run.
}}}
> ''Note:'' this last example can be useful to block certain names from being used by the player when setting their character.
\
<h4>{{{<Array>.first()}}} and {{{<Array>.last()}}}</h4>\
{{{<Array>.first()}}} and {{{<Array>.last()}}} will return respectively the element in the first and last position in the array.
{{{
    <Array>.first()
    <Array>.last()
}}}
Among other, they can be used in conditional statements or setting another variable:
{{{
    <<if _array.first() is "Apple">>...<</if>>
→ this will run, since the first element of the array is "Apple"
    <<if _array.first() is 1>>...<</if>>
→ this won't run

    <<set $var to _array.last()>>
→ the value of $var will be "3"
}}}
<h4>{{{<Array>.count()}}}</h4>\
{{{<Array>.count()}}} will check how many times an element is included in the array. You can indicate a {{{position}}} to start the search at said position in the array
{{{
    <Array>.count(value, position)
}}}
{{{
    _array.count("Apple")    → 2
    _array.count("Apple", 4) → 0
→ the elements 'Apple' are at position 0 and 1
}}}
> ''Note:'' the method cannot be left empty. If you are looking to check the length of an array, you should use {{{.length}}} instead.
\ 
<h3>Other Array Methods</h3>\
There are handful of other methods one can use with arrays.
<h4>{{{<Array>.random()}}}</h4>\
{{{<Array>.random()}}} will take a value from the array at random (but not modify the orignal array), and {{{<Array>.randomMany()}}} will do the same thing but take as many as indicated:
{{{
    <Array>.random()
    <Array>.randomMany(number)
}}}
> ''Note:'' it words similarly to the [[function|Function-Clone-Random]] {{{either()}}}.
You can use these methods in conditional statements, to set variable, or simply print on the screen:
{{{
    <<set $var to _array.random()>>
    <<= _array.randomMany(3)>>
    <<if _array.random() is "Apple">>...<</if>>
}}}
<h4>{{{<Array>.shuffle()}}}</h4>\
{{{<Array>.shuffle()}}} wiill shuffle the order of the values in the array, at random.
{{{
    _array.shuffle()
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.shuffle()>>
    <<set _array.shuffle()>>
    <<run _array.shuffle()>>
}}}
<h4>{{{<Array>.flat()}}}</h4>\
{{{<Array>.flat()}}} will flatten an array containing sub-arrays.
{{{
    <Array>.flat(depth)
}}}
> ''Note:'' the {{{depth}}} parameter is optional, if omitted, it will default to 1.
Assuming that {{{_array3 = [["Alfa", "Bravo"], [["Charlie", "Delta"], ["Echo"]], "Foxtrot"]}}}
{{{
    _array.flat()   → ["Alfa", "Bravo", ["Charlie", "Delta"], ["Echo"], "Foxtrot"]
    _array.flat(2)  → ["Alfa", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot"]
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.flat()>>
    <<set _array.flat(2)>>
    <<run _array.flat(3)>>
}}}

<div id="link-menu">[[Back to the Methods Menu|Methods]] - [[Back to the Start Menu|Start]]</div>


:: Method-Number [page] {"position":"2700,1200","size":"100,100"}
<h1>Methods and Numbers</h1>
Mathematical methods can be quite useful in a project, especially when dealing with player statistics and stat bars, to ensure a value does not exceed or go below a certain range.
\
<h3>{{{Math.round()}}} </h3>\
This method will round the numerical value of a variable or equation to the nearest full number. It is most useful when wanting to keep the results of statistic calculations to a round value.
{{{
    Math.round(value)
    Math.round(5.5)  → 6
    Math.round(-5.5) → -5
}}}
> ''Note:'' this method is native to [[JavaScript|https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round]].

While the use of this method can be as simple as rounding the value of a variable, you can use it for more complex equations:
{{{
    <<set $stoic to Math.round($stoic)>>
→ will round the value of the value of $stoic to the nearest full number.

    <<set $stoic to Math.round( $stoic + ( ( 100 - $stoic ) * ( _increase / 100 ) ) )>>
→ will increase the value of $stoic by a percentage set by _increase, then round it to the nearest number.
}}}
> ''Note:'' This last calculation is a recreation of the ChoiceScript Fairmath system.
\
<h3>{{{Math.trunc()}}}</h3>\
This method will remove any decimal from the value.
{{{
    Math.trunc(value)
    Math.trunc(5.5)    → 5
    Math.trunc(12.678) → 12
}}}
> ''Note:'' this method is native to [[JavaScript|https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc]].
\
<h3>{{{Math.clamp()}}}</h3>\
This method will check whether the value is within a set range, and calculate a new value within the bounds. It is most useful when when wanting to ensure the value of a variable stays between bounds (ex: a stat not going above 100% or lower than 0%).
{{{
    Math.clamp(value, min, max)
    Math.clamp($var, 6, 300)
}}}
The method alone will not change the value of a variable, this needs to be done with a {{{<<set>>}}} macro:
{{{
    <<set $stoic to Math.clamp($stoic, 0, 100)>>
    <<set $stoic to Math.clamp(($stoic + 4) * 5, 0, 100)>>
}}}
> ''Note:'' for simple clamping without further calculation, this can also be done with {{{<Number>.clamp()}}}, {{{<<set $stoic to $stoic.clamp(0, 100)>>}}}.

<div id="link-menu">[[Back to the Methods Menu|Methods]] - [[Back to the Start Menu|Start]]</div>


:: Method-String [page] {"position":"2600,1300","size":"100,100"}
<h1>Methods and String Variables</h1>
The methods below are mainly useful to change the formatting of string variables, or see if certain characters are included in the strings. With the methods below, the code will look at a string as if it was an array of character (including space and punctuation), with the first having the position 0.
\
<h3>Changing the Formatting of Strings.</h3>\
Whether to change the string to its upper or lowercase version, or just tranform the frist character, you would need to use one of the following methods: {{{.toLowerCase()}}}/{{{.toLocaleLowerCase()}}}, {{{.toUpperCase()}}}/{{{.toLocaleUpperCase()}}}, {{{.toUpperFirst()}}}/{{{.toLocaleUpperFirst()}}}
> ''Note:'' the {{{.toLocale-()}}} method transforms the string in accordance to the user's language and region in their device.
Assuming that {{{$jane = "jane"}}} and {{{$john = "John"}}} 
{{{
    <<print $jane.toUpperFirst()>> → Jane
    <<print $jane.toUpperCase()>>  → JANE
    <<print $john.toLowerCase()>>  → john
}}}
You can also save this information into a variable or use them in conditional statements:
{{{
    <<set $name to $jane.toUpperFirst()>>
→ $name will have the value "Jane"

    <<if $john.toLowerCase() is "john">>...<</if>>
}}}
\
<h3>Get the First or Last Character of a String</h3>\
To find the first or last character of a string variable, you would need to use respectively {{{.first()}}} and {{{.last()}}}. Assuming that {{{$var = "Hello, World :D"}}}:
{{{
    <<print $var.first()>> → H
    <<print $var.last()>>  → D
}}}
\
<h3>Find if or how many times a Substring is included in a String Variable</h3>\
Similarly to [[arrays|Method-Array]], to find if a substring is included in a variable, you would need to use {{{.includes()}}}. With this method, you can do a wide search, or start it at a certain number. Assuming that {{{$var = "Hello, World :D"}}}:
{{{
    <<if $var.includes('lo')>>.this will show.<</if>>
    <<if $var.includes('lo', 2)>>.this won't show.<</if>>
    <<if $var.includes('lo', 6)>>.this won't show.<</if>>
    <<if $var.includes('love')>>.this won't show either.<</if>>
}}}
On the other hand, {{{.count()}}} will look at how many times a substring is included in a variable. Assuming that {{{$var = "Hello, World :D"}}}:
{{{
    <<print $var.count('l')>> → 3
    <<print $var.count('l', 5)>> → 1
}}}
> ''Note:'' the method cannot be left empty. If you are looking to check the length of a string, you should use {{{.length}}} instead.

<div id="link-menu">[[Back to the Methods Menu|Methods]] - [[Back to the Start Menu|Start]]</div>


:: Method-Variables [page] {"position":"1100,1900","size":"100,100"}
<h1>More Methods to change Variables</h1>
The methods below should be used with other macros, such as {{{<<set>>}}}, {{{<<run>>}}}, {{{<<print>>}}} or even {{{<<if>>}}}, as well as JavaScript.
\
<h3>String-related Methods</h3>\
<h4>{{{String.format()}}}</h4>\
This method will help merge and format strings together, following the coded arguments.
{{{
    String.format(format , arguments…)
}}}
This method had 2 parameters:
* {{{format}}} (string), consisting of normal text and format items.
** {{{index}}}, starting from {{{0}}}, indicating where to place the item 
** {{{alignment}}} (optional), inside the index, length of the field and the alignment of the argument within the field (positive = right, negative = left)
* {{{arguments}}}, a list of arguments, corresponding to the elements to place in the index.
** can be a list of strings {{{"word", "word"}}} or an array {{{['word', 'word']}}}
\
> //Examples://
{{{
→ List of arguments:
    String.format("{0}, {1}!", "Hello", "World") 
    → returns "Hello, World!"
    
→ Array argumment:
    String.format("{0}, {1}!", [ "Hello", "World" ])
    → returns "Hello, World!"

→ Alignment right:
    String.format("{0,6}", "foo")
    → returns "   foo"

→ Alignment left:
    String.format("{0,-6}", "foo")
    → returns "foo   "
}}}
\
You can also use variables for either parameter.
> //Assuming that// {{{_var = Hello}}} and {{{_var2 = World}}}
{{{
    String.format("{0}, {1}!", "_var", "_var2")

→ will be the same as:
    String.format("{0}, {1}!", [ "Hello", "World" ])
}}}
> //Using the method inside// {{{<<set>>}}}
{{{
    <<set $var to String.format("{0}, {1}!", "_var", "_var2")>>
→ will be the same as:
    <<set $var to _var + ", " + _var2 + "!">>
}}}
\
<h4>{{{RegExp.escape()}}}</h4>\
This method will take the given string and return an expression where the [[metacharacters|https://www.w3schools.com/jsref/jsref_obj_regexp.asp]] would be ignored.
{{{
    RegExp.escape('That will be $5 (cash only)')   
→ returns 'That will be \$5 \(cash only\)'
}}}
> ''Note:'' there will only be very specific situations where this method is relevant to a project.
\
<h3>Array-related Methods</h3>\
\
<h4>{{{<Array>.countWith()}}}</h4>\
This method will count every element in an array fitting the defined function. It will be useful to count the number of elements in an array for complex conditions requiring functions.
{{{
    <Array>.countWith(predicate [, thisArg])
}}}
It has 2 parameters:
* {{{predicate}}}, the function used to test each member of the array. It is called with 3 arguments:
** {{{value}}}, the processed member 
** {{{index}}} (optional), the index of the member being processed
** {{{array}}} (optional), the array being processed
* {{{thisArg}}} (optional), the value used as {{{this}}}
\
> //Examples://
{{{
→ $fruits = ["Apples", "Oranges", "Plums", "Oranges"]
    
    $fruits.countWith(
        function (fruit) { 
            return fruit === "Oranges"; 
        }
    )
}}}
This will return as 2, since there are 2 counts of {{{Oranges}}} in the array.
{{{
→ $numbers = [1, 2.3, 4, 76, 3.1]

    $numbers.countWith(
        Number.isInteger
    ) 
}}}
This will return as 3, since there are 3 counts of full numbers in the array. 
{{{
→ $items = [
    { name : 'Healing potion', kind : 'potion' },
    { name : 'Longsword', kind : 'weapon' },
    { name : 'Mana potion', kind : 'potion' },
    { name : 'Dead rat', kind : 'junk' },
    { name : 'Endurance potion', kind : 'potion' },
    { name : 'Shortbow', kind : 'weapon' }
    ]

    $items.countWith(
        function (item) { 
            return item.kind === 'junk';
        }
    )  
}}}
This will return as 1, since there is only 1 count of junk object in the array.
\
<h4>{{{<Array>.deleteWith()}}}</h4>\
This method will remove every element in an array fitting the defined function. It will be useful to remove elements in an array for complex conditions requiring functions.
{{{
    <Array>.deleteWith(predicate [, thisArg])
}}}
It has 2 parameters:
* {{{predicate}}}, the function used to test each member of the array. It is called with 3 arguments:
** {{{value}}}, the processed member 
** {{{index}}} (optional), the index of the member being processed
** {{{array}}} (optional), the array being processed
* {{{thisArg}}} (optional), the value used as {{{this}}}
\
> //Examples, assuming that:// {{{$fruits = ["Apples", "Apricots", "Oranges"]}}}
{{{
    $fruits.deleteWith(function (val) {
        return val === "Apricots";
    })

→ the function removes any instance of ["Apricots"]
    → $fruits = ["Apples", "Oranges"]
}}}
{{{
    $fruits.deleteWith(function (val) {
        return val.startsWith("Ap");
    })

→ the function removes any instance starting with ["Ap"]
    → $fruits = ["Oranges"]
}}}
> //Examples, assuming that:// {{{$fruits = [{ name : "Apples" }, { name : "Apricots" }, { name : "Oranges" }]}}}
{{{
    $fruits.deleteWith(function (val) {
        return val.name === "Apricots";
    })

→ the function will remove any iteration where {name : "Apricots"}
    → $fruits = [{ name : "Apples" }, { name : "Oranges" }]
}}}
{{{
    $fruits.deleteWith(function (val) {
        return val.name.startsWith("Ap");
    })

→ this function will remove any interation where {name} starts with {"Ap"}
    → $fruits = [{ name : "Oranges" }]
}}}
\
<h4>{{{<Array>.flatMap()}}}</h4>\
This method will flatten an array in accordance to a defined function. 
{{{
    <Array>.flatMap(callback [, thisArg])
}}}
> ''Note:'' it is identical to {{{<Array>.map(…).flat()}}}.
It has 2 parameters:
* {{{callback}}}, the function used to produce members of the edited array. It is called with 3 arguments:
** {{{value}}}, the processed member 
** {{{index}}} (optional), the index of the member being processed
** {{{array}}} (optional), the array being processed
* {{{thisArg}}} (optional), the value used as {{{this}}} when executing {{{callback}}}
> //Assuming that:// {{{$npa = ["Alfa", "Bravo Charlie", "Delta Echo Foxtrot"]}}}
{{{
    $npa.flatMap(function (val) {
        return val.split(" ");
    })

→ this function will flatten the array 
  by removing all spaces between words
    → $npa = ["Alfa", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot"]
}}}

<div id="link-menu">[[Back to the Methods Menu|Methods-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Method-jQuery [page] {"position":"1200,1900","size":"100,100"}
<h1>jQuery Methods and Interactivity</h1>
\
<h3>{{{<jQuery>.ariaClick()}}}</h3>\
This method will make the target element WAI-ARIA-compatible clickable. This means the element will get accessibility attributes and can be activated with a mouse click, or key press (enter/return/spacebar).
{{{
    <jQuery>.ariaClick([options ,] handler)
}}}
The method has 2 parameters:
* {{{options}}} (optional), options to be used when creating the clickable
** {{{namespace}}}, list of event namespaces
** {{{one}}}, if indicated, the clickable is single-use 
** {{{selector}}}, if indicated, the selector will filter the descendants that triggered the event.
** {{{data}}}, to be passed to the handler 
** {{{controls}}}, value for {{{aria-controls}}}
** {{{pressed}}}, value for {{{aria-pressed}}}
** {{{label}}}, value for {{{aria-label}}} and {{{title}}}
* {{{handler}}} (function), the callback to invoke when the element is activated.
\
> //Examples//
{{{
→ existing element: <a id="so-clicky">Click me</a>
    $('#so-clicky').ariaClick(function (event) {
        /* do stuff */
    });
}}}
{{{
→ creating a basic link + appending output:
    $('<a>Click me</a>')
        .ariaClick(function (event) {
            /* do stuff */
        })
	    .appendTo(output);
}}}
{{{
→ creating a basic button + appending output:
    $('<button>Click me</button>')
        .ariaClick(function (event) {
            /* do stuff */
        })
        .appendTo(output);
}}}
{{{
→ creating a link with options + appending output:
    $('<a>Click me</a>')
        .ariaClick({
            one   : true,
            label : 'This single-use link does stuff.'
        }, function (event) {
            /* do stuff */
        })
        .appendTo(output);
}}}
\
<h3>{{{<jQuery>.ariaDisabled()}}}</h3>\
This method will change the ''disabled'' state of the target WAI-ARIA-compatible clickable element(s).
{{{
    <jQuery>.ariaDisabled(state)
}}}
> ''Note:'' this method will only to work with clickables created via {{{<jQuery>.ariaClick()}}}, which is what SugarCube uses to handle the link markups and macros.
\
> //Examples://
{{{
$('.macro-link').ariaDisabled(true)   
    → Disable all <<link>> on the page
$('.macro-link').ariaDisabled(false)  
    → Enables  all <<link>> on the page
}}}
\
<h3>{{{<jQuery>.ariaIsDisabled()}}}</h3>\
This method will check whether the targetted WAI-ARIA-compatible clickable element(s) is(are) disabled.
{{{
    <jQuery>.ariaIsDisabled()
}}}
> ''Note:'' this method will only to work with clickables created via {{{<jQuery>.ariaClick()}}}, which is what SugarCube uses to handle the link markups and macros.
\
> //Examples assuming that an element {{{#so-clicky}}} exists//:
{{{
$('#so-clicky').ariaIsDisabled()
  → Returns true if {#so-clicky} is disabled
  → Returns false if {#so-clicky} is enabled
}}}
\
<h3>{{{jQuery.wiki()}}}</h3>\
This methos will wikify the indicated content source(s) and discard the result (unless there are errors). This is only useful when you want to invoke a macro for its side-effects but don't need the output.
{{{
    jQuery.wiki()
}}}
It has 1 parameter:
* {{{sources}}}: the list of content sources 
> //Example://
{{{
    $.wiki('<<somemacro>>');  
→ Invokes the <<somemacro>> macro, discarding any output
}}}
\
<h3>{{{<jQuery>.wiki()}}}</h3>\
This method is similar to the previous one, except it will append the output of the content source(s) to the targetted element(s).
{{{
    <jQuery>.wiki(sources…)
}}}
It has 1 parameter:
* {{{sources}}}: the list of content sources 
> //Examplem given the element:// {{{<div id="the-box"></div>}}}
{{{
    $('#the-box').wiki('Who //are// you?'); 
→ will append to {#the-box}
    "Who <em>are</em> you?"
}}}

<div id="link-menu">[[Back to the Methods Menu|Methods-Adv]] - [[Back to the Start Menu|Start]]</div>


:: Methods [chapter menu] {"position":"2600,1100","size":"200,100"}
<h1>Using Methods to change Variables</h1>
Methods are [[functions|Functions]], JavaScript blocks of code designed to do a specific task, linked to a reciever, like a variable, to run.
{{{
    <reciever>.method()
Example:
    $var.first()
}}}

In SugarCube, they are mainly used to handle arrays, change the formatting of strings values, or handle numbers.
* [[Methods and String Variables|Method-String]]
* [[Methods and Numbers|Method-Number]]
* [[Methods and Arrays|Method-Array]] (long!)
> ''Note:'' Other native JavaScript or jQuery methods can be used with SugarCube, but requires knowledge of those languages. The ones listed in this guide would be the most useful.

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Methods-Adv [chapter menu] {"position":"1100,1800","size":"200,100"}
<h1>More Variable and Interaction Methods</h1>
In the [[Methods]] chapter, methods were defined JavaScript blocks of code designed to do a specific task, linked to a reciever, like a variable, to run. 
This chapter includes more complex methods, often involving functions. Knowledge of both JavaScript and jQuery is required here.

* [[More Methods to change Variables|Method-Variables]] 
* [[jQuery Methods and Interactivity|Method-jQuery]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Organise {"position":"2475,100","size":"100,100"}
<h1>Some Random Stuff That will be Organised Later</h1>
Here are some SugarCube relevant bits, which I haven't found a good place to put right now.
The links below won't change but may be located in a different Sub Menu at a later date. See [[Update Log]] for more information.

Welp there is nothing there:P
<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Passage {"position":"2475,225","size":"100,100"}
This is an empty passage for an interactive example.

<<back "Go back to the previous passage!">>


:: PassageAPI [chapter page] {"position":"3500,2000","size":"200,100"}
<h1>Managing Passage Properties with APIs</h1>
The APIs below deal with properties of the Passage object, which is returned by the {{{Story.get()}}} [[API|StoryAPI]].
> ''Note:'' the information in those properties should be treated as ''read-only'', as modifying them can lead to unexpected behaviour.
\
<h3>{{{<Passage>.domId}}}</h3>\
This API keeps the DOM ID of the passage, created from the slugified passage title.
{{{
    <Passage>.domId
}}}
\
<h3>{{{<Passage>.tags}}}</h3>\
This API keeps the tags of the passage, as an array.
{{{
    <Passage>.tags
}}}
\
<h3>{{{<Passage>.text}}}</h3>\
This API will return the raw text of the passage.
{{{
    <Passage>.text
}}}
\
<h3>{{{<Passage>.title}}}</h3>\
This API keeps the title of the passage.
{{{
    <Passage>.title
}}}
\
<h3>{{{<Passage>.description()}}}</h3>
This API returns the description of the passage, created from either an excerpt of the passage or defined by the {{{Config.passages.descriptions}}} [[setting|Config-Passage]].
> //Example://
{{{
    var passage = Story.get("The Ducky");
    passage.description()  
→ returns the description of "The Ducky" passage
}}}
\
<h3>{{{<Passage>.processText()}}}</h3>\
This API returns the processed text of the passage,  created from applying {{{nobr}}} tag and image passage processing to its raw text.
> //Example://
{{{
    var passage = Story.get("The Ducky");
    passage.processText()  
→ returns the fully processed text of "The Ducky" passage
}}}

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: PassageFooter {"position":"2000,200","size":"100,100"}
<<if tags().includes("sp-demo")>><hr>The Footer in action! included in a horizontal bar<<else>><hr>
	<center><<link "Lexicon">><<popup 'Lexicon' "Lexicon">><</link>> - [[Pages Index|Index]]
  [[Macros List]] - [[Function/Method List]] - [[API List]]
  <<link "Credits">><<popup "Credits" "Credits">><</link>> - [[Need More Help?|https://manonamora-if.tumblr.com/ask]]</center>
<</if>>


:: PassageHeader {"position":"1900,200","size":"100,100"}
<<if tags().includes("sp-demo")>>The Header in action! included in a horizontal bar<hr><</if>>


:: SP-Demo [sp-demo] {"position":"1800,800","size":"100,100"}
There is not much to say about the demo. I think the Special Passages speak for themselves.

<<back "Click Here to Go back">>


:: SP-HeaderFooter [page] {"position":"1700,700","size":"100,100"}
<h1>Headers and Footers</h1>
Whether wanting to display Chapter titles at the top of the page, or links to special passages (like the bottom of this page), the Headers and Footers are respectively attached at the top of and below the main body of the passage. It will [[load along|Events-Passage]] with the story passage.
Those Special Passages, {{{PassageHeader}}} and {{{PassageFooter}}}, will accept anything from simple text to complex code.
For example:
{{{
    :: PassageHeader
        <<if def $chapter>>Chapter $chapter<</if>>

    :: PassageFooter
        <<if $name is "Jane">>
            [[Jane's Curiosities|Inventory]]
        <<else>>
            [[$name + "'s closet"|Inventory]]
        <</if>>
}}}
\
> ''Note:'' if you are looking to add plain code without output (visible text), {{{PassageReady}}} and {{{PassageDone}}} is preferred. See [[this page|SP-PassageReady-Done]].

<div id="link-menu">[[Back to the Special Passages Menu|Special-Passage]] - [[Back to the Start Menu|Start]]</div>


:: SP-Init [page] {"position":"1700,800","size":"100,100"}
<h1>Setting Important Variables before Start</h1>
Some projects may require setting some variables in advance, for the game to progress as it should, to track certain information from the start, or to include macros or custom code to load before everything else (like the [[audio macros|Macro-Audio]] or defining stats bars).
{{{StoryInit}}} will accept any type of code, but will //not// display any text on the page.
{{{
    :: StoryInit
    <<set $var to "Jane">>
    <<set $object to {
        property1: 1,
        property2: "Home",
        property3: true
    }>>
    <<set setup.treasure to ['coins', 'rubies', 'jewelry']>>
    <<include "MoreCode">>
    <<AlsoCodeWidget>>
    <<cacheaudio "rain" "extra/rain.mp3">>
}}}
> ''Note:'' when //testing// a project (Debug Mode), Twine will display the list of macro used in StoryInit in a greyed box. This only appears in the Debug Mode; it is hidden otherwise.

<div id="link-menu">[[Back to the Special Passages Menu|Special-Passage]] - [[Back to the Start Menu|Start]]</div>


:: SP-PassageReady-Done [page] {"position":"2100,1200","size":"100,100"}
<h1>Process Code Before and After Rendering a Passage</h1>
{{{PassageReady}}} and {{{PassageDone}}} are two Special Passages that will trigger respectively before and after the story passage renders. Those passages will not render any output (i.e. text) on the page, but will run code for every new story passage visited. 
They are best used for code meant to be used for multiple passages during the game, such as checking the location of the player to trigger some code or change the display of the page.
{{{
    :: PassageReady 
    <<if $var is 0>><<goto "END">><</if>>
    <<if $points is 100>><<set $level++, $point to 0>><</if>>
    <<if not tags().includes('noreturn')>><<set $return to passage()>><</if>>

    :: PassageDone
    <<if tags().includes('bar')>><<addclass ".bottle" "empty">><</if>>
}}}
> ''Note:'' for some functionality (like [[overriding navigations|Basic-Config-Navig]] or [[Arbitrarily long returns|Long-Return-JS]]), it may be best to use JavaScript instead.
\
<h3>{{{PassageReady}}} or {{{PassageDone}}}</h3>\
While the passages will allow most code on the page (aside from DOM macros ([[text|Macro-ApPreRepCopy]]/[[class|Macro-DOM-Adv]]), which should only be added to {{{PassageDone}}}), whether a code is loaded before or after the passage is rendered will affect the development of the story.
{{{
Loading order:
    → PassageReady
    → PassageHeader
    → the content of the current Passage
    → PassageFooter
    → PassageDone
}}}
> The full ordered lists of events happening when a new passage is rendering can be found in the [[documentation|http://www.motoslave.net/sugarcube/2/docs/#events-navigation]].

Because of the loading order, placing code in {{{PassageReady}}} or {{{PassageDone}}} will not only affect the currently displayed passage, but also code from the previous passage.
Assuming that {{{$var is 2}}} before moving to a passage:
{{{
    :: Next Passage 
    <<if $var is 2>>
        The dog sleeps in the cottage.
    <<elseif $var is 1>>
        The dog yaps at the door.
    <<else>>
        The dog is not here.
    <</if>>
}}}
If the value of {{{$var}}} is changed inside {{{PassageReady}}}, the code above will be affected, and the displayed sentence will be different. However, if the value of {{{$var}}} is changed inside {{{PassageDone}}}, the code above will not be affected, but it may affect future passages.

<div id="link-menu">[[Back to the Special Passages and Tags Menu|Special-Tags]] - [[Back to the Start Menu|Start]]</div>


:: SP-StoryInterface [page] {"position":"2000,1300","size":"100,100"}
<h1>Changing the UI of the Project</h1>
If you want to ditch the basic SugarCube UI and have something more custom for your project, you will need to use the Special Passage {{{StoryInterface}}}. This passage only accepts HTML, and JavaScript inside a {{{<script>}}} markup at the bottom of the passage.
> ''Note:'' while knowledge of HTML and CSS is necessary to create your own UI, there are many templates available to use as is. See <<link "Credits">><<popup "Credits" "Credits">><</link>> for the Masterlist. Still, it is heavily recommended to understand the basics of both languages, when starting on your own.

This passage only has one requirement to run properly: include the {{{#passages}}} element.
{{{
    :: StoryInterface 
    <div id="passages"></div>
}}}
> ''Note:'' do not include anything inside the {{{#passages}}} div. It is the element that display the passage.

You can add any other element inside {{{StoryInterface}}}, even nesting elements inside one another:
{{{
    <div id="header">
        <h1>Title of the Game</h1>
    </div>
}}}
> //For a full example://
{{{
    <div id="parent">
        <div id="passages"></div>
        <div id="menu" data-passage="sidemenu">
            <!--Side menu, editable in the sidemenu passage-->
        </div>
    </div>
    <script>
        function myFunction() {
            document.getElementById("myMenu").classList.toggle("show");
        }
            
        /*Close the dropdown menu if the user clicks outside of it*/
        window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
                var dropdowns = document.getElementsByClassName("dropup-content");
                var i;
                for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>
}}}
> ''Note:'' This is the code in my [[One Page Template|https://manonamora.itch.io/twine-sugarcube-templates]].
\
<h3>Formatting the elements</h3>\
When the wanted and required elements are defined in {{{StoryInterface}}}, you will need some CSS to place them on the page, and to format their contents. 
No matter how edited the interface has been, some elements will still keep their built-in CSS rules:
* {{{#passages}}} and its child {{{.passage}}}
* {{{#ui-overlay}}}, {{{#ui-dialog}}} and its children (the elements in a the dialog box)
\
If other [[base IDs and classes|http://www.motoslave.net/sugarcube/2/docs/#html]] were used when adding elements inside {{{StoryInterface}}}, those elements will also be displayed according to their respective built-in CSS rules.
> ''Note:'' like with the base UI, those rules can be changed in the StyleSheet.
{{{
    #parent {
        width: 50vh;
        margin: auto;
        display: flex;
    }
    #passages {
        width: 75%;
    }
    #menu {
        width: 25%;
    }
}}}
\
When setting sizes or placements of elements, it is important to keep in mind that your project may be viewed on ''different screens/browser window sizes''. This will affect the actual placement and display of elements on the screen. Testing the UI for different screen sizes can be done via the Inspect Tool of your browser.
> ''Note:'' testing on both Chromium and non-Chromium browsers should be done as well, as different CSS rules (ex: overflow) will render differently on screen. 
\
To help take this into account, the {{{@media}}} CSS rule will let you define different sizes and placement of elements on the page depending on the size of the window or device opening the project. See [[this page|Int-JS-CSS-Media]].
{{{
    @media screen and (max-width: 500px) {
        #parent {
            width: 100vw;
        }
    }
}}}
> ''Note:'' this should be placed at the bottom of the StyleSheet, and in order of most-restricting to most-inclusive.
\
<h3>Linking an Element to a passage</h3>\
To keep the code in {{{StoryInterface}}} simple, or because you need SugarCube code inside an element (which won't work inside that passage), you can create links between an element and a non-story passage. That passage will then display text and/or run the relevant code inside that element.
This can be done with either {{{data-passage}}} or {{{data-init-passage}}}.
{{{
    <div class="menu" data-passage="sidemenu">
        <!--Side menu, editable in the sidemenu passage-->
    </div>
    <div class="title" data-init-passage="title">
        <!-- Title, editable in the "title" passage-->
    </div>
}}}
> ''Note:'' any text coded inside the elements in {{{StoryInterface}}} will be overriden by the content of the linked passage.
\
While these two links seem interchangeable, there is a major difference between the two: {{{data-init-passage}}} will load at the start of the game and ''never'' change, while {{{data-passage}}} will update with every new passage visited (if an update is necessary).
> ''Note:'' you can also use {{{data-passages}} with [[Special Asset Passages|Tags-Asset]]: {{{<img data-passage="TheCube">}}}

<div id="link-menu">[[Back to the Special Passages and Tags Menu|Special-Tags]] - [[Back to the Start Menu|Start]]</div>


:: SP-UIBar [page] {"position":"1800,700","size":"100,100"}
<h1>Special Passages for the UI Bar</h1>
The sidebar on the left can look pretty bare without some customisation, which can be remedied with the Special Passages mentioned below. From adding images, changing the title, to adding extra text or links, there are //many// ways to customise this block. 
The Special Passages listed below are organised in the other they would appear in the UI Bar (top → bottom).
> ''Note:'' the content of UI Bar will automatically update when the player moves to another passage. 
\
<h3>{{{StoryBanner}}}</h3>\
As its name implies, this passage allows you to add a banner or icon to the sidebar, located above the title of the game. But you are not limited to adding images, you can also include text or code!
{{{
    : : StoryBanner
    <img src="extra/logo.png">
}}}
> ''Note:'' if you want to edit how this block looks directly from the StyleSheet, you can target the element {{{#story-banner}}}.
\
<h3>{{{StoryDisplayTitle}}}</h3>\
If this Special Passage is not included in your project, Twine will use the name of the project as the title to display. Whether to include it depends more on how you name projects in Twine. 
If you name projects a certain way but want the title to be something else, then this Special Passage is for you. The passage also allows the inclusion of images and code.
{{{
    :: StoryDisplayTitle
    The Road Not Taken
}}}
> ''Note:'' no matter whether this Special Passage is in use, you can change the formatting of the title in the StyleSheet by targeting the element {{{#story-title}}}.
\
<h3>{{{StorySubtitle}}}</h3>\
This Special Passage will appear under the title, and is meant to show a tagline for the game. It will also accept images and code.
{{{
    :: StorySubtitle
    It's time to make a choice!
}}}
> ''Note:'' if you want to edit how this passage looks directly from the StyleSheet, you can target the element {{{#story-subtitle}}}
\
<h3>{{{StoryAuthor}}}</h3>\
This Special Passage is meant to display the name of the author, but does not limit you to this. You can also include images or code.
{{{
    :: StoryAuthor
    by [[manonamora|https://manonamora.itch.io/]]
}}}
> ''Note:'' this element has some special formatting, which you change in the StyleSheet by targeting the element {{{#story-author}}}
\
<h3>{{{StoryCaption}}}</h3>\
This Special Passage provides an extra space to include text or other elements. It is often used to show extra links towards side passage, like a Codex, or the state of certain variables, like a health bar.
{{{
    :: StoryCaption
    Coins: $coins
    [[Codex]]
}}}
> ''Note:'' this element has some special formatting, which you change in the StyleSheet by targeting the element {{{#story-caption}}}
\
<h3>{{{StoryMenu}}}</h3>\
This Special Passage adds a block of links, formatted in the same way as the //Save// and //Restart// buttons. This passage, however, ''only accepts links'' ({{{[[link]]}}}, {{{<<link>>}}} and {{{<a>}}}) and conditional statements (to hide/display the links). If you include text or non-linking macro (incl. buttons), they will not appear.
{{{
    :: StoryMenu
    [[Inventory]]
    [[$name|MC Page]]
}}}
> ''Note:'' this element has some special formatting, which you change in the StyleSheet by targeting the element {{{#menu-story}}}. The //Save// and //Restart// buttons are located inside the element {{{#menu-core}}}.
\
<h3>{{{StoryShare}}}</h3>\
This Special Passage creates a //Share// button below the //Restart// button and is meant to display social media links in a dialog box. However it can only be filled with links. If you want to display text with your links, I would recommend creating a regular passage and add that to the //StoryMenu// instead.
{{{
    :: StoryShare
    [[itch|https://manonamora.itch.io/]]
}}}

<div id="link-menu">[[Back to the Special Passages Menu|Special-Passage]] - [[Back to the Start Menu|Start]]</div>


:: SP-Variables [page] {"position":"2100,1400","size":"100,100"}
<h1>The Special Variables</h1>
SugarCube includes special variables, which can be used in the JavaScript passage or within the {{{<<script>>}}} [[macro|Macro-Script-Run]].
\
<h3>The API Variables</h3>\
The different APIs included in SugarCube are defined as Special Variables:
* {{{Config}}} refers to the Configuration API
* {{{Dialog}}} refers to the Dialog API (popups)
* {{{Engine}}} refers to the Engine API 
* {{{Fullscreen}}} refers to the Fullscreen API
* {{{LoadScreen}}} refers to the LoadScreen API
* {{{Macro}}} refers to the Macro API
* {{{Passage}}} refers to the Passage API
* {{{Save}}} refers to the Save API
* {{{Setting}}} refers to the Setting API
* {{{SimpleAudio}}} refers to the SimpleAudio API
* {{{State}}} refers to the State API
* {{{Story}}} refers to the Story API
* {{{Template}}} refers to the Template API
* {{{UI}}} refers to the UI API
* {{{UIBar}}} refers to the UIBar API
\
<h3>Other Special Variables</h3>\
* {{{jQuery}}} will refer to the jQuery library function, with {{{$}}} being an alias 
** the alias should not be confused with story variables {{{$var}}}, which should be called via {{{State.variables}}} or {{{State.getVar()}}}
* {{{l10nStrings}}} refers to the Strings localization
* {{{settings}}} are player setting object, set through the Setting API 
* {{{setup}}} are objects used for static data

<div id="link-menu">[[Back to the Special Passages and Tags Menu|Special-Tags]] - [[Back to the Start Menu|Start]]</div>


:: SaveAPI [chapter menu] {"position":"2000,1800","size":"200,100"}
<h1>The Save APIs and Further Saving Configurations</h1>
While the Config APIs have [[configuration settings|Config-Saves]], it may not be enough for the customisation you may want to achieve. This is where the Save APIs come in.
> ''Note:'' in-browser saves (autosave/slow saves) are largely incompatible with Private Browsing Mode and Cookies/Cache blockers. Users may get an error message on start in those cases.
\
* [[Save Objects and Their Contents|SaveAPI-Objects]] 
* [[The Basic APIs of the Save Elements|SaveAPI-General]] 
* [[Managing the Save Slots|SaveAPI-Slots]] 
* [[Managing the Autosave Slot|SaveAPI-Autosave]] 
* [[Using Save-related Events|SaveAPI-Events]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: SaveAPI-Autosave [page] {"position":"2100,2000","size":"100,100"}
<h1>Managing the Autosave Slot</h1>
The APIs below will allow you to manage the autosave slot. These can be useful when providing returning players to a quick link to load their autosave.
\
<h3>Save.autosave.delete()</h3>\
This API will delete the autosave.
{{{
    Save.autosave.delete()
}}}
\
<h3>{{{Save.autosave.get()}}}</h3>\
This API will return the save object from the autosave slot, or NULL.
{{{
    Save.autosave.get()
}}}
\
<h3>{{{Save.autosave.has()}}}</h3>\
This API will check whether the autosave is filled.
{{{
    Save.autosave.has()

    if (Save.autosave.has()) {
        /* Code to manipulate the autosave. */
    }
}}}
\
<h3>{{{Save.autosave.load()}}}</h3>\
This API will load the autosave (if filled).
{{{
    Save.autosave.load()
}}}
\
<h3>{{{Save.autosave.ok()}}}</h3>\
This API will check whether the autosave is available.
{{{
    Save.autosave.ok()

    if (Save.autosave.ok()) {
        /* Code to manipulate the autosave. */
    }
}}}
\
<h3>{{{Save.autosave.save()}}}</h3>\
This API will save to the autosave slot.
{{{
    Save.autosave.save([title [, metadata]])
}}}
It has 3 parameters:
* {{{title}}} (optional), the title of the save
** if omitted or NULL, it defaults to the passage's description 
* {{{metadata}}} (optional), the data to be stored as metadata (JSON-serializable)
\
> //Examples://
{{{
    Save.autosave.save()
→ Save to the autosave slot 
  + default title and no metadata

    Save.autosave.save("Midgar")
→ Save to the autosave slot
  + title "Midgar" and no metadata

    Save.autosave.save(null, someMetadata)
→ Save to the autosave slot
  + default title and metadata someMetadata

    Save.autosave.save("Midgar", someMetadata)
→ Save to the autosave slot 
  + title "Midgar" and metadata someMetadata
}}}

<div id="link-menu">[[Back to the Save APIs Menu|SaveAPI]] - [[Back to the Start Menu|Start]]</div>


:: SaveAPI-Events [page] {"position":"2000,2100","size":"100,100"}
<h1>Using Save-related Events</h1>
\
<h3>Events during Save Load</h3>\
\
<h4>{{{Save.onLoad.add()}}}</h4>\
This API will perform any required processing before a save is loaded, like upgrading out-of-date save data. If the defined function encounters an unrecoverable problem during processing, it will give an error to the player and terminate the loading of the save.
{{{
    Save.onLoad.add(handler)
}}}
It has 1 parameter: 
* {{{handler}}}, the function to be executed when loading a save
** {{{save}}}, the save object to be processed
\
> //Example://
{{{
    Save.onLoad.add(function (save) {
        /* code to process the save object before it's loaded */
    });

→ Updading old saves to be compatible:
    Save.onLoad.add(function (save) {
        const history = save.state.history;
        if (save.version < 14) {
            /* 
                Code to fix all saves upto version 14 
            */
            save.version = 14;
            /* Updating the save file's version */
        }
    });
}}}
> ''Note:'' the {{{save.version}}} will be defined with the relevant [[Config API|Config-Saves]]
\
<h4>{{{Save.onLoad.clear()}}}</h4>\
This API will delete all currently defined on-load handlers.
{{{
    Save.onLoad.clear()
}}}
\
<h4>{{{Save.onLoad.delete()}}}</h4>\
This API will delete the specified on-load handler.
{{{
    Save.onLoad.delete(handler)
}}}
It has 1 parameter:
* {{{handler}}}, the function to be executed when loading a save
> //Assuming that:// {{{myOnLoadHandler = function (save) { /* handler */}}}}
{{{
    Save.onLoad.delete(myOnLoadHandler);
}}}
\
<h4>{{{Save.onLoad.size}}}</h4>\
This API will give the number of currently registered on-load handlers.
{{{
    Save.onLoad.size
}}}
> //Example://
{{{
    console.log('There are %d onLoad handlers registered.', Save.onLoad.size);
}}}
\
<h3>Events during Saving</h3>\
\
<h4>{{{Save.onSave.add()}}}</h4>\
This API will perform any required processing before data is saved. It can be useful when wanting to run different code depending on the type of save (auto/slot/disk), or formatting names of saves.
{{{
    Save.onSave.add(handler)
}}}
It has 1 parameter: 
* {{{handler}}}, the function to be executed when saving a save
** {{{save}}}, the save object to be processed
** {{{details}}}, the save operation details object
*** {{{type}}}, representing what cause the save ({{{'autosave'}}}, {{{'disk'}}}, {{{'serialize'}}}, {{{'slot'}}})
\
> //Examples://
{{{
    Save.onSave.add(function (save) {
        /* code to process the save object before it's saved */
    });

    Save.onSave.add(function (save, details) {
        switch (details.type) {
            case 'autosave': {
                /* Code processed for autosaves */
                break;
            }
            case 'disk': {
                /* Code processed for disk saves */
                break;
            }
            case 'serialize': {
                /* Code processed for serialized saves */
                break;
            }
            default: { 
                /* Code processed for slot saves */
                break;
            }
        }
    });

}}}
> ''Note:'' I use this API to format how saves and autosaves are named in my [[Setting Template|https://manonamora.itch.io/twine-sugarcube-templates]].
\
<h4>{{{Save.onSave.clear()}}}</h4>\
This API will delete all currently defined on-save handlers.
{{{
    Save.onSave.clear();
}}}
\
<h4>{{{Save.onSave.delete()}}}</h4>\
This API will delete the specified on-save handler.
{{{
    Save.onSave.delete(handler)
}}}
It has 1 parameter:
* {{{handler}}}, the function to be executed when loading a save
> //Assuming that:// {{{myOnLoadHandler = function (save, details) { /* handler */}}}}
{{{
    Save.onSave.delete(myOnLoadHandler);
}}}
\
<h4>{{{Save.onSave.size}}}</h4>\
This API will give the number of currently registered on-save handlers.
{{{
    Save.onSave.size
}}}
> //Example://
{{{
    console.log('There are %d onSave handlers registered.', Save.onSave.size);
}}}

<div id="link-menu">[[Back to the Save APIs Menu|SaveAPI]] - [[Back to the Start Menu|Start]]</div>


:: SaveAPI-General [page] {"position":"2100,1900","size":"100,100"}
<h1>The Basic APIs of the Save Elements</h1>
\
<h3>The General Save APIs</h3>\
\
<h4>{{{Save.clear()}}}</h4>\
This API will delete all slot saves and the autosave (if enabled). This is the code behind the //Delete All// button in the Save Popup.
{{{
    Save.clear()
}}}
\
<h4>{{{Save.get()}}}</h4>\
This API will return the saves object (all in-browser saves).
{{{
    Save.get()
}}}
\
<h4>{{{Save.ok()}}}</h4>\
This API will check whether the project includes slot saves and autosaves.
{{{
    Save.ok()

    if (Save.ok()) {
	    /* Code to manipulate saves. */
    }

    <<if Save.ok()>> ... <</if>>
}}}
\
<h3>Importing and Exporting to Disk</h3>\
The following APIs are the ones used in the Save Popup, with the //Export to Disk// and //Load from Disk// buttons.
<center> <<link "Export to Disk">><<run Save.export()>><</link>> | <<link "Load From Disk">>
        <<script>>
        jQuery(document.createElement('input'))
            .prop('type', 'file')
            .on('change', Save.import)
            .trigger('click');
        <</script>>
    <</link>></center>
\
<h4>{{{Save.export()}}}</h4>\
This API will save the current playthrough (or loaded save) to the device's disk. The file is saved under the extension {{{.save}}}.
{{{
    Save.export([filename [, metadata]])
}}}
The API has 2 parameters:
* {{{filename}}} (optional), the base filename of the save (slugified), with the datestamp and file extension appended automatically.
** default is the story's title (slugified)
* {{{metadata}}} (optional), the date to be stored in the save object's [[metadata|SaveAPI-Objects]] property.
\
> //Examples://
{{{
    Save.export()
→ default filename + no metadata

    Save.export("Sweet Stuff 2")
→ custom filename + no metadata
  → sweet-stuff-2-{datestamp}.save

    Save.export(null, someMetadata)
→ default filename + some metadata

    Save.export("Sweet Stuff 2", someMetadata)
→ custom filename + some metadata
  → sweet-stuff-2-{datestamp}.save
}}}
\
<h4>{{{Save.import()}}}</h4>\
This API will load a save file from disk.
> ''Note:'' this must be called by the change vent handler of an {{{<input type="file">}}} element.
{{{
    Save.import(event)
}}}
This API has 1 parameter:
* {{{event}}}, the event object passed to the change event handler of the associated {{{<input type="file">}}} element.
\
> //Basic usage example from the Documentation://
{{{
→ Assuming you're creating a file input something like the following
    var input  = document.createElement('input');
    input.type = 'file';
    input.id   = 'saves-import-file';
    input.name = 'saves-import-file';

→ Set up Save.import() as the event handler for when a file has been chosen
    jQuery(input).on('change', Save.import);
}}}
> //More Complex Documentation Example//
{{{
→ Assuming you're creating a file input something like the following
    var input  = document.createElement('input');
    input.type = 'file';
    input.id   = 'saves-import-file';
    input.name = 'saves-import-file';

→ Set up a custom event handler for when a file has been chosen, which will call Save.import()
    jQuery(input).on('change', function (ev) {
        /* You must pass in the event when calling Save.import() manually */
        Save.import(ev);

        /* Put anything else you needed to do here */
    });
}}}
> //Code of the Interactive Example://
{{{
    <<link "Load From Disk">>
        <<script>>
        jQuery(document.createElement('input'))
            .prop('type', 'file')
            .on('change', Save.import)
            .trigger('click');
        <</script>>
    <</link>>
}}}
\
<h3>Serialize the Save File</h3>\
\
<h4>{{{Save.serialize()}}}</h4>\
This API will return a save as a serialized string (or null if saving is now allowed)
{{{
    Save.serialize([metadata])
}}}
It has 1 parameter: 
* {{{metadata}}} (optional), the data to be stored as metadata (JSON-serializable)
\
> //Examples://
{{{
→ Serialize a save with no metadata
    const myGameState = Save.serialize();
    if (myGameState === null) {
        /* Failure.  You've disallowed saving. */
    }

→ Serialize a save with metadata someMetadata
    const myGameState = Save.serialize(someMetadata);
    if (myGameState === null) {
        /* Failure.  You've disallowed saving. */
    }
}}}
\
<h4>{{{Save.deserialize()}}}</h4>\
This API will deserialize the given save string, created with {{{Save.serialize()}}}, and load the save. It will also return the bundled metadata (if defined), or NULL if the save could not be deserialize and loaded.
{{{
    Save.deserialize(saveStr)
}}}
It has 1 parameter:
* {{{saveStr}}}, the serialized save string.
\
> //Examples://
{{{
→ Deserialize a save with no metadata
    const loadResult = Save.deserialize(myGameState);
    if (loadResult === null) {
        /* Failure.  An error was displayed to the player. */
    }

→ Deserialize a save with metadata
    const loadResult = Save.deserialize(myGameState);
    if (loadResult !== null) {
        /* Success.  Do something with loadResult, which contains the metadata. */
    }
    else {
        /* Failure.  An error was displayed to the player. */
    }
}}}

<div id="link-menu">[[Back to the Save APIs Menu|SaveAPI]] - [[Back to the Start Menu|Start]]</div>


:: SaveAPI-Objects [page] {"position":"2000,1900","size":"100,100"}
<h1>Save Objects and Their Contents</h1>
When saved, a playthrough resides in a save object, with multiple property defined specifically for that playthrough.
> ''Note:'' the exported save (Save to Disk) is encoded by default

The save object has 6 properties:
* {{{id}}}, the story's [[save ID|Config-Saves]]
* {{{state}}}, the marshaled story history 
** {{{history}}}, the arrays of moment objects 
*** {{{title}}}, the title of the associated passage 
*** {{{variables}}}, the current variable store object ({{{State.variables}}})
*** {{{pull}}} (optional), current pull count of SugarCube's seedable PRNG
** {{{index}}}, the index of active moments 
** {{{expired}}} (optional), the array of expired moments (influenced by the [[Max State|Basic-API-Config]])
** {{{seed}}} (optional), seed of SugarCube's seedable PRNG
* {{{title}}}, the title of the save.
* {{{date}}}, when the save was created (milliseconds elapsed since epoch)
* {{{metadata}}}, save metadata (end-user specified - JSON serializable)
* {{{version}}}, save [[version|Config-Saves]]
\
> ''Note:'' adding additional properties is not recommended. Instead use the metadata property.

<div id="link-menu">[[Back to the Save APIs Menu|SaveAPI]] - [[Back to the Start Menu|Start]]</div>


:: SaveAPI-Slots [page] {"position":"2000,2000","size":"100,100"}
<h1>Managing the Save Slots</h1>
The APIs below will allow you to manage the available save slots. These can be useful when providing returning players to a quick link to load their saves, or creating your own Save page.
\
<h3>{{{Save.slots.length}}}</h3>\
This API will return the total number of available slots. It will be influenced by the [[Config API|Basic-API-Config]].
{{{
    Save.slots.length
}}}
\
<h3>{{{Save.slots.count()}}}</h3>\
This API will count the number of filled save slots.
{{{
    Save.slots.count()
}}}
> //Example://
{{{
    <<if Save.slots.count() gt 0>>
        <<link "Load Save">>
            <<run UI.saves()>>
        <</link>>
    <</if>>
}}}
\
<h3>{{{Save.slots.delete()}}}</h3>\
This API will delete a save from the given slot. This is what is behind the //Delete// buttons on the Save Popup.
{{{
    Save.slots.delete(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.slots.delete(5)  
→ Deletes the sixth slot save
}}}
\
<h3>{{{Save.slots.get()}}}</h3>\
This API will return a save object from the given slot or NULL if there is no save.
{{{
    Save.slots.get(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.slots.get(5)  
→ Returns the sixth slot save
}}}
\
<h3>{{{Save.slots.has()}}}</h3>\
This API will check whether the given slot is filled.
{{{
    Save.slots.has(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Examples://
{{{
    Save.slots.has(5)  
→ checks the sixth slot save

    if (Save.slots.has(5)) {
        /* Code to manipulate the sixth slot save. */
    }
}}}
\
<h3>{{{Save.slots.isEmpty()}}}</h3>\
This API will check whether there are any filled slots. It will return with a //true// value if all slots are empty, and a //false// one if at least one slot is filled.
{{{
    Save.slots.isEmpty()
}}}
\
<h3>{{{Save.slots.load()}}}</h3>\
This API will load a save from the given slot. This is the code behind the //Load// buttons in the Save Popup.
{{{
    Save.slots.load(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.slots.load(5)  
→ Loads the sixth slot save
}}}
\
<h3>{{{Save.slots.ok()}}}</h3>\
This API will check whether the slots saves are available.
{{{
    Save.slots.ok()

    if (Save.slots.ok()) {
        /* Code to manipulate slot saves. */
    }
}}}
\
<h3>{{{Save.slots.save()}}}</h3>\
This API will save to the given slot. This is the code behind the //Save// buttons in the Save Popup.
{{{
    Save.slots.save(slot [, title [, metadata]])
}}}
It has 3 parameters:
* {{{slot}}}, the save slot index (0-based)
* {{{title}}} (optional), the title of the save
** if omitted or NULL, it defaults to the passage's description 
* {{{metadata}}} (optional), the data to be stored as metadata (JSON-serializable)
\
> //Examples://
{{{
    Save.slots.save(5)
→ Save to the sixth slot 
  + default title and no metadata

    Save.slots.save(5, "Midgar")
→ Save to the sixth slot 
  + title "Midgar" and no metadata

    Save.slots.save(5, null, someMetadata)
→ Save to the sixth slot 
  + default title and metadata someMetadata

    Save.slots.save(5, "Midgar", someMetadata)
→ Save to the sixth slot 
  + title "Midgar" and metadata someMetadata
}}}

<div id="link-menu">[[Back to the Save APIs Menu|SaveAPI]] - [[Back to the Start Menu|Start]]</div>


:: Settings [chapter menu] {"position":"1400,1800","size":"200,100"}
<h1>The Settings APIs</h1>
Settings can be a great way to customise your project, and make it more accessible for players. Whether it is to change the visual aspect (font, theme, etc), the audio (volume, track), or overall mechanics (difficulty, annimation), there are many ways to reach your goal.

While including settings in a project can feel a bit overwhelming, as they //will// require some knowledge of JavaScript, the Setting APIs are there to make things easier. There are also many UI templates out there including some settings. You can find also find a Setting-Only Template [[here|https://manonamora.itch.io/twine-sugarcube-templates]].

The basic Settings API is built in this format:
{{{
    Settings.function(parameters)
}}}
> ''Note:'' The order you add the settings in the JavaScript passage will be the order you will see in the Setting dialog box.
* [[Adding Headers|SettingsHeader]]
* [[Creating a Toggle Setting|SettingsToggle]]
* [[Creating a List Setting|SettingsList]]
* [[Creating a Slider|SettingsRange]]
* [[Going Further with Settings|Settings-More]]
> ''Note:'' you can find a Setting Template with the most useful settings for Interactive Fiction on my [[itch page|https://manonamora.itch.io/twine-sugarcube-templates]].

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Settings-More [page] {"position":"1400,2100","size":"100,100"}
<h1>Going Further with Settings</h1>
The settings are not just stuck to the JavaScript passage, they can also be used in regular passages.
\
<h3>The {{{settings}}} variable</h3>\
When a Setting is set, it creates a special variable that can be used in other passages, for example to trigger code.
{{{
    settings.nameOfTheSetting
}}}
Assuming that a setting has been set up with the name {{{notification}}}:
{{{
→ For a Toggle Setting:
    <<if settings.notification>>
        <<notify 5s>>This is a notification only seen if the notification setting is toggled on<</notify>>
    <</if>>

→ For a Range Setting:
    <<if settings.notification gt 9>>
        <<notify 5s>>This is very loud!<</notify>>
    <</if>>

→ For a List Setting:
    <<if settings.notification is "Easy">>
        <<notify 5s>>You are playing on BabyMode<</notify>>
    <</if>>
}}}
> ''Note:'' the {{{<<notify>>}}} macro is a [[Custom Macro by Chapel|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/notify-macro.md]].
\
<h3>Changing the Settings in the Passage</h3>\
It is also possible to change settings outside of the Settings Dialog Box, and can be done with {{{Setting.reset()}}} to reset a/all setting(s) to their default value, or {{{Setting.save()}}} to save the change of a setting.
> ''Note:'' the targeted setting needs to be set in the JavaScript beforehand.
> You also need to use the macros {{{<<script>>}}} or {{{<<run>>}}} with those APIs.
\
> //To reset://
{{{
    Setting.reset() → will reset all settings to the default
    Setting.reset('difficulty') → will reset only the 'difficulty' setting 

    <<run Setting.reset()>>
}}}
> //To save://
{{{
    <<set settings.difficulty to "Normal">>
    <<run Setting.save()>>
}}}
> ''Note:'' this can be quite useful when setting some functionality before the game starts, like the game's Language.

> ''Note:'' a {{{Setting.load()}}} API exists within SugarCube. However, it is called automatically everytime the game is loaded. As such, it should never be called manually.

<div id="link-menu">[[Back to the Settings API Menu|Settings]] - [[Back to the Start Menu|Start]]</div>


:: SettingsHeader [page] {"position":"1400,1900","size":"100,100"}
<h1>Adding Headers</h1>
If you want to customise the Setting Dialog Box or organise your settings, you can group those under a Header. This will indicate to users what kind of setting they can expect below.
This API has 2 parameters :
* {{{name}}}: the name of the header (string)
* {{{desc}}}: description of the group of settings (string, optional)
{{{
    Setting.addHeader(name [, description])
}}}
> //Examples://
{{{
→ Only a header
    Setting.addHeader("Font Settings");

→ A header and a description
    Setting.addHeader("Font Settings", "Settings controlling how the text is formatted.");
}}}

<div id="link-menu">[[Back to the Settings API Menu|Settings]] - [[Back to the Start Menu|Start]]</div>


:: SettingsList [page] {"position":"1400,2000","size":"100,100"}
<h1>Creating a List Setting</h1>
Like the name suggests, this type of settings create a list. This type is best used for settings with more than 2 options or options with names. For example: a theme change setting or font settings.

To add a Toggle setting, you need the followin API:
{{{
    Setting.addList(name, definition)
}}}
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object)
The //definition// object has multiple options:
* {{{label}}}: visible description of the setting (string)
* {{{list}}}: the list of options (array of string)
* {{{desc}}}: further description of the setting (string, optional)
* {{{default}}}: default value for the setting (string from array, optional, undefined = 1st of array)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)
> ''Note:'' You can use a setting as a variable in a passage. You would write the variable as such:
{{{settings.name}}} 

> //Basic List Setting, creating a string setting variable//:
{{{
    Setting.addList("difficulty", {
        label   : "Choose a difficulty level.",
        list    : ["Easy", "Normal", "Hard", "INSANE"],
        default : "Normal"
    });

    :: Story Passage
    <<if settings.difficulty is "Normal">> 
        /* your code/text  */
    <</if>>
}}}
> //List Setting to add/remove a CSS class//:
{{{
    var settingThemeNames = ["Base", "Reverse", "Night", "Light"];
    var settingThemeHandler = function () {
        var $html = $("html");
        // remove any existing theme class
            $html.removeClass("theme-reverse theme-night theme-light");
        // switch on the theme name to add the requested theme class
            switch (settings.theme) {
                case "Reverse":
                    $html.addClass("theme-reverse");
                    break;
                case "Night":
                    $html.addClass("theme-night");
                    break;
                case "Light":
                    $html.addClass("theme-light");
                    break;
            }
    };
    Setting.addList("theme", {
        label    : "Choose a theme.",
        desc     : "This will change the colour palette",
        list     : settingThemeNames,
        default  : "Base",
        onInit   : settingThemeHandler,
        onChange : settingThemeHandler
    });

→ In your CSS: 
    body {color: black;}
    html.theme-reverse body {color: white;}
    html.theme-night body {color: lightgrey;}
    html.theme-light body {color: darkgrey;}
}}}

<div id="link-menu">[[Back to the Settings API Menu|Settings]] - [[Back to the Start Menu|Start]]</div>


:: SettingsRange [page] {"position":"1500,2000","size":"100,100"}
<h1>Creating a Slider</h1>
Like the name suggests, this type of settings create a slider. This type is best used for settings with a range of value. For example: a a volume.

To add a Toggle setting, you need the followin API:
{{{
    Setting.addRange(name, definition)
}}}
\
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object)
The //definition// object has multiple options:
* {{{label}}}: visible description of the setting (string)
* {{{min}}}: the minimum value (number)
* {{{max}}}: the maximum value (number)
* {{{step}}}: the increment between each step (number, divisible by min & max)
* {{{desc}}}: further description of the setting (string, optional)
* {{{default}}}: default value for the setting (boolean, optional, undefined = false)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)

> //Basic Range Setting//:
{{{
    Setting.addRange("masterVolume", {
        label    : "Volume Level",
        min      : 0,
        max      : 10,
        step     : 1,
        default  : 10,
        onChange : function () {
            SimpleAudio.volume(settings.masterVolume / 10);
        }
    });
}}}

<div id="link-menu">[[Back to the Settings API Menu|Settings]] - [[Back to the Start Menu|Start]]</div>


:: SettingsToggle [page] {"position":"1500,1900","size":"100,100"}
<h1>Creating a Toggle Setting</h1>
Like the name suggests, this type of settings create a toggle. This type is best used for settings with a True/False options. For example: toggling a widescreen or autosave.

To add a Toggle setting, you need the followin API:
{{{
    Setting.addToggle(name, definition)
}}}
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object)
The //definition// object has multiple options:
* {{{label}}}: visible description of the setting (string)
* {{{desc}}}: further description of the setting (string, optional)
* {{{default}}}: default value for the setting (boolean, optional, undefined = false)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)
> ''Note:'' You can use a setting as a variable in a passage. You would write the variable as such:
{{{settings.name}}} 

> //Basic Toggle Setting to create a boolean setting//:
{{{
    Setting.addToggle("notifications", {
	    label : "Show notifications?" 
    });
→ the default value not defined, so false is used

    :: Story Passage
    <<if settings.notifications is true>> 
        /* your code/text  */
    <</if>>
}}}
> //Toggle Setting to add/remove a CSS class//:
{{{
    var settingNotifications = function () {
        if (settings.notifications) { // is true
            $("html").addClass("notifications");
        }
        else { // is false
            $("html").removeClass("notifications");
        }
    };
    Setting.addToggle("notifications", {
        label    : "Display Notifications?",
        desc     : "If enabled, you will be shown notifications throughout the game",
        default  : false,
        onInit   : settingNotifications,
        onChange : settingNotifications
    });

→ In your CSS, you'll need to include the following:
    html.notifications .macro-notif {
	    display: none;
    }
}}}
> ''Note:'' this assumes that the notification element/macro uses the class {{{.macro-notif}}}

<div id="link-menu">[[Back to the Settings API Menu|Settings]] - [[Back to the Start Menu|Start]]</div>


:: Special-Passage [chapter menu] {"position":"1700,600","size":"200,100"}
<h1>Basic Special Passages</h1>
Your project can be further customised with the use of Special Passages. Those passages are special because they require a specific name to load built-in code. Some will affect how the page looks, while others can affect how code works.

To use a Special Passage, create a new passage, change the name of that passage for one of the Special Passage Name (as indicated in the [[Documentation|http://www.motoslave.net/sugarcube/2/docs/#special-passages]]), and fill it with what you need!
> ''Note:'' the names are case-sensitive!
\
* [[Headers and Footers|SP-HeaderFooter]]
* [[Special Passages for the UI Bar|SP-UIBar]] 
* [[Setting Important Variables before Start|SP-Init]] 

You can click [[here for the demo|SP-Demo]] to see most of the aforementioned Special Passages in action!

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Special-Tags [chapter menu] {"position":"2000,1100","size":"200,100"}
<h1>More Special Passages and Tags</h1>
Aside from the [[Basic Special Passages|Special-Passage]], your project can be customised even further with more Special Passage Names and Special tags.

* [[Special Tags creating Special Passages and Functionalities|Tags-Built]]
* [[Process Code Before and After Rendering a Passage|SP-PassageReady-Done]]
* [[Changing the UI of the Project|SP-StoryInterface]]
* [[Customising Passages with Tags|Tags-CSS]]
* [[Including Assets with Tags|Tags-Asset]] 
* [[The Special Variables|SP-Variables]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Start [noreturn menu] {"position":"1500,100","size":"200,200"}
<div style="text-align:right;font-size:85%;">Last Updated: 10 Dec '23</div>
<h1>100% Good Twine SugarCube Guide</h1>\
This guide was created as an ''alternative'' to the SugarCube documentation, including simpler explanations to the macros and with clearer examples when possible. It is meant to make the SugarCube format more accessible to new and learning users.

The guide covers the different aspects of the SugarCube format, from its particular markup, to its macros, functions, and APIs. It also touches upon possible customisation of SugarCube projects, with editing the StyleSheet with CSS or the JavaScript passage. And, it brushes upon aspects of accessibility in terms of code, design, and formatting.
> This guide is based on the [[official SugarCube documentation|https://www.motoslave.net/sugarcube/2/docs/]], and is up to date as of the ''version 2.36.1''. For later version, please refer to the official documentation. /* Though, I will update this guide when SG updates, as soon as I am able */
\
The guide is separated in different categories: ''The Basics(+)'', ''Intermediate Use'', and ''Advanced Mode''. 
Only the Basics are necessary to be able to create a game with SugarCube. 
Knowledge of CSS, JavaScript/jQuery may be required for more complex elements.
> ''Note:'' any coding done in SugarCube is case and character sensitive, meaning that 
> {{{name ≠ Name}}} or {{{" " ≠ “ ”}}}.

> ''The Basics''
* [[About Twine and SugarCube|About]]
* [[Starting with SugarCube|Basics]] 
\
> ''The Basics+''
* [[SugarCube Markup and Basic Styling|Markup]] 
* [[Going Further with the Basics|Macro-Basic]] 
* [[Adding some Interactivity|Macro-Interact]] 
* [[Basic Special Passages|Special-Passage]] 
* [[About JavaScript and the StyleSheet|Base-JS-CSS]] 
* [[ULRs for Assets and Testing|URL-Types]] 
\
> ''Intermediate Use''
* [[More SugarCube Markup|Markup-Int]] 
* [[More Interactivity Macros|Macro-Interact-Adv]] 
* [[Macros of Convenience|Macro-Conv]] 
* [[More Special Passages and Tags|Special-Tags]] 
* [[Harness the Power of Functions|Functions]] 
* [[Using Methods to change Variables|Methods]] 
* [[Adding Sound with the Audio Macros|Macro-Audio]]
* [[Going further in Styling with CSS and JavaScript|Int-JS-CSS]] 
* [[Some Useful Basic APIs|Basic-API]] 
* [[Edit the Built-In Text or Change the Game's Language|Localization]]
\
> ''Advanced Mode''
> ''Note:'' Many of the elements included in the following chapters will require knowledge of JavaScript, jQuery, and understanding of the core processed of SugarCube.
* [[Advanced Macros|Macro-Adv]]
* [[More Variable and Interaction Methods|Methods-Adv]] 
* [[Going Further with Basic APIs and More|API-Adv]] 
* [[The Settings APIs|Settings]] 
* [[The Save APIs and Further Saving Configurations|SaveAPI]] 
* [[Going Further with the Engine API|Engine-API]]
* [[More Configuration APIs to Customise Interaction|Config-API]] 
* [[Getting the FullScreen Experience|FullScreen]] 
* [[Trigger Code with Special Events|Events]] 
* [[Creating your Own Macro|Macro]] 
* [[Managing Story Elements with APIs|StoryAPI]] 
* [[Managing Passage Properties with APIs|PassageAPI]] 
* [[Dealing with the State of Play|StateAPI]] 
/*
[ ★ UPDATE ★ ] - [ ★ NEW ★ ]
* Key Binding - An Alternative|KeyBinding HIEV SETTING TO FIX
*/

If something is unclear, if you find an error in this guide, if you think I missing an important element, or if I did not provide enough examples, please [[let me know|https://manonamora-if.tumblr.com/ask]]!


:: StateAPI [chapter menu] {"position":"3200,1800","size":"200,100"}
<h1>Dealing with the State of Play</h1>
Any started playthrough will contain a State, which will include moments (states) created during play used to navigate the history (undo/redo) and to save the (potentially changed) value of variables. If relevant, the State will include Metadata and a Seedable PRNG.

* [[Managing the State of Variables|StateAPI-Variable]] 
* [[Exploring the Different Moments inside the State|StateAPI-State]] 
* [[Using the Story Metadata|StateAPI-Metadata]] 
* [[Initialising a Seedable PRNG|StateAPI-PRNG]] 

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: StateAPI-Metadata [page] {"position":"3200,2000","size":"100,100"}
<h1>Using the Story Metadata</h1>
Some of the APIs below functions similarly to the {{{memorize()}}}, {{{recall()}}}, and {{{forget()}}} [[functions|Function-Metadata]], in that it will affect the state of the Story Metadata. 
\
<h3>{{{State.metadata.size}}}</h3>\
This API will return the size of the story metadata.
{{{
    if (State.metadata.size > 0) {
	    /* code if some metadata */
    }
}}}
\
<h3>{{{State.metadata.clear()}}}</h3>\
This API will empty the story metadata.
{{{
    State.metadata.clear();
}}}
\
<h3>{{{State.metadata.delete()}}}</h3>\
This API will remove the specified key and its value from the story metadata.
{{{
    State.metadata.delete(key)
}}}
It has 1 parameter:
* {{{key}}}, the key to delete 
> //Assuming that:// {{{'achievements' = some value}}}
{{{
    State.metadata.delete('achievements');
}}}
\
<h3>{{{State.metadata.entries()}}}</h3>\
This API will return the array of the metadata key/value pair ({{{[key, value]}}}).
> //Examples://
{{{
→ going through the pairs with a {for} loop
    var metadata = State.metadata.entries();
    for (var i = 0; i < metadata.length; ++i) {
        var key   = metadata[i][0];
        var value = metadata[i][1];

        /* code to do something */
    }

→ going through the pairs with {<Array>.forEach()}
    State.metadata.entries().forEach(function (pair) {
        var key   = pair[0];
        var value = pair[1];

        /* code to do something */
    });
}}}
\
<h3>{{{State.metadata.get()}}}</h3>\
This API will return the value associated with the specified metadata key. This can be useful for conditional statements.
{{{
    State.metadata.get(key)
}}}
It has 1 parameter:
* {{{key}}}, the key to delete 
> //Assuming that:// {{{'achievements' = true}}}
{{{
    State.metadata.get('achievements');
→ will have the value {true}    
}}}
\
<h3>{{{State.metadata.has()}}}</h3>\
This API will check whether the specified metadata key is defined. This can be useful for conditional statements.
{{{
    State.metadata.has(key)
}}}
It has 1 parameter:
* {{{key}}}, the key to delete 
> //Assuming that:// {{{'achievements' = some value}}}
{{{
    State.metadata.has('achievements')  

    if (State.metadata.has('achievements')) {
	    /* code to do something */
    }
}}}
\
<h3>{{{State.metadata.keys()}}}</h3>\
This API will return the array of the current metadata keys.
> //Examples://
{{{
→ going through the keys with a {for} loop
    var metadataKeys = State.metadata.keys();
    for (var i = 0; i < metadataKeys.length; ++i) {
        var key = metadataKeys[i];

        /* do something */
    }
→ going through the keys with {<Array>.forEach()}
    State.metadata.keys().forEach(function (key) {
        /* do something */
    });
}}}
\
<h3>{{{State.metadata.set()}}}</h3>\
This API will set a value to the specified key within the story metadata, which will persist over the story and browser restarts.
> ''Notes:'' private browsing modes will interfere with this.
> The story metadata is tired to the specific story it was generated with.
> The metadata ''SHOULD NOT'' replace saves.
{{{
    State.metadata.set(key, value)
}}}
It has 2 parameters:
* {{{key}}}, the key that should be set 
* {{{value}}}, the value to set 
\
> //Examples://
{{{
→ simple key setting 
    State.metadata.set('ngplus', true);

→ setting the key as an object
    State.metadata.set('achievements', { ateYellowSnow : true });
}}}

<div id="link-menu">[[Back to State API Menu|StateAPI]] - [[Back to the Start Menu|Start]]</div>


:: StateAPI-PRNG [page] {"position":"3300,2000","size":"100,100"}
<h1>Initialising a Seedable PRNG</h1>
A PRNG, or pseudo-random number generator, is a deterministic algorithm for generating a sequence of numbers whose properties approximate the properties of sequences of random numbers.
The APIs below will be useful for procedural world building, factions alignment, loot drops, dungeon map layout etc... essentiall, anything that affects or involves randomness.
\
<h3>{{{State.prng.init()}}}</h3>\
This API will initialise the seedable PRNG and integrate it into the story state and saves. This will affect the result of methods and functions like {{{State.random()}}}, {{{random()}}}, and {{{randomFloat()}}}.

If used, {{{State.prng.init()}}} should be coded in the JavaScript section of your project, or inside {{{StoryInit}}}. It is strongly recommended not to add arguments to the API, but, if you do use an explicit seed, you must enable additional entropy (or all playthroughs will be the same).
{{{
    State.prng.init([seed [, useEntropy]])
}}}
It has 2 parameters:
* {{{seed}}} (optional), the explicit seed used to initialise the PRNG 
* {{{useEntropy}}} (optional), entables the use of additional entropy to pad the seed.
\
> //Examples://
{{{
    State.prng.init()
→ automatically seed the PRNG

    State.prng.init("aVeryLongSeed")
→ seed with "aVeryLongSeed" (not recommended)

    State.prng.init("aVeryLongSeed", true)
→ seed with "aVeryLongSeed" and pad it (recommended)
}}}
\
<h3>{{{State.prng.isEnabled()}}}</h3>\
This API will check whether the seedable PRNG has been enable.
{{{
    State.prng.isEnabled()
}}}
\
<h3>{{{State.prng.pull}}}</h3>\
This API will return the current pull count, meaning how many times a request has been made from the PRNG. 
> ''Note:'' the pull count is automatically included within saves and sessions, and is mainly useful for debugging purposes.
{{{
    State.prng.pull
}}}
\
<h3>{{{State.prng.seed}}}</h3>\
This API will return the seed from the PRNG.
> ''Note:'' the pull count is automatically included within saves and sessions, and is mainly useful for debugging purposes.
{{{
    State.prng.seed
}}}
\
<h3>{{{State.random()}}}</h3>\
This API will return a pseudo-random decimal number (floating-point) in the range 0 (inclusive) up to but not included 1 (exclusive).
> ''Note:'' by default, it simply returns results from {{{Math.random()}}}. 
{{{
    State.random()
→ returns a pseudo-random floating-point number in the range [0, 1)
}}}

<div id="link-menu">[[Back to State API Menu|StateAPI]] - [[Back to the Start Menu|Start]]</div>


:: StateAPI-State [page] {"position":"3300,1900","size":"100,100"}
<h1>Exploring the Different Moments inside the State</h1>
The following APIs will look at the different moments of the state, from future to current to history. Some of these will look only at the current moment (active), some will focus on the in-play moments (influenced by the [[maxState|Basic-API-Config]]), while others will include the expired moments.
\
<h3>{{{State.active}}}</h3>\
This API will return the active/present moment.
However, it is generally unnecessary, as there are better shortcut properties with {{{State.passage}}} (below) and {{{State.variables}}} ([[here|StateAPI-Variable]]), or the [[functions|Functions]] {{{passage()}}} and {{{variables()}}}.
> //Examples://
{{{
    State.active.title      
→ title of the present moment

    State.active.variables  
→ variables of the present moment
}}}
\
<h3>{{{State.bottom}}}</h3>\
This API will return the bottommost (least recent) moment, within the full in-play history.
> //Examples://
{{{
    State.bottom.title      
→ title of the bottommost moment

    State.bottom.variables  
→ variables of the bottommost moment
}}}
\
<h3>{{{State.top}}}</h3>\
This API will return the topmost (most recent) moment, within the full in-play history.
>''Note:'' {{{State.top}}} is not synonymous to {{{State.active}}}. It is extreemly unlikely you will ever need {{{State.top}}}.
\
> //Examples://
{{{
    State.top.title      
→ title of the topmost moment

    State.top.variables  
→ variables of the topmost moment
}}}
\
<h3>{{{State.current}}}</h3>\
This API will return the current moment, within the full in-play history, which is the pre-play version of the active moment.
>''Note:'' {{{State.current}}} is not synonymous to {{{State.active}}}. It is extreemly unlikely you will ever need {{{State.current}}}.
\
> //Examples://
{{{
    State.current.title      
→ title of the current moment

    State.current.variables  
→ variables of the current moment
}}}
\
<h3>{{{State.length}}}</h3>\
This API will return the number of moments in the past in-play history. This includes all visited passages in order of their visit. 
> //Example://
{{{
    if (State.length === 0) {
        /* No moments within the past in-play history. Egad! */
    }
}}}
\
<h3>{{{State.size}}}</h3>\
This API will return the number of moments within the full in-play history.
It is particularly useful when specific bits of code need to run on the landing page when the game starts, but shouldn't run again if the player undoes their actions.
> //Examples://
{{{
    if (State.size === 0) {
        /* Code if no moments in the history */
    }
}}}
\
<h3>{{{State.turns}}}</h3>\
This API will return the number of played moments within the extended past history.
> //Examples://
{{{
    if (State.turns === 1) {
        /* Code to run on the starting passage */
    }
}}}
\
<h3>{{{State.passage}}}</h3>\
This API returns the passage of the active (present) moment. It is useful in JavaScript code requiring the name of a passage to run code.
> //Example://
{{{
   if (State.passage === "PassageName") {
    /* Code to run in that passage only */
   }
}}}
\
<h3>{{{State.has()}}}</h3>\
This API checks whether any moment(s) with the indicated title exist within the past in-play history.
> ''Note:'' {{{State.has()}}} does not check expired moments. You may want to use {{{State.hasPlayed()}}} or {{{hasVisited()}}} instead.
{{{
    State.has(passageTitle)
}}}
It has 1 parameter:
* {{{passageTitle}}}, the title of the moment to check
> //Example://
{{{
    State.has("The Ducky")  
→ checks if a moment matching "The Ducky" exists
}}}
\
<h3>{{{State.hasPlayed()}}}</h3>\
This API checks whether any moment(s) with the indicated title exist within the past history.
> ''Note:'' if you need to check multiple passages, you may want to use {{{hasVisited()}}} instead.
{{{
    State.hasPlayed(passageTitle)
}}}
It has 1 parameter:
* {{{passageTitle}}}, the title of the moment to check
> //Example://
{{{
    State.hasPlayed("The Ducky")  
→ checks if a moment matching "The Ducky" exists
}}}
\
<h3>{{{State.index()}}}</h3>\
This API returns the moment relative to the bottom of the past in-play history, with the given index.
{{{
    State.index(index)
}}}
It has 1 parameter:
* {{{index}}}, the index of the relevant moment
> //Example://
{{{
    State.index(0)                 
→ the least recent moment

    State.index(1)
→ the second least recent moment

    State.index(State.length - 1)
→ the most recent moment
}}}
\
<h3>{{{State.isEmpty()}}}</h3>\
This API checks whether the full in-play history is empty.
> //Example://
{{{
    if (State.isEmpty()) {
        /* Code to run if history is empty */
    }
}}}
\
<h3>{{{State.peek()}}}</h3>\
This API return the moment, relative to the top of the past in-play history, with an optional offset.
{{{
    State.peek([offset])
}}}
It has 1 parameter:
* {{{offset}}} (optional), the offset from the top moment 
** default is 0
> //Examples://
{{{
    State.peek()
    State.peek(0)                  
→ most recent moment

    State.peek(1)
→ the second most recent moment 

    State.peek(State.length - 1)
→ the least recent moment
}}}

<div id="link-menu">[[Back to State API Menu|StateAPI]] - [[Back to the Start Menu|Start]]</div>


:: StateAPI-Variable [page] {"position":"3200,1900","size":"100,100"}
<h1>Managing the State of Variables</h1>
The following APIs will help check the state of current variables in the story, and can be used to set value to those variables. They are especially helpful in JavaScript/jQuery code requiring the value of a SugarCube variable or setting them. 
\
<h3>{{{State.temporary}}}</h3>\
This API will return the current temporary variables ({{{_temp}}}), as an object. 
A specific temporary variable can be targeted by using the name of the variable as a property. 
> //Assuming that// {{{_ThisIsATemp = [value]}}}:
{{{
    State.temporary.ThisIsATemp
}}}
\
<h3>{{{State.variables}}}</h3>\
This API will return the current active variables ({{{$var}}}), as an object. 
A specific variable can be targeted by using the name of the variable as a property.
> //Assuming that// {{{$aVariable = [value]}}}:
{{{
    State.variables.aVariable
}}}
\
<h3>{{{State.getVar()}}}</h3>\
This API will return the value of the indicated variable.
{{{
    State.getVar(varName)
}}}
It has 1 parameter:
* {{{varName}}}, the name of the variable, including its sigil 
> //Examples//
{{{
    State.getVar("$variable")
    State.getVar("_temporary")
    State.getVar("settings.alsothat")
}}}
\
<h3>{{{State.setVar()}}}</h3>\
This API sets the value of the indicated variable, like the {{{<<set>>}}} macro does.
{{{
    State.setVar(varName, value)
}}}
It has 2 parameters:
* {{{varName}}}, the name of the variable, including its sigil 
* {{{value}}}, the value to assign 
> //Example://
{{{
    State.setVar("$charName", "Jane Doe")  
→ assigns the string "Jane Doe" to $charName
}}}
<div id="link-menu">[[Back to State API Menu|StateAPI]] - [[Back to the Start Menu|Start]]</div>


:: StoryAPI [chapter page] {"position":"3500,1900","size":"200,100"}
<h1>Managing Story Elements with APIs</h1>
The APIs listed below will help you check and manage different elements of your Story.
\
<h3>{{{Story.domId}}}</h3>
This API keeps the DOM ID of the project, created from the slugified story title.
{{{
    Story.domId
→ sugarcube-guide is the DOM ID of this project.
}}}
\
<h3>{{{Story.ifId}}}</h3>\
This API keeps the IFID ([[Interactive Fiction IDentifier|https://ifdb.org/help-ifid]]) of the story.
{{{
    Story.ifId
→ C15CE33F-61F6-4909-BB59-73EE7A3D57B1
  is the IFID of this project
}}}
\
<h3>{{{Story.title}}}</h3>
This API keeps the title of the project.
{{{
    Story.title
→ {SugarCube Guide} is the title of this project
}}}
\
<h3>{{{Story.get()}}}</h3>\
This API will return the Passage object of the referenced title (tags, classes, HTML element).
{{{
    Story.get(title)
}}}
It has 1 parameter:
* {{{title}}}, the title of the Passage object (i.e. the Passage Name)
> //Example://
{{{
    Story.get("Start")  
→ returns the Passage object of {:: Start}
}}}
\
<h3>{{{Story.has()}}}</h3>\
This API will check whether the Passage object of the referenced title (tags, classes, HTML element) exists.
{{{
    Story.has(title)
}}}
It has 1 parameter:
* {{{title}}}, the title of the Passage object (i.e. the Passage Name)
> //Example://
{{{
    Story.has("Start")  
→ checks that {:: Start} exists 
}}}
\
<h3>{{{Story.lookup()}}}</h3>\
This API will return an array of Passage objects whose value matches the search value, given a property.
{{{
    Story.lookup(propertyName , searchValue [, sortProperty])
}}}
It has 3 parameters:
* {{{propertyName}}}, the property to check 
* {{{searchValue}}}, the value wanted related to the property
* {{{sortProperty}}} (optional), the property used to sort the array 
** default is the Passage's title lexicographically sorting
\
> //Example://
{{{
    Story.lookup("tags", "forest");
→ will list all Passages tagged 'forest'
  sorted by title
}}}
\
<h3>{{{Story.lookupWith()}}}</h3>\
This API will return an array of Passage objects passing the test from a defined predicate function.
{{{
    Story.lookupWith(predicate [, sortProperty])
}}}
It has 2 properties:
* {{{predicate}}}, the function used to test each Passage object 
* {{{sortProperty}}} (optional), the property used to sort the array 
** default is the Passage's title lexicographically sorting
\
> //Examples://
{{{
    Story.lookupWith(function (p) {
        return p.tags.includes("forest");
    });
→ will list all Passages tagged 'forest'
  sorted by title

    var hasWhitespaceRegExp = /\s/;
    Story.lookupWith(function (p) {
        return hasWhitespaceRegExp.test(p.title);
    });
→ will list all Passages containing whitespace
  sorted by title
}}}

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: StoryAuthor {"position":"2300,400","size":"100,100"}
<<if tags().includes("sp-demo")>>This is made by me! Manon :D<</if>>


:: StoryBanner {"position":"2300,100","size":"100,100"}
<<if tags().includes("sp-demo")>><img data-passage="TheCube"><</if>>


:: StoryCaption {"position":"2300,500","size":"100,100"}
<<if tags().includes("sp-demo")>>I can't think of a good caption... so here's some text<</if>>


:: StoryDisplayTitle {"position":"2300,200","size":"100,100"}
<<if tags().includes("sp-demo")>>SG SUPER GUIDE YO@!<<else>>100% Good Twine SugarCube Guide<</if>>


:: StoryMenu {"position":"2300,600","size":"100,100"}
<<if tags().includes("sp-demo")>>[[This will only accept links, and this one is broken]]
	[[But this one will send you back to the main menu!|Start]]
	And this won't appeat, because it's not a link.
	<<button [[And neither will this, because a button is not a link]]>><</button>>
	<<else>>[[Index]]
	<<link "Credits">><<popup "Credits" "Credits">><</link>>
	[[Update Log]]<</if>>


:: StorySubtitle {"position":"2300,300","size":"100,100"}
<<if tags().includes("sp-demo")>>The bestest of guides!<<else>>Version 1.2.0<</if>>


:: Tags-Asset [page] {"position":"2000,1400","size":"100,100"}
<h1>Including Assets with Tags</h1>
While you cannot import assets through the Twine app, it is possible with SugarCube to create //Media Passages// through a passage tag. The media embeded in your project, you can inclde those assets into other passages thanks to the {{{data-passage}}} [[attribute|Markup-Attribute]]. 
> ''Note:'' while it is meant for [[Base64-encoded|https://en.wikipedia.org/wiki/Data_URI_scheme]] media source {{{data:type/extension;format,code}}}, the passage will also accept URL.

These media passages will support audio, image, video, and VTT elements. Each of those get a special tag:
* {{{Twine.audio}}}, will register the passage as an audio passage
* {{{Twine.image}}}, will register the passage as an image passage
* {{{Twine.video}}}, will register the passage as a video passage. 
* {{{Twine.vtt}}}, will register the passage as a VTT passage.
> ''Note:'' you can only include one asset per passage. 
> In Twine 2, it is strongly recommended to only create a handful of media passage, and use small sources.

<div id="link-menu">[[Back to the Special Passages and Tags Menu|Special-Tags]] - [[Back to the Start Menu|Start]]</div>


:: Tags-Built [page] {"position":"2000,1200","size":"100,100"}
<h1>Special Tags creating Special Passages and Functionalities</h1>
Along with [[Special Passages|Special-Passage]], SugarCube uses special passage tags to either create new Special Passages or affect the passage itself.
> ''Note:'' only use those tags when needed, as it can affect how Twine loads the project.
\
To add a tag to a passage on Twine, open the relevant passage, click {{{+ Tag}}} in the passage menu, and fill in the blanks. If a tag has been assigned to another passage, it will show in the {{{Add Tag}}} listbox. You can also assign a colour to the tag.
For Twee files, add the tag inside {{{[ ]}}} next to the passage name. For tags with multiple words, add a {{{-}}} between them ({{{[like-this]}}}) For multiple tags, add a space in between ({{{[nobr widget]}}}).
\
<h3>{{{nobr}}}</h3>\
Like the [[macro of the same name|Macro-Nobr-Silent]], the {{{nobr}}} tag removes every break to a new line in the passage. However, unlike the macro, it will affect the whole passage, rather than what was added inside the macro. This tag is most useful in passages with a lot of code, like a widget passage.
{{{
    :: Passage [nobr]
    This passage will not have line breaks.
    Even if the code is formatted with line breaks.
}}}
> ''Note:'' to target the whole project rather than a passage, it is best to use the [[Config.nobr|Basic-API-Config]] API instead.
\
<h3>{{{widget}}}</h3>\
As the name suggest, this tag is meant to create a special passage to set up {{{<<widget>>}}} [[macros|Macro-Widget]]. 
{{{
    :: Some Widgets [widget]
    <<widget "Test">>this is a test widget<</widget>>
}}}
> ''Note:'' while you can have multiple passages with this tag, it is recommended to keep it to a minimum.
\
<h3>{{{bookmark}}}</h3>\
This widget is meant to populate the [[JumpTo Functionlity|Basic-API-UI]], to go back in the player history.
{{{
    :: Passage [bookmark]
    If the player read this passages, it will appear in the JumpTo dialog box.
}}}
> ''Note:'' if JumpTo is not used in a project, you can also use this tag as if it were a "regular" tag.
\
<h3>{{{script}}}</h3>\
This tag is meant to tell Twine that this passage only contains JavaScript code. It is not necessary for Twine users, as JavaScript code should be placed in the {{{Edit JavaScript}}} passage, in the //Story// menu. 

As for Twee files, it is only necessary if the file should be imported into the Twine app, and only one passage should be tagged as such. If you are using a compile (like Tweego), it is recommended to simply use a separate {{{.js}}} file (or multiple files) rather than create a {{{script}}} tagged passage. The files will be loaded in alphabetical order.
{{{
    :: The JavaScript Code [script]
}}}
> ''Note:'' you cannot change the name of the JavaScript passage on Twine.
\
<h3>{{{stylesheet}}}</h3>\
This tag is meant to tell Twine that this passage only contains CSS code. It is not necessary for Twine users, as CSS code should be placed in the {{{Edit Stylesheet}}} passage, in //Story// the menu. 

As for Twee files, it is only necessary if the file should be imported into the Twine app, and only one passage should be tagged as such. If you are using a compile (like Tweego), it is recommended to simply use a separate {{{.css}}} file (or multiple files) rather than create a {{{stylesheet}}} tagged passage. The files will be loaded in alphabetical order.
{{{
    :: The CSS Code [stylesheet]
}}}
> ''Note:'' you cannot change the name of the StyleSheet passage on Twine.
\
<h3>{{{init}}}</h3>\
This tag is meant to be used for add-ons/library, as it loads at the beginning initialization. It creates a passage that works like {{{StoryInit}}}. However, for 99% of projects created in Twine, this tag is unnecessary. Instead, the Special passage {{{StoryInit}}} should be used.
{{{
    :: initialization [init]
}}}

<div id="link-menu">[[Back to the Special Passages and Tags Menu|Special-Tags]] - [[Back to the Start Menu|Start]]</div>


:: Tags-CSS [page] {"position":"2100,1300","size":"100,100"}
<h1>Customising Passages with Tags</h1>
Aside from [[creating Special Passages or Functionalities|Tags-Built]], tags can also be used to customise how a passage looks. For example, if multiple passages are set in a forest, one can add a tag called {{{forest}}} to those passages, and use this tag to set an image of a forest in the background of those passages.

To add a tag to a passage on Twine, open the relevant passage, click {{{+ Tag}}} in the passage menu, and fill in the blanks. If a tag has been assigned to another passage, it will show in the {{{Add Tag}}} listbox. You can also assign a colour to the tag.
For Twee files, add the tag inside {{{[ ]}}} next to the passage name. For tags with multiple words, add a {{{-}}} between them ({{{[like-this]}}}) For multiple tags, add a space in between ({{{[nobr widget]}}}).

Adding a tag to a passage creates:
* a data-tag on {{{html}}}, {{{body}}}, and {{{.passage}}}
* a CSS class on {{{body}}} and {{{.passage}}}

Both the data-tag and class can be used in the Stylesheet to edit aspects of the page, but are coded differently. The data-tag will keep the formatting of the inserted tag (case-sensitive and punctuation), while the class will transform it into a lowercase string and without punctuation (save for {{{-}}}).
{{{
For a tag called: The-Name-Of-The-Tag:
    [data-tags~="The-Name-Of-The-Tag"]
    .the-name-of-the-tag

For a tag called: Super!
    [data-tags~="Super!"]
    .super
For a tag called: This-1
    [data-tags~="This-1"]
    .this-1
}}}
> ''Note:'' if you are unsure how a tag or class has been formatted, use the Inspect Tool of your browser and select the {{{<body>}}}.
\
As for positioning the data-tag or class on an element, you need to take into account the order of CSS rules and where the tags are located. For example:
{{{
    html[data-tags~="forest"] { background-image: url(forest-bg.jpg); }
→ will change the background to an image of a forest, because there is a data-tag on "html"

    html.forest { background-image: url(forest-bg.jpg); }
→ will not do anything, because there is no class on "html"

    html .forest { background-image: url(forest-bg.jpg); }
→ will add the image as a background to every element inside "html" with the class "forest"
}}}
> ''Note:'' it is recommended to be specific when targeting an element (so not like the last example), to avoid adding unnecessary rules to elements.
\
> ''Note:'' class can also be added to the {{{html}}} element, in the JavaScript passage, jQuery code or [[DOM Macros|Macro-DOM-Adv]].
\
> //Other examples://
{{{
→ Targeting a child element:
    html[data-tags~="forest"] .passage { color: darkgreen; }
        → will change the font colour of ".passage" if the passage is tagged "forest"
    body[data-tags~="forest"] a { color: green; }
        → will change the colour of every link inside "body"

→ Targeting an element without "body":
    [data-tags~="forest"] #ui-bar {background: red;}
    .forest #ui-bar {background: red;}
        → will change the background colour of the sidebar
}}}
> ''Note:'' Data-Tags are prefered over classes, because it is more stable (i.e. won't be messed up by custom macros or third party code).

<div id="link-menu">[[Back to the Special Passages and Tags Menu|Special-Tags]] - [[Back to the Start Menu|Start]]</div>


:: TemplateAPI [page] {"position":"1100,1300","size":"100,100"}
<h1>The Template APIs</h1>
Used in combination with the [[Template Markup|Markup-Template]], the Template APIs allows the inclusion of templates to display specific strings on the page. When defined, the Template API will look for any Template Markup ({{{?this}}}) and see if it can display a string instead.
This can be used to a wide range of elements and variation, but it might be the most useful for Pronouns display.
\
<h3>Creating a Template</h3>\
This API will allow you to define a template in your project. You can include as many as you want, as long as each template is named differently.
> ''Note:'' this API is case-sensitive!
{{{
    Template.add(name , definition);
}}}
The API has 2 parameters:
* {{{name}}}, the name (or array of names) of the template
** it must consist of basic Latin characters (A → Z) and start with a letter.
** it can include numbers, underscores, or hyphens
* {{{definitition}}}, what could be outputed when the template is used
** this can be a function, a string, or an array of either 
** if the definition is an array, the output will be randomly selected between all listed options
** functions should always produce string values
*** functions can use {{{this}}} to refer to the template's {{{name}}}
\
> //Basic Examples://
{{{
→ String template named ?sunrise:
    Template.add('sunrise', 'sunset');

→ Array template named ?pie-filling:
Template.add('pie-filling', ['cherry', 'apple', 'chocolate', 'pumpkin']);

→ Function template named ?pet:
Template.add('pet', function () {
	return either('a dog', 'a cat', 'a turtle');
});
}}}
> ''Note:'' a Function template is used for [[HiEv's Pronoun Template|https://hiev-heavy-ind.com/Sample_Code/Sample_Code.html#Pronoun%20Templates]] 
\
> //Mixed Array Example://
{{{
→ Mixed array template (string + function) named ?cmyk:
Template.add('cmyk', [
	'Cyan',
	function () {
		return either('Magenta', 'Yellow');
	},
	'Black'
]);
}}}
> //Function Example with context object// {{{this}}}:
{{{
→ Multi-Named template, whose output depends on the name:
Template.add(['color', 'Color'], function () {
	var color = either('red', 'green', 'blue');
	return this.name === 'Color' ? color.toUpperFirst() : color;
});
}}}
> ''Note:'' in this last example, the function will randomly select between //red//, //green//, and //blue//. Then it will look at whether the Template Markup is either {{{?color}}} or {{{?Color}}} to format the output (capitalised or lowercase).
\
<h3>Removing a Template</h3>\
To remove a template (or multiple), you need to use {{{Template.delete()}}}. Please note that deleting a template will affect any future iteration of that specific Template Markup.

The template has 1 parameter:
* {{{name}}}, the name (or arrays of names) of the template(s) to remove.
> //Examples://
{{{
→ Removes the template for ?sunrise
    Template.delete('sunrise');

→ Removes the templates ?color and ?Color
    Template.delete(['color', 'Color']);
}}}
\
<h3>Other Template APIs</h3>\
<h4>{{{Template.size}}}</h4>\
This API can tell how many templates exist within the code.
{{{
    if (Template.size === 0) {
        /* If no templates exist, run code */
    }
}}}
\
<h4>{{{Template.has()}}}</h4>\
This API will check whether a template, for which you need to indicate the name, exists within the code.
{{{
    Template.has()

    if (Template.has('sunrise')) {
	    /* if ?sunrise is defined, run code */
    }
}}}
\
<h4>{{{Template.get()}}}</h4>\
This API will indicate the definition of the template, whether it be a function ({{{[function]}}}), a string ({{{'word'}}}) or an array (list all elements), or will return NULL if the template is not defined.
{{{
    Template.get(name)

    var sunrise = Template.get('sunrise');
}}}
> ''Note:'' if {{{?sunrise}}} is defined as the first example on this page, this API will show {{{sunset}}} as a value.

<div id="link-menu">[[Back to the API Menu|API-Adv]] - [[Back to the Start Menu|Start]]</div>


:: TheCube [Twine.image] {"position":"2100,400","size":"100,100"}
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAAB3RJTUUH5AMQDQ4vazJd/wAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAzdJREFUeNrt3M1rGkEUAHDb/jO9tce20B5bUKOiLpqIH/9Gbh4CvQQCnsV6r7d4rh9gY8EYjYk5qQcPBmM8iB6E7E7nyS5Yu36s7uzne/BYFnZ25v2cdZaFXYfDgHF0dPTWgbE5XC7XN6/XW6VYxOPxXNHtV1SRQfL5fH8A6fj4WEilUiQcDguwL+LZHu0VnT0cxbgHlFgsxufzeTKbzch8Pl9sYT8ajfIi2j0cD+0QSURaTQkNjrMT2gKJXm7tXZBsiZZMJl+73e7Yvkjb0OC8pkdTG2kXNOgP+kUkK6FpjWRKNI7j3iwjxeNxTZFMgSYh0VXpwQhI69BgXMtoMG7dkBKJhKGQtqHBuJmjycwkwchI69Dgx2WGZnakDTNNUA3NakjM0GjDTzTrcJJIJCLkcjkymUwsgbSaUBfUd3JyIqHVoX4lD9++Q8N0Ov1oVSQ5tGw2+wh1Q/2KsarVKmk0GrdPT091K0PRS7L+/Px8OxgMyEFYtVptkVZEk5BGoxGBVA1rBe3GSkjMsMyMRpFu5JCYY5kJbRuSZlhGRtsVSXMsI6EpRdINaxltOBw2zICkO5aUzWbzmhZwxxJpOp02DkEyDBZLNDqT7sbj8fWhSIbDUhNNbSTDYh2CxgrJ8FhK0FgjmQZrE5pWSKbDEpNvtVq/KVCVwl3RAnitoMyItch2u13UEgmxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEMsaWOVy2VZYvV5POZbH4zmFRhzHvVxcXJBKpWJprH6/TzKZDAmFQi/iZxJOFb044Ha7P9KGl9DY7/fzZ2dnpFQqWQqr2+0S+CxCIBDgxRl1CXXv/VqKHmissVRH0hONFRZzJD3Q1MbSHElLNLWwOp3Of0g0P+j2+i90TleP/DJasVjUFWsVSRyffkgs0fbFMjwSCzSlWCtIguGRNqAJStF2xTI9khpo27AkpGAwKCH9dDqd7y3zAR8oBoraBW0dlhwSXZXfOawaUNw2tFUs2yEpQZOwbI8k84TjC4UowOoJf9Tn5+ekUChU0+k0PPWQbgF+wXEOjH/QiuKdNpGQXC7XZ9TZjPYDkTDsE38BhSF0jgiMpUIAAAAASUVORK5CYII=


:: URL-Types [chapter page] {"position":"2000,600","size":"200,100"}
<h1>ULRs for Assets and Testing</h1>
When including any external element into a project (e.g. image, sound, font, etc...), you will need the URL of the file. Twine does not have an import function for assets (and neither does Tweego). This means the URL will be the link between the Twine project and the asset, as it will tell the code where find it and (dis)play it when the game is in use.
There are essentially two locations for assets:
* ''Online'' assets, requiring an Online URL ({{{html://website/file}}})
* ''Local'' assets:
** located in the user's device, using the ''Absolute'' path URL ({{{C:\User\Documents\Folder\file}}})
** located in the project folder, using ''Relative'' path URL ({{{Folder\file}}})
> ''Note:'' as different players will organise their devices differently, the Absolute path is not recommended for Twine projects meant to be shared (online or otherside).
\
<h3>Online Assets</h3>\
For assets hosted on third-party platforms, you will only need the URL towards the wanted file. Some of these platforms will even provide you with the needed URL for your projects.
For example, here is the URL for the Google-hosted font //Roboto//:
{{{
    https://fonts.googleapis.com/css2?family=Roboto&display=swap

Importing in the StyleSheet:
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
}}}

For the logo of the Wikimedia Foundation, the URL will look like this:
{{{
    https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Wikimedia_Foundation_logo_-_vertical.svg/1024px-Wikimedia_Foundation_logo_-_vertical.svg.png
}}}
> ''Note:'' if the project is played offline, those assets will not load.
\
<h3>Relative Path</h3>\
For assets located in the game folder, you will need their //Relative// paths. This is a path the operating system will take to find the wanted asset, starting from the file (or program) where the code is triggered. For Twine projects, that starting point is the project HTML file.
Assuming that the game folder is as follow:
{{{
    index.html
    images\
        introduction\
            cool.jpg
}}}
\
The image //cool.jpg// is located in the folder //introduction// which is located in the folder //images//. As such from the HTML file, the relative URL for that image would be:
{{{
    images\introduction\cool.jpg
}}}
\
''But'', to ensure this will work properly, the back slashes {{{\}}} from the relative path should become forward slashes {{{/}}}:
{{{
    images/introduction/cool.jpg

Using in the StyleSheet:
    background-image: url('images/introduction/cool.jpg');
}}}
\
<h3>Note on Case Sensitivity</h3>\
Both Online URLs and Relative paths are case sensitive: this means that the URL should match the paths in terms of lower- and upper-case characters, or the asset will not load. This is relevant for:
* folder names 
* asset names 
* file extension (.png ≠ .PNG)
It is important that all these aspects are coded in the proper case.
\
<h3>Some Recomendations</h3>\
To avoid issues with loading assets, I recommend:
* using only plain letters (a-z) and numbers (if necessary), instead of special characters (é, ñ, à, etc…)
* using hyphens {{{-}}} or underscores {{{_}}} to replace space in the folder/file names
* be consistent in the casing (all upper or all lower case)
\
> ''Note:'' While there is no import function in Twine, it is possible to create "asset" passages for Base64-encoded media source, using an [[Asset Tag|Tags-Asset]]. This supports audio, images, video and VTT assets.

<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Update Log [side] {"position":"1700,400","size":"100,100"}
<h1>100% Good Twine SugarCube Guide</h1>
> //Next Update// (TBA)
Edits to take into account changes in the new SugarCube version 
Potentially the Audio API
<hr>
> ''Version 1.2.1''
[24-Jan] - Added Function/Methog Index + API Index
[24-Jan] - Completed the TODO comments
[24-Jan] - Removed the //New// and //Updated// signs
[24-Jan] - Fixed typos, broken links
[24-Jan] - Reformatted the Macro Index
> ''Version 1.2.0''
[10-Dec] - Released a Downloadable Form
[10-Dec] - Completed the SugarCube Theme 
[10-Dec] - Completed the Settings Options
[10-Dec] - Added the {Targetable HTML Elements} page
[10-Dec] - Added the {State APIs} pages 
[09-Dec] - Added the {Passage API} page
[09-Dec] - Added the {Story API} page
[08-Dec] - Added the {Methods Advanced} pages
[08-Dec] - Added the {FullScreen API} pages
[08-Dec] - Added the {Accessibility} page
[07-Dec] - Added the {Stats Bar} and {Loading Screen} pages
[07-Dec] - Added the {Save API} pages 
[06-Dec] - Added the {Custom Macro} pages
[05-Dec] - Added the {More Markup} pages 
[05-Dec] - Added the {More Basic API} pages 
[05-Dec] - Added the {Configuration API} pages
[04-Dec] - Added more and reformatted examples 
[04-Dec] - Rephrased some explanations for clarity and consistency
[04-Dec] - Added the {Special Variables} and {Asset Tags} pages
[04-Dec] - Added the {Settings API} pages
[03-Dec] - Added more and reformatted examples 
[03-Dec] - Rephrased some explanations for clarity and consistency
[03-Dec] - Corrected an error in the {Typing Events} page
[02-Dec] - Added more and reformatted examples 
[02-Dec] - Rephrased some explanations for clarity and consistency
[02-Dec] - Corrected an error in the {Script/Run Macro} page
[30-Nov] - Added more and reformatted examples 
[30-Nov] - Rephrased some explanations for clarity and consistency
[30-Nov] - Fixed error in text for the {Condition Statements}
[29-Nov] - Added more and reformatted examples 
[29-Nov] - Rephrased some explanations for clarity and consistency
[28-Nov] - Added more and reformatted examples 
[28-Nov] - Fixes some code examples (Settings, Markup-Link)
[28-Nov] - Rephrased some explanations for clarity and consistency
[28-Nov] - Fixed some external links
[28-Nov] - Added more links (internal guide)
<hr>
> ''Version 1.1.0''
[05-Aug] - Clean up and check for update
[02-Aug] - Added the {Event} pages
[02-Aug] - Added the {Intro to Animation} page
[01-Aug] - Addition in the {Going Further with Settings} page.
[01-Aug] - Added the {Engine API} pages
[01-Aug] - Added the {Localization} pages
<hr>
> ''Version 1.0.2''
[30-Jul] - Fixed broken links
[30-Jul] - Added external links
[30-Jul] - Added extra explanation on the {Back vs Return} macros, and the {Conditional Statements}.
[30-Jul] - Fixed errors in Typed code, Basic Macro code, Styling Markup
[30-Jul] - Corrected wrong information in the Further CSS, Interactive Macros (cycle, listbox)
[30-Jul] - Updated the {Index}
[30-Jul] - Completed the {Macro List} Page
[30-Jul] - Updated the {Lexicon}
<hr>
> ''Version 1.0.1''
[29-Jul] - Fixed errors in Method code (array, string)
[29-Jul] - Fixed broken links
[29-Jul] - Fixed markup errors
[29-Jul] - Fixed inconsistencies in formatting
[29-Jul] - Cleaned up TODO notes on published pages
<hr>
> ''Version 1.0.0''
[30-Jun] - Pre-Release

<<back>>


:: Variables-Base [page] {"position":"800,400","size":"100,100"}
<h1>Variables and Values in SugarCube</h1>
<h3>Value Types</h3>\
Values are bits of data stocked inside variables. There are different types of values, which are affected by macros and will affect how macros behave.

The different types of values are:
* numbers (also called //integer//)
* words (also called //strings//)
* Boolean ({{{true/false}}})
* functions (advanced - covered [[here|Functions]])
> ''Note:'' You can have numbers in a string ({{{"1" ≠ 1}}}), but you won't be able to change the value of this number (unless you transform the value into an integer).
\
<h3>Variable Types</h3>\
To track and organise those values, there are three types of variables to consider:
* //basic//: only one value
** {{{var = value}}}
* //array//: a list of values, each with a set position
** {{{var = [value, value, value]}}}
* //object//: values linked to properties
** {{{var = {property : value, property : value}}}}
Depending on the amount of information tracked within a project, the last two options can be helpful in keeping those values organised. However, they are not necessary (especially in simple IF projects). To set a variable, see [[the Set Macro|Macro-Set-Basic]] chapter.

In SugarCube, variables can been viewed as followed:
{{{
    basic: 
        $variable = 5
        $variable = "some words"
        $variable = true
    array:
        $variable = [5, "some words", true]
    object:
        $variable = {number: 5, string: 'some words', boolean: true}
}}}
\
<h3>Variable Storage</h3>\
Aside from different types of variables, there are multiple ways to store those variables in the code. Depending on the need, a certain kind will be more useful than another. The differnt storage types are:
* temporary ({{{_temporary}}}), so the variable disappears when moving to a new passage
* permanant ({{{$variable}}}), so the variable is stored until you [[destroy|Macro-Unset]] it
* settings ({{{settings.var}}}), or variables related to the [[Settings]]
* setup ({{{setup.var}}} - should be set in StoryInit), which is meant for unchanging values (ex: the price of an object)
> ''Note:'' for a simple project, you will not need the last two types. You may not even need variables at all.

<div id="link-menu">[[Back to the Basics Menu|Basics]] - [[Back to the Start Menu|Start]]</div>


:: Widget [widget nobr] {"position":"1900,100","size":"100,100"}
<<widget "SomeWidget">>
    Wow Some Text
<</widget>>
<<widget "SimonSays">>
    <<set _array to ["Raise your hands!", "Jump!", "Dance!"]>>
    <<print _array.random()>>
<</widget>>
<<widget "SimonSpecialSay">>
    <<if _args[0]>>
        <<print _args[0]>>
    <<else>>
        <<SimonSays>>
    <</if>>
<</widget>>
<<widget "SimonDoes" container>>
    <div class="simon">
        <hr class="before-simon">
        <p class="simon-does">_contents</p>
    </div>
<</widget>>


:: StoryScript [script]
//----UI BASE----
    //--Scrollback to top
$(document).on(":passagedisplay", function() {
    $("#passages").scrollTop(0);
});
//----SETTINGS----

Setting.addHeader("Visual Setting");

var settingThemeNames = ["Base SC", "SC Docu"];
var settingThemeHandler = function () {
    var $html = $("html");
        $html.removeClass("sc-docu");
        switch (settings.theme) {
            case "SC Docu":
                $html.addClass("sc-docu");
                break;
}};
Setting.addList("theme", {
    label    : "Change Theme",
    desc     : "Choose between the Base StyleSheet<br>or the SugarCube Documentation",
    list     : settingThemeNames,
    default  : "Base SC",
    onInit   : settingThemeHandler,
    onChange : settingThemeHandler
});

Setting.addHeader("Font Settings");

var settingFontFam = ["Sans-Serif", "Serif", "Monospace", "Cursive"];
var settingFontFamHandler = function () {
    var $html = $("html");
        $html.removeClass("cursive serif mono");
        switch (settings.fontFam) {
            case "Serif":
                $html.addClass("serif");
                break;
            case "Monospace":
                $html.addClass("mono");
                break;
            case "Cursive":
                $html.addClass("cursive");
                break;
}};
Setting.addList("fontFam", {
    label    : "Change Font",
    desc     : "This will use the default fonts of your device.",
    list     : settingFontFam,
    default  : "Sans-Serif",
    onInit   : settingFontFamHandler,
    onChange : settingFontFamHandler
});

    //--FONT SIZE--
var settingFontSize = ["100%", "130%", "150%"];
var resizeFont = function() {
    var size = document.getElementById("passages");
    switch (settings.fontSize) {
        case "100%":
            size.style.fontSize = "100%";
            break;
        case "130%":
            size.style.fontSize = "130%";
            break;
        case "150%":
            size.style.fontSize = "150%";
            break;
    }
};
Setting.addList("fontSize", {
    label		: "Change Font Size",
    list		: settingFontSize,
    default     : "100%",
    onInit		: resizeFont,
    onChange	: resizeFont
});

// dialog API macro set (minified), by chapel; for SugarCube 2
;Macro.add("dialog",{tags:["onopen","onclose"],handler:function(){var t="",s=null,n=null,o=this.args.length>0?this.args[0]:"",e=this.args.length>1?this.args.slice(1).flatten():[];this.payload.forEach((function(o,e){0===e?t=o.contents:"onopen"===o.name?s=s?s+o.contents:o.contents:n=n?n+o.contents:o.contents})),e.push("macro-"+this.name),Dialog.setup(o,e.join(" ")),Dialog.wiki(t),s&&"string"==typeof s&&s.trim()&&$(document).one(":dialogopened",(function(){$.wiki(s)})),n&&"string"==typeof n&&n.trim()&&$(document).one(":dialogclosed",(function(){$.wiki(n)})),Dialog.open()}}),Macro.add("popup",{handler:function(){if(this.args.length<1)return this.error("need at least one argument; the passage to display");if(!Story.has(this.args[0]))return this.error("the passage "+this.args[0]+"does not exist");var t=this.args[0],s=this.args.length>1?this.args[1]:"",n=this.args.length>2?this.args.slice(2).flatten():[];n.push("macro-"+this.name),Dialog.setup(s,n.join(" ")),Dialog.wiki(Story.get(t).processText()),Dialog.open()}}),Macro.add("dialogclose",{skipArgs:!0,handler:function(){Dialog.close()}});

// message-macro.min.js, for SugarCube 2, by Chapel
// v1.0.1, 2022-07-21, 3bdbdfbe5ae47a46e4f4e52766d78701939ae9a6
;setup.messageMacro={},setup.messageMacro.default="Help",Macro.add("message",{tags:null,handler:function(){var e=this.payload[0].contents,a=$(document.createElement("span")),s=$(document.createElement(this.args.includes("btn")?"button":"a")),t=$(document.createElement("span"));s.wiki(this.args.length>0&&"btn"!==this.args[0]?this.args[0]:setup.messageMacro.default).ariaClick(this.createShadowWrapper((function(){a.hasClass("open")?t.css("display","none").empty():t.css("display","block").wiki(e),a.toggleClass("open")}))),a.attr("id","macro-"+this.name+"-"+this.args.join("").replace(/[^A-Za-z0-9]/g,"")).addClass("message-text").append(s).append(t).appendTo(this.output)}});
// end message-macro.min.js


:: StoryStylesheet [stylesheet]
html.serif {
    font-family: serif;
}
html.mono {
    font-family: monospace;
}
html.cursive {
    font-family: cursive;
}
.sc-docu body {
    background-color:#fff;
    color:#111;
}

.sc-docu #ui-dialog-body {
    background-color:#fff;
}


.sc-docu a {
    color: #4722cc;
}
.sc-docu a:hover {
    color: #8822cc;
}

.sc-docu #menu li a:hover {
    color: #eee;
    background: #88f;
}
.sc-docu button {
    background: purple;
    border-color: #b70bb7;
}
.sc-docu button:not([disabled]):hover {
    background: #b70bb7;
    border-color: purple;
}
.sc-docu button:disabled {
    background-color: #444;
    border: 1px solid #666;
}

label {
    font-weight: bold;
}
  
.sc-docu input, .sc-docu select, .sc-docu textarea {
    color: #111;
}
.sc-docu input:not(:disabled):focus, 
.sc-docu input:not(:disabled):hover, 
.sc-docu select:not(:disabled):focus, 
.sc-docu select:not(:disabled):hover, 
.sc-docu textarea:not(:disabled):focus, 
.sc-docu textarea:not(:disabled):hover {
    color: #eee;
    background-color: #88f;
}
  
.sc-docu #ui-dialog-titlebar {
    background: #ccc;
}
#ui-dialog-title {
    padding: 0.2em;
}
#ui-dialog-close {
    height: 100%;
} 
.sc-docu #ui-dialog-close {
    color: #4722cc;
}
#ui-dialog-body.settings div[id|="header-body"] {
    margin: 1em 0 0 0;
    text-align: center;
}
  
.sc-docu #ui-bar {
    background: #f5f5f5;
    border-right-color: purple;
}

.sc-docu #ui-bar-history [id|="history"], .sc-docu #ui-bar-toggle {
    color: #1d005e;
}

.sc-docu #ui-bar-history [id|="history"]:disabled {
    color: #80008036;
}

.sc-docu #ui-bar-history [id|="history"], .sc-docu #ui-bar-toggle {
    border-color: purple;
}

.sc-docu #menu li a {
    color: #111;
}
.sc-docu #menu li a:hover {
    color: #eee;
    background: #88f;
}
.sc-docu #menu ul {
    border-color: purple;
}

.sc-docu #menu li:not(:first-child) {
    border-color: purple;
}

.sc-docu #menu-core li[id|="menu-item"] a::before, .sc-docu #ui-bar-history [id|="history"], .sc-docu #ui-bar-toggle::before {
    color: #1d005e;
}


/* Headers */
#passages h1 {
    background: #0b1f0b;
    border-radius: 5px;
    padding: 0.5em;
}
.sc-docu #passages h1 {
    background-color: #ccc;
}
h1 {
    text-align: center;
}
h3 {
    margin-top: 2em;
}
h4 {
    margin-left: 3em;
    font-size: 115%;
}
h5 {
    margin-left: 3em;
    text-decoration: underline dotted;
}
/* Blockcode */
blockquote {
    border-left: 4px #0b1f0b solid;
    padding: 5px;
}
.sc-docu blockquote {
    border-left-color: #88f;
}
/* Code */
code, pre {
    font-family:monospace,monospace;
    font-size:1em;
    background: #03350369;
    border-radius: 1em;
    padding: 0.2em 0.5em;
}
.sc-docu code, .sc-docu pre {
    background: #8888ff69;
}
pre {
    overflow:auto;
    white-space: pre-wrap;
}
pre code {
    background: transparent !important;
    border-radius: 0;
    padding: 0;
}
code {
    display: inline-block;
}
h4 code, h3 code {
    background-color: #013c01;
}
.sc-docu h4 code, .sc-docu h3 code {
    background: #89a6ff;
}

/* Tables */
.passage th {
    text-align: center;
    font-size: 110%;
}
.passage td {
    padding-top: 6px;
    padding-bottom: 6px;
}
#audio tr th:nth-child(3), #audio tr td:nth-child(3) {
    width: 35%;
}

/* Other Stuff */

.simon {
    width: 134px;
    margin: auto;
}
hr.before-simon {
    border-color: darkgreen;
}
.sc-docu hr.before-simon {
    border-color: purple;
}  
.simon-does {
    text-transform: capitalize;
}

.colour {
    color: green;
}
.sc-docu .colour {
    color: pink;
}

#link-menu {
    text-align: center;
}
.flickering {
    animation: flicker 1s infinite;
}
@keyframes flicker {
    0% { opacity:1; }
    50% { opacity:0; } 
    100% { opacity:1; }
}

[data-tags~="BasicUI"] body {
    color: #eee;
    background: #111;
}
[data-tags~="BasicUI"] #story {background: #012f01;} 
[data-tags~="BasicUI"] #ui-bar {background-color: #330404;}
[data-tags~="BasicUI"].sc-docu #passages h1 {background: transparent;}
[data-tags~="BasicUI"] .passage a {color: #dd6d66;}
/* max width on popup */

#test-bar {
    background: #0b1f0b;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #013c01;
}
#test-bar::-moz-progress-bar {
    background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
    border-radius: 20px;
}
#test-bar::-webkit-progress-bar {
    background: #0b1f0b;
    border-radius: 20px;
}
#test-bar::-webkit-progress-value {
    background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
    border-radius: 20px;
}

#test-metbar {
    background: #1d0b1f;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #3a013c;
}
#test-metbar::-moz-meter-bar {
    background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
    border-radius: 20px;
}

#test-metbar::-webkit-meter-bar {
	background: #1d0b1f;
    border-radius: 20px;
    height: 2em;
    border: 2px solid #3a013c;
}
#test-metbar::-webkit-meter-optimum-value {
    background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
    border-radius: 20px;
}

.statBarContainer {
    background: #660303;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #a40606;
}
.statBar {
    background: linear-gradient(-90deg, #ff489e78, #6effc2, #ff489e78);
    border-radius: 20px;
    height: inherit;
}

#bad-idea {
    color: #444;
}
