:: StoryTitle
SugarCube Guide


:: StoryData
{
  "ifid": "C15CE33F-61F6-4909-BB59-73EE7A3D57B1",
  "format": "SugarCube",
  "format-version": "2.37.3",
  "start": "Start",
  "tag-colors": {
    "chapter": "purple",
    "page": "yellow",
    "menu": "blue"
  },
  "zoom": 0.6
}


:: API List {"position":"1200,400","size":"200,100"}
<h1>APIs List</h1>
Below, you will find the list of SugarCube APIs, and where they are discussed in this guide.
> ''Note:'' Most of the elements below are meant for Advanced users.
\
<h3>Config API</h3>\
<h4>Audio Settings</h4>\
* {{{Config.audio.pauseOnFadeToZero}}} : [[Macro-relevant Configurations|Confic-Macro]] 
* {{{Config.audio.preloadMetadata}}} : [[Macro-relevant Configurations|Confic-Macro]] 
\
<h4>History Settings</h4>\
* {{{Config.history.controls}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.history.maxStates}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
\
<h4>Macros Settings</h4>\
* {{{Config.macros.maxLoopIterations}}} : [[Macro-relevant Configurations|Confic-Macro]] 
* {{{Config.macros.typeSkipKey}}} : [[Macro-relevant Configurations|Confic-Macro]] 
* {{{Config.macros.typeVisitedPassages}}} : [[Macro-relevant Configurations|Confic-Macro]] 
<h4>Navigation Settings</h4>\
* {{{Config.navigation.override}}} : [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
\
<h4>Passages Settings </h4>\
* {{{Config.passages.displayTitles}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.nobr}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.passages.onProcess}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.start}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.passages.transitionOut}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
<h4>Saves Settings</h4>\
* {{{Config.saves.descriptions}}} : [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
* {{{Config.saves.id}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.isAllowed}}} : [[Save Configurations|Config-Saves]]
* {{{Config.saves.maxAutoSaves}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.saves.maxSlotSaves}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.saves.version}}} : [[Save Configurations|Config-Saves]]
\
<h4>UI Settings</h4>\
* {{{Config.ui.stowBarInitially}}} : [[Other Config APIs|Config-Misc]]
* {{{Config.ui.updateStoryElements}}} : [[Other Config APIs|Config-Misc]]
\
<h4>Miscellaneous Settings </h4>\
* {{{Config.addVisitedLinkClass}}} : [[Other Config APIs|Config-Misc]]
* {{{Config.cleanupWikifierOutput}}} : [[Some Useful Configuration API for your Project|Basic-API-Config]]
* {{{Config.debug}}} : [[Testing and Debugging your Game|DebugAPI]]
* {{{Config.enableOptionalDebugging}}} : [[Testing and Debugging your Game|DebugAPI]]
* {{{Config.loadDelay}}} :[[(Un)Locking the Loading Screen|API-Lock]] 

<h3>Dialog API</h3>
* {{{Dialog.append()}}} : [[More Popups APIs|API-Dialog]] 
* {{{Dialog.body()}}} : [[More Popups APIs|API-Dialog]] 
* {{{Dialog.close()}}} : [[Create a PopUp|Basic-API-Dialog]] 
* {{{Dialog.create()}}} : [[Create a PopUp|Basic-API-Dialog]]
* {{{Dialog.empty()}}} : [[Create a PopUp|Basic-API-Dialog]]
* {{{Dialog.isOpen()}}} : [[More Popups APIs|API-Dialog]] 
* {{{Dialog.open()}}} : [[Create a PopUp|Basic-API-Dialog]]
* {{{Dialog.wiki()}}} : [[Create a PopUp|Basic-API-Dialog]]
* {{{Dialog.wikiPassage()}}} : [[Create a PopUp|Basic-API-Dialog]]

<h3>Engine API</h3>
* {{{Engine.lastPlay}}} : [[(Re-)Play a Passage|Engine-Play]]
* {{{Engine.state}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.backward()}}} : [[Moving back and forth in the History|Basic-API-Engine]]
* {{{Engine.forward()}}} : [[Moving back and forth in the History|Basic-API-Engine]]
* {{{Engine.go()}}} : [[Move through the Player's History|Engine-Go]]
* {{{Engine.goTo()}}} : [[Move through the Player's History|Engine-Go]]
* {{{Engine.isIdle()}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.isPlaying()}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.isRendering()}}} : [[Checking the State of the Game|Engine-State]]
* {{{Engine.play()}}} : [[(Re-)Play a Passage|Engine-Play]]
* {{{Engine.restart()}}} : [[Restarting without the Built-In PopUp|Engine-Restart]]
* {{{Engine.show()}}} : [[(Re-)Play a Passage|Engine-Play]]

<h3>Fullscreen API</h3>
* {{{Fullscreen.element}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.isEnabled()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.isFullscreen()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.request()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.exit()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.toggle()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.onChange()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.offChange()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.onError()}}} : [[Getting the FullScreen Experience|FullScreen]]
* {{{Fullscreen.offError()}}} : [[Getting the FullScreen Experience|FullScreen]]

<h3>LoadScreen API</h3>
* {{{LoadScreen.lock()}}} :[[(Un)Locking the Loading Screen|API-Lock]] 
* {{{LoadScreen.unlock()}}} :[[(Un)Locking the Loading Screen|API-Lock]] 

<h3>Macro API</h3>
* {{{Macro.add()}}} : [[The Base APIs for Macros|Macro-API]] 
* {{{Macro.delete()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.get()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.has()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.tags.get()}}} : [[The Base APIs for Macros|Macro-API]]
* {{{Macro.tags.has()}}} : [[The Base APIs for Macros|Macro-API]]

<h3>MacroContext API</h3>
* {{{<MacroContext>.args}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.args.full}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.args.raw}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.name}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.output}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.parent}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.parser}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.payload}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.self}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.contextFilter()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.contextFind()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.contextSome()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.error()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 
* {{{<MacroContext>.shadowHandler()}}} : [[Using Macro Context Objects in the handler|Macro-Context]] 

<h3>Passage API</h3>
* {{{<Passage>.id}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.name}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.tags}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.text}}} : [[Managing Passage Properties with APIs|PassageAPI]]
* {{{<Passage>.processText()}}} : [[Managing Passage Properties with APIs|PassageAPI]]

<h3>Save API</h3>
* {{{Save Objects}}}: [[Save Objects and Their Contents|SaveAPI-Objects]] 
<h4>General</h4>\
* {{{Save.browser.size}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]] 
* {{{Save.browser.clear()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]] 
* {{{Save.browser.continue()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]] 
* {{{Save.browser.isEnabled()}}} : [[The Basic APIs of the Save Elements|SaveAPI-General]] 
<h4>Autosaves</h4>\
* {{{Save.browser.auto.size}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.clear()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.delete()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.entries()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.get()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.has()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.isEnabled()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.load()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
* {{{Save.browser.auto.save()}}} : [[Managing the Autosave Slot|SaveAPI-Autosave]]
<h4>Slot Saves</h4>\
* {{{Save.browser.slot.size}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.clear()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.delete()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.entries()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.get()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.has()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.isEnabled()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.load()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
* {{{Save.browser.slot.save()}}} : [[Managing the Save Slots|SaveAPI-Slots]] 
<h4>Disk</h4>\
* {{{Save.disk.export()}}} : [[Managing Disk Import and Export|SaveAPI-Disk]]
* {{{Save.disk.import()}}} : [[Managing Disk Import and Export|SaveAPI-Disk]]
* {{{Save.disk.load()}}} : [[Managing Disk Import and Export|SaveAPI-Disk]]
* {{{Save.disk.save()}}} : [[Managing Disk Import and Export|SaveAPI-Disk]]
<h4>Base64 Saves</h4>\
* {{{Save.base64.export()}}} : [[Managing Base64 saves|SaveAPI-Base64]]
* {{{Save.base64.import()}}} : [[Managing Base64 saves|SaveAPI-Base64]]
* {{{Save.base64.load()}}} : [[Managing Base64 saves|SaveAPI-Base64]]
* {{{Save.base64.save()}}} : [[Managing Base64 saves|SaveAPI-Base64]]
<h4>Save Events</h4>\
* {{{Save.onLoad.size}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onLoad.add()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onLoad.clear()}}} : [[Using Save-related Events|SaveAPI-Events]] 
* {{{Save.onLoad.delete()}}} : [[Using Save-related Events|SaveAPI-Events]] 

<h3>Setting API</h3>
* {{{Setting.addHeader()}}} : [[Adding Headers|SettingsHeader]]
* {{{Setting.addList()}}} : [[Creating a List Setting|SettingsList]]
* {{{Setting.addRange()}}} : [[Creating a Slider|SettingsRange]]
* {{{Setting.addToggle()}}} : [[Creating a Toggle Setting|SettingsToggle]]
* {{{Setting.addValue}}}: [[Creating a Setting|SettingsBasics]]
* {{{Setting.getValue}}} : [[Going Further with Settings|Settings-More]]
* {{{Setting.load()}}} : [[Going Further with Settings|Settings-More]]
* {{{Setting.reset()}}} : [[Going Further with Settings|Settings-More]]
* {{{Setting.save()}}} : [[Going Further with Settings|Settings-More]]
* {{{Setting.setValue}}} : [[Going Further with Settings|Settings-More]]
* {{{settings}}} : [[Going Further with Settings|Settings-More]]

<h3>SimpleAudio API</h3>
<h4>General</h4>\
* {{{SimpleAudio.load()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.loadWithScreen()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.mute()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.muteOnHidden()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.select()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.stop()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.unload()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.volume()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
<h4>Tracks</h4>\
* {{{SimpleAudio.tracks.add()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.tracks.clear()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.tracks.delete()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.tracks.get()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.tracks.has()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
<h4>Groups</h4>\
* {{{SimpleAudio.groups.add()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.groups.clear()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.groups.delete()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.groups.get()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.groups.has()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
<h4>Lists</h4>\
* {{{SimpleAudio.lists.add()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.lists.clear()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.lists.delete()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.lists.get()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* {{{SimpleAudio.lists.has()}}} : [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
<h4>AudioTrack API</h4>\
* {{{<AudioTrack>.clone()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.duration()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.fade()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.fadeIn()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.fadeOut()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.fadeStop()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.hasData()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.hasMetadata()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.hasNoData()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.hasSomeData()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.hasSource()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isEnded()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isFading()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isFailed()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isLoading()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isPaused()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isPlaying()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isSeeking()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isStopped()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isUnavailable()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.isUnloaded()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.load()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.loop()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.mute()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.off()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.on()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.one()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.pause()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.play()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.playWhenAllowed()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.remaining()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.stop()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.time()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.unload()}}} : [[Going further with AudioTrack|AudioApi-Track]]
* {{{<AudioTrack>.volume()}}} : [[Going further with AudioTrack|AudioApi-Track]]
<h4>AudioRunner API</h4>\
* {{{<AudioRunner>.fade()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.fadeIn()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.fadeOut()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.fadeStop()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.load()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.loop()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.mute()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.off()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.on()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.one()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.pause()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.play()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.playWhenAllowed()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.stop()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.time()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.unload()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
* {{{<AudioRunner>.volume()}}} : [[Going further with AudioRunner|AudioApi-Runner]]
<h4>AudioList API</h4>\
* {{{<AudioList>.duration()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.fade()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.fadeIn()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.fadeOut()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.fadeStop()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.isEnded()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.isFading()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.isPaused()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.isPlaying()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.isStopped()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.load()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.loop()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.mute()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.pause()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.play()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.playWhenAllowed()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.remaining()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.shuffle()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.skip()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.stop()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.time()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.unload()}}} : [[Going further with AudioList|AudioApi-List]]
* {{{<AudioList>.volume()}}} : [[Going further with AudioList|AudioApi-List]]

<h3>State API</h3>
* {{{State.active}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.bottom}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.current}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.length}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.passage}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.size}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.temporary}}} : [[Managing the State of Variables|StateAPI-Variable]]
* {{{State.top}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.turns}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.variables}}} : [[Managing the State of Variables|StateAPI-Variable]]
* {{{State.getVar()}}} : [[Managing the State of Variables|StateAPI-Variable]]
* {{{State.has()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.hasPlayed()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.index()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.isEmpty()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.peek()}}} : [[Exploring the Different Moments inside the State|StateAPI-State]] 
* {{{State.metadata.size}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.clear()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.delete()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.entries()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.get()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.has()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.keys()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.metadata.set()}}} : [[Using the Story Metadata|StateAPI-Metadata]] 
* {{{State.prng.init()}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.prng.isEnabled()}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.prng.pull}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.prng.seed}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.random()}}} : [[Initialising a Seedable PRNG|StateAPI-PRNG]] 
* {{{State.setVar()}}} : [[Managing the State of Variables|StateAPI-Variable]]

<h3>Story API</h3>
* {{{Story.id}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.ifId}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.name}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.add()}}} :  [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.delete()}}} :  [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.filter()}}} :  [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.find()}}} :  [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.get()}}} : [[Managing Story Elements with APIs|StoryAPI]]
* {{{Story.has()}}} : [[Managing Story Elements with APIs|StoryAPI]]

<h3>Template API</h3>
* {{{Template.size}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.add()}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.delete()}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.get()}}}: [[The Template APIs|TemplateAPI]] 
* {{{Template.has()}}}: [[The Template APIs|TemplateAPI]] 

<h3>UI API</h3>
* {{{UI.alert()}}} : [[More Popups APIs|API-Dialog]] 
* {{{UI.restart()}}} : [[Open the Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.saves()}}} : [[Open the Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.settings()}}} : [[Open the Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* {{{UI.update()}}} : [[More SideBar APIs|API-UIBar]] 

<h3>UIBar API</h3>
* {{{UIBar.destroy()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.hide()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.isHidden()}}} : [[More SideBar APIs|API-UIBar]] 
* {{{UIBar.isStowed()}}} : [[More SideBar APIs|API-UIBar]] 
* {{{UIBar.show()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.stow()}}} : [[Handle the SideBar|Basic-API-UIBar]]
* {{{UIBar.unstow()}}} : [[Handle the SideBar|Basic-API-UIBar]]

<div id="link-menu"><<back "Return to Previous Page">></div>


:: API-Adv [chapter menu] {"position":"1100,1100","size":"200,100"}
<h1>Going Further with Basic APIs and More</h1>
While most of the Basic API were listed [[here|Basic-API]], this section will cover more advanced elements for the Dialog Box and the UI SideBar, as well as extra APIs dealing with elements on the screen.

Those APIs are JavaScript-based code that should either be included in the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros to work.

* [[More Popups APIs|API-Dialog]] 
* [[More SideBar APIs|API-UIBar]] 
* [[The Template APIs|TemplateAPI]] 
* [[(Un)Locking the Loading Screen|API-Lock]]


:: API-Dialog [page adv-api] {"position":"1100,1200","size":"100,100"}
<h1 id="adv-dialog">More Popups APIs</h1>
\
<h3>targeting and Appending a Popup</h3>\
\
<h4>{{{Dialog.body()}}}</h4>\
This API will be most used to target the body element of a popup, especially with jQuery code, and allows you to edit it.
> //Adding text to the popup://
{{{
    jQuery(Dialog.body()).append("Cry 'Havoc!', and let slip the <em>ponies</em> of <strong>friendship</strong>.");

    jQuery(Dialog.body()).wiki("Cry 'Havoc!', and let slip the //ponies// of ''friendship''.");
}}}
> ''Note:'' {{{.append()}}} will not parse SugarCube Markup or run macros. You will need to use {{{.wiki()}}} for that.
\
<h4>{{{Dialog.append()}}}</h4>\
This API will append any given content to the body of the popup. This can be helpful when using a popup for multiple situations, but one requires some extra elements.
It is a shortcut for {{{jQuery(Dialog.body()).append(…)}}}. Like the jQuery {{{.append}}}, you ''cannot include'' any SugarCube Markup or macro as content, but use the {{{Dialog.wiki()}}} [[API|Basic-API-Dialog]] instead.
> //Example://
{{{
    Dialog.append("Cry 'Havoc!', and let slip the <em>ponies</em> of <strong>friendship</strong>.");
}}}
<<button "Click for Action">><<run UI.restart()>><<run Dialog.append("Look at what I added here!<br>But we shouldn't mess up with this popup. This is just for an example.");>><</button>>
\
<h3>{{{Dialog.isOpen()}}}</h3>\
If there is code that should only be executed when a popup is (not) open (e.g. for a macro), you can use this API to check. {{{Dialog.isOpen()}}} also let you check if a particular popup is open, by indicating its class.
{{{
    Dialog.isOpen([classNames])
}}}
> //Examples://
{{{
    if (Dialog.isOpen()) {
        /* code to execute if the dialog is open… */
    }

    if (Dialog.isOpen("saves")) {
        /* code to execute if the Saves dialog is open… */
    }
}}}
> ''Note:'' For code that should be triggered every time a popup is opened, it is recommended to use the [[Dialog Event|Events-Dialog]] instead.
\
<h3>Creating an Alert Popup</h3>\
While the [[Dialog API|Basic-API-Dialog]] has many elements and options to customise a popup, there is a quicker way to include an Alert Popup, with {{{UI.alert()}}}. With this one-line API, a popup titled //Alert// will appear on the screen, with an //OK// button to close it.
> ''Note'': this should not be confused with the JavaScript {{{alert()}}} which will create a browser popup.
{{{
    UI.alert(message [, options [, closeFn]])
}}}
\
The API has 3 parameters:
* {{{message}}}, which will be displayed to the player.
** this cannot include any SugarCube macro.
* {{{options}}} (optional) 
** namely {{{ {top: [value]} }}}, to affect the top margin of the popup.
* {{{closeFn}}} (option), the function to execute whenever the popup is closed
\
> //Example://
{{{
    UI.alert("You smell of elderberries!");

    UI.alert("You smell of elderberries!", { top : 500});
}}}
<<button "Alert High">><<run UI.alert("You smell of elderberries!");>><</button>> | <<button "Alert Low">><<run UI.alert("You smell of elderberries!", { top : 500});>><</button>>


:: API-Lock [page adv-api] {"position":"1200,1300","size":"100,100"}
<h1 id="adv-lockload">(Un)Locking the Loading Screen</h1>
While the Loading Screen will stay visible until all coded assets are imported, like the [[Audio|Macro-Audio]], or loading [[StyleSheets or Scrips|Function-JS]], you can force it to stay locked for a longer period of time. During that time, the player will not be able to interact with the game.
This can be useful when wanting to display multiple elements as a loading sequence, or to run more code at the start. It can also be used during the story.
\
<h3>{{{LoadScreen.lock()}}}</h3>\
You can lock the screen by simply adding {{{LoadScreen.lock();}}} inside the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros directly in a passage. The Loading Screen will then appear on the screen. 

Each use of the {{{LoadScreen.lock()}}} will return a ID (number). It is also preferable to save this id inside a (JavaScript) variable, for when you want to unlock the screen:
{{{
    var lockID = LoadScreen.lock();
}}}
\
<h3>{{{LoadScreen.unlock()}}}</h3>
To unlock the screen, and remove the Loading Screen, you will need to use {{{LoadScreen.unlock()}}} and indicate the lock ID:
{{{
    LoadScreen.unlock(lockId);

    LoadScreen.unlock(2);
}}}
> ''Note:'' the ID must be a number, or an integer variable, saving that number.
\
> //Examples://
{{{
    var lockID = LoadScreen.lock();

    setTimeout(function(){
        LoadScreen.unlock(lockID);
        /* Other functions that could affect the loading screen */
    }, 5000);
}}}
{{{
    var lockID = LoadScreen.lock();

    /* Do something whose timing is unpredictable 
    that should be hidden by the loading screen */

    LoadScreen.unlock(lockID);
}}}
\
<h3>Loading Screens and Config API</h3>\
If your goal is only to delay the dismissal of the loading screen (e.g. to avoid it flashing at the start if too quick), the APIs above are somewhat unnecessary. You can use the {{{Config.loadDelay}}} API instead.

{{{Config.loadDelay}}} will add a timer to the dismissal of the loading screen (indicated in milliseconds), which should normally happen once the game is ready to play. 
> //Example://
{{{
→ Adding 2s of delay:    
    Config.loadDelay = 2000;
}}}


:: API-UIBar [page adv-api] {"position":"1200,1200","size":"100,100"}
<h1 id="adv-sidebar">More SideBar APIs</h1>
\
<h3>{{{UI.update()}}}</h3>\
This API triggers the {{{:uiupdate}}} [[event|Events]] to update the Built-In SideBar, refreshing any element coded in [[Special Passages|SP-UIBar]] of the SideBar (e.g. {{{StoryBanner}}}, {{{StoryCaption}}}, etc...).
> ''Note:'' this API is automatically called when moving to a new passage.
{{{
    UI.update();
}}}
> ''Note:'' this should be used ''sparingly'', as the refresh does not target a single element. If you need to update the SideBar, it is recommended to target that specific element instead of the whole, or move the player to a new passage. 
\
<h3>{{{UIBar.isHidden()}}} and {{{UIBar.isStowed()}}}</h3>\
These API will check whether the SideBar is currently hidden or stowed respectively, using boolean values as results. These states are particularly useful when wanting to trigger code, whether in JavaScript or with SugarCube macros.
{{{
    if (UIBar.isHidden()) {
	    /* code to execute if the UI bar is hidden… */
    }

    if (!UIBar.isStowed()) {
	    /* code to execute if the UI bar is not stowed… */
    }

    <<if !UIBar.isHidden()>> ... <</if>>

    <<if UIBar.isStowed()>> ... <</if>>
}}}
> ''Note:'' these API will be useless if you removed the SideBar.


:: About [chapter side] {"position":"1500,300","size":"200,100"}
<h1 id="about-twine">About Twine and SugarCube</h1>
//''Twine''// is a free and open-source tool to create interactive, non-linear stories, created by Chris Klimas in 2009. It is now maintained by multiple individuals, in [[several repositories|https://github.com/tweecode]]. ''//Twine//'' is also a registered trademark of the [[Interactive Fiction Technology Foundation|https://iftechfoundation.org/]].

''//Twine//'' offers both a desktop and browser application on [[its website|https://twinery.org]], giving creator a visual representation of each passage in their game. The browser version can be opened on tablets and mobile devices.

Over the years, Twine has had [[multiple story formats|http://mcdemarco.net/tools/hyperfic/twine/catalog/]], among others SugarCube. Twine compiles the code of the chosen format to create a file in the format's choice (usually HTML) or Twee. The other base formats of Twine 2 are: Harlowe, Chapbook, and Snowman.

''//SugarCube//'' is a free (gratis and libre) coding format for Twine/Twee created and maintained by Thomas M. Edwards. It is based on JavaScript and jQuery, and can be styled with HTML and CSS.

Thomas M. Edwards is also the creator of //''Tweego''//, a free (gratis and libre) command line compiler for Twine/Twee story formats written in Go. It is an alternative to Twine, and can be used with any Integrated development environment (IDE), like VSCode.
This guide was compiled in Tweego.

If you want to support the parties named above, you can find here the links for:
* Chris Klimas (klembot) : [[Patreon|https://www.patreon.com/klembot]]
* Thomas M. Edwards (TME - The Mad Exile) : [[Patreon|https://www.patreon.com/thomasmedwards]] - [[Ko-Fi|https://ko-fi.com/thomasmedwards]]
* The Interactive Fiction Technology Foundation : [[Donations|https://iftechfoundation.org/give/]]
> ''Note:'' to support other parties creating assets and resources for Twine, check this [[list|https://manonamora-if.tumblr.com/post/700577877042888704/]] (non-exhaustive).


:: Accessibility [page int-jscss] {"position":"3300,1600","size":"100,100"}
<h1 id="intstyle-access">A Note on Interface Accessibility</h1>
While SugarCube was deliberately built with ARIA (Accessibility) support, any change in the Interface or inclusion of external elements will affect the accessibility of your project. Below are some elements to take into account when creating a project and editing the Built-In Interface.
\
<h3>Colour Compatibility and Contrast</h3>\
As fun as it is to create crazy interface with strange palettes, some colours are not compatible with one another, rendering things difficult to read on the screen because of the poor contrast. For example, <span id="bad-idea">this text has really poor readability</span>. When editing the page, you must be mindful of colour combination.

To help figure out what colour work best together, the WCAG has set [[standards|https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html]] in the minimum contrast for text readability. The minimum contrast of plain text should be of 4.5 between the text colour and the background. For even better contrast, a ration of 7.0 should be reached.
To check whether you achieved those ratio, you can use an [[online contrast checker|https://app.contrast-finder.org/?lang=en]] or use the Inspect Tool of your browser.
> ''Note:'' this [[checker|https://www.myndex.com/APCA/]] goes even further that the WCAG minimum, by including font size and weight into the mix (which are both important).
\
<h4>Colour Contrast and Image Background</h4>\
This contrast is even more important when the text is brought before an image background. Due to the often varied range of colours in images, it is sometimes difficult to find the correct text colour for a good contrast.
While avoiding busy background altogether is preferred, there are ways to keep your pie and eat it. One option is to add a blurry shadow behind the text with the {{{text-shadow}}} CSS rule. Another is adding a border around each letter, like an outline (again with {{{text-shadow}}} or with {{{-webkit-text-stroke}}}). 
An even easier option is to add a "screen" between the image and the text:
{{{
    #passages {
        background: #HexcodeWithSomeOpacity;
    }

→ if #passages already has a background 
  you can add a {:before} pseudo-element 
    #passages {
        position: relative;
    }
    #passages:before {
        content: "";
        position: absolute;
        z-index: -1;
        width: 100%;
        height: 100%;
        background: #HexcodeWithSomeOpacity;
    }
}}}
> ''Note:'' it is not recommended to add a background to {{{.passage}}} as it will refresh along with the content of the passage (flash).
\
<h4>Light and Dark Themes</h4>\
If your project will be played by others, you may want to consider adding multiple themes for comfort. Light mode (bright colours closer to white) tend to be superior for readability and providing less eye-strains in bright environment. On the other hand, dark mode (darker colours closer to black) make it easier to the eyes in darker environment, and reduces exposure to blue screen light. Individuals also have their personal preference between light and dark mode.
> ''Note:'' many SugarCube templates will include a Theme [[Setting|SettingsList]] within its code, with a light and dark mode.
\
<h3>Font Choices and Alternatives</h3>\
We all love Papyrus as a font, but it does not make for a legible font for plain text. When considering to use a different font for your project than the one included in the Base StyleSheet (which is {{{Helmet/Freesans/sans-serif}}}), legibility should be a priority. This is extra important for players with dyslexia and other visual impairment, as similarly shaped letters and characters and short ascenders and descenders combinations may increase confusion.

So decorative and overly stylized fonts, such as cursive fonts, which can be difficult to read even for non-impaired users, should be avoided (or an alternative should be provided). Serif fonts, like Times New Roman or Calibri, are preferred for printed items (i.e. books), but doesn't display as nicely on screens as sans-serif fonts do (though those two are still very legible).

Fonts like {{{Arial}}} (sans-serif), {{{Calibri}}} (serif), {{{Georgia}}} (serif), {{{Helvetica}}} (sans-serif), {{{Lucida Sans}}}/{{{Lucida Grande}}} (sans-serif), {{{Tahoma}}} (sans-serif), {{{Times New Roman}}} (serif), and {{{Verdana}}} (sans-serif) are often among lists of recommended fonts. Monospace fonts tend to help with legibility of letters as well.
There are also fonts created specifically for dyslexic and visually impaired users, though many are under copyright or are not free for use. [[OpenDyslexic|https://opendyslexic.org/]] and [[Atkinson Hyperlegible|https://brailleinstitute.org/freefont]] are two freely available sans-serif fonts.

For Twine projects, you may want to consider adding multiple serif and sans-serif fonts, letting the player decided which one they would prefer to use, through a [[Setting|SettingsList]].
> ''Note:'' along with font families, you may want to add different font sizes for player to choose from as well!
\
<h3>Animated Content</h3>\
While animations can help elevate a project, some may also hinder it. Ill-timed animations can become a distraction, too many animations at once could bring confusion on where the eye should focus, poorly designed animations may work fine on computers but may not translate on mobile devices, and certain types of animations (e.g. rapid flashing) could present accessibility issues to users (e.g. epilepsy, visual impairments, etc...).

When including animation, even as simple as the {{{<<type>>}}} macro, you may want to code a [[Toggle Setting|SettingsToggle]] to hide the animated elements. This can be done either in the StyleSheet through a class, or directly in the passage with a conditional statement.
\
<h3>Images and Alternative Text</h3>\
When including assets like images into your project, you must remember that they may not be accessible to users with impairments.

Alternative texts, thanks to the {{{alt}}} attribute, may alleviate this issue for screen readers:
{{{
    <img src="URL" alt="this is the image">
}}}
> ''Note:'' a recommended Alternative text length should be about 125 characters. 
> Extensive and verbose descriptions should be included in the page itself.
For inconsequential elements, such as a fancy paragraph break as an image, you can use an empty {{{alt}}} attribute to "hide" the image from screen readers:
{{{     <img src="URL" alt="">}}} 
> ''Note:'' if not indicated, the screen reader will say //Image//.
\
<h3>Some Links about Accessibility and Guidelines</h3>\
* [[ARIA - Accessibility - MDN|https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA]]
* [[HTML: A good basis for accessibility - MDN|https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML]]
* [[HTML5 Accessibility - Support Status (2022)|https://stevefaulkner.github.io/HTML5accessibility/]]
* [[Web Accessibility Initiative Guidelines 2.2 - WCAG|https://www.w3.org/TR/WCAG22/]]
* [[Game Accessibility Guidelines|https://gameaccessibilityguidelines.com/]]
* [[Can I Use ?|https://caniuse.com/]] (features accepted by which browser)
* [[APCA Contrast Simulator|https://www.myndex.com/APCA/]]


:: Accessibility-Cycle [page basic-interact] {"position":"1500,700","size":"100,100"}
<h1 id="basics-cycleacc">Make the Cycle Macro Accessible</h1>
While the {{{cycle}}} [[macro|Macro-Cycle]] can be a fun way to include interactivity in a project, it comes with the caveat that it is not particularly accessible. For one, it looks exactly like a regular {{{<<link>>}}}, both visually and for screen reader.

The latter issue (i.e. screen readers) can be remedied with the following code, created by [[HiEv|https://www.reddit.com/r/twinegames/comments/qo1p1j/cycling_links_and_accessibility/]], which needs to go in your JavaScript.
{{{
    $(document).on(":passagerender", function (event) {
        var clinks = $(event.content).find(".macro-cycle");
        if (clinks.length) {
            clinks.attr("aria-label", function (event) {
                return "(click to change) " + $(this).text();
            });
            clinks.on("click", function (evnt) {
                //Fix SugarCube bug with <<cycle>>+Config.cleanupWikifierOutput
                    $(this).find("p").contents().unwrap();  
                //End Fix bug 
                $(this).attr("aria-label", "(click to change) " + $(this).text());
            });
        }
    });
}}}
> ''Note:'' if you are not using the {{{Config.cleanupWikifierOutput}}} [[API|Basic-API-Config]] in your project, the Fix Bug code line can be removed.

As for the visual aspect, this will happen in the StyleSheet, by targetting the {{{.macro-cycle}}} element. There are multiple ways to help player distinguish between a regular link and the {{{<<cycle>>}}} macro:
* change the formatting of the link itself (through colours or font)
* add an indicator before/after the link 
{{{
 → changing the link
    .macro-cycle {
        color: yellow;
        font-size: 125%;
        font-family: 'Comic Sans';
    }

 → adding an indicator
    .macro-cycle::before {
        content: "↪";
        color: green;
    }

    .macro-cycle::after {
        content: "↴";
        color: blue;
    }
}}}
Example of the last option:
<span class="accs">\
    <<cycle "_example" autoselect>>
        <<option "seemed fine" false>>
        <<option "was distraught">>
        <<option "was in tears" 0>>
        <<option "smiled" "bad">>
    <</cycle>>\
</span>\


:: Audio-Macro [page audio-macro] {"position":"2900,1300","size":"100,100"}
<h1 id="audio-macro">Playing Tracks in a Passage</h1>
After setting tracks in {{{StoryInit}}}, you can add those tracks to a passage with the {{{<<audio>>}}} macro. You also use this macro to target track groups, as well as controlling the playback (ex: pause, volume change...).

The macro can be coded as is in a passage, or can be nested inside other macros, like a {{{<<link>>}}} or with a delay in {{{<<timed>>}}}.

When started, a track will play until it ends or another action is set with the {{{<<audio>>}}} macro.

The macro has 2 main arguments:
* the ID of the track or the group
* the list of action to perform (can be combined)
{{{
        <<audio "ID" action>>
}}}
\
<h3>Action List</h3>\
There are 14 actions that can be included in the {{{<<audio>>}}} macro to control how a track or group of tracks is played:
<<nobr>>
<table id="audio">
    <tr>
        <th>Argument</th><th>Explanation</th><th>Example</th>
    </tr>
    <tr>
        <td>{{{play}}}</td><td>(Re)Start to play the track(s)</td><td>{{{<<audio "track" play>>}}}</td>
    </tr>
    <tr>
        <td>{{{pause}}}</td><td>Pause the track(s)</td><td>{{{<<audio "track" pause>>}}}</td>
    </tr>
    <tr>
        <td>{{{stop}}}</td><td>Stop the track(s)</td><td>{{{<<audio "track" stop>>}}}</td>
    </tr>
    <tr>
        <td>{{{mute}}}</td><td>Reduce the volume to 0, without pausing the track</td><td>{{{<<audio "track" mute>>}}}</td>
    </tr>
    <tr>
        <td>{{{volume}}}</td><td>Change the volume of the track(s)</td><td>{{{<<audio "track" volume 0.5>>}}}</td>
    </tr>
    <tr>
        <td>{{{loop}}}</td><td>Set the track(s) to repeat when reaching the end</td><td>{{{<<audio "track" loop>>}}}</td>
    </tr>
    <tr>
        <td>{{{unloop}}}</td><td>Remove the looping (default)</td><td>{{{<<audio "track" unloop>>}}}</td>
    </tr>
    <tr>
        <td>{{{fadein}}}</td><td>Start/Continue to play the track(s), fading in from their current volume to max over 5 seconds</td><td>{{{<<audio "track" fadein>>}}}</td>
    </tr>
    <tr>
        <td>{{{fadeout}}}</td><td>Start/Continues to play the track(s), fading out from their current volume to 0 over 5 seconds</td><td>{{{<<audio "track" fadeout>>}}}</td>
    </tr>
    <tr>
        <td>{{{fadeoverto}}}</td><td>Start/Continue to play the track(s), fading it over a set amount of seconds to a certain volume level </td><td>{{{<<audio "track" 5 0.5>>}}}</td>
    </tr>
    <tr>
        <td>{{{fadeto}}}</td><td>Start/Continue to play the track(s), fading to a certain volume level over 5 seconds</td><td>{{{<<audio "track" fadeto 0.9>>}}}</td>
    </tr>
    <tr>
        <td>{{{goto}}}</td><td>Send the player to a certain passage at the end of the track(s)</td><td>{{{<<audio "track" goto "Home">>}}}</td>
    </tr>
    <tr>
        <td>{{{time}}}</td><td>Move the play of the track to a certain amount of seconds from 0 (start) to the max of the file.</td><td>{{{<<audio "track" time 60>>}}}</td>
    </tr>
</table>
<</nobr>>
Assuming that the track {{{space}}}, inside the group {{{:space}}}, has been cached, here are some extra examples:
{{{
    <<audio ":space" play>>
→ Will start to play the group of tracks called :space, all at the same time.

    <<audio "space" volume 0.65 play>>
→ Will start playing the track {space} at 65% volume

    <<audio "space" time 92 play>>
→ Will start playing the track {space} from the 92th second

    <<audio "space" loop play>>
→ Will start playing the track {space} on repeat

    <<audio "space" volume 10 fadein>>
→ Will start playing the track {space}, fading in from 10% to max volume

    <<audio "space" volume 0.15 fadeto 0.78>>
→ Will start playing the track {space}, fading from 15% to 78% volume 

    <<audio "space" volume 0.04 fadeoverto 27 0.96>>
→ Will start playing the track {space}, fading from 4% to 96% volume over 27 seconds 

    <<audio "space" play goto "Home">>
→ Will start playing the track {space}, and send the player to the passage "Home" when the track ends.
}}}
\
<h3>Group IDs</h3>\
Aside from targeting groups, the {{{<<audio>>}}} macro can also target the state of tracks.
{{{
    <<audio ":paused" play>>
→ Will start playing all tracks previously paused

    <<audio ":playing" pause>>
→ Will pause all tracks currently playing

    <<audio ":playing" stop>>
→ Will stop all tracks currently playing

    <<audio ":all" stop>>
→ Will stop all tracks (playing and paused)

    <<audio ":playing:not(:space)" stop>>
→ Will stop all tracks currently playing, except the ones in the ":space" group

    <<audio ":all:not(:space)" volume 0.40>>
→ Will change the volume of all tracks not in the ":space" group to 40%
}}}
\
<h3>The {{{<<playlist>>}}} macro</h3>\
This macro will work similarly to the {{{<<audio>>}}} macro, aside from targeting playlists set in {{{StoryInit}}} instead of groups or single tracks.  

The macro has 2 main arguments:
* the ID of the playlist 
* the list of action to perform (can be combined)
{{{
    <<playlist "ID" action>>
}}}
On top of the actions mentioned above for {{{<<audio>>}}}, this macro has three extra: 
* {{{shuffle}}}, shuffling the order of the tracks
* {{{unshuffle}}}, reorganising the order of the tracks to its original form
* {{{skip}}}, skipping the next track in the playlist 
{{{
    <<playlist "playlist" shuffle>>
    <<playlist "playlist" unshuffle>>
    <<playlist "playlist" skip>>
}}}
>'' Note:'' The action {{{goto}}} will not work with {{{<<playlist>>}}}


:: Audio-Other [page audio-macro] {"position":"3000,1300","size":"100,100"}
<h1 id="audio-othermacro">Other Audio Macros</h1>
There are three extra macros that can affect the played audio.
\
<h3>{{{<<masteraudio>>}}}</h3>\
This macro will control the master volume of the game (overall volume), as well as affect all registered tracks, regardless of their state.

This macro only has one argument, the action:
* {{{mute}}} and {{{unmute}}}, muting or unmuting the master volume of the game.
* {{{muteonhide}}} and {{{nomuteonhide}}}, which will either mute or unmute (default) the master volume when the player moves to another tab or minimize the browser.
* {{{stop}}}, which will stop all registered tracks.
* {{{volume}}}, which will change the master volume to a specified level
{{{
    <<masteraudio action>>
}}}
>'' Note:'' the master audio volume can be changed at will by the player with a [[Slider Setting|SettingsRange]].
\
<h3>{{{<<removeaudiogroup>>}}}</h3>\
This macro will delete a track group, which was previously set with {{{<<createaudiogroup>>}}}, by targeting the ID of the group. As with the latter macro, it will not accept the following IDs: {{{:all}}}, {{{:looped}}}, {{{:muted}}}, {{{:not}}}, {{{:paused}}}, {{{:playing}}}.
{{{
    <<removeaudiogroup ":space">>
}}}
\
<h3>{{{<<removeplaylist>>}}}</h3>\
This macro will delete a playlist, which was previously set with {{{<<createplaylist>>}}}, by targeting the ID of the playlist.
{{{
    <<removeplaylist "playlist">>
}}}


:: AudioAPI [chapter menu] {"position":"3800,1800","size":"200,100"}
<h1>Going Further with Audio with APIs</h1>
The Audio API is the largest group of APIs included in SugarCube, enabling you to have more control over sound in your project. It is the subsystem and backend for the [[audio macros|Macro-Audio]].
> ''Note:'' Aside from the SimpleAudio API, this chapter is for //very// advanced users. It is unlikely they will be of use for 99% of projects, as the audio macros will already cover most use.

Because the SugarCube Audio system is based on the HTML Media Elements APIs, it comes with limitations:
* no true gap-less transitions between tracks
* on mobile, playback volume is controlled ONLY by the device hardware (except for muting)
* playback at the start of the game must be initiated by player through a click/touch (it won't work otherwise)

* [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
* [[Going further with AudioTrack|AudioApi-Track]]
* [[Going further with AudioRunner|AudioApi-Runner]]
* [[Going further with AudioList|AudioApi-List]]


:: AudioAPI-General [page audio-api] {"position":"3800,1900","size":"100,100"}
<h1 id="audioapis-base">The SimpleAudio API, the alternative to Audio macros</h1>
The SimpleAudio APIs is the base APIs behind the [[audio macros|Macro-Audio]], but will let you go further when manipulating the general audio controls, tracks, groups of tracks and playlists. Those APIs are most useful for the master volume control, as well as checking whether certain tracks/groups/playlists are playing.
\
<h3>General SimpleAudio APIs</h3>\
<h4>{{{SimpleAudio.load()}}} and {{{SimpleAudio.loadWithScreen()}}}</h4>\
These APIs are used to load tracks up to playable state, anytime it is called, with the latter adding a loading screen untill all tracks are loaded (or aborts due to errors).
> ''Note:'' these APIs should not be abused, as it forces players to download the tracks if they are sourced on the network.
{{{
    SimpleAudio.load();
    SimpleAudio.loadWithScreen();
}}}
\
<h4>{{{SimpleAudio.unload()}}}</h4>\
This API will both stop the playback of registered tracks and drop their information.
> ''Note:'' unloaded tracks won't be playable until they are loaded again.
{{{
    SimpleAudio.unload();
}}}
\
<h4>{{{SimpleAudio.select()}}}</h4>\
This API will allow you to select tracks and/or groups of tracks, which you can then manipulate with track functions.
{{{
    SimpleAudio.select(selector)
}}}
This API has 1 parameter:
* {{{selector}}}: the list of audio track(s) and/or group ID(s), separated by spaces
** this includes pre-defined group IDs like {{{:all}}}, {{{:looped}}}, {{{:muted}}}, {{{:paused}}}, {{{:playing}}} and {{{:stopped}}}
** you can also unselect tracks/groups from a larger selection with {{{:not()}}}
\
> //Examples://
{{{
    SimpleAudio.select(":paused").play();
    SimpleAudio.select(":playing").stop();
    SimpleAudio.select(":playing:not(:ui)").stop();
}}}
\
<h4>{{{SimpleAudio.mute()}}} and {{{SimpleAudio.muteOnHidden()}}}</h4>\
The general logic of the APIs is to (un)mute the master volume for the game, with {{{SimpleAudio.muteOnHidden()}}} going further as it will mute/unmute depending on the visibility of the page (i.e. //is the browser page in focus?//). You can also use those API as a variable to check whether the master volume is muted or not.
{{{
    SimpleAudio.mute([state])
    SimpleAudio.muteOnHidden([state])
}}}
It has 1 parameter: 
* {{{state}}} (optional, boolean), whether the game is/should be muted or not 
\
> ''Note:''  
{{{
 → as a variable:
    var isMuted = SimpleAudio.mute();
    var isMuteOnHidden = SimpleAudio.muteOnHidden();

 → Mute (master volume)
    SimpleAudio.mute(true);
    SimpleAudio.muteOnHidden(true);

 → Unmute (master volume)
    SimpleAudio.mute(false);
    SimpleAudio.muteOnHidden(false);
}}}
\
<h4>{{{SimpleAudio.volume()}}}</h4>\
This API can be used to both get the current master volume level and change it.
{{{
    SimpleAudio.volume([level])
}}}
It has 1 parameter:
* {{{level}}}: (optional, integer) the volume level to set, between 0 (silent) and 1 (loudest)
\
> //Examples://
{{{
    var currentMasterVolume = SimpleAudio.volume();

    SimpleAudio.volume(0.75);
}}}
\
<h4>{{{SimpleAudio.stop()}}}</h4>\
This API will stop the playback of all registered tracks.
{{{
    SimpleAudio.stop();
}}}
\
<h3>Tracks SimpleAudio APIs</h3>\
<h4>{{{SimpleAudio.tracks.add()}}}</h4>\
This API will add an audio track and assign it to a given ID. It is similar to {{{<<cacheaudio>>}}}.
{{{
    SimpleAudio.tracks.add(trackId, sources…)
}}}
This API has 2 parameters:
* {{{trackId}}} (string): the ID of the track, to be referenced in other code.
* {{{sources}}} (string/arrays): the source(s) of the track
** only one is required, but you can supply additional formats (none is supported by all browsers)
** the string must be the file's URL, an [[audio passage|Tags-Asset]] or a data URI
** you can also format it as {{{format|URL}}}, if the file's extension cannot be detected
> //Examples://
{{{
    SimpleAudio.tracks.add("boom", "asset/file.mp3");
    SimpleAudio.tracks.add("boom", "AudioPassageName");
    SimpleAudio.tracks.add("bgm_space", "asset/file.mp3", "asset/file.ogg");
    SimpleAudio.tracks.add("what", "mp3|http://an-audio-service.com/a-user/a-track-id");
}}}
\
<h4>{{{SimpleAudio.tracks.clear()}}}</h4>\
This API will delete all audio tracks.
{{{
    SimpleAudio.tracks.clear()
}}}
> ''Note:'' it won't delete tracks solely under the control of a playlist.
\
<h4>{{{SimpleAudio.tracks.delete()}}}</h4>\
This API will delete audio tracks given the track ID.
> ''Note:'' it won't delete tracks solely under the control of a playlist.
{{{
    SimpleAudio.tracks.delete(trackId)
}}}
This API has 1 parameter:
* {{{trackId}}}: (string) the ID of the track 
> //Example://
{{{
    SimpleAudio.tracks.delete("bgm_space");
}}}
> ''Note:'' any playlist or group containing the track will need to be rebuilt.
\
<h4>{{{SimpleAudio.tracks.get()}}}</h4>\
This API will return the AudioTrack instance of the given track ID. You can also use this API to manipulate singular tracks.
{{{
    SimpleAudio.tracks.get(trackId)
}}}
This API has 1 parameter:
* {{{trackId}}}: (string) the ID of the track 
> //Examples://
{{{
    SimpleAudio.tracks.get("bgm_space");
    SimpleAudio.tracks.get("swamped").volume(1).play();
}}}
<h4>{{{SimpleAudio.tracks.has()}}}</h4>\
This API will check if an audio track exists within the game given a track ID.
{{{
    SimpleAudio.tracks.has(trackId)
}}}
This API has 1 parameter:
* {{{trackId}}}: (string) the ID of the track 
> //Examples://
{{{
    <<if SimpleAudio.tracks.has("bgm_space")>>
        /* Do things */
    <</if>>
}}}
\
<h3>Groups SimpleAudio APIs</h3>\
<h4>{{{SimpleAudio.groups.add()}}}</h4>\
This API lets you create an audio group of track, which can be useful to manipulate multiple tracks at once, or to exclude from a larger set when applying actions.
{{{
    SimpleAudio.groups.add(groupId, trackIds…)
}}}
This API has 2 parameter:
* {{{groupId}}}: (string) the ID of the group, starting with a colon {{{ : }}}
** the name cannot be any of the following {{{:all}}}, {{{:looped}}}, {{{:muted}}}, {{{:not}}}, {{{:paused}}}, {{{:playing}}}, {{{:stopped}}}
* {{{trackId}}}: (string/Array) the track(s) ID to include in the group
> //Example://
{{{
    SimpleAudio.groups.add(":ui", "ui_beep", "ui_boop", "ui_swish");
}}}
\
<h4>{{{SimpleAudio.groups.clear()}}}</h4>\
This API will delete all audio groups.
{{{
    SimpleAudio.groups.clear()
}}}
> ''Note:'' this won't affect the tracks.
\
<h4>{{{SimpleAudio.groups.delete()}}}</h4>\
This API will delete the indicated audio group.
> ''Note:'' this won't affect the tracks.
{{{
    SimpleAudio.groups.delete(groupId)
}}}
This API has 1 parameter:
* {{{groupId}}}: (string) the ID of the group
> //Example://
{{{
    SimpleAudio.groups.delete(":ui");
}}}
\
<h4>{{{SimpleAudio.groups.get()}}}</h4>\
This API will return the array of audio tracks given a group ID. You can also use this API to manipulate multiple tracks (of a single group).
> ''Note:'' to select multiple tracks and/or groups, you will need {{{SimpleAudio.select()}}}.
{{{
    SimpleAudio.groups.get(groupsId)
}}}
This API has 1 parameter:
* {{{groupsId}}}: (string) the ID of the group. 
> //Examples://
{{{
    SimpleAudio.groups.get(":ui");
    SimpleAudio.groups.get(":ui").volume(1).play();
}}}
<h4>{{{SimpleAudio.groups.has()}}}</h4>\
This API will check if an audio group exists within the game given a group ID.
{{{
    SimpleAudio.groups.has(groupsId)
}}}
This API has 1 parameter:
* {{{groupsId}}}: (string) the ID of the group 
> //Examples://
{{{
    <<if SimpleAudio.groups.has(":ui")>>
        /* Do things */
    <</if>>
}}}
\
<h3>Lists SimpleAudio APIs</h3>\
<h4>{{{SimpleAudio.lists.add()}}}</h4>\
This API lets you create a playlist of tracks, which can be useful to play tracks in a specific sequence.
{{{
    SimpleAudio.lists.add(listId, sources…)
}}}
This API has 2 parameter:
* {{{listId}}}: (string) the ID of the playlist
* {{{sources}}}: (string/object/array) the track IDs or descriptors to include in the playlist
> //Example://
{{{
    SimpleAudio.lists.add("bgm_lacuna", "swamped", "heavens_a_lie", "closer", "to_the_edge");
}}}
If you are using descriptors (objects), the code will be formatted differently depending on the track:
* Existing track: {{{ { id, [own], [volume] } }}}
** {{{id}}}: (string) the ID of the track 
** {{{own}}}: (optional, boolean) whether an independent copy of the track should be created 
*** any manipulation of the original track will not affect the copy in the playlist (and vice-versa)
** {{{volume}}}: (optional, integer) the volume level to set, between 0 (silent) and 1 (loudest)
* New track: {{{ {sources, [volume]} }}}
** {{{sources}}}: (Array) the audio source(s) of the track
*** only one source is required, but multiple formats of the track is recommended
** {{{volume}}}: (optional, integer) the volume level to set, between 0 (silent) and 1 (loudest)
*** if omitted, default is 1
> //Example://
{{{
    SimpleAudio.lists.add("bgm_lacuna",
        {
            id     : "to_the_edge",
            own    : true,
            volume : 1
        }
        {
            sources : ["media/audio/Swamped.mp3", "media/audio/Swamped.ogg"],
            volume  : 0.6 
        }
    );

}}}
\
<h4>{{{SimpleAudio.lists.clear()}}}</h4>\
This API will delete all playlists.
{{{
    SimpleAudio.lists.clear()
}}}
\
<h4>{{{SimpleAudio.lists.delete()}}}</h4>\
This API will delete the indicated playlist.
{{{
    SimpleAudio.lists.delete(listsId)
}}}
This API has 1 parameter:
* {{{listsId}}}: (string) the ID of the playlist
> //Example://
{{{
    SimpleAudio.lists.delete("bgm_lacuna");
}}}
\
<h4>{{{SimpleAudio.lists.get()}}}</h4>\
This API will return the array of audio tracks given a playlist ID. You can also use this API to manipulate the playlist.
> ''Note:'' to select multiple playlists, you will need {{{SimpleAudio.select()}}}.
{{{
    SimpleAudio.lists.get(listsId)
}}}
This API has 1 parameter:
* {{{listsId}}}: (string) the ID of the playlist. 
> //Examples://
{{{
    SimpleAudio.lists.get("bgm_lacuna");
    SimpleAudio.lists.get("bgm_lacuna").volume(1).loop(true).play();
}}}
<h4>{{{SimpleAudio.lists.has()}}}</h4>\
This API will check if a playlist exists within the game given a group ID.
{{{
    SimpleAudio.lists.has(listsId)
}}}
This API has 1 parameter:
* {{{listsId}}}: (string) the ID of the playlist 
> //Examples://
{{{
    <<if SimpleAudio.lists.has("bgm_lacuna")>>
        /* Do things */
    <</if>>
}}}


:: AudioApi-List [page audio-api] {"position":"3800,2000","size":"100,100"}
<h1 id="audioapis-list">Going further with AudioList</h1>
If the SimpleAudio APIs are too general for use, you can use the following APIs to manipulate or get information on playlists.
\
<h3>(Un)Loading and Track Data</h3>\
<h4>{{{<AudioList>.load()}}} and {{{<AudioList>.unload()}}}</h4>\
These APIs will respectively load and unload the tracks included in the playlist.
> ''Note:'' these APIs should not be abused, as it forces players to download the tracks if they are sourced on the network, and unloaded tracks won't be playable until they are loaded again.
{{{
    <AudioList>.load()
        aList.load();

    <AudioList>.unload()
        aList.unload();
}}}
\
<h4>{{{<AudioList>.duration()}}}, {{{<AudioList>.remaining()}}}</h4>\
These APIs will provide different information about the track, namely the total playtime of the playlist ({{{<AudioList>.duration()}}}, in seconds), the remaining playtime ({{{<AudioList>.remaining()}}}, in seconds)
> //Examples://
{{{
    var listLength = aList.duration();
    var listRemains = aList.remaining();
}}}
\
<h3>Check the State of the Track</h3>\
The following APIs will check if the selected playlist has a specific state:
* {{{<AudioList>.isPlaying()}}} checks if the playlist is playing
* {{{<AudioList>.isPaused()}}} checks if the playback of the playlist is paused
* {{{<AudioList>.isStopped()}}} checks if the playback of the playlist has been stopped
* {{{<AudioList>.isEnded()}}} checks if the playback of the playlist ended 
* {{{<AudioList>.isFading()}}} checks if there is a fade in-progress on the playlist
\
<h3>Track Actions and Playback Manipulation</h3>
The following APIs will affect the playback of the selected playlist.
\
<h4>{{{<AudioList>.fade()}}}</h4>\
This API will start the playback of the playlist fade between the specified volumes during the specified fading duration.
> ''Note:'' the {{{Config.audio.pauseOnFadeToZero}}} [[setting|Confic-Macro]] will automatically pause a track faded to 0.
{{{
    <AudioList>.fade(duration , toVol [, fromVol])
}}}
This API has 3 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{toVol}}}: (integer) the destination volume level
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   aList.fade(6, 1, 0); 
}}}
<h4>{{{<AudioList>.fadeIn()}}}</h4>\
This API will start the playback of the playlist fade from the specified volume to 1 (loudest) during the specified fading duration.
{{{
    <AudioList>.fadeIn(duration [, fromVol])
}}}
This API has 2 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   aList.fadeIn(6, 0); 
}}}
<h4>{{{<AudioList>.fadeOut()}}}</h4>\
This API will start the playback of the playlist fade from the specified volume to 0 (silent) during the specified fading duration.
> ''Note:'' the {{{Config.audio.pauseOnFadeToZero}}} [[setting|Confic-Macro]] will automatically pause a track faded to 0.
{{{
    <AudioList>.fadeOut(duration [, fromVol])
}}}
This API has 2 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   aList.fadeOut(6, 1); 
}}}
<h4>{{{<AudioList>.fadeStop()}}}</h4>\
This API will stop any in-progress fade of the selected playlist.
{{{
    aList.fadeStop();
}}}
<h4>{{{<AudioList>.time()}}}</h4>\
This API lets you both get the playlist's current time in seconds.
{{{
    var listTime = aList.time();
}}}
<h4>{{{<AudioList>.loop()}}}</h4>\
This API lets you loop a playlist, as well as check if the track is looping.
{{{
    <AudioList>.loop([state])
}}}
This API has 1 parameter:
* {{{state}}}: (optional, boolean) the loop state 
> //Examples://
{{{
    var isLooped = aList.loop();

    aList.loop(true);
    aList.loop(false);
}}}
<h4>{{{<AudioList>.volume()}}} and {{{<AudioList>.mute()}}}</h4>\
These API will let you control the volume of the selected playlist, either changing the volume or muting it altogether. They can also check the current state of the playlist.
{{{
    <AudioList>.volume([level])
    <AudioList>.mute([state])
}}}
The {{{.volume()}}} API has 1 parameter:
* {{{level}}}: (optional, integer) the volume level to set, between 0 (silent) and 1 (loudest)
> //Examples://
{{{
    var trackVolume = aList.volume();
    
    aList.volume(0.75);
}}}
The {{{.mute()}}} API has 1 parameter:
* {{{state}}}: (optional, boolean) the mute state
> //Examples://
{{{
    var isMuted = aList.mute();

    aList.mute(true);
    aList.mute(false);
}}}
\
<h4>{{{<AudioList>.play()}}}, {{{<AudioList>.pause()}}} and {{{<AudioList>.stop()}}}</h4>\
These APIs will let you control the playback of a playlist, either by playing or stopping it. Playing a playlist after pausing will continue where it left off, while after stopping will restart it.
> ''Note:'' {{{.playWhenAllowed()}}} will only play the playlist as soon as it is able (player interact with the document).
{{{
    <AudioList>.play()
        <AudioList>.playWhenAllowed()
    <AudioList>.pause()
    <AudioList>.stop()
}}}
\
> //Examples://
{{{
    aList.play();
        aList.playWhenAllowed();
    aList.pause();
    aList.stop(); 
}}}
You can also add a failure catch:
{{{
    aList.play()
	.then(function () {
		console.log('The playlist is playing.');
	})
	.catch(function (problem) {
		console.warn('There was a problem with playback: ' + problem);
	});
}}}
\
<h4>{{{<AudioList>.shuffle()}}}</h4>\
This API will shuffle the track order in the playlist (or return it to its original order), as well as check whether it is shuffled.
{{{
    <AudioList>.shuffle([state])
}}}
This API has 1 parameter:
* {{{state}}}: (optional, boolean) the shuffle state
> //Examples://
{{{
    var isShuffled = aList.shuffle();

    aList.shuffle(true);
    aList.shuffle(false);
}}}
\
<h4>{{{<AudioList>.skip()}}}</h4>\
This API will skip to the next track of the playlist, if available.
{{{
    someTrack.skip();
}}}


:: AudioApi-Runner [page audio-api] {"position":"3900,2000","size":"100,100"}
<h1 id="audioapis-runner">Going further with AudioRunner</h1>
If the SimpleAudio APIs are too general for use, you can use the following APIs to manipulate or get information on multiple tracks.

<h3>(Un)Loading and Track Data</h3>\
<h4>{{{<AudioRunner>.load()}}} and {{{<AudioRunner>.unload()}}}</h4>\
These APIs will respectively load and unload the selected tracks.
> ''Note:'' these APIs should not be abused, as it forces players to download the tracks if they are sourced on the network, and unloaded tracks won't be playable until they are loaded again.
{{{
    <AudioRunner>.load()
        someTracks.load();

    <AudioRunner>.unload()
        someTracks.unload();
}}}
\
<h3>Track Actions and Playback Manipulation</h3>
The following APIs will affect the playback of the selected tracks.
\
<h4>{{{<AudioRunner>.fade()}}}</h4>\
This API will start the playback of the tracks fade between the specified volumes during the specified fading duration.
> ''Note:'' the {{{Config.audio.pauseOnFadeToZero}}} [[setting|Confic-Macro]] will automatically pause tracks faded to 0.
{{{
    <AudioRunner>.fade(duration , toVol [, fromVol])
}}}
This API has 3 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{toVol}}}: (integer) the destination volume level
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the tracks's current volume level 
> //Example://
{{{
   someTracks.fade(6, 1, 0); 
}}}
<h4>{{{<AudioRunner>.fadeIn()}}}</h4>\
This API will start the playback of the tracks fade from the specified volume to 1 (loudest) during the specified fading duration.
{{{
    <AudioRunner>.fadeIn(duration [, fromVol])
}}}
This API has 2 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   someTracks.fadeIn(6, 0); 
}}}
<h4>{{{<AudioRunner>.fadeOut()}}}</h4>\
This API will start the playback of the tracks fade from the specified volume to 0 (silent) during the specified fading duration.
> ''Note:'' the {{{Config.audio.pauseOnFadeToZero}}} [[setting|Confic-Macro]] will automatically pause tracks faded to 0.
{{{
    <AudioRunner>.fadeOut(duration [, fromVol])
}}}
This API has 2 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   someTracks.fadeOut(6, 1); 
}}}
<h4>{{{<AudioRunner>.fadeStop()}}}</h4>\
This API will stop any in-progress fade of the selected tracks.
{{{
    someTracks.fadeStop();
}}}
<h4>{{{<AudioRunner>.time()}}}</h4>\
This API lets you set tracks' current time in seconds.
{{{
    <AudioRunner>.time(seconds)
}}}
This API has 1 parameter:
* {{{seconds}}}: (integer) the time to set, in seconds
> //Examples://
{{{
    someTracks.time(30);
}}}
<h4>{{{<AudioRunner>.loop()}}}</h4>\
This API lets you loop the selected tracks.
{{{
    <AudioRunner>.loop(state)
}}}
This API has 1 parameter:
* {{{state}}}: (boolean) the loop state 
> //Examples://
{{{
    someTracks.loop(true);
    someTracks.loop(false);
}}}
\
<h4>{{{<AudioRunner>.volume()}}} and {{{<AudioRunner>.mute()}}}</h4>\
These API will let you control the volume of the selected tracks, either changing the volume or muting it altogether.
{{{
    <AudioRunner>.volume(level)
    <AudioRunner>.mute(state)
}}}
The {{{.volume()}}} API has 1 parameter:
* {{{level}}}: (integer) the volume level to set, between 0 (silent) and 1 (loudest)
> //Examples://
{{{   
    someTracks.volume(0.75);
}}}
The {{{.mute()}}} API has 1 parameter:
* {{{state}}}: (boolean) the mute state
> //Examples://
{{{
    someTracks.mute(true);
    someTracks.mute(false);
}}}
<h4>{{{<AudioRunner>.play()}}}, {{{<AudioRunner>.pause()}}} and {{{<AudioRunner>.stop()}}}</h4>\
These APIs will let you control the playback of selected tracks, either by playing or stopping then. Playing a track after pausing will continue where it left off, while after stopping will restart it.
> ''Note:'' {{{.playWhenAllowed()}}} will only play the tracks as soon as it is able (player interact with the document).
{{{
    <AudioRunner>.play()
        <AudioRunner>.playWhenAllowed()
    <AudioRunner>.pause()
    <AudioRunner>.stop()
}}}
\
> //Examples://
{{{
    someTracks.play();
        someTracks.playWhenAllowed();
    someTracks.pause();
    someTracks.stop(); 
}}}
\
<h3>Event Handlers on tracks</h3>\
These APIs lets you assign event handlers to specific tracks, essentially as shorthands of their respective jQuery methods.
> //Examples://
{{{
 → Add a handler:
    someTracks.on('ended.myEvents', function () {
        /* do something */
    });

 → Add a single-use handler:
    someTracks.one('ended.myEvents', function () {
	    /* do something */
    });

 → Remove a handler:
    someTracks.off('ended.myEvents');
}}}
> ''Note:'' because the SimpleAudio APIs use events internally, it is recommended to specify custom user namespace, to avoid conflicts.


:: AudioApi-Track [page audio-api] {"position":"3900,1900","size":"100,100"}
<h1 id="audioapis-track">Going further with AudioTrack</h1>
If the SimpleAudio APIs are too general for use, you can use the following APIs to manipulate or get information on single tracks.

<h3>(Un)Loading and Track Data</h3>\
<h4>{{{<AudioTrack>.load()}}} and {{{<AudioTrack>.unload()}}}</h4>\
These APIs will respectively load and unload the linked track.
> ''Note:'' these APIs should not be abused, as it forces players to download the tracks if they are sourced on the network, and unloaded tracks won't be playable until they are loaded again.
{{{
    <AudioTrack>.load()
        aTrack.load();

    <AudioTrack>.unload()
        aTrack.unload();
}}}
<h4>{{{<AudioTrack>.has...()}}}</h4>\
These five APIs will check whether certain types of data attached to a track are available:
* {{{<AudioTrack>.hasData()}}} checks if the track can be fully played without interruption
* {{{<AudioTrack>.hasNoData()}}} checks if //no// data has been loaded for the track 
* {{{<AudioTrack>.hasSomeData()}}} checks if some of the track's data has been loaded
* {{{<AudioTrack>.hasMetadata()}}} checks if the track's metadata has been loaded
* {{{<AudioTrack>.hasSource()}}} checks if there are any valid sources for the track
> //Examples://
{{{
    if (aTrack.hasData() 
        && bTrack.hasNoData() 
        && cTrack.hasSomeData() 
        && dTrack.hasMetadata() 
        && eTrack.hasSource()) {
            /* do something */
    }
}}}
\
<h4>{{{<AudioTrack>.duration()}}}, {{{<AudioTrack>.remaining()}}}</h4>\
These APIs will provide different information about the track, namely the total playtime of the track ({{{<AudioTrack>.duration()}}}, in seconds), the remaining playtime ({{{<AudioTrack>.remaining()}}}, in seconds)
> //Examples://
{{{
    var trackLength = aTrack.duration();
    var trackRemains = aTrack.remaining();
}}}
\
<h4>{{{<AudioTrack>.clone()}}}</h4>\
This API will create an independent copy of the track, which when manipulated, won't affect the original track.
{{{
    var trackCopy = aTrack.clone();
}}}
\
<h3>Check the State of the Track</h3>\
The following APIs will check if the selected track has a specific state:
* {{{<AudioTrack>.isLoading()}}} checks if the track is loading data
* {{{<AudioTrack>.isUnloaded()}}} checks if the track's sources are unloaded
* {{{<AudioTrack>.isSeeking()}}} checks if the track is seeking
* {{{<AudioTrack>.isFailed()}}} checks if an error occurred
* {{{<AudioTrack>.isUnavailable()}}} checks if the track is unavailable for playback 
** this API will not tell you the reason why it's unavailable
* {{{<AudioTrack>.isPlaying()}}} checks if the track is playing
* {{{<AudioTrack>.isPaused()}}} checks if the playback of the track is paused
* {{{<AudioTrack>.isStopped()}}} checks if the playback of the track has been stopped
* {{{<AudioTrack>.isEnded()}}} checks if the playback of the track ended 
* {{{<AudioTrack>.isFading()}}} checks if there is a fade in-progress on the track
\
<h3>Track Actions and Playback Manipulation</h3>
The following APIs will affect the playback of the selected track.
\
<h4>{{{<AudioTrack>.fade()}}}</h4>\
This API will start the playback of the track fade between the specified volumes during the specified fading duration.
> ''Note:'' the {{{Config.audio.pauseOnFadeToZero}}} [[setting|Confic-Macro]] will automatically pause a track faded to 0.
{{{
    <AudioTrack>.fade(duration , toVol [, fromVol])
}}}
This API has 3 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{toVol}}}: (integer) the destination volume level
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   aTrack.fade(6, 1, 0); 
}}}
<h4>{{{<AudioTrack>.fadeIn()}}}</h4>\
This API will start the playback of the track fade from the specified volume to 1 (loudest) during the specified fading duration.
{{{
    <AudioTrack>.fadeIn(duration [, fromVol])
}}}
This API has 2 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   aTrack.fadeIn(6, 0); 
}}}
<h4>{{{<AudioTrack>.fadeOut()}}}</h4>\
This API will start the playback of the track fade from the specified volume to 0 (silent) during the specified fading duration.
> ''Note:'' the {{{Config.audio.pauseOnFadeToZero}}} [[setting|Confic-Macro]] will automatically pause a track faded to 0.
{{{
    <AudioTrack>.fadeOut(duration [, fromVol])
}}}
This API has 2 parameters:
* {{{duration}}}: (integer) the number of seconds for the fading.
* {{{fromVol}}}: (optional, integer) the starting volume level 
** if omitted, default is the track's current volume level 
> //Example://
{{{
   aTrack.fadeOut(6, 1); 
}}}
<h4>{{{<AudioTrack>.fadeStop()}}}</h4>\
This API will stop any in-progress fade of the selected track.
{{{
    aTrack.fadeStop();
}}}
<h4>{{{<AudioTrack>.time()}}}</h4>\
This API lets you both get and set the track's current time in seconds.
{{{
    <AudioTrack>.time([seconds])
}}}
This API has 1 parameter:
* {{{seconds}}}: (optional, integer) the time to set, in seconds
> //Examples://
{{{
 → get the track's time:
    var trackTime = aTrack.time();

 → set the track's time:
    aTrack.time(30);
    aTrack.time(aTrack.duration() - 30);
}}}
<h4>{{{<AudioTrack>.loop()}}}</h4>\
This API lets you loop a track, as well as check if the track is looping.
{{{
    <AudioTrack>.loop([state])
}}}
This API has 1 parameter:
* {{{state}}}: (optional, boolean) the loop state 
> //Examples://
{{{
    var isLooped = aTrack.loop();

    aTrack.loop(true);
    aTrack.loop(false);
}}}
<h4>{{{<AudioTrack>.volume()}}} and {{{<AudioTrack>.mute()}}}</h4>\
These API will let you control the volume of the selected track, either changing the volume or muting it altogether. They can also check the current state of the track.
{{{
    <AudioTrack>.volume([level])
    <AudioTrack>.mute([state])
}}}
The {{{.volume()}}} API has 1 parameter:
* {{{level}}}: (optional, integer) the volume level to set, between 0 (silent) and 1 (loudest)
> //Examples://
{{{
    var trackVolume = aTrack.volume();
    
    aTrack.volume(0.75);
}}}
The {{{.mute()}}} API has 1 parameter:
* {{{state}}}: (optional, boolean) the mute state
> //Examples://
{{{
    var isMuted = aTrack.mute();

    aTrack.mute(true);
    aTrack.mute(false);
}}}
<h4>{{{<AudioTrack>.play()}}}, {{{<AudioTrack>.pause()}}} and {{{<AudioTrack>.stop()}}}</h4>\
These APIs will let you control the playback of a track, either by playing or stopping it. Playing a track after pausing will continue the track where left off, while after stopping will restart the track.
> ''Note:'' {{{.playWhenAllowed()}}} will only play the track as soon as it is able (player interact with the document).
{{{
    <AudioTrack>.play()
        <AudioTrack>.playWhenAllowed()
    <AudioTrack>.pause()
    <AudioTrack>.stop()
}}}
\
> //Examples://
{{{
    aTrack.play();
        aTrack.playWhenAllowed();
    aTrack.pause();
    aTrack.stop(); 
}}}
You can also add a failure catch:
{{{
    aTrack.play()
	.then(function () {
		console.log('The track is playing.');
	})
	.catch(function (problem) {
		console.warn('There was a problem with playback: ' + problem);
	});
}}}
\
<h3>Event Handlers on tracks</h3>\
These APIs lets you assign event handlers to specific tracks, essentially as shorthands of their respective jQuery methods.
> //Examples://
{{{
 → Add a handler:
    aTrack.on('ended.myEvents', function () {
        /* do something */
    });

 → Add a single-use handler:
    aTrack.one('ended.myEvents', function () {
	    /* do something */
    });

 → Remove a handler:
    aTrack.off('ended.myEvents');
}}}
> ''Note:'' because the SimpleAudio APIs use events internally, it is recommended to specify custom user namespace, to avoid conflicts.


:: Base-JS-CSS [chapter page] {"position":"2000,725","size":"200,100"}
<h1 id="basics-jscss" class="the-chapter">About JavaScript and the StyleSheet</h1>
To customise your project even further, Twine gives you the possibility to use JavaScript and CSS, which you can edit in the //JavaScript// and //StyleSheet// passages (under the //Story Menu// in the Twine app).
\
<h3>JS - JavaScript</h3>\
''JavaScript'' (or JS) is a coding language used in HTML files that will dictate the behaviour of elements on the page. When you click on a link to change the passage to a new one, it is because the JavaScript code is telling the page to do so. The macros in SugarCube are built on JavaScript.

The most common use for JavaScript in a project is:
* to add custom macro for effect not available in the base SugarCube
* to add settings to change how the project looks/acts for the player 
* to change how the page looks/behaves (ex: removing the history arrows)
You could potentially build a whole SugarCube project by only using JavaScript, though you might as well use [[Snowman|https://videlais.github.io/snowman/#/]]...
\
> ''Notes:'' SugarCube also uses jQuery, which is a sub-language of JavaScript, used for navigation, selecting elements or control animation.
> ''IMPORTANT'': Java and JavaScript are ''two different coding languages'', with no link between each other aside from the four characters in their name!
\
<h3>CSS - Cascading Style Sheet</h3>\
''Cascading Style Sheet'' (or CSS) is a coding language used in HTML files to dictate the layout and formatting of the page. From the choice of background to the placement of an element, this is usually done in with CSS. The language allows for alternate rules for different settings or screen size, as well as animation.
> ''Note:'' you can use JavaScript/jQuery to change aspects of the page (add/remove an element, change the colour). But, in most cases, CSS will suffice.
\
The most common use for CSS in a project is:
* to change the basic formatting of a page (ex: colour scheme)
* to have alternate rules for coded [[settings|Settings]] in the JavaScript (ex: font family)
* to have a different formatting of the page on mobile screens
> ''Note:'' in SugarCube, you can edit some styling with the [[Markup formatting|Markup-Styling]]. For further use of CSS, see [[this page|Int-JS-CSS]].
\
<h3>Learn more about JavaScript, jQuery, and CSS</h3>\
* the [[W3 School|https://www.w3schools.com/]] has the most beginner explanations, and lets you test and edit their examples.
* [[MDN Web Docs|https://developer.mozilla.org/en-US/]] is more technical but provides a more extensive documentation.
* [[jQuery|https://jquery.com/]] has also a special documentation website.


:: Basic-API [chapter menu] {"position":"3500,1100","size":"200,100"}
<h1>Some Useful Basic APIs</h1>
Along with macros, there are basic APIs that can trigger an event in the game, such as undoing an action, opening a popup, or configuring some functionalities in the engine. 

Those APIs are JavaScript-based code that should either be included in the JavaScript or within the {{{<<run>>}}} or {{{<<script>><>}}} macros to work.

* [[Moving back and forth in the History|Basic-API-Engine]]
* [[Create a PopUp|Basic-API-Dialog]] 
* [[Handle the SideBar|Basic-API-UIBar]]
* [[Open the Restart, Saves, and Settings PopUp|Basic-API-UI]] 
* [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
* [[Some Useful Configuration API for your Project|Basic-API-Config]]

For more Basic APIs, see [[this page|API-Adv]].


:: Basic-API-Config [page basic-apis] {"position":"3600,1400","size":"100,100"}
<h1 id="basicapis-config">Some Useful Configuration API for your Project</h1>
To customise your project even further, here are a few Config APIs you might find useful.
\
<h3>Remove the History Buttons</h3>\
To force players to move only forwards, it is possible to remove the //Forward// and //Backwards// buttons at the top of the SideBar, with the following code in the JavaScript:
{{{
    Config.history.controls = false;
}}}
>'' Note:'' this is only useful if the Base UI is in use or the element {{{#ui-bar-history}}} appears on the page. If the UIBar has been removed from editing the {{{StoryInterface}}}, you will not need this API.
> When removing these controls, you may want to give the player ways to go backward and forward in the story (especially relevant if you have Codexes).
\
<h3>Change the Max Amount of States</h3>\
To avoid the player rewinding too much, you change the maximum number of state the history can save. These are active passages visited the player can go back to by pressing the //Backwards// button. If the player has visited more passage than the limit, the earlier visited states are moved to an "Expired" state, and won't be available to go back to with the back arrow or {{{Engine.backward()}}}.
{{{
    Config.history.maxStates = 40; //(default)
    Config.history.maxStates = 1; //(will not allow player to go backward)
}}}
>'' Note:'' the larger the {{{maxStates}}}, the bigger the chance of lag when loading new passages.
\
<h3>Change the Number of Save Slots</h3>\
With a default of 8 save slots (+ export), players have many opportunities to save a play through. Still, the number of save slots can be modified:
{{{
    Config.saves.maxSlotSaves = 4;
}}}
You can also modify the number of autosave slots available for players with:
{{{
    Config.saves.maxAutoSaves = 4;
}}} 
>'' Note:'' the higher the number, the more the game will save in the player's cache. 
> For more Save Config, see [[this page|Config-Saves]].
\
<h3>Removing Unwanted Blank Space</h3>\
Aside from using the {{{<<nobr>>}}} macro or {{{nobr}}} tag, there are two Config APIs which will remove the unnecessary blank space in your project: {{{Config.cleanupWikifierOutput}}} and {{{Config.passages.nobr}}}.

{{{Config.cleanupWikifierOutput}}} will remove any line breaks ({{{<br>}}}) created during compiling, as well as wrap any non {{{<div>}}} elements with {{{<p>}}}, creating paragraphs.

On the other hand, {{{Config.passages.nobr}}} will only remove any break on the page. This means that you will need to wrap every paragraph or bit of text with a block HTML makrup (i.e. {{{<p>}}}, {{{<div>}}}, {{{<h1>}}}, etc...) manually.
{{{
    Config.cleanupWikifierOutput = true;
    Config.passages.nobr = true;
}}}
>'' Note:'' if both are included, no matter the order, {{{Config.passages.nobr}}} will remove all breaks on the page. 
> As well, if the {{{nobr}}} tag is used in a passage, it too will override {{{Config.cleanupWikifierOutput}}}


:: Basic-API-Dialog [page basic-apis] {"position":"3600,1200","size":"100,100"}
<h1 id="basicapis-dialog">Create a PopUp</h1>
Instead of moving to another passage to show a bit of text to the player, the Dialog API is here to create <<link "PopUps">><<popup "Basic-UI-Dialog" "Dialog Box">><</link>>!
\
<h3>The Basics of Popups</h3>\
To create a popup, you will need 3 APIs, in this order:
* {{{Dialog.create()}}}, to prepare the popup, and add a title (optional) and a class (optional)
* {{{Dialog.wiki()}}}, to include text in the popup
* {{{Dialog.open()}}}, to open the dialog box
\
{{{
    Dialog.create('This a PopUp');
    Dialog.wiki("And here is the text. Even some //italics// and ''bold''!");
    Dialog.open();

    Dialog
        .create('This a PopUp')
        .wiki("And here is the text. Even some //italics// and ''bold''!")
        .open();
}}}
>'' Note:'' be mindful of quotes in {{{Dialog.wiki()}}}, as it could start issues.

For longer popups, you can use {{{Dialog.wikiPassage();}}} to pull the content of a separate passage. This is quite handy when you want to avoid messy code blocks, have a bit more control over the text (like line breaks), or when including interactive macros.
{{{
    Dialog.wikiPassage("PassageName");
}}}

If you need to empty the content of a popup before displaying something new, you can use {{{Dialog.empty();}}}:
{{{
    Dialog.empty();

 → in combination with a new wiki:
    Dialog
        .empty()
        .wikiPassage("AnotherPassage");     
}}}
\
<h3>Customise the Popup</h3>\
For {{{Dialog.create()}}} and {{{Dialog.open()}}}, it is possible to add parameters to customise a popup further. This can take multiple forms, from adding a CSS class to the whole popup, changing where the popup is positioned, or triggering a function when closing the popup.

The {{{Dialog.create()}}} has 2 parameters:
* {{{title}}} (optional): the title displayed for the popup
* {{{classNames}}} (optional): classes to attach to the popup, separated with a space
{{{
    Dialog.setup('This is a PopUp Title', 'a-class and-another-one');
}}}
> ''Note:'' you can target the class in the StyleSheet, to change how the popup looks.

The {{{Dialog.open()}}} has also 2 parameters:
* {{{options}}} (optional) 
** namely {{{ {top: [value]} }}}, to affect the top margin of the popup.
* {{{closeFn}}} (option), the function to execute whenever the popup is closed
{{{
    Dialog.open({top : 500}, myFunction())
}}}

>'' Note:'' Chapel has created a [[Macro Set|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/dialog-api-macro-set.md]] to make the process of coding Popups easier. This macro is used in this guide. /*Because laziness always wins!*/
\
<h3>{{{Dialog.close();}}}</h3>\
While the Dialog box has a built-in //Close// button in its top-right corner, or can be closed by clicking outside of the dialog box, there is a third way to make the popup disappear: {{{Dialog.close()}}}.
If the popup has interactive elements, especially some triggering more code (e.g. moving to a new passage), this API will automatically close the popup for the player.
{{{
    Dialog.close();

    <<button "Move Forward?">>
        <<if $ready is true>>
            <<goto "Forest">>
            <<run Dialog.close();>>
        <<else>>
            /* Some code :P */
        <</if>>
    <</button>>
}}}


:: Basic-API-Engine [page basic-apis] {"position":"3500,1200","size":"100,100"}
<h1 id="basicapis-engine">Moving back and forth in the History</h1>
Moving back and forth in the Player's History is possible in the base SugarCube UI with the History buttons at the top of the SideBar. They are represented with the {{{←}}} and {{{→}}} arrows in the base styling. 

However, if those buttons are removed, through the [[Config API|Basic-API-Config]] or because the SideBar was removed (with {{{StoryInterface}}} or the [[UIBar API|Basic-API-UIBar]]), it is still possible for the player to undo/redo an action: with the {{{Engine.backward()}}} and {{{Engine.forward()}}}, nested inside a {{{<<link>>}}} or a {{{<<button>>}}}.
{{{
    <<run Engine.backward()>>
    <<script>>Engine.forward()<</script>>

Inside a link/button:
    <<link "Back">><<run Engine.backward()>><</link>>
    <<button "Forward">><<script>>Engine.forward()<</script>><</button>>
}}}

While this API can also be used without player interaction, by simply including the API in a non-interactive macro (e.g. {{{<<timed>>}}}), to automatically rewind/redo the action, it is not recommend.


:: Basic-API-UI [page basic-apis] {"position":"3600,1300","size":"100,100"}
<h1 id="basicapis-ui">Open the Restart, Saves, and Settings PopUp</h1>
The elements above are included in the base SugarCube UI, as buttons in the menu (if they are populated), but can be called at any time with the APIs below:
* {{{UI.restart()}}}, will open a popup asking the player if they would like to Restart the Game.
** To restart without a popup, you will want to use the [[Engine API|Engine-Restart]].
* {{{UI.saves()}}}, will open the Save popup.
* {{{UI.settings()}}}, will open the Settings popup.

Those APIs are most useful inside a {{{<<link>>}}} or {{{<<button>>}}} when:
* the UI of the project doesn't include the built-in SideBar 
* when the menu has been removed from the SideBar
* in a Starting Menu Passage or an Ending Passage


:: Basic-API-UIBar [page basic-apis] {"position":"3500,1300","size":"100,100"}
<h1 id="basicapis-sidebar">Handle the SideBar</h1>
Thanks to the APIs below, you can control when/where the SideBar will appear on the page. These can be included directly on the passage (with either {{{<<run>>}}} or {{{<<script>>}}}), or in the JavaScript.

{{{UIBar.hide()}}} will hide the SideBar on the page, and stay hidden until {{{UIBar.show()}}} is triggered. Even if it won't appear on the page, the element {{{#ui-bar}}} will still be included in the HTML, but with a display value of {{{none}}} when hidden.

Similarly, {{{UIBar.stow()}}} will stow the SideBar to the side (but still visible), and stay stowed until {{{UIBar.unstow()}}} is triggered. The element {{{#ui-bar}}} will receive a special class {{{.stowed}}}, and transition from one state to another with a smooth animation.

{{{UIBar.destroy()}}}, on the other hand will remove the the element {{{#ui-bar}}} completely.
>'' Note:'' if {{{StoryInterface}}} is in use, and does not include the element {{{#ui-bar}}} within this Special Passage, there is no need to include this API.


:: Basic-Config-Navig [page basic-apis] {"position":"3500,1400","size":"100,100"}
<h1 id="basicapis-navig">Overriding the Navigation to a Passage</h1>
While moving from passage to passage is dictated by the Passage Name inside a link or in a {{{<<goto>>}}} macro, it is still possible to override the original destination, sending the player to a new passage. This can be done with {{{Config.navigation.override}}}:
{{{
    Config.navigation.override = function (dest) {
	    /* code */
    };
}}}
>'' Note:'' this requires a bit of JavaScript knowledge to fill in the Config (or edit the example below).

Assuming that you want to send the player to an End Screen ({{{"You Died"}}}) because their {{{$health}}} is too low (0 or less):
{{{
    Config.navigation.override = function (dest) {
        var sv = State.variables;
        if (sv.health <= 0) {
            return "You Died";
        }
    };
}}}
>'' Note:'' {{{State.variables}}} is how to code a variable (here {{{$health}}}) in JavaScript that was set in a SugarCube passage.

If there are multiple situations where the player should be sent to a special passage:
{{{
    Config.navigation.override = function (dest) {
        var sv = State.variables;
        if (sv.health <= 0) {
            return "You Died";
        }
        else if (sv.coins == 0) {
            return "You Poor";
        }
    };
}}}

''An important Note:'' if there is a link to a different passage in the End Screen and the variable still has a value that would run the code above, the Navigation will be overridden again when that link is clicked. You can avoid this by:
* change the value of the variable 
* unset the variable 
* remove any link that would move the player to a new passage
\
<h3>A non-JavaScript Alternative</h3>\
While the method above is preferred, this navigation override is also possible to do in SugarCube code, inside the {{{PassageReady}}} [[Special Passage|SP-PassageReady-Done]] with a couple of conditional statements and {{{<<goto>>}}} macros:
{{{
    ::PassageReady
    <<if !$ending>>
        <<if $health <= 0>>
            <<set $ending to true>>
            <<goto "You Died">>
        <<elseif $coins = 0>>
            <<set $ending to true>>
            <<goto "You Poor">>
        <</if>>
    <</if>>
}}}
Since this runs before the passage is [[fully rendered|SP-PassageReady-Done]], it is important that the {{{$ending}}} variable is included here, and set as true before the {{{<<goto>>}}} macro, otherwise the player will run into an endless loop of reloading the ending passage.
> ''Note:'' instead of a variable, you could use the {{{passage()}}} or {{{tags()}}} [[functions|Function-Pass-Tag]] to restrict the endless loop.


:: Basic-UI-Dialog [popup] {"position":"700,200","size":"100,100"}
You found the dialog box!


:: Basics [chapter menu] {"position":"800,100","size":"200,100"}
<h1>Starting with SugarCube</h1>
When setting up your first project with SugarCube, it is best to start with the Basics. 
This means creating links between story pages, allowing the player to move from one passage to another, saving information and player's choices inside [[variables|Variables-Base]], and tracking the value of those variables to display variations down the line.

To do this, you essentially only need the 3 following macros: {{{<<link>>}}}, {{{<<set>>}}}, and {{{<<if>>}}}.

* [[The Elements on the Page|Basics-UI]]
* [[Linking Passages|Macro-Link-Basic]] 
* [[The Basics of Variables|Variables-Base]]
* [[Tracking Information|Macro-Set-Basic]] 
* [[Display Variation|Macro-If-Basic]]
> ''Note:'' Twine reads passages from top to bottom, so any code at the top of the passage can affect any code below.

Want to see this in action? Try this [[Demo|Demo-Basic]]!


:: Basics-UI [page BasicUI basics] {"position":"800,200","size":"100,100"}
<h1>The Elements on the Page</h1>
In a basic SugarCube project, there are essentially 3 main elements on the page:
* the passage (in green)
* the UI-Bar (in red)
* the dialog box (<<link "click here">><<popup "Basic-UI-Dialog" "Dialog Box">><</link>>)
\
The content inside the ''passage'' is generated from the story passages created in Twine (i.e. any non-special passage). Every time the player clicks on a link to advance the story, the passage will refresh to display the new content.

In the ''UI-Bar'', also called //SideBar//, you will find arrows to go back and forth in the Game History (the visited passages), an arrow to hide/show the UI-Bar/sidebar, and, at the minimum, the //Save// and //Restart// buttons. 
The content of the sidebar can be edited through the [[Special Passages|SP-UIBar]], or when adding [[Settings]] or [[Saves|Config-Saves]].

''Dialog boxes'' are elements that will appear at the forefront of the page (like a popup). It is used by the Menu buttons (like //Save// and //Restart//), but can also contain content from a story passage (like the Lexicon link below) or coded through the passage. To create a dialog box, [[visit this page|Basic-API-Dialog]].

To edit how those elements look, you will need to edit the [[StyleSheet|Int-JS-CSS-Elements]] (intermediate).


:: CacheAudio [page audio-macro] {"position":"2900,1200","size":"100,100"}
<h1 id="audio-cache">Setting up the Audio Tracks</h1>
To use audio tracks in your project, SugarCube requires you to cache the tracks at the start of the game by using the {{{<<cacheaudio>>}}} macro in the {{{StoryInit}}} [[Special Passage|SP-Init]].
{{{
        <<cacheaudio trackId sourceList>>
}}}
The macro has 2 arguments:
* {{{trackId}}}: the ID for the track, as a reference
* {{{sourceList}}}: the [[URL|URL-Types]] of the file, or files if a track has multiple formats.
{{{
    :: StoryInit
    <<cacheaudio "boom" "music/explosion.mp3">>
    <<cacheaudio "synth" "music/synth.mp3" "music/synth.wav" "music/synth.aac">>
}}}
>'' Note:'' if possible, take into account browser support when adding audio tracks to a project. [[Not every format is compatible|https://caniuse.com/?search=audio%20format]].
\
<h3>Pre-loading some tracks</h3>\
If some tracks will be played from the first few screens and should be pre-loaded, the {{{<<waitforaudio>>}}} macro will do just that, by increasing the loading screen until the track(s) is(are) ready to play. 

Place the macro in {{{StoryInit}}} below the necessary tracks, to load ahead. The tracks below the macro will only be cached.
{{{
    :: StoryInit
    <<cacheaudio "boom" "music/explosion.mp3">>
    <<waitforaudio>>
    <<cacheaudio "synth" "music/synth.mp3">>
    <<cacheaudio "wind" "music/wind.mp3">>
    <<cacheaudio "water" "music/water.mp3">>
}}}


:: Confic-Macro [page configapi] {"position":"2300,1900","size":"100,100"}
<h1 id="config-macros">Macro-relevant Configurations</h1>
The APIs listed below will affect with specific macros, namely {{{<<for>>}}}, {{{<<type>>}}}, and {{{<<audio>>}}}.
\
<h3>{{{Config.macros.maxLoopIterations}}}</h3>\
This API will set the maximum number of iterations allowed for the {{{<<for>>}}} macro, before the macro is automatically terminated with an error message. This setting exists to prevent making the browser unresponsive if a loop is not configured correctly.
The default number is 1.000.
{{{
    Config.macros.maxLoopIterations = 5000;
 → changes the default to 5.000 iterations
}}}
\
<h3>{{{Config.macros.typeSkipKey}}}</h3>\ 
This API will change the default key to press to skip the typing of the {{{<<type>>}}} macro, meaning it will display the rest of the content immediately. The default is {{{" "}}} (the space key).
{{{
    Config.macros.typeSkipKey = "Control";
 → the SkipKey will become {Ctrl}
}}}
> ''Note:'' this is only relevant if the {{{skipkey}}} argument was not included in the [[macro|Macro-Type]].
\
<h3>{{{Config.macros.typeVisitedPassages}}}</h3>\
This API will determine whether to trigger the {{{<<type>>}}} macro on previously visited passages or display the text as is. This is enabled by default, meaning the macro will type out the content even if the passage had previously been visited.
{{{
    Config.macros.typeVisitedPassages = false;
 → will not type out the text on visited passages
}}}
\
<h3>{{{Config.audio.pauseOnFadeToZero}}}</h3>
This API will automatically pause any track who've been faded to volume 0 (silent). This is enabled by default.
{{{
    Config.audio.pauseOnFadeToZero = false;
 → will not pause the track when faded to 0
}}}
\
<h3>{{{Config.audio.preloadMetadata}}}</h3>\
This API will attempt to preload the metadata of any track [[cached|CacheAudio]] in the project, meaning the information about the track(s). This element is enabled by default.
> ''Note:'' it is unlikely you will ever need to disable this setting.
{{{
    Config.audio.preloadMetadata = false;
 → will not preload metadata
}}}


:: Config-API [chapter menu] {"position":"2300,1800","size":"200,100"}
<h1>More Configuration APIs to Customise Interaction</h1>
If you need to configure how your project should run with more customisation, like saving playthroughs or changing how some macros operate, this section will cover the rest of the Configuration APIs that were not [[previously mentioned|Basic-API-Config]].

Those APIs are JavaScript-based code that should be included in the JavaScript (though some can be used along with the {{{<<run>>}}} or {{{<<script>>}}} macros inside a passage).

* [[Macro-relevant Configurations|Confic-Macro]] 
* [[Editing the Behaviour and Display of Passage Elements|Config-Passage]] 
* [[Save Configurations|Config-Saves]] 
* [[Other Config APIs|Config-Misc]]


:: Config-Misc [page configapi] {"position":"2400,2000","size":"100,100"}
<h1 id="configs-misc">Other Config APIs</h1>
Below are listed the Config APIs not mentioned in other pages of this guide.
\
<h3>{{{Config.ui.stowBarInitially}}}</h3>\
This API allows you to stow the sidebar when the game starts. You can indicate a boolean value to always/never stow the SideBar at the start, or an integer, which will stow the SideBar if the screen/window size is less wide than the specified number.
> ''Note:'' the default of this API is {{{800}}}, as in the SideBar will start stowed if the screen size is less than 800px. 
\
> //Examples://
{{{
    Config.ui.stowBarInitially = true;
→ Always start stowed

    Config.ui.stowBarInitially = false;
→ Never start stowed (for all screens)

    Config.ui.stowBarInitially = 800;
→ Stows at the start if the width is less than 800px
}}}
\
<h3>{{{Config.ui.updateStoryElements}}}</h3>\
Usually, elements in the SideBar are update every time the player moves to a new passage. This affects the //displayed title// //banner//, the //subtitle//, the //author//, the //caption//, and the //menu// populated by the [[Special Passages|SP-UIBar]]. If these elements do not ever need updating, you could choose to toggle off this update.
{{{
    Config.ui.updateStoryElements = false;
}}}
> ''Note:'' this API is unnecessary if you have a custom interface or conditional statements in the Special Passages.
\
<h3>{{{Config.addVisitedLinkClass}}}</h3>\
This API will let you edit the styling of links sending the player to an already visited passage (i.e. incl. in the player's history) by adding a special class {{{.link-visited}}} to those. You can then modify the styling with CSS in the StyleSheet, to provide a visual distinction between already visited and still-to-read passages.
{{{
    Config.addVisitedLinkClass = true;
}}}
> ''Note:'' turning on this API will require you to add CSS rules to the class, as none is provided by default.
{{{
    .link-visited {
        color: green;
        font-size: 75%;
        text-decoration: line-through;
    } 
}}}


:: Config-Passage [page configapi] {"position":"2400,1900","size":"100,100"}
<h1 id="config-passage">Editing the Behaviour and Display of Passage Elements</h1>
The APIs listed below will affect how a passage could behave or how its different elements are displayed.
\
<h3>{{{Config.saves.descriptions}}}</h3>\
In the Saves menus, passages are described by an excerpt of the passage's content. This API will allow you to provide an alternate description, like the passage's title. 

This can be defined through a function, which will either indicate the new description for the passage or use the passage's excerpt
> //Examples from the Documentation://
{{{
    Config.saves.descriptions = function (saveType) {
        return passage();
    };
 → Using passages' names

    var saveDescriptions = {
        "passage_title_a" : "description text a…",
        "passage_title_b" : "description text b…",
        "passage_title_c" : "description text c…"
    };
    Config.saves.descriptions = function (saveType) {
        return saveDescriptions[passage()];
    };
 → Use a custom description for each listed passage

    Config.saves.descriptions = function (saveType) {
        const base = `(${L10n.get("turn")} ${State.turns})`;

        switch (saveType) {
            case Save.Type.Auto:
                return `${base} A browser auto save…`;
            case Save.Type.Base64:
                return `${base} A base64 save…`;
            case Save.Type.Disk:
                return `${base} A local disk save…`;
            case Save.Type.Slot:
                return `${base} A browser slot save…`;
        }
    };
 → Displaying the amounts of turns during the playthrough, per type of save
}}}
> ''Note:'' there is an alternative approach with the {{{Save.onSave.add()}}} [[API|SaveAPI-Events]]
\
<h3>{{{Config.passages.displayTitles}}}</h3>\
This API can display the title of the passage, along with the story title, in the browser/tab's titlebar:
{{{Passage Name | Story Name}}}
{{{
    Config.passages.displayTitles = true;
}}}
> ''Note:'' this can be pretty useful for debugging/testing.
\
<h3>{{{Config.passages.onProcess}}}</h3>\
This API allows custom text progressing, like changing words on the page for another. It will trigger with every passage displayed and when the {{{<Passage>.processText()}}} [[method|PassageAPI]] is called. It works similarly to [[templates|TemplateAPI]].
This can be a useful for swears replacement.
{{{
    Config.passages.onProcess = function (p) {
        return p.text.replace(/\bcat(s?)\b/g, 'dog$1');
    };
→ will replace any instance of {cat} for {dog}
}}}
> ''Note:'' knowledge of JavaScript will most likely be required here.
\
<h3>{{{Config.passages.start}}}</h3>\
This API will indicate which passage should be displayed first.
There will be very few instances where this would be needed, as the Twine app requires you to select the starting passage, and the Twee formatting needs this information in the {{{:: StoryData}}}.
{{{
    Config.passages.start = "This Is The Actual Starting Passage";
}}}
\
<h3>{{{Config.passages.transitionOut}}}</h3>\
This API will enable transition for outgoing passages. You can either indicate the name of the CSS rule being animated (e.g. opacity), after which the outgoing passage will be removed, or an integer delay (in milliseconds).
You will also need extra CSS, with the {{{.passage-out}}} class to make the transition smoother.
> ''Note:'' this API will mess with the position of the new passage displayed (or when going back in the player history). Extensive testing is required.
{{{
    Config.passages.transitionOut = "opacity";
→ remove outgoing passage when the opacity animation ends

    Config.passages.transitionOut = 1010;
→ remove outgoing passage after 1010ms (1.01s)
}}}
> ''Note:'' when using an integer delay, it is recommended to indicate a number higher than the transition delay, by at least 10ms. The transition delay in the Built-In style-sheet is 1s. 
\
In the StyleSheet, you should at least indicate the transition's end state with the {{{.passage-out}}} class.
> //Example:// 
{{{
    .passage-out {
        opacity: 0;
    }
}}}
It is still recommended to add more rules for it to be pleasing to the eye. The example in the Documentation provides the following:
{{{
    #passages {
        position: relative;
    }
    .passage {
        left: 0;
        position: absolute;
        top: 0;
        transition: opacity 1s ease;
    }
    .passage-out {
        opacity: 0;
    }
}}}


:: Config-Saves [page configapi] {"position":"2300,2000","size":"100,100"}
<h1 id="configs-saves">Save Configurations</h1>
The APIs below will allow you to enable autosaves, as well as restricting the player's ability to saves, or set up save versions.
> ''Note:'' you may need to use some extra [[Save APIs|SaveAPI]] along with these Config.
\
<h3>{{{Config.saves.id}}}</h3>\
This API will set a story ID for the saves. Every save is associated with a story ID with Twine, which is automatically generated from the title of the project.
However, if you would like to use a different ID, you can use this API.
{{{
Config.saves.id = "here-is-a-new-ID-because-who-cares-part-40394857";
}}}
\
<h3>{{{Config.saves.isAllowed}}}</h3>\
With a defined function, this API will determine saving is allowed depending on the context. It will be triggered every time a save is requested, and will only save if the function allows it.
{{{
    Config.saves.isAllowed = function (saveType) {
        /* code */
    };
}}}
> //Example://
{{{
    config.saves.isAllowed = function (saveType) {
        if (passage() === "Start" || tags().contains("nosave") 
            || State.variables.test > 5) {
                return false;
        }
        return true;
    };

→ this won't allow saving:
    → on the passage called "Start"
    → with any passage tagged with "nosave"
    → if the variable $test is greater than 5
}}}
While this API will affect both manual and auto saves, you can choose to restrict a certain type of save. For example:
{{{
   Config.saves.isAllowed = function (saveType) {
        if (saveType === Save.Type.Auto) {
            return tags().includes("autosave");
        }

        return true;
    }; 
→ will only autosave if the passage is tagged "autosave"
}}}
\
<h3>{{{Config.saves.version}}}</h3>\
With this API, you can set the version of saves.
However, it is only useful if you plan to upgrade out-of-date saves (e.g. missing new variables added in {{{StoryInit}}}), and use the {{{Save.onLoad.add()}}} [[API|SaveAPI-Events]] callback.
{{{
→ version as an integer
    Config.saves.version = 2;

→ version as a string
    Config.saves.version = "v2";
}}}
> ''Note:'' though the API will accept any form of value, an integer is recommended over other forms.


:: Credits [side popup] {"position":"2100,400","size":"100,100"}
This guide was constructed by ''manonamora''.
It is based on the SugarCube official documentation, created by Thomas M. Edwards, the developer of the SugarCube format.

<h3>manonamora</h3>\
You can find:
* my other templates on [[Itch|https://manonamora.itch.io/]], as well as my guides:
** [[Ready-to-Use Tweego and Guide|https://manonamora.itch.io/ready-to-use-tweego-folder]]
** [[ChoiceScript to SugarCube Guide|https://manonamora.itch.io/choicescript-sugarcube-tweego-folder]]
* my games and IF experiments on [[Itch|https://manonamora.itch.io/]]
* me, and ask me questions, over on [[Tumblr|https://manonamora-if.tumblr.com]] or [[my website|https://manonamora.neocities.org/]]
* my Twine Resource Masterlist on the [[IntFiction Forum|https://intfiction.org/t/twine-resource-masterlist-wiki/65903]] (a less updated version is rebloggable on [[Tumbr|https://manonamora-if.tumblr.com/post/700577877042888704/]]).
\
<h3>Twine and SugarCube</h3>\
[[About Twine and SugarCube|About]]
You can download Twine over on the [[Twinery.org|https://twinery.org/]] website, which includes the SugarCube format.
Thomas M. Edwards hosts the Documentation for the SugarCube format over on [[his website|https://www.motoslave.net/sugarcube/2/docs/]].

You can also find resources and help with Twine and SugarCube:
* on the [[IntFiction Forum|https://intfiction.org/c/authoring/twine/46]]
* on the [[Twine Subreddit|https://www.reddit.com/r/twinegames/]]
* in the [[Twine Discord|https://discord.gg/n5dJvPp]]
* and more listed in this [[Masterlist|https://intfiction.org/t/twine-resource-masterlist-wiki/65903]]
\
<h3>HTML, CSS, JavaScript</h3>\
There are many online courses to learn the basics (or further) of the Twine-adjacent languages: HTML, CSS, JavaScript/jQuery.
* the [[W3 School|https://www.w3schools.com/]] has the most beginner explanations, and lets you test and edit their examples.
* [[MDN Web Docs|https://developer.mozilla.org/en-US/]] is more technical but provides a more extensive documentation.
* [[jQuery|https://jquery.com/]] has also a specialist documentation website.
\
<h3>This Guide also uses...</h3>\
* the {{{<<message>>}}} and {{{Dialog API}}} macros from [[Chapel|https://github.com/ChapelR/custom-macros-for-sugarcube-2/]].
* the Accessibility Fix for the {{{<<cycle>>}}} macro by [[HiEv|https://www.patreon.com/HiEv]].
\
<h3>A Special Thanks to...</h3>\
* ''Chris Klimas'' for creating Twine, and ''TheMadExile/TME'' for making the SugarCube format and the Tweego compiler.
* ''Cycy'' for making the Twee 3 Language Tool extension for VScode.
* The Twine Discord, especially ''Crepes'', ''TRBRY'', ''Gwen'', ''Cyrus'', ''Sjoerd'', ''SleepyFool'', and ''TME'' for their help and sharing examples when I forgot what certain macros were supposed to do!
* all the users who reported issues with the guide, whether it was broken links, wrong or missing examples, or typos, as well as request extra functions.


:: Custom-Macro [page int-macro] {"position":"1500,1300","size":"100,100"}
<h1 id="int-custommacro">Using Custom Macro</h1>
Aside from the built-in macros, there are many custom ones created by other SugarCube users, from official [[add-ons|http://www.motoslave.net/sugarcube/2/]] on the SugarCube page, to code repositories (mainly on GitHub - see <<link "Credits">><<popup "Credits" "Credits">><</link>>). These custom macros will almost always have their own documentation, with examples or guides on how to use them.

As they are not included with SugarCube, you will need to "install" the custom macro by copy-pasting the relevant code into the JavaScript tab, the StyleSheet tab, or inside a [[Widget Passage|Macro-Widget]]. Not including the required code inside the project (and in the correct place) will trigger errors on the page.

> ''Note:'' when using multiple macros, it is important to check that ''no two macros have the same name''. Otherwise, it will create issues when loading the game (a.k.a. either only one or none of them will work).
\
<h3>Creating your own Macro</h3>\
If you need a custom macro for your project, because it cannot be done with base SugarCube or with the {{{<<script>>}}} [[macro|Macro-Script-Run]], and you have enough knowledge of JavaScript and jQuery, you could attempt to create your own Macro.
> ''Note:'' this option should be for very advanced users with JavaScript knowledge. Many game functionalities do not require a custom macro, or may have already been created by someone. See the [[Twine Resource Masterlist|https://intfiction.org/t/twine-resource-masterlist-wiki/65903]] for a non-exhaustive list of macro creators.

To do so, you will need to use the [[Macro API|Macro]] and code away!
The most important things to remember will be to:
* ensure the name of the macro is different to the Base SugarCube macros (or other custom ones you may be using)
* test it extensively


:: DebugAPI [page chapter] {"position":"3800,1500","size":"200,100"}
<h1 id="debug-api" class="the-chapter">Testing and Debugging your Game</h1>\
Testing is an important part of game creation, as to avoid having the player run into issues or bugs during their playthrough. To help with this, SugarCube includes a "Debug Mode", which allows you to:
* see coding markup when Macros or Markup is used (e.g. {{{<<set>>}}} or {{{[img[]]}}})
** hovering on those elements will show extra information about the code behind it
* track passages encountered and move through the history or any wanted passage
* track variable changes between actions

The debugging feature is native to the Twine program, as you can both //Test// the whole project or //Test From Here// (one specific passage). This will display the Debug Bar in the bottom right corner of the page.
> ''Note:'' with Tweego, you will need to add some extra characters in your compiling command ({{{-t}}} or {{{--test}}}).

However, if you require testing outside of the Twine environment (e.g. external beta-testing) or run code only when this Debug Mode is active, you will need the following APIs.
\
<h3>{{{Config.enableOptionalDebugging}}}</h3>\
As of SugarCube 2.37, the {{{<<if>>}}} macro will not by default display an error when the {{{ = }}} operator is used instead of {{{ === }}} or {{{{ == }}}}, and run the code erroneously (as in pick the condition when it shouldn't). While the players won't see the error warning, it may lead to issues for their playthroughs.

As such, during testing, especially with external beta-tester, it is recommended to enable this API, to display the errors.
{{{
    Config.enableOptionalDebugging = true;
}}}
> ''Note:'' It is possible this API would expand in the future, and include further errors to be suppressed when not enabled.
\
<h3>{{{Config.debug}}}</h3>\
This API can be used to both enable the Debug Mode, and create a condition to only run code when Debug is enabled. {{{Congif.debug}}} is particularly useful when wanting to use the Debug Mode outside of the //Test// state in Twine./*like if you don't want to add -t in the command on Tweego because you're lazy like meeeee...*/
> //Enabling Debug Mode://
{{{
    Config.debug = true;
}}}
> //Other Examples of use://
{{{
→ Pure JavaScript
    if (Config.debug) {
        console.log('OH NO! AN ERROR WITH THIS!!');
	    /* or any other code debug related */
    }

→ TwineScript
    <<if Config.debug>>
        <<run console.log('OH NO! AN ERROR WITH THIS!!');>>
        /* OR */
        <<print `passage()`>>
    <</if>>
}}}
This latter use can be quite practical for longer projects with periodical releases requiring testing at multiple stages. Using {{{Config.debug}}} as a condition allows you to create invisible code that will only run when Debug Mode is active, which means you will not need to delete it between releases.
\
<h4>Creating a "Hidden" Debug Mode</h4>\
If you would like to create a testing instance for external beta-testers, by enabling the Debug Mode but restricting their use of the Debug controls, you can do so by hiding the Debug bar with some CSS.
{{{
    .debug {
        display: none;
    }
 → this will hide the coding markup 

    #debug-bar {
        display: none;
    }
 → this will hide the debug bar

    #debug-bar-hint {
        display: none;
    }
 → this will hide the debug icon
}}}


:: Demo-Basic [page demo] {"position":"900,400","size":"100,100"}
A simple choice.

In front of you sit three boxes: a blue one, a green one, and a red one. Inside each box but one, there is a treat.

//Which box do you choose?//
* [[the blue box|Demo-Basic-Reveal][$box to "blue"]]
* [[the green box|Demo-Basic-Reveal][$box to "green"]]
* [[the red box|Demo-Basic-Reveal][$box to "red"]]
* [[no box|Demo-Basic-Reveal][$box to false]]
<hr>
<<message "Code">>
{{{
    A simple choice.

    In front of you sit three boxes: a blue one, a green one, and a red one. Inside each box but one, there is a treat.

    //Which box do you choose?//
    * [[the blue box|Demo-Basic-Reveal][$box to "blue"]]
    * [[the green box|Demo-Basic-Reveal][$box to "green"]]
    * [[the red box|Demo-Basic-Reveal][$box to "red"]]
    * [[no box|Demo-Basic-Reveal][$box to false]]
}}}
<</message>>


:: Demo-Basic-Reveal [page demo basics] {"position":"1000,400","size":"100,100"}
<<if $box is false>>You did not choose a box.<<else>>You chose the <<if $box is "blue">>blue box, and found a cookie.<<elseif $box is "red">>red box, but found nothing.<<else>>green box, and found an apple<</if>><</if>>

* [[Try again?|Demo-Basic]]
<hr>
<<message "Code">>
{{{
    <<if $box is false>>You did not choose a box.<<else>>You chose the <<if $box is "blue">>blue box, and found a cookie.<<elseif $box is "red">>red box, but found nothing.<<else>>green box, and found an apple<</if>><</if>>

    * [[Try again?|Demo-Basic]]
}}}
<</message>>


:: Engine-API [chapter menu] {"position":"1700,1800","size":"200,100"}
<h1>The Engine APIs</h1>
Aside from [[moving back and forth|Basic-API-Engine]] in the player history, the Engine APIs include extra functions to customize the gameplay of your project. Some of these APIs are more useful in JavaScript than in passages.

* [[Checking the State of the Game|Engine-State]]
* [[Move through the Player's History|Engine-Go]]
* [[(Re-)Play a Passage|Engine-Play]]
* [[Restarting without the Built-In PopUp|Engine-Restart]]


:: Engine-Go [page engine] {"position":"1800,1900","size":"100,100"}
<h1 id="engineapi-go">Move through the Player's History</h1>
While there are already [[options to go back and forth|Basic-API-Engine]] in the player's history, you can move further back and forth with the {{{Engine.go()}}} API. 
{{{
    Engine.go(number)
}}}
By indicating a number - positive to move forward, negative to move back - you will be telling the engine to undo or redo the player's actions as many times as the number. For example:
{{{
    Engine.go(2)   → Redoes two moments, forwards the player twice
    Engine.go(-4)  → Undoes four moments, send the player back four times
}}}

Another method, to target a specific turn in the player's history is to use {{{Engine.goTo()}}}:
{{{
    Engine.goTo(number)
}}}
Unlike the previous method, the number indicates the specific passage in the player's history, with {{{0}}} being the starting page.
{{{
    Engine.goTo(0)  → Goes to the first screen
    Engine.goTo(9)  → Goes to the tenth screen
}}}
> ''Note:'' it is hard to predict how a player will interact with a game, and what path they take, so this method can be quite unreliable.


:: Engine-Play [page engine] {"position":"1700,2000","size":"100,100"}
<h1 id="engineapi-play">(Re-)Play a Passage</h1>
While you can use links to move the player to a new passage with a link, the {{{<<goto>>}}} [[macro|Macro-Goto]], or tje [[navigation Override|Basic-Config-Navig]] there is also an Engine API to display said passage to the player:
{{{
    Engine.play("PassageName" [, noHistory])
}}}

In a passage, you will need to use the API the {{{<<run>>}}} or {{{<<script>>}}} macro:
{{{
    <<run Engine.play("PassageName")>>
}}}
The passage will then load, and will be added to the history of the player.

> ''Note:'' if you want to know when the last time {{{Engine.play()}}} was used, {{{Engine.lastPlay}}} will give you that information.
\
<h3>Not adding to the History</h3>\
{{{Engine.play()}}} allows showing a passage without adding to the player's history. To do so, you need to code it as follow:
{{{
    Engine.play("PassageName", true)
}}}
> ''Note:'' if the passage you want to show is the same as the current passage (a sort of refreshing the page), you can use {{{Engine.show()}}} instead.

When triggered, the page will display the new passage. It will also change the value of variables if coded, which may affect what is displayed ont the screen. For example:
{{{
    :: StoryInit
    <<set $words = 'I say hello'>>

    :: Passage
    <<print $words>>
    <<button " Click">>
        <<set $words = 'You say goodbye'>>
        <<run Engine.play('beat', true)>>
    <</button>>
}}}
When the passage is first displayed, the page will show {{{I say hello}}}. After clicking on the button, the passage will refresh and will now show: {{{You say goodbye}}}.

''HOWEVER'', any changed value in the previous passage or the currently displayed one ''won't'' save until a new moment is created in the player's history. If the player refreshed the page (F5) after {{{Engine.play("PassageName", true)}}} has been triggered, any action done or any change in value since the display of the original passage will be lost.


:: Engine-Restart [page engine] {"position":"1800,2000","size":"100,100"}
<h1 id="engineapi-restart">Restarting without the Built-In PopUp</h1>
Outside of the base [[Restart API|Basic-API-UI]], SugarCube has another way to restart a game, withe {{{Engine.restart()}}}. Unlike its counterpart {{{UI.restart()}}}, which will create a popup warning the player to save their progress, {{{Engine.restart()}}} will restart the file when triggered and without warning.

This method can useful when wanting a more custom Restart screen, if the game does not have any saves, or at an end screen.
Whatever reason for its use, {{{Engine.restart()}}} should be triggered through a link or a button, inside the {{{<<run>>}}} or {{{<<script>>}}} macro:
{{{
    <<button "Restart">>
        <<run Engine.restart()>>
    <</button>>
}}}
Another way to edit the Built-In //Restart// PopUp is to change the relevant [[l10nStrings|Local-L10n]] in the JavaScript.


:: Engine-State [page engine] {"position":"1700,1900","size":"100,100"}
<h1 id="engineapi-state">Checking the State of the Game</h1>
There are instances where knowing the state of the game is needed before triggering a certain bit of code, such as with macros needing the passage to be fully idle to start an audio track, or if the game has a server connection. This set of Engine API will show whether the game is in one of the following three states:
* {{{idle}}}: the page is idle (default)
* {{{playing}}}: navigation to a new passage has been triggered
* {{{rendering}}}: a passage is rendering on the screen 

You can check which state the game is currently at with {{{Engine.state}}}:
{{{
    <<print Engine.state>>

 → in JavaScript:
    if (Engine.state === "rendering") { /* your JS code */ }
}}}

SugarCube has also three other Engine API to check for a specific state:
* {{{Engine.isIdle()}}}, checking if the page is idle
* {{{Engine.isPlaying()}}}, checking is the navigation to a new passage has been triggered
* {{{Engine.isRendering()}}}, checking if a passage is rendering on the screen
{{{
    if (Engine.isIdle()) { /* your JS code */ }
    else if (Engine.isRendering()) { /* your JS code */ }
}}}

> ''Note:'' while those are useful, if you are looking to target a more specific time during the rendering of a passage or element, you may want to check the [[Events]], instead.


:: Events [chapter menu] {"position":"2600,1800","size":"200,100"}
<h1>Trigger Code with Special Events</h1>
Events are messages sent by the code within the game file to notify other bits of code that something has happened (automated or through player interaction). These are built-in the code of SugarCube, and can be used when creating a [[Custom Macro|Macro]], or wanting to customise elements on the page at a very specific moment (e.g. having a sound when closing a popup).

Each event is formatted as an object and contains information about the state at the moment of the event and what happened during the event. You can find these events used plainly in JavaScript (e.g. scroll back to the top) or within macros.
> ''Note:'' The events discussed here are specific to SugarCube. The format, however, does accept more [[standardized browser events|https://developer.mozilla.org/en-US/docs/Web/Events]].
\
* [[Dialog Events|Events-Dialog]]
* [[Passage and Navigation Events|Events-Passage]]
* [[System Events|Events-System]]
* [[Type Macro Events|Events-Type]] 
* [[Audio Events|Events-Audio]]


:: Events-Audio [page events] {"position":"2600,2100","size":"100,100"}
<h1 id="event-audio">Audio Events</h1>
The following events allows the execution of JavaScript code at specific points during [[audio playback|Macro-Audio]]. These work in combination with the advanced [[SimpleAudio API|AudioAPI]].
{{{
    :fading
    :faded
    :stopped
}}}
\
<h3>{{{:fading}}}</h3>\
This event is triggered when a track fade starts.
> //Examples://
{{{
 → using <AudioTrack>
    aTrack.on(':fading', function (ev) {
        /* JavaScript code */
    });

 → using <AudioRunner>
    someTracks.on(':fading', function (ev) {
        /* do something */
    });
}}}
\
<h3>{{{:faded}}}</h3>\
This event is triggered when a fade on a track is completed.
> //Examples://
{{{
 → using <AudioTrack>
    aTrack.on(':faded', function (ev) {
        /* JavaScript code */
    });

 → using <AudioRunner>
    someTracks.on(':faded', function (ev) {
        /* do something */
    });
}}}
\
<h3>{{{:stopped}}}</h3>\
This event is triggered when playback is stopped after {{{<AudioTrack>.stop()}}} or {{{<AudioRunner>.stop()}}} is called (either manually or part of another process).
> //Examples://
{{{
 → using <AudioTrack>
    aTrack.on(':stopped', function (ev) {
        /* JavaScript code */
    });

 → using <AudioRunner>
    someTracks.on(':stopped', function (ev) {
        /* do something */
    });
}}}

> ''Note:'' You can also create custom events with the [[AudioRunner|AudioApi-Runner]] and [[AudioTrack|AudioApi-Track]] APIs.


:: Events-Dialog [page events] {"position":"2600,1900","size":"100,100"}
<h1 id="event-dialog">Dialog Events</h1>
The following events allow the execution of JavaScript code at specific points during the opening and closing of popups. The events will be triggered when using the [[Dialog API|Basic-API-Dialog]]. They happen in the following order:
{{{
    :dialogopening
    :dialogopened 

        //Player Interaction inside the Dialog Box//

    :dialogclosing
    :dialogclosed
}}}
> ''Note:'' The events are triggered by the body element of the popup {{{#ui-dialog-body}}}. 
\
<h3> {{{:dialogopening}}}</h3>\
This event is triggered as the popup is opening (as the first step of {{{Dialog.open()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogopening', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3> {{{:dialogopened}}}</h3>\
This event is triggered when the popup is fully rendered (as the last step of {{{Dialog.open()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogopened', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
An useful example, where any new popup with overflow will have its text displayed from the top.
{{{
    $(document).on(':dialogopened', function (ev) {
        $("#ui-dialog-body").scrollTop(0);
    });
}}}
\
<h3> {{{:dialogclosing}}}</h3>\
This event is triggered as the popup is closing (as the first step of {{{Dialog.close()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogclosing', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3> {{{:dialogclosed}}}</h3>\
This event is triggered when the popup is fully closed (as the last step of {{{Dialog.close()}}}). You can include any JavaScript code inside the following container:
{{{
    $(document).on(':dialogclosed', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.


:: Events-Passage [page events] {"position":"2700,1900","size":"100,100"}
<h1 id="event-passage">Passage and Navigation Events</h1>
The following events allow the execution of JavaScript code at specific points during the rendering of a passage, as well as [[Special Passages|Special-Passage]], a.k.a passage navigation. The order of those events go as follow:
{{{
1- Passage initiation (before change in history)
    :passageinit event

2- Passage start (before passage rendering)
    PassageReady
    :passagestart event
    PassageHeader

 /* Passage content rendering */

3- Passage render (after passage rendering)
    PassageFooter
    :passagerender event

4- Passage display (after passage displayed)
    PassageDone
    :passagedisplay event

5- UI bar special passages update (if relevant)
    StoryBanner
    StoryDisplayTitle 
    StorySubtitle 
    StoryAuthor 
    StoryCaption 
    StoryMenu
    :uiupdate event
    
6- Passage end (end of passage navigation)
    :passageend event
}}}
\
<h3>{{{:passageinit}}}</h3>\
This event is triggered before the player's history is modified (a.k.a just after the start to navigation is called - like when a player clicks on a link to a new passage). It also will contain the elements of the passage to display next.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passageinit', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3>{{{:passagestart}}}</h3>\
This event is triggered just before the rendering of the incoming passage. It will also contain the elements of the passage to display next, and the HTML (currently empty) elements to render.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passagestart', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3>{{{:passagerender}}}</h3>\
This event is triggered just after the rendering of the incoming passage. It will also contain the elements of the passage rendering, and the HTML elements rendered.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passagerender', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
\
<h3>{{{:passagedisplay}}}</h3>\
This event is triggered after the incoming passage is displayed. It will also contain the elements of the passage displayed, and the HTML elements rendered.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passagedisplay', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.
An example where the incoming passage with overflow will be displayed from the top, useful when the previous passage required some scrolling.
{{{
    $(document).on(":passagedisplay", function() {
        $("#passages").scrollTop(0);
    });
}}}
> ''Note:'' this is especially useful with custom UI. Change {{{#passages}}} with the relevant element.
\
<h3>{{{:passageend}}}</h3>\
This event is triggered at the end of the passage navigation. It will also contain the elements of the passage displayed, and the HTML elements rendered.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':passageend', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' to execute the code only once throughout the whole game, replace {{{.on}}} by {{{.one}}}.


:: Events-System [page events] {"position":"2600,2000","size":"100,100"}
<h1 id="event-system">System Events</h1>
The following events allow the execution of JavaScript code at specific points during story startup and restart.
\
<h3>{{{:storyready}}}</h3>\
This is a global event that will be triggered just before the loading screen disappears at startup.
You can include any JavaScript code inside the following container:
{{{
    $(document).one(':storyready', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' this event can only be triggered ''once''.
\
<h3>{{{:enginerestart}}}</h3>\
This is a global event that will be triggered just before the page is reloaded when using {{{Engine.restart()}}}.
You can include any JavaScript code inside the following container:
{{{
    $(document).one(':enginerestart', function (ev) {
	    /* JavaScript code */
    });
}}}
> ''Note:'' this event can only be triggered ''once''.
\
<h3>{{{:uiupdate}}}</h3>\
This is a global event that will be triggered every time the user interface is updated, either through the manual use of the {{{UI.update()}}} [[API|API-UIBar]] or when the player moves to a new passage.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':uiupdate', function (ev) {
	    /* JavaScript code */
    });
}}}


:: Events-Type [page events] {"position":"2700,2000","size":"100,100"}
<h1 id="event-type">Type Macro Events</h1>
The {{{<<type>>}}} macro has events allowing the execution of JavaScript code at specific points during typing. They are sequenced as follow:
{{{
    :typingstart
    :typingstop
    :typingcomplete
}}}
> ''Note:'' every new addition of the {{{<<type>>}}} macro after a {{{:typingcomplete}}} is triggered will start the sequence again.
\
<h3>{{{:typingstart}}}</h3>\
This is a local event that will be triggered when the typing of a section starts.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':typingstart', function (ev) {
	    /* JavaScript code */
    });
}}}
> //Adding a Mouse Click as a SkipKey//
{{{
    (function () {
        var skipKeyEv = jQuery.Event('keydown', {
            key : Config.macros.typeSkipKey
        });

        jQuery(document).on(':typingstart', function (ev) {
            jQuery(ev.target).one('mousedown', function (ev) {
                ev.stopImmediatePropagation();
                ev.preventDefault();
                jQuery(document.body).trigger(skipKeyEv);
            });
        });
    })();
}}}
\
<h3>{{{:typingstop}}}</h3>\
This is a local event that will be triggered when the typing of a section stops.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':typingstop', function (ev) {
	    /* JavaScript code */
    });
}}}
\
<h3>{{{:typingcomplete}}}</h3>\
This is a global event that will be triggered all the {{{<<type>>}}} macros within a passage have been completed.
You can include any JavaScript code inside the following container:
{{{
    $(document).on(':typingcomplete', function (ev) {
	    /* JavaScript code */
    });
}}}


:: FullScreen [chapter page] {"position":"3500,1800","size":"200,100"}
<h1 id="fullscreen-apis" class="the-chapter">Getting the FullScreen Experience</h1>
The FullScreen APIs provides you access to the player's browser's fullscreen abilities. It comes with some built-in limitations, namely the fullscreen request having to be initiated by the player, through player interaction with the page (e.g. link, button, etc...). Running the executing APIs listed below in the Browser Console will not work, returning errors instead.

<<link "Toggle FullScreen">><<run Fullscreen.toggle()>><</link>>

When the fullscreen mode is active, it will save the current and whole HTML page inside the {{{Fullscreen.element}}} object. If the fullscreen mode is not active, {{{Fullscreen.element}}} will return null.
> ''Note:'' Pressing F11 won't activate the fullscreen mode, but it will deactivate it. 
\
<h3>Checking for FullScreen</h3>\
\
<h4>{{{Fullscreen.isEnabled()}}}</h4>\
This API will check whether fullscreen is both supported and available for the device.
{{{
    Fullscreen.isEnabled()
}}}
\
<h4>{{{Fullscreen.isFullscreen()}}}</h4>\
This API will check whether the fullscreen mode is currently active.
{{{
    Fullscreen.isFullscreen()
}}}
\
<h3>(De-)Activating the FullScreen Mode</h3>\
\
<h4>{{{Fullscreen.request()}}}</h4>\
This API will request the browser to enter fullscreen mode.
{{{
    Fullscreen.request([options [, requestedEl]])
}}}
It has 2 parameters:
* {{{options}}} (optional), the fullscreen options 
** {{{navigationUI}}}, determines the fullscreen navigation UI preference 
*** only valid values: {{{auto}}} (no preference), {{{hide}}} (hidden navigation), {{{show}}} (shown navigation)
*** this may not be honoured by the browser
* {{{requestedEl}}} (optional), the element to enter fullscreen mode
** if omitted, it will show the entire page.
\
> //Examples://
{{{
    Fullscreen.request();
→ Basic usage (recommended)

    Fullscreen.request({ navigationUI : "show" }, myElement);
→ Usage with option (show the navigation UI)
  and given an element
}}}
> ''Note:'' it may be easier to use {{{Fullscreen.toggle()}}}, as it will merge both this API and {{{Fullscreen.exit()}}}
\
<h4>{{{Fullscreen.exit()}}}</h4>\
This API will request the browser to exit the fullscreen mode.
{{{
    Fullscreen.exit()
}}}
> ''Note:'' it may be easier to use {{{Fullscreen.toggle()}}}, as it will merge both this API and {{{Fullscreen.request()}}}
\
<h4>{{{Fullscreen.toggle()}}}</h4>\
This API will toggle the fullscreen mode, entering or exiting the mode depending on the current state. It is particularly useful compared to the previous two APIs, as it takes into account whether the game is already in fullscreen or not.
{{{
    Fullscreen.toggle([options [, requestedEl]])
}}}
It has 2 parameters:
* {{{options}}} (optional), the fullscreen options 
** {{{navigationUI}}}, determines the fullscreen navigation UI preference 
*** only valid values: {{{auto}}} (no preference), {{{hide}}} (hidden navigation), {{{show}}} (shown navigation)
*** this may not be honoured by the browser
* {{{requestedEl}}} (optional), the element to enter fullscreen mode
** if omitted, it will show the entire page.
\
> //Examples://
{{{
    Fullscreen.toggle();
→ Basic usage (recommended)

    Fullscreen.toggle({ navigationUI : "show" }, myElement);
→ Usage with option (show the navigation UI)
  and given an element
}}}
This API is the one used in the interactive example above:
{{{
    <<link "Toggle FullScreen">><<run Fullscreen.toggle()>><</link>>
}}}
\
<h3>FullScreen Mode and Event Handlers</h3>\
\
<h4>{{{Fullscreen.onChange()}}}</h4>\
This API will attach an event handler to the fullscreen, allowing you to add extra code when the fullscreen is dis/en-abled (like play a sound or change the value of a variable).
{{{
    Fullscreen.onChange(handlerFn [, requestedEl])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to invoke when the fullscreen mode changes 
* {{{requestedEl}}}, the HTML element to attach the handler to
\
> //Examples//
{{{
    Fullscreen.onChange(function (ev) {
        /* Fullscreen mode changed, so do something. */
    });
→ Basic usage (recommended)

    Fullscreen.onChange(function (ev) {
        /* Fullscreen mode changed on myElement, so do something. */
    }, myElement);
→ With a specified element
}}}
\
<h4>{{{Fullscreen.offChange()}}}</h4>\
This API will removes an event handler to the fullscreen.
{{{
    Fullscreen.offChange([handlerFn [, requestedEl]])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to remove 
** if omitted, it will remove ALL handlers
* {{{requestedEl}}}, the HTML element to remove the handler(s) from
\
> //Examples//
{{{
    Fullscreen.offChange();
    Fullscreen.offChange(originalHandlerFn);
→ Basic usages (recommended)

    Fullscreen.offChange(null, myElement);
    Fullscreen.offChange(originalHandlerFn, myElement);
→ With a specified element
}}}
> ''Note:'' for each case, the first line will remove ALL handlers
\
<h4>{{{Fullscreen.onError()}}}</h4>\
This API will attach an error handler to the fullscreen mode. It will allow you to add extra code when the fullscreen runs into an error (like displaying an alert).
{{{
    Fullscreen.onError(handlerFn [, requestedEl])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to invoke when the fullscreen mode encounters an error 
* {{{requestedEl}}}, the HTML element to attach the handler to
\
> //Examples//
{{{
    Fullscreen.onError(function (ev) {
        /* Fullscreen mode changed, so do something. */
    });
→ Basic usage (recommended)

    Fullscreen.onError(function (ev) {
        /* Fullscreen mode changed on myElement, so do something. */
    }, myElement);
→ With a specified element
}}}
\
<h4>{{{Fullscreen.offError()}}}</h4>\
This API removes an error event handler to the fullscreen mode.
{{{
    Fullscreen.offError([handlerFn [, requestedEl]])
}}}
It has 2 parameters:
* {{{handlerFn}}}, the function to remove 
** if omitted, it will remove ALL handlers
* {{{requestedEl}}}, the HTML element to remove the handler(s) from
\
> //Examples//
{{{
    Fullscreen.offError();
    Fullscreen.offError(originalHandlerFn);
→ Basic usages (recommended)

    Fullscreen.offError(null, myElement);
    Fullscreen.offError(originalHandlerFn, myElement);
→ With a specified element
}}}
> ''Note:'' for each case, the first line will remove ALL handlers


:: Function-Clone-Random [page functions] {"position":"2300,1200","size":"100,100"}
<h1 id="function-clone">Cloning Variables, and Random Values Functions</h1>
SugarCube has a handful of functions to set variables, from cloning objects to randomising a value.
\
<h3>The {{{clone()}}} function</h3>\
Unlike simple variables or arrays, copying an object in another variable will not just copy the current value of the original variable but keep track with any future changes to that original variable. Assuming that {{{$object = {turn : 1} }}}:
{{{
    <<set $var to $object>>
    <<set $object.turn to 6>>

    → $object.turn = 6
    → $var.turn = 6
}}}
This is where the {{{clone()}}} function comes in. The function will clone the values of an object, but not any future change. 
{{{
    <<set $var to clone($object)>>
    <<set $object.turn to 6>>

    → $object.turn = 6
    → $var.turn = 1
}}}
\
<h3>Random Values Functions</h3>\
To randomise a value, there are two main functions: {{{either()}}} for strings and arrays, and {{{random()}}}/{{{randomFloat()}}} for integer (only). Both functions can be used in setting variables or simply printed on the page:
{{{
    <<set $var to either('Blueberries', 'Cherries', 'Peaches')>>
→ this will set $var with one of the listed values

    <<print random(5)>>
→ this will print on the page a number between 0 and 5 (incl)

    <<set _temp to randomFloat(0.0, 5.0)>>
→ this will set _temp a number between 0.0 and 4.99999...
}}}
> ''Note:'' {{{either()}}} will also accept integer and boolean values, but you will need to list them.
\
Instead of listing values, other variables can be used inside the functions. Assuming that {{{_min = 0}}}, {{{_max = 10}}}, {{{_array = ["Apple", "Chocolate"]}}}, {{{_array2 = [1, 2]}}}:
{{{
    <<set
        $var to either(_array),
        $var2 to either(_array, _array2),
        $var3 to either(_array, "Peaches"),
        $var4 to random(_max),
        $var5 to random(_min, _max)
    >>
}}}


:: Function-JS [page functions] {"position":"2400,1300","size":"100,100"}
<h1 id="function-js">JavaScript-only Functions</h1>
The functions below can only be used in the JavaScript tab or inside a {{{<<script>>}}} macro.
\
<h3>Importing external code</h3>\
SugarCube functions allows for importing JavaScript and CSS from external sources, to use in a project:
{{{
To import JavaScript:
    importScripts(URL);

To import CSS:
    importStyles(URL);
}}}

You can import multiple scripts or styles in one import:
{{{
    importScripts(
        "https://somesite/a/path/a.js",
        "https://somesite/a/path/b.js",
        "https://somesite/a/path/c.js",
        "https://somesite/a/path/d.js"
    );
    importStyles([
        "https://somesite/a/path/a.css",
        "https://somesite/a/path/b.css",
        "https://somesite/a/path/c.css",
        "https://somesite/a/path/d.css"
    ]);
}}}
> ''Note:'' the use of square {{{[ ]}}} brackets will determine whether the sheets should be loaded one after the other or not.
\
<h3>Calling SugarCube variables in JS code</h3>\
Sometimes, your JavaScript code will need a variable set in SugarCube to run. This is where {{{temporary()}}} and {{{variables()}}} come in.
> ''Note:'' knowledge of JavaScript is required.
{{{
    temporary().test    → _test
    variables().colour  → $colour
}}}
> ''Note:'' those functions are equivalent to {{{State.temporary}}} and {{{State.variables}}}
{{{
    if (variables().hasGoldenKey) {
	    temporary().unlock = true
    }
→ if the variable $hasGoldenKey is true, the code will change the value of _unlock to true
}}}
\
<h3>Rendering a Passage in a Target Element</h3>\
While this is more of an Advanced function/*but I am too lazy to create a whole section just for this....*/, you may encounter it in special custom code, like Greyelf's [[Right SideBar|http://twinery.org/forum/discussion/comment/17617/]].
{{{
    setPageElement(idOrElement , passages [, defaultText])
}}}
This function has 3 parameters:
* {{{idOrElement}}}: The ID of the element or the element itself.
* {{{passages}}}: The name(s) of the passage(s) to link to the element. 
** can be a single passage or an array of passages (only the first available will be displayed).
* {{{defaultText}}}: (optional, string) the default text to use if no passages are found.
> //Example//:
{{{
    setPageElement("my-display", "MyPassage");

    setPageElement('right-ui-bar-body', 'StoryRightSidebar');
}}}


:: Function-Metadata [page functions] {"position":"2300,1300","size":"100,100"}
<h1 id="function-meta">Memorizing Information and Metadata</h1>
Aside form the Built-In Saves, SugarCube has another way of saving information, in the story metadata. While it ''is not'' a save and ''should not'' replace saves, the following functions can be useful for tracking achievements or statistics, or having a New Game+ feature.
> ''Note:'' this //will not work with private browsing//, and may affect how the game progresses.
> It will also affect all playthroughs of the game.
{{{
    memorize() → save information
    recall()   → bring up information 
    forget()   → delete information
}}}

The functions will need the {{{<<run>>}}} macro to be used and is set as follow:
* the function 
* the name of the information to save/edit/delete, as a string
* (optional) the value of the information, can be a boolean, string or integer
{{{
    <<run function('name': value)>>
}}}
{{{
    <<run memorize('achievement1': true)>>
    <<run forget('achievement1')>>
}}}

The {{{recall}}} function can also be used in conditional statements and saving the information in variables:
{{{
    <<if recall('achievement') is true>>
        You already achieved this.
    <</if>>
    <<set $variable to recall('achievement')>>
}}}


:: Function-Pass-Tag [page functions] {"position":"2400,1200","size":"100,100"}
<h1 id="function-info">Using Play, Passage, and Tags information</h1>
SugarCube functions can also track where players have (or have not) been, or how many times they have visited a certain passage. This information can be useful to display variation, whether certain links appear in a menu, or changing the content of the Header/Footer depending on a location.
\
<h3>Using the {{{tags()}}} and {{{visitedTags()}}} functions</h3>\
To track where the player is or has been based on the tags of the passages, we can use respectively the {{{tags()}}} and {{{visitedTags()}}} functions. This is quite useful when trying to target a group of passages rather than a handful of them (and having to list those). 

{{{tags()}}} should mainly be used in Special Passages, widgets, or JavaScript code outside of the passage, as it contains the list of tags of the current passage. As passages may have multiple tags, it should be treated as if they were an array variable.
{{{
    :: PassageHeader
    <<if tags().includes('forest')>>
        The Dark Forest
    <<elseif tags().includes('town')>>
        The Lovely Town 
    <<elseif tags().includes('tavern')>>
        The Thick Table Tavern :P
    <</if>>

→ Display tags:
    <<print tags()>>

→ Set as a value:
    <<set $var to tags()>>
}}}

{{{visitedTags()}}} will save all the different tags attached to the previously visited passages, and should be mainly be used in conditional statements:
{{{
    <<if visitedTags("forest")>> … </if>>
→ has visited at least one passage tagged 'forest'

    <<if visitedTags("forest", "haunted") is 1>> … <</if>>
→ has visited a passage tagged with both 'forest' and 'haunted' exactly once

    <<if visitedTags("forest", "burned") gt 3>> … <</if>>
→ has visited a passage tagged with both 'forest' and 'burned' more than three times
}}}
> ''Note:'' this functions works similarly to the {{{visited()}}} function. As such, when using more strict conditional statements, as players may unknowingly visit a passage more than once (see {{{<<return>>}}} [[macro|Macro-Back-Return]] or the [[Arbitrarily Long Return|Long-Return-JS]]).
\
<h3>Using the Passage-related functions</h3>\
One can track where the player is or has been based on the passages' name. Aside from {{{passage()}}}, all other functions deal with past events, with {{{visited()}}} and {{{lastVisited()}}} handling both current and past events.

{{{passage()}}} will ''only'' look at the current passage. It can be used both in conditional statements, setting variables, or reloading a page:
{{{
    <<if passage() is "Forest">>...<</if>>
    <<set $var to passage()>>
    <<link "Reload" `passage()`>><</link>>
}}}
> ''Note:'' while it is possible to reload as passage with {{{passage()}}}, this is not recommended, as issues may arise from reloading one passage too many times. If used, it should be done so parsimoniously.
> It is best to use {{{<<replace '.passage'>><<include `passage()`>><</replace>>}}} instead.

{{{previous()}}} will log the most recent previous passage. It will be most useful in conditional statements or links:
{{{
    <<if previous() is "Forest">>...<</if>>
    <<link "Go Back" `previous()`>><</link>>
}}}
> ''Note:'' using {{{previous()}}} in a link will be the same as using the {{{<<back>>}}} [[macro|Macro-Back-Return]]. 

{{{visited()}}} will look at the amount of time a passage has been visited, and is mainly used in conditional statements. When landing on a passage, the {{{visited()}}} counter will increase by 1. The following examples will check if:
{{{
    <<if visited() is 2>>...<</if>>
→ this is currently the second visit on this passage

    <<if visited('Tavern')>>...<</if>>
→ the player has visited the passage "Tavern" at least once 

    <<if visited('Tavern') is 2>>...<</if>>
→ the player has visited the passage "Tavern" exactly two times 

    <<if visited('Tavern', 'Forest')>>...<</if>>
→ the player has visited the passages "Tavern" AND "Forest" at least once
}}}
> ''Note:'' when using more strict conditional statements, as players may unknowingly visit a passage more than once (see {{{<<return>>}}} [[macro|Macro-Back-Return]] or the [[Arbitrarily Long Return|Long-Return-JS]]).

{{{lastVisited()}}} works similarly to the {{{previous()}}} function, though it can also look at the length of turns between the current passage and the one in question. The following examples will check if:
{{{
    <<if lastVisited('Tavern') is 0>>...<</if>>
→ the player is currently in the passage "Tavern"

    <<if lastVisited('Tavern') is -1>>...<</if>>
→ the player has not yet visited the passage "Tavern"

    <<if lastVisited('Tavern') is 1>>...<</if>>
→ the previous passage visited by the player is "Tavern"

    <<if lastVisited('Tavern', 'Forest') is 2>>...<</if>>
→ the player has visited BOTH the "Tavern" and "Forest" passage, most recently 2 turns ago
}}}
> ''Note:'' the {{{lastVisited()}}} function will look at all passages visited in the order they were visited, even if those passages are not part of the story (i.e. Codex).
> To avoid seeing those passages in the history, consider avoiding using the {{{<<return>>}}} [[macro|Macro-Back-Return]] or a regular link with the the [[Arbitrarily Long Return|Long-Return-JS]], favouring the {{{<<back>>}}} [[macro|Macro-Back-Return]] instead.

{{{hasVisited()}}} will only check if a passage has been visited or not. The following examples will check if:
{{{
    <<if hasVisited('Tavern')>>...<</if>>
→ the player has visited the passage 'Tavern'

    <<if not hasVisited('Tavern')>>...<</if>>
→ the player has not yet visited the passage 'Tavern'

    <<if hasVisited('Tavern', 'Forest')>>...<</if>>
→ the player has visited BOTH the passages 'Tavern' and 'Forest'

    <<if not hasVisited('Tavern', 'Forest')>>...<</if>>
→ the player has not visited 'Tavern', or not visited 'Forest', or not visited both
}}}
\
<h3>Other Play Functions</h3>\
{{{turns()}}} will look at the amount of turns a player has taken since the start of the playthrough. It will count all passages visited as a singular path (including starting menus and codexes). As such, rewound/undone actions are not counted. It can be used to display said count on the page, in conditional statements, or saved in a variable.
{{{
    <<= turns()>> 
→ will print the number of turns 

    <<print "Turn #" + turns()>>
→ will print the number of turns, with some extra text 

    <<if turns() gt 5>>...<</if>>
    <<set $var to turns()>>
}}}

{{{time()}}} will look at the time spent in the current passage, in milliseconds. It can be useful in forcing the player to do quick decisions, or track how long a player goes through a section.
{{{
    <<set $time += time()>>

    <<if time() lt 5000>>...<</if>>
→ if the time spent on the passage is less than 5 seconds.

    <<link "Run Away!">>
        <<if time() lt 5000>>
            <<goto "Escaped">>
        <<else>>
            <<goto "Caught">>
        <</if>>
    <</link>>
}}}


:: Function-Trigger [page functions] {"position":"2300,1400","size":"100,100"}
<h1 id="function-event">Triggering Events</h1>
There may come a time when interactivity may require extra bits of code to be processed, by targetting a certain element through a synthetic event. Such as opening a menu when pressing a certain key on the keyboard or trigger an animation when a certain link is clicked.
The {{{triggerEvent()}}} function is in charge of running that event.
> ''Note'': Aside from the most basic use of this function, customising it is pretty advanced.
{{{
    triggerEvent(name [, targets [, options]])
}}}
\
This function has 3 parameters:
* {{{name}}} (string), the name of the event to trigger
** it can be both native or custom events
*** custom event names should be limited to: letters, numbers, {{{ . }}}, {{{ - }}}, {{{ _ }}} and {{{ : }}}
** while it will also accept [[built-in events|Events]], this is not recommended!
* {{{targets}}} (optional), what element(s) it should target
** it will accept: {{{document}}}, HTML elements (e.g. {{{<div>}}} - single or arrays), jQuery, NodeList, etc...
** if left blank, it will default to {{{document}}}
* {{{options}}} (object, optional)
** any additional properties for the event should be added to the {{{detail}}} property
The //options// object has multiple property:
* {{{bubbles}}} (boolean, optional), whether the event bubbles to parent elements ({{{true}}} by default) 
* {{{cancelable}}} (boolean, optional), whether the event is cancelable ({{{true}}} by default)
* {{{composed}}} (boolean, optional), whether the event triggers listeners outside of a shadow root ({{{false}}} by default)
* {{{detail}}} (any, optional), custom data sent with the events ({{{undefined}}} is default)
** it is recommended to use an object, for practicality.
\
> //Examples from the documentation//:
{{{
→ Basic use:
    triggerEvent('custom-event');
    triggerEvent('click');
    triggerEvent(':uiupdate');

→ Targetting a specific element with ID:
    triggerEvent('click', document.getElementById('choice-1'));
        → this will "click" on the element #choice-1

→ Use with options:
    triggerEvent('update-meter', document, {
        detail : {
            tags : ['health', 'magick']
        }
    });
        → will update custom meters named 'health' and 'magick'

→ Different ways for one same action:
    triggerEvent('mouseover', document.getElementsByClassName('flippable'));
    triggerEvent('mouseover', document.querySelectorAll('.flippable'));
    triggerEvent('mouseover', jQuery('.flippable'));
        → this will 'mouse over' the elements .flippable 
}}}


:: Function/Method List {"position":"1200,300","size":"200,100"}
<h1>Functions and Methods List</h1>
Below, you will find the list of Functions and Methods included in SugarCube, and where they are discussed in this guide.
> ''Note:'' As SugarCube is built on JavaScript, you can use any JavaScript and jQuery functions and methods, even ones you create and define yourself.

<h3>Functions</h3>
* {{{clone()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{either()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{forget()}}} : [[Memorizing Information and Metadata|Function-Metadata]]
* {{{hasVisited()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{lastVisited()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{importScripts()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{importStyles()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{memorize()}}} : [[Memorizing Information and Metadata|Function-Metadata]]
* {{{passage()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{previous()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{random()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{randomFloat()}}} : [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* {{{recall()}}} : [[Memorizing Information and Metadata|Function-Metadata]]
* {{{setPageElement()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{tags()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{temporary()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{time()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{triggerEvent()}}} : [[Triggering Events|Function-Trigger]]
* {{{turns()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{variables()}}} : [[JavaScript-only Functions|Function-JS]]
* {{{visited()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* {{{visitedTags()}}} : [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  

<h3>Methods</h3>
* {{{<Array>.concat()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.concatUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.count()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.countWith()}}} : [[More Methods to change Variables|Method-Variables]]
* {{{<Array>.deleteAll()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.deleteAt()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.deleteFirst()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.deleteLast()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.deleteWith()}}} : [[More Methods to change Variables|Method-Variables]]
* {{{<Array>.first()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.flat()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.includes()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.includesAll()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.includesAny()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.last()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pluck()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pluckMany()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pop()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.push()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.pushUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.random()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.randomMany()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.shift()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.shuffle()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.toShuffled()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.toUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.unshift()}}} : [[Methods and Arrays|Method-Array]]
* {{{<Array>.unshiftUnique()}}} : [[Methods and Arrays|Method-Array]]
* {{{Math.clamp()}}} : [[Methods and Numbers|Method-Number]]
* {{{Math.round()}}} : [[Methods and Numbers|Method-Number]]
* {{{Math.trunc()}}} : [[Methods and Numbers|Method-Number]]
* {{{<String>.count()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.first()}}} : [[Methods and String Variables|Method-String]]
* {{{String.format()}}} : [[More Methods to change Variables|Method-Variables]]
* {{{<String>.includes()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.last()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLocaleLowerCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLowerCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLocaleUpperCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toUpperCase()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toLocaleUpperFirst()}}} : [[Methods and String Variables|Method-String]]
* {{{<String>.toUpperFirst()}}} : [[Methods and String Variables|Method-String]]

<div id="link-menu"><<back "Return to Previous Page">></div>


:: Functions [chapter menu] {"position":"2300,1100","size":"200,100"}
<h1>Harness the Power of Functions</h1>
Functions are JavaScript blocks of code designed to do a specific task, from importing outside scripts, to save information, or setting variables. While some of the functions explained in this section can be used in any passage in combination with SugarCube macros, some should be restricted to the JavaScript passage only.

* [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
* [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
* [[Memorizing Information and Metadata|Function-Metadata]]
* [[Triggering Events|Function-Trigger]]
* [[JavaScript-only Functions|Function-JS]]


:: HTML-Full-List [page int-jscss] {"position":"3300,1200","size":"100,100"}
<h1 id="intstyle-htmlfull">The Full List of Targetable Elements</h1>\
This page includes the full list of targetable elements (with a defined {{{#id}}} or {{{.class}}}) in a Basic SugarCube project (i.e. no custom UI, macro, elements). The HTML page contains other "hidden" element, like the Story date, which are not visible on the page.
> ''Note:'' you can also find the wanted element to target by using the Inspect Tool of your browser.
\
The targetable elements are organised as follow:
* the base elements of a page
* the base elements of the Built-In Menus
* the HTML elements defined in the StyleSheet
* the macro classes

To see how all these elements are styled by default or when special events happen, see the [[Built-In StyleSheets|http://www.motoslave.net/sugarcube/2/docs/#css-built-ins]].
\
<h3>The Base Elements of the Page</h3>\
Assuming that you have not changed the Base UI with {{{StoryInterface}}} and are using all SideBar [[Special Passages|SP-UIBar]], here are the base targetable elements inside a basic page, including the parent/child order.
Inside the {{{html}}} wrapper you will find:
* {{{body}}}
** {{{#init-screen}}} (hidden after the game is loaded)
*** {{{#init-loading}}}
** {{{#ui-overlay}}} (hidden when no popup is active)
** {{{#ui-dialog}}} (hidden when no popup is active)
*** {{{#ui-dialog-titlebar}}}
**** {{{h1#ui-dialog-title}}}
**** {{{button#ui-dialog-close}}}
*** {{{#ui-dialog-body}}}
**** (see below for special elements)
** {{{#ui-bar}}}
*** {{{#ui-bar-tray}}}
**** {{{button#ui-bar-toggle}}}
**** {{{#ui-bar-history}}}
***** {{{button#history-backward}}}
***** {{{button#history-forward}}}
*** {{{#ui-bar-body}}}
**** {{{#title}}}
***** {{{#story-banner}}}
***** {{{h1#story-title}}}
***** {{{#story-subtitle}}}
***** {{{#story-title-separator}}}
***** {{{p#story-author}}}
**** {{{#story-caption}}}
**** {{{nav#menu}}}
***** {{{ul#menu-story}}}
***** {{{ul#menu-core}}}
****** {{{li#menu-item-continue}}}
****** {{{li#menu-item-saves}}}
****** {{{li#menu-item-settings}}}
****** {{{li#menu-item-restart}}}
** {{{#story}}}
*** {{{#passages}}}
*** {{{.passage}}}
** {{{#debug-bar}}} (for Testing/Debug Mode, if [[enabled|DebugAPI]])
\
> ''Note:'' when targetting a base element, you don't have to indicate the type of element ({{{div}}}/{{{h1}}}/{{{button}}}/etc...). However, their specific default CSS settings may affect how they look (e.g. margin).
\
<h3>The Base Elements of the Built-In Menus</h3>\
The targetable elements below can be found in the //Saves//, //Settings//, and //Restart// menus.
\
<h4>The Saves Menu</h4>\
In the body of the //Saves// menu ({{{.saves}}} class), you will find:
* {{{h2}}} (In Browser)
* {{{table#saves-list}}}
** {{{ ... }}}
*** {{{button#saves-load-[i]}}} or {{{button#saves-save-[i]}}}
*** {{{div}}} (Save Name) and {{{div.datestamp}}}
*** {{{button#saves-delete-[i]}}}
* {{{ul.buttons}}}
** {{{button#saves-export}}}
** {{{button#saves-import}}}
** {{{button#saves-clear}}}
* {{{h2}}} (On Disk)
* {{{ul.buttons}}}
** {{{button#saves-disk-save}}}
** {{{button#saves-disk-load}}}
> ''Note:'' since the //Saves// menu includes more than one save slot (and the autosave), replace the [1] with the number of the relevant save slot (starting with 0).
> Other targetable elements includes the rows and cells of the save tables, and the {{{li}}} elements for the buttons.
\
<h4>The Settings Menu</h4>\
The elements inside the //Settings// Menu will depend on what settings were coded in the project's JavaScript. 
Each setting will be coded as follow, with [setting] being the defined name of the setting:
* {{{#setting-body-[setting]}}}
** {{{label#setting-label-[setting]}}}
** {{{#setting-control-[setting]}}} (attached to {{{input}}}, {{{select}}} or {{{button}}})
** {{{p#setting-desc-[setting]}}}
As for the Header, [header] will use the sluggified version of the header text:
* {{{#header-body-[header]}}}
** {{{h2#header-heading-[header]}}}
** {{{p#header-desc-[header]}}}
The bottom of the //Settings// Menu also includes:
* {{{ul.buttons}}}
** {{{button#settings-ok}}}
** {{{button#settings-reset}}}
\
<h4>The Restart Menu</h4>\
The //Restart// Menu only includes on main block inside the body of the popup ({{{.restart}}} class):
* {{{p}}}
* {{{ul.buttons}}}
** {{{button#restart-ok}}}
** {{{button#restart-cancel}}}
\
<h3>The HTML Elements Defined in the StyleSheet</h3>\
Below are the different HTML elements defined in the StyleSheet. 
* clickables: {{{a}}}, {{{button}}}
* interactive: {{{input}}}, {{{select}}}, {{{textarea}}}
* headers: {{{h1}}}, {{{h2}}}
* horizontal rule: {{{hr}}}
* lists: {{{ul}}}, {{{li}}}, {{{ol}}}
* tables: {{{table}}}, {{{tr}}}, {{{th}}}, {{{td}}}
* multimedia: {{{img}}}, {{{audio}}}, {{{video}}}
* other: {{{area}}}, {{{canvas}}}, {{{progress}}}
> ''Note:'' this is not an exhaustive list of HTML elements, and you can even create your own (ex: {{{<y>}}}).
\
<h3>The Macro Classes</h3>\
Some macros, mainly the interactive ones with outputs, will add an extra class to elements to indicate it is an interactive element created by a macro, or that certain outputs were added on the page with a macro.
{{{
    .macro-[name of the macro]
}}}
> //Examples://
{{{
    .macro-link 
    .macro-button
    .macro-linkappend
    .macro-linkprepend
    .macro-replace
    .macro-include
    .macro-type
    .macro-checkbox
    .macro-cycle 
    .macro-listbox
    {...}
}}}
For linking macros and markups, the element can be defined with these classes:
{{{
    .link-internal
    .link-external

    .link-broken
    .link-visited
}}}
Similarly, some macros may see their class change depending on their use.
> //Examples://
{{{
    .macro-linkappend-insert
    .macro-linkprepend-insert
    .macro-linkreplace-insert
    .macro-append-insert
    .macro-prepend-insert
    .macro-replace-insert
    .macro-repeat-insert
    .macro-timed-insert
→ adding new element to the page

    .macro-linkappend-in
    .macro-linkprepend-in
    .macro-linkreplace-in
    .macro-append-in
    .macro-prepend-in
    .macro-replace-in
    .macro-repeat-in
    .macro-timed-in
→ the starting class for page addition 
  when {t8n} is an argument
}}}


:: Index [index] {"position":"1200,100","size":"200,100"}
<h1>Index</h1>\
<h3>The Basics</h3>\
* ''[[About Twine and SugarCube|About]]''
* ''[[Starting with SugarCube|Basics]]''
** [[The Elements on the Page|Basics-UI]]
** [[Linking Passages|Macro-Link-Basic]]
** [[The Basics of Variables|Variables-Base]]
** [[Tracking Information|Macro-Set-Basic]]
** [[Display Variation|Macro-If-Basic]]
** [[Basic Demo|Demo-Basic]]
\
<h3> The Basics+</h3>\
* ''[[SugarCube Markup and Basic Styling|Markup]]''
** [[Basic Text Styling|Markup-Styling]] (long)
** [[Display an Image, and turn an Image into a Link|Markup-Image]]
** [[Showing the Value of a Variable|Markup-Variable]]
** [[Using a Variable inside a Link|Markup-Link]]
** [[Removing a Line-break|Markup-Nobr]]
* ''[[Going Further with the Basics|Macro-Basic]]''
** [[Setting and Changing Variables|Macro-Set]]
** [[Unsetting Variables|Macro-Unset]]
** [[More Conditional Statements|Macro-If]]
** [[Displaying more than text in Links|Macro-Link]]
** [[Display Variables, the Print Macro and Variants|Macro-Print]]
* ''[[Adding some Interactivity|Macro-Interact]]''
** [[Multi or Single Option Choices|Macro-CheckRadio]]
** [[Cycles and Conditional Options|Macro-Cycle]]
*** [[Make the Cycle Macro Accessible|Accessibility-Cycle]]
** [[Listboxes and Conditional Options|Macro-Listbox]]
** [[Player Input in three macros|Macro-Input]]
** [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* ''[[Basic Special Passages|Special-Passage]]''
** [[Headers and Footers|SP-HeaderFooter]]
** [[Special Passages for the UI Bar|SP-UIBar]]
** [[Setting Important Variables before Start|SP-Init]]
** [[Special Passage Demo|SP-Demo]]
* ''[[About JavaScript and the StyleSheet|Base-JS-CSS]]''
* ''[[URLs for Assets and Testing|URL-Types]]''
\
<h3>Intermediate Use</h3>\
* ''[[More SugarCube Markup|Markup-Int]]''  
** [[Special Attributes and Directives|Markup-Attribute]]
** [[Displaying Code and Verbatim Text|Markup-Code-Verbatim]]
** [[Display Small Variation with Templates|Markup-Template]]
* ''[[More Interactivity Macros|Macro-Interact-Adv]]''
** [[Delaying Displaying Text or Running Code|Macro-Timed]]
** [[Displaying Text Letter by Letter|Macro-Type]]
** [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
** [[Using Custom Macro|Custom-Macro]]
* ''[[Macros of Convenience|Macro-Conv]]''
** [[An Alternative to Conditional Statements|Macro-Switch]]
** [[Sending the Player to a Passage|Macro-Goto]]
** [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
*** [[Arbitrarily Long Returns|Long-Return-JS]]
** [[Updating Parts of the Passage|Macro-Do-Redo]]
** [[Including a Passage inside Another|Macro-Include]] 
** [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
** [[Creating and Using a Widget|Macro-Widget]] 
** [[Using JavaScript in the Passage|Macro-Script-Run]]
* ''[[More Special Passages and Tags|Special-Tags]]''
** [[Special Tags creating Special Passages and Functionalities|Tags-Built]]
** [[Process Code Before and After Rendering a Passage|SP-PassageReady-Done]]
** [[Changing the UI/Interface of the Project|SP-StoryInterface]]
** [[Customising Passages with Tags|Tags-CSS]]
** [[Including Assets with Tags|Tags-Asset]]
** [[The Special Variables|SP-Variables]]
* ''[[Harness the Power of Functions|Functions]]''
** [[Cloning Variables, and Random Values Functions|Function-Clone-Random]]
** [[Using Play, Passage, and Tags information|Function-Pass-Tag]]  
** [[Memorizing Information and Metadata|Function-Metadata]]
** [[Triggering Events|Function-Trigger]]
** [[JavaScript-only Functions|Function-JS]]
* ''[[Using Methods to change Variables|Methods]] ''
** [[Methods and String Variables|Method-String]]
** [[Methods and Numbers|Method-Number]]
** [[Methods and Arrays|Method-Array]]
* ''[[Adding Sound with the Audio Macros|Macro-Audio]]''
** [[Setting up the Audio Tracks|CacheAudio]]
** [[Create Track Groups and Playlists|Macro-Group-Playlist]]
** [[Playing Tracks in a Passage|Audio-Macro]]
** [[Other Audio Macros|Audio-Other]]
* ''[[Going further in Styling with CSS and JavaScript|Int-JS-CSS]]''
** [[The Unique Targetable Elements|Int-JS-CSS-Elements]] 
*** [[The Full List of Targetable Elements|HTML-Full-List]] 
** [[Ensuring that Elements Start at the Top when Opened|Int-JS-CSS-Events]]
** [[Import and Change the Font|Int-JS-CSS-Font]]
*** [[Using the SG Icons|Int-JS-CSS-Icons]]
** [[Using the Root and CSS var|Int-JS-CSS-Root]] 
** [[Formatting for Different Screen Size|Int-JS-CSS-Media]] 
** [[Intro to Animation|Int-JS-CSS-Animation]]
** [[Creating Stats, Meter, and Progress Bars|Int-JS-CSS-Stat]] (long) 
** [[Editing the Loading Screen|Int-JS-CSS-LoadingScreen]] 
** [[A Note on Interface Accessibility|Accessibility]]
* ''[[Some Useful Basic APIs|Basic-API]]''
** [[Moving back and forth in the History|Basic-API-Engine]]
** [[Create a PopUp|Basic-API-Dialog]]
** [[Handle the SideBar|Basic-API-UIBar]]
** [[Open the Restart, Saves, and Settings PopUp|Basic-API-UI]]
** [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
** [[Some Useful Configuration API for your Project|Basic-API-Config]]
* ''[[Edit the Built-In Text or Change the Game's Language|Localization]]''
** [[l10nStrings, and How to Edit Them|Local-L10n]]
** [[Localization, and Pre-Translated Templates|Local-Trans]]
** [[Providing Multiple Languages Options In-Game|Local-Setting]]
* ''[[Testing and Debugging your Game|DebugAPI]]''
\
<h3>''Advanced Mode''</h3>\
> ''Note:'' Many of the elements included in the following chapters will require knowledge of JavaScript, jQuery, and understanding of the core processes of SugarCube.
* ''[[Advanced Macros|Macro-Adv]]''
** [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]] 
** [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
** [[Capturing the Value of a Variable|Macro-Capture]]
** [[Emulating PassageDone for one Passage|Macro-Done]]
* ''[[More Variable and Interaction Methods|Methods-Adv]]''
** [[More Methods to change Variables|Method-Variables]]
** [[jQuery Methods and Interactivity|Method-jQuery]]
* ''[[Going Further with Basic APIs and More|API-Adv]]''
** [[More Popups APIs|API-Dialog]]
** [[More SideBar APIs|API-UIBar]]
** [[The Template APIs|TemplateAPI]]
** [[(Un)Locking the Loading Screen|API-Lock]]
* ''[[The Settings API|Settings]]''
** [[Creating a Setting|SettingsBasics]]
** [[Creating a Toggle Setting|SettingsToggle]]
** [[Creating a List Setting|SettingsList]]
** [[Creating a Slider|SettingsRange]]
** [[Going Further with Settings|Settings-More]]
** [[Adding Headers|SettingsHeader]]
* ''[[Going further with the Engine API|Engine-API]]''
** [[Checking the State of the Game|Engine-State]]
** [[Move through the Player's History|Engine-Go]]
** [[(Re-)Play a Passage|Engine-Play]]
** [[Restarting without the Built-In PopUp|Engine-Restart]]
* ''[[The Save APIs and Further Saving Configurations|SaveAPI]]''
** [[Save Objects and Their Contents|SaveAPI-Objects]] 
** [[The Basic APIs of the Save Elements|SaveAPI-General]] 
** [[Managing the Save Slots|SaveAPI-Slots]] 
** [[Managing the Autosave Slot|SaveAPI-Autosave]]
** [[Managing Disk Import and Export|SaveAPI-Disk]]
** [[Managing Base64 saves|SaveAPI-Base64]]
** [[Using Save-related Events|SaveAPI-Events]]
* ''[[More Configuration APIs to Customise Interaction|Config-API]]''
** [[Macro-relevant Configurations|Confic-Macro]]
** [[Editing the Behaviour and Display of Passage Elements|Config-Passage]]
** [[Save Configurations|Config-Saves]]
** [[Other Config APIs|Config-Misc]]
* ''[[Getting the FullScreen Experience|FullScreen]]''
* ''[[Trigger Code with Special Events|Events]]''
** [[Dialog Events|Events-Dialog]]
** [[Passage and Navigation Events|Events-Passage]]
** [[System Events|Events-System]]
** [[Type Macro Events|Events-Type]]
** [[Audio Events|Events-Audio]]
* ''[[Creating your Own Macro|Macro]]''
** [[The Base APIs for Macros|Macro-API]]
** [[Using Macro Context Objects in the handler|Macro-Context]]
* ''[[Managing Story Elements with APIs|StoryAPI]]''
* ''[[Managing Passage Properties with APIs|PassageAPI]]''
* ''[[Dealing with the State of Play|StateAPI]]'' 
** [[Managing the State of Variables|StateAPI-Variable]]
** [[Exploring the Different Moments inside the State|StateAPI-State]]
** [[Using the Story Metadata|StateAPI-Metadata]]
** [[Initialising a Seedable PRNG|StateAPI-PRNG]]
* ''[[Going Further with Audio with APIs|AudioAPI]]''
** [[The SimpleAudio API, the alternative to Audio macros|AudioAPI-General]]
** [[Going further with AudioTrack|AudioApi-Track]]
** [[Going further with AudioRunner|AudioApi-Runner]]
** [[Going further with AudioList|AudioApi-List]]

<div id="link-menu"><<back "Return to Previous Page">></div>


:: Int-JS-CSS [chapter menu] {"position":"3200,1100","size":"200,100"}
<h1>Going further in Styling with CSS and JavaScript</h1>
If you want to change how a page looks or behaves, you will need to edit either the StyleSheet, the JavaScript, or a combination of both. If it is behaviour that needs setting, then you will most likely need the JavaScript. For most visual elements, you should turn to the StyleSheet.

While editing the StyleSheet, you may find the Inspect Tool of your browser to be a useful thing. From testing for different screen sizes and accessibility, to view the source code (HTML/CSS) of the displayed passage, or even messing with the CSS rules without going back and forth between the StyleSheet and the file, the tool will let you ensure a great visual for your project.

* [[The Unique Targetable Elements|Int-JS-CSS-Elements]] 
** [[The Full List of Targetable Elements|HTML-Full-List]] 
* [[Ensuring that Elements Start at the Top when Opened|Int-JS-CSS-Events]]
* [[Import and Change the Font|Int-JS-CSS-Font]]
** [[Using the SG Icons|Int-JS-CSS-Icons]]
* [[Using the Root and CSS var|Int-JS-CSS-Root]] 
* [[Formatting for Different Screen Size|Int-JS-CSS-Media]] 
* [[Intro to Animation|Int-JS-CSS-Animation]]
* [[Creating Stats, Meter, and Progress Bars|Int-JS-CSS-Stat]] (long) 
* [[Editing the Loading Screen|Int-JS-CSS-LoadingScreen]] 
* [[A Note on Interface Accessibility|Accessibility]]


:: Int-JS-CSS-Animation [page int-jscss] {"position":"3200,1500","size":"100,100"}
<h1 id="intstyle-animation">Intro to Animation</h1>
To elevate your project and customize it further, you can decide to animate elements on the page of your game (e.g. text, images, other...). Animations can be as simple as a flicker, to more complex movement over the page. 
\
It might seem daunting to create animations, as animation code published on CodePen and the like can look quite complicated. But, animations rests on only three essential elements in the StyleSheet:
* the {{{@keyframes}}}: defining the trajectory of the animation (e.g. change of position, or colour, or opacity, etc...)
* the {{{animation}}} CSS rule: linking and setting the animation to the relevant block (e.g. length, looping, delay, etc...)
* the element targeted: which can be an HTML markup ({{{h1}}}, {{{span}}}), a class ({{{.class}}}), or an ID ({{{#id}}})
> ''Note:'' certain animations may require the element to have {{{display: block}}}, {{{display: inline-block}}}, {{{position: absolute}}} to work.
\
<h3>{{{@keyframes}}}</h3>\
Every keyframe is set up in the same way:
{{{
    @keyframes animation-name {
        keyframes-selector {css-styles;}
    }
}}}
As such, you will need to indicate the following:
* {{{animation-name}}}: or the name you will give to the animation. 
** For example, let's take {{{flicker}}}.
* {{{keyframes-selector}}}: the percentage in the animation sequence where something changes for the element.
** can be set with percentages ({{{0-100%}}}), or with {{{from}}}/{{{to}}} (same as 0% and 100%), or a combination of both.
*** Here, let's have the flicker happen half-way through the animation (50%).
* {{{css-styles}}}: or the css rules to indicate what changes at that step. 
** Here, the flickering will need {{{opacity}}}.
\
If we combine it all, we get the following example:
{{{
    @keyframes flicker {
          0% { opacity:1; }
         50% { opacity:0; } 
        100% { opacity:1; }
    }
}}}
> ''Note:'' Testing and tweaking is ''very important'' here.
\
<h3>The {{{animation}}} Rule</h3>\
Linking the animation to an element is necessary for the animation to display on the page. The {{{animation}}} CSS rule is a compiled version of 8 different separate rules ({{{animation-[insertname]}}}):
{{{
    animation: name duration timing-function delay iteration-count direction fill-mode play-state;
}}}
To function, it only requires at minimum the following:
{{{
    animation: name duration iteration-count;
}}}
\
So, you will need to define:
* {{{name}}} (or {{{animation-name}}}): the name of the keyframe animation. 
** Here, we defined it as {{{flicker}}}.
* {{{duration}}} (or {{{animation-duration}}}): the duration of the whole animation.
** Let's make it {{{1 second}}} here.
* {{{iteration-count}}} (or {{{animation-iteration-count}}}): how many times the animation goes. 
** Let's make it {{{infinite}}}.
{{{
    animation: flicker 1s infinite;
}}}
\
If you want to go further, you can also defined the following aspects:
* {{{timing-function}}} (or {{{animation-timing-function}}}): indicates the curve of the animation speed (slow start, slow end, etc...) 
* {{{delay}}} (or {{{animation-delay}}}): delaying the start of an animation.
* {{{direction}}} (or {{{animation-direction}}}): whether an animation should be played forward, backward, or alternating.
* {{{fill-mode}}} (or {{{animation-fill-mode}}}): define whether an animation takes the styling in the start of the animation or the one at the end.
* {{{play-state}}} (or {{{animation-play-state}}}): define whether the animation is playing or paused.
\
<h3>Linking to an element</h3>\
Finally, we need to add the {{{animation}}} rule in an element, to make it flicker.
> Assuming the passage has the following block:
{{{
    <span class="flickering">Some Text</span>
}}}
> //In the StyleSheet//:
{{{
    .flickering {
        animation: flicker 1s infinite;
    }
→ the {flicker} animation was added to the span class {flickering}
}}}
> Giving the following result: 
<span class="flickering">Some Text</span>
\
<h3>A note on Accessibility</h3>\
While animations can be quite fun to have, giving some spice to the displayed elements, some players may not find it comfortable. Fast moving elements, flickering animation, or bright flashes, may causes sensory issues for some. It is generally a good idea to warn player of such animation before they start the game, as well as create an [[Accessible Setting|SettingsToggle]], so player can toggle on/off the animation.


:: Int-JS-CSS-Elements [page int-jscss] {"position":"3200,1200","size":"100,100"}
<h1 id="intstyle-elements">The Unique Targetable Elements</h1>
With every project created in SugarCube, the [[base UI|http://www.motoslave.net/sugarcube/2/docs/#html]] displays many elements on the page by default, as well extra when [[Special Passages|Special-Passage]] are used. These elements can be targeted in the StyleSheet with some CSS or in JavaScript.

The elements also have relationships with one another, when they are nested within one another. Depending on where they are located within the nesting, and how the Built-In StyleSheet targets them, any edit made may not just affect the targeted elements but others as well.
> ''Note:'' when an element {{{A}}} is located inside another {{{B}}}, {{{A}}} will be called a child of {{{B}}}, while {{{B}}} is the parent of {{{A}}}. CSS rules in the parent element may affect the child element.
\
<h3>Main Block Elements</h3>\
<table>
    <tr>
        <th>Selector</th><th>Description</th><th>Relationship</th>
    </tr>
    <tr>
        <td>{{{html}}}</td>
        <td>The document element, necessary to set up the HTML page. ''Cannot be included inside'' {{{StoryInterface}}}.
        If a story-passage is tagged, {{{data-tags}}} will be added to this element.
        If the project includes Settings, classes and attributes will be added to this element. 
        The element sets the font size for the whole document.</td>
        <td>{{{html}}} is the parent element to all elements below, but most closely to {{{body}}}</td>
    </tr>
    <tr>
        <td>{{{body}}}</td>
        <td>The body of the page. ''Cannot be included in'' {{{StoryInterface}}}.
        If a story-passage is tagged, the {{{data-tags}}} and special classes will be added to this element.
        The element sets the default background and font colours.</td>
        <td>{{{body}}} is the child element of {{{html}}}, and the parent element of all the elements below, most closely {{{#ui-dialog}}}, {{{#ui-bar}}}, and {{{#story}}}.</td>
    </tr>
    <tr>
        <td>{{{#ui-dialog}}}</td>
        <td>The popup element container. ''Cannot be included in'' {{{StoryInterface}}}.</td>
        <td>{{{#ui-dialog}}} is the child element of {{{body}}}, and the parent element of {{{#ui-dialog-titlebar}}} and {{{#ui-dialog-body}}}. </td>
    </tr>
    <tr>
        <td>{{{#ui-bar}}}</td>
        <td>The left sidebar. Can be included in {{{StoryInterface}}}, if wanted.
        This element will affect how {{{#story}}} is positioned on the page.</td>
        <td>{{{#ui-bar}}} is a child element of {{{body}}}, and the parent element of the Special Passage elements, among others.</td>
    </tr>
    <tr>
        <td>{{{#story}}}</td>
        <td>Container for the {{{#passages}}} element. ''Cannot be included inside'' {{{StoryInterface}}}.
        This element's width and position is affected by {{{#ui-bar}}}'s position on the page.</td>
        <td>{{{#story}}} is the child element of {{{body}}}, and the parent of {{{#passages}}}</td>
    </tr>
    <tr>
        <td>{{{#passages}}}</td>
        <td>Container for the passage element. ''HAS TO BE included in'' {{{StoryInterface}}}.
        All created passages will appear as a children of this element, in {{{.passage}}}.</td>
        <td>{{{#passages}}} is the child element of {{{#story}}}, and the parent element of {{{.passage}}}</td>
    </tr>
    <tr>
        <td>{{{.passage}}}</td>
        <td>The passage element. ''Cannot really be included'' in {{{StoryInterface}}}.
        The active story-passage will determine the ID of this element.
        If a story-passage is tagged, the {{{data-tags}}} and special classes will be added to this element.</td>
        <td>{{{.passage}}} is the child element of {{{#passages}}}, and the parent element of any element coded in the story-passage.</td>
    </tr>
</table>
> ''Note:'' When using the base UI, you won't need to use the {{{StoryInterface}}} [[Special Passage|SP-StoryInterface]].
> You can find the complete list of targetable elements in a base UI [[here|HTML-Full-List]].
\
<h3>Notes on the Links Elements and Special Link Classes</h3>\
targeting the links with the element {{{a}}} or the buttons with {{{button}}} without including a parent element before, the CSS rules will affect every link and button in the project (the passage, the sidebar, and the dialog box). On the other hand, if you indicate {{{.passage a}}} or {{{.passage button}}} in the StyleSheet, it will only target the links or buttons in the passage element.

The {{{a}}} element will affect any interactive macro using a link, such as {{{<<link>>}}}, {{{<<linkappend>>}}}, {{{<<linkprepend>>}}}, {{{<<linkreplace>>}}}, and the {{{<<cycle>>}}} macros, as well as the {{{[[link]]}}} markup. targeting a certain macro can be done as follow: {{{a.macro-[name]}}} or {{{.macro-[name]}}}.
> ''Note:'' targeting the macro class will not affect the {{{[[link]]}}} markup.

To differentiate internal and external links, aside from the icon at the end of the link, a specific class is added to every link(-related) element: {{{.link-internal}}} or {{{.link-external}}}. Only the links going to another website will get the second class, all others will get the first.
> ''Note:'' the macros listed in the paragraph above will have the {{{.link-internal}}} class. 

To change how a link looks when hovered/in focus/being clicked on, compared to the link when not in use, you can add a special selector to the link: {{{:hover}}}, {{{:focus}}}, and {{{:active}}}. If all these three states will look the same, {{{a:hover, a:focus { /* CSS rules */ }}}} will be sufficient.

If the {{{a}}} has not been modified in the StyleSheet, you may notice some links going nowhere will be formatted differently than working links. This is because those "broken" links have a special class: {{{.link-broken}}}.
If you did modify {{{a}}} in the StyleSheet, you can always add {{{a.link-broken}}} to it to be able to see those broken link during testing/playing.

If the project should display to the player whether a passage has been visited through the link, you can target the {{{.link-visited}}} class.
> ''Note:'' the class is not enabled by default, but should be unlocked with {{{Config.addVisitedLinkClass = true;}}} in the JavaScript. See more about it, [[here|Config-Misc]].


:: Int-JS-CSS-Events [page int-jscss] {"position":"3200,1300","size":"100,100"}
<h1 id="intstyle-events">Ensuring that Elements Start at the Top when Opened</h1>
When displaying elements requiring scrolling, like going from one long passage to another, or opening multiple long popups one after the other, the system might not automatically scroll the element to the top of the page/element. 
> ''Note:'' This should only apply to a modified UI.

However, this can be easily fixed with a bit of jQuery in the JavaScript passage, and [[Events]]:
{{{
    $(document).on(":passagedisplay", function() {
        $("#passages").scrollTop(0);
    });
}}}
> //For the Dialog Box://
{{{
    $(document).on(":dialogopened", function() {
        $("#ui-dialog-body").scrollTop(0);
    });
}}}
> ''Note:'' you can change {{{#passages}}} with any other relevant container, like {{{#story}}}.


:: Int-JS-CSS-Font [page int-jscss] {"position":"3300,1300","size":"100,100"}
<h1 id="intstyle-fonts">Import and Change the Font</h1>
As different devices come with different fonts, you may want to have a unified experience across the player base, through one-same font. For this, you will need to import the chosen font(s) and define it(them) in the StyleSheet.
As with [[images|URL-Types]], how to import fonts will depend on the location of the font. A local import will require a different rule than an import from a third-party server (e.g. Google).

> ''IMPORTANT:'' the import of a font should be ''the first thing'' in your StyleSheet, before any other CSS rules!
\
<h3>The Different Imports</h3>\
For a server import, the {{{@import url()}}} should be used. You only need to add the relevant URL of the font. For example, Google will provide one on their GoogleFont website, just as the one below.
{{{
    @import url('https://fonts.googleapis.com/css2?family=Georgia:wght@400;700&display=swap');
}}}
> ''Note:'' when selecting multiple fonts (type or families), Google will provide one link for all selected fonts.
\
Depending on the services used, the URL for the font may look differently. For comparison, here's the one of an old FontAwesome version:
{{{
    @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css’);
}}}
> ''Note:'' SugarCube already uses a restricted version of FontAwesome, built in the format. You can read more about it [[here|Int-JS-CSS-Icons]].

> ''IMPORTANT'' When using an online import, you should ensure to always get the official import URL.

On the other hand, local import will use the {{{@font-face}}}, with a relative URL, and require a few more information. This will include the name of the font-family, the URL, the format of the file, the style (normal/italic) and the weight (400-normal/700-bold).
> ''Note:'' while it requires a few more lines of code, local imports are not dependent on server up-times or shared user information.
\
For example, trying to import an OpenDyslexic font (normal, italics, bold, bold+italic):
{{{
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-Regular.otf) format("opentype");
        font-style: normal;
        font-weight: 400;
    }
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-Italic.otf) format("opentype");
        font-style: italic;
        font-weight: 400;
    }
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-BoldItalic.otf) format("opentype");
        font-style: italic;
        font-weight: 700;
    }
    @font-face {
        font-family: "Dyslexic";
        src: url(fonts/OpenDyslexic-Bold.otf) format("opentype");
        font-style: normal;
        font-weight: 700;
    }
}}}
> ''Note:'' a new {{{@font-face}}} is required for each new font type/style.
\
<h3>Changing the Font of the project</h3>\
In the Base UI, the font is defined inside the {{{html}}} element. If the new font should apply to the whole project, you can simply do: 
{{{
    html {
        font-family: 'Font-Name', type;
    }

→ For the OpenDyslexic, "imported" above:
    html {
        font-family: 'Dyslexic', sans-serif;
    }
}}}

If the font should only apply to a specific element, you must target that element instead. 
For example, if you want to change the font of the header:
{{{
    h1 {
        font-family: 'Roboto', sans-serif;
    }

→ to target the title of the popup:
    #ui-dialog-title {
        font-family: 'Bacasime Antique', serif;
    }
}}}
\
<h3>Let the Player Change the Font*</h3>\
*from a preset list of fonts that you set up in the code.

To accommodate players, you can let them change the reading font through a [[List Setting|SettingsList]], within which you have indicated a list of imported fonts (serif, sans-serif, monospace) to choose from.
For accessibility, it is recommended to have multiple legible //serif// and //sans-serif// fonts, especially for story text (//monospace// are pretty good too!).
> ''Note:'' you can find a Font setting in my [[Setting Template|https://manonamora.itch.io/twine-sugarcube-templates]].

Assuming that a font //Georgia//, //Montserrat// and //OpenDyslexic// have been imported, the code below could be added to the JavaScript:
{{{
    var settingFontFamily = ["Georgia", "Montserrat", "OpenDyslexic"];
    var fontFamily = function() {
        var $html = $("html");
            $html.removeClass("sansserif serif opendyslexic");
        switch (settings.fontFamily) {
            case "Georgia":
                $html.addClass("serif");
                break;
            case "Montserrat":
                $html.addClass("sansserif");
                break;
            case "OpenDyslexic":
                $html.addClass("opendyslexic");
                break;
        }
    };
    Setting.addList("fontFamily", {
        label       : "Change font style.",
        list        : settingFontFamily,
        default     : "Georgia",
        onInit      : fontFamily,
        onChange    : fontFamily
    });
}}}
And in the CSS:
{{{
    .sansserif body {font-family: var(--sansserif);}
    .opendyslexic body {font-family: var(--opendyslexic);}
    .serif body {font-family: var(--serif);}
}}}
> ''Note:'' this will affect all elements on the page. Change the {{{body}}} to another element, if you want to target only one spot.


:: Int-JS-CSS-Icons [page int-jscss] {"position":"3100,1500","size":"100,100"}
<h1 id="intstyle-icons">Using the SG Icons</h1>
SugarCube includes a custom icon font within the format, created as a subset of the Free Solid [[Font Awesome|https://fontawesome.com]] icon font (v.5.15.2). Named {{{sc-icons}}}, the font is responsible for all the icons of the interface. You can find all the elements using the icon font in the [[Built-In StyleSheets|http://www.motoslave.net/sugarcube/2/docs/#css-built-ins]].
\
> //From the SideBar StyleSheet://
{{{
    #ui-bar-tray button::before {
        @mixin sc-icons-properties;
    }
 → Assigns the icon font as font-family (see below)

    #ui-bar-tray #history-backward::before {
        content: "\f060";
    }
 → Displays the Left Arrow icon 

    #ui-bar-tray #history-jumpto::before {
        content: "\f0e7";
    }
 → Displays the Right Arrow icon
}}}
> ''Note:'' {{{@mixin sc-icons-properties;}}} only works in the Built-in StyleSheet, see below for the correct properties to use.
\
<h3>Set up the Icon Font in the StyleSheet</h3>\
While the Built-in StyleSheet use {{{@mixin sc-icons-properties;}}} to load the icon font properties, this line will ''not'' work in your project StyleSheet (because it is technically SASS and not not CSS). As such, if you want to use {{{sc-icon}}} for any element of the interface, built-in or custom, you will need to include the font CSS properties for all needed elements to display those icons properly. 

To do so, simply add the following where necessary:
{{{
    font-family: sc-icons !important;
    font-style: normal;
    font-weight: normal;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}}}
> //Example://
{{{
    #ui-dialog-title::before {
        font-family: sc-icons !important;
        font-style: normal;
        font-weight: normal;
        font-variant: normal;
        line-height: 1;
        speak: never;
        text-rendering: auto;
        text-transform: none;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
 → to add an icon before the title of a popup 

    .icons {
        font-family: sc-icons !important;
        font-style: normal;
        font-weight: normal;
        font-variant: normal;
        line-height: 1;
        speak: never;
        text-rendering: auto;
        text-transform: none;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
 → to display icons in elements with class {.icons}
}}}
\
<h3>Use the Icons</h3>\
Each icon has a hexadecimal reference ID, which you can use to include them where you need it. However, depending on where you are using the icon, you will need a different prefix before the reference. For example:
* {{{\uf004}}} in JavaScript, with the prefix {{{\u}}} 
* {{{\f004}}} in the StyleSheet, with the prefix {{{\}}} 
* {{{&#xf004;}}} in HTML (the passagE), with the prefix {{{&#x}}} ''AND'' the postfix {{{ ; }}} 
** 
This formatting is also what you can use for other icon fonts, as well as [[Unicode characters|https://en.wikipedia.org/wiki/Unicode]].
\
> //Examples://
{{{
  → in JavaScript
    var Omega = '\uf0e7';

  → in the StyleSheet
    content: "\f0e7";

  → in a passage
    <span class="icons">&#xf0e7</span>
}}}
> ''Note:'' in HTML, you will need to wrap the icon with an element with a defined class, which includes the icon font property. For example, this last example would look like: <span class="icons">&#xf0e7</span>
\
<h3>Icon Font References<\h3>\
The {{{sc-icon}}} includes 120 icons, displayed and referenced below:
<<nobr>>
<div id="icons-wrap">
    <span class="icons">
        <x>&#xf002;</x>
        {{{f002}}}
    </span>
    <span class="icons">
        <x>&#xf004;</x>
        {{{f004}}}
    </span>
    <span class="icons">
        <x>&#xf005;</x>
        {{{f005}}}
    </span>
    <span class="icons">
        <x>&#xf00c;</x>
        {{{f00c}}}
    </span>
    <span class="icons">
        <x>&#xf00d;</x>
        {{{f00d}}}
    </span>
    <span class="icons">
        <x>&#xf00e;</x>
        {{{f00e}}}
    </span>
    <span class="icons">
        <x>&#xf010;</x>
        {{{f010}}}
    </span>
    <span class="icons">
        <x>&#xf011;</x>
        {{{f011}}}
    </span>
    <span class="icons">
        <x>&#xf013;</x>
        {{{f013}}}
    </span>
    <span class="icons">
        <x>&#xf015;</x>
        {{{f015}}}
    </span>
    <span class="icons">
        <x>&#xf019;</x>
        {{{f019}}}
    </span>
    <span class="icons">
        <x>&#xf023;</x>
        {{{f023}}}
    </span>
    <span class="icons">
        <x>&#xf026;</x>
        {{{f026}}}
    </span>
    <span class="icons">
        <x>&#xf027;</x>
        {{{f027}}}
    </span>
    <span class="icons">
        <x>&#xf028;</x>
        {{{f028}}}
    </span>
    <span class="icons">
        <x>&#xf02e;</x>
        {{{f02e}}}
    </span>
    <span class="icons">
        <x>&#xf048;</x>
        {{{f048}}}
    </span>
    <span class="icons">
        <x>&#xf049;</x>
        {{{f049}}}
    </span>
    <span class="icons">
        <x>&#xf04a;</x>
        {{{f04a}}}
    </span>
    <span class="icons">
        <x>&#xf04b;</x>
        {{{f04b}}}
    </span>
    <span class="icons">
        <x>&#xf04c;</x>
        {{{f04c}}}
    </span>
    <span class="icons">
        <x>&#xf04d;</x>
        {{{f04d}}}
    </span>
    <span class="icons">
        <x>&#xf04e;</x>
        {{{f04e}}}
    </span>
    <span class="icons">
        <x>&#xf050;</x>
        {{{f050}}}
    </span>
    <span class="icons">
        <x>&#xf051;</x>
        {{{f051}}}
    </span>
    <span class="icons">
        <x>&#xf052;</x>
        {{{f052}}}
    </span>
    <span class="icons">
        <x>&#xf053;</x>
        {{{f053}}}
    </span>
    <span class="icons">
        <x>&#xf054;</x>
        {{{f054}}}
    </span>
    <span class="icons">
        <x>&#xf055;</x>
        {{{f055}}}
    </span>
    <span class="icons">
        <x>&#xf056;</x>
        {{{f056}}}
    </span>
    <span class="icons">
        <x>&#xf057;</x>
        {{{f057}}}
    </span>
    <span class="icons">
        <x>&#xf058;</x>
        {{{f058}}}
    </span>
    <span class="icons">
        <x>&#xf059;</x>
        {{{f059}}}
    </span>
    <span class="icons">
        <x>&#xf05a;</x>
        {{{f05a}}}
    </span>
    <span class="icons">
        <x>&#xf05e;</x>
        {{{f05e}}}
    </span>
    <span class="icons">
        <x>&#xf060;</x>
        {{{f060}}}
    </span>
    <span class="icons">
        <x>&#xf061;</x>
        {{{f061}}}
    </span>
    <span class="icons">
        <x>&#xf062;</x>
        {{{f062}}}
    </span>
    <span class="icons">
        <x>&#xf063;</x>
        {{{f063}}}
    </span>
    <span class="icons">
        <x>&#xf065;</x>
        {{{f065}}}
    </span>
    <span class="icons">
        <x>&#xf066;</x>
        {{{f066}}}
    </span>
    <span class="icons">
        <x>&#xf067;</x>
        {{{f067}}}
    </span>
    <span class="icons">
        <x>&#xf068;</x>
        {{{f068}}}
    </span>
    <span class="icons">
        <x>&#xf06a;</x>
        {{{f06a}}}
    </span>
    <span class="icons">
        <x>&#xf06e;</x>
        {{{f06e}}}
    </span>
    <span class="icons">
        <x>&#xf070;</x>
        {{{f070}}}
    </span>
    <span class="icons">
        <x>&#xf071;</x>
        {{{f071}}}
    </span>
    <span class="icons">
        <x>&#xf077;</x>
        {{{f077}}}
    </span>
    <span class="icons">
        <x>&#xf078;</x>
        {{{f078}}}
    </span>
    <span class="icons">
        <x>&#xf089;</x>
        {{{f089}}}
    </span>
    <span class="icons">
        <x>&#xf08d;</x>
        {{{f08d}}}
    </span>
    <span class="icons">
        <x>&#xf093;</x>
        {{{f093}}}
    </span>
    <span class="icons">
        <x>&#xf09c;</x>
        {{{f09c}}}
    </span>
    <span class="icons">
        <x>&#xf0a0;</x>
        {{{f0a0}}}
    </span>
    <span class="icons">
        <x>&#xf0c1;</x>
        {{{f0c1}}}
    </span>
    <span class="icons">
        <x>&#xf0c2;</x>
        {{{f0c2}}}
    </span>
    <span class="icons">
        <x>&#xf0c7;</x>
        {{{f0c7}}}
    </span>
    <span class="icons">
        <x>&#xf0c9;</x>
        {{{f0c9}}}
    </span>
    <span class="icons">
        <x>&#xf0d0;</x>
        {{{f0d0}}}
    </span>
    <span class="icons">
        <x>&#xf0d7;</x>
        {{{f0d7}}}
    </span>
    <span class="icons">
        <x>&#xf0d8;</x>
        {{{f0d8}}}
    </span>
    <span class="icons">
        <x>&#xf0d9;</x>
        {{{f0d9}}}
    </span>
    <span class="icons">
        <x>&#xf0da;</x>
        {{{f0da}}}
    </span>
    <span class="icons">
        <x>&#xf0e7;</x>
        {{{f0e7}}}
    </span>
    <span class="icons">
        <x>&#xf0eb;</x>
        {{{f0eb}}}
    </span>
    <span class="icons">
        <x>&#xf0fe;</x>
        {{{f0fe}}}
    </span>
    <span class="icons">
        <x>&#xf10d;</x>
        {{{f10d}}}
    </span>
    <span class="icons">
        <x>&#xf10e;</x>
        {{{f10e}}}
    </span>
    <span class="icons">
        <x>&#xf110;</x>
        {{{f110}}}
    </span>
    <span class="icons">
        <x>&#xf127;</x>
        {{{f127}}}
    </span>
    <span class="icons">
        <x>&#xf137;</x>
        {{{f137}}}
    </span>
    <span class="icons">
        <x>&#xf138;</x>
        {{{f138}}}
    </span>
    <span class="icons">
        <x>&#xf139;</x>
        {{{f139}}}
    </span>
    <span class="icons">
        <x>&#xf13a;</x>
        {{{f13a}}}
    </span>
    <span class="icons">
        <x>&#xf13e;</x>
        {{{f13e}}}
    </span>
    <span class="icons">
        <x>&#xf141;</x>
        {{{f141}}}
    </span>
    <span class="icons">
        <x>&#xf142;</x>
        {{{f142}}}
    </span>
    <span class="icons">
        <x>&#xf144;</x>
        {{{f144}}}
    </span>
    <span class="icons">
        <x>&#xf146;</x>
        {{{f146}}}
    </span>
    <span class="icons">
        <x>&#xf14a;</x>
        {{{f14a}}}
    </span>
    <span class="icons">
        <x>&#xf150;</x>
        {{{f150}}}
    </span>
    <span class="icons">
        <x>&#xf151;</x>
        {{{f151}}}
    </span>
    <span class="icons">
        <x>&#xf152;</x>
        {{{f152}}}
    </span>
    <span class="icons">
        <x>&#xf185;</x>
        {{{f185}}}
    </span>
    <span class="icons">
        <x>&#xf186;</x>
        {{{f186}}}
    </span>
    <span class="icons">
        <x>&#xf188;</x>
        {{{f188}}}
    </span>
    <span class="icons">
        <x>&#xf191;</x>
        {{{f191}}}
    </span>
    <span class="icons">
        <x>&#xf1ab;</x>
        {{{f1ab}}}
    </span>
    <span class="icons">
        <x>&#xf1dd;</x>
        {{{f1dd}}}
    </span>
    <span class="icons">
        <x>&#xf1e0;</x>
        {{{f1e0}}}
    </span>
    <span class="icons">
        <x>&#xf1f8;</x>
        {{{f1f8}}}
    </span>
    <span class="icons">
        <x>&#xf204;</x>
        {{{f204}}}
    </span>
    <span class="icons">
        <x>&#xf205;</x>
        {{{f205}}}
    </span>
    <span class="icons">
        <x>&#xf240;</x>
        {{{f240}}}
    </span>
    <span class="icons">
        <x>&#xf241;</x>
        {{{f241}}}
    </span>
    <span class="icons">
        <x>&#xf242;</x>
        {{{f242}}}
    </span>
    <span class="icons">
        <x>&#xf243;</x>
        {{{f243}}}
    </span>
    <span class="icons">
        <x>&#xf244;</x>
        {{{f244}}}
    </span>
    <span class="icons">
        <x>&#xf28b;</x>
        {{{f28b}}}
    </span>
    <span class="icons">
        <x>&#xf28d;</x>
        {{{f28d}}}
    </span>
    <span class="icons">
        <x>&#xf2ea;</x>
        {{{f2ea}}}
    </span>
    <span class="icons">
        <x>&#xf2ed;</x>
        {{{f2ed}}}
    </span>
    <span class="icons">
        <x>&#xf2f1;</x>
        {{{f2f1}}}
    </span>
    <span class="icons">
        <x>&#xf2f9;</x>
        {{{f2f9}}}
    </span>
    <span class="icons">
        <x>&#xf31e;</x>
        {{{f31e}}}
    </span>
    <span class="icons">
        <x>&#xf35d;</x>
        {{{f35d}}}
    </span>
    <span class="icons">
        <x>&#xf381;</x>
        {{{f381}}}
    </span>
    <span class="icons">
        <x>&#xf382;</x>
        {{{f382}}}
    </span>
    <span class="icons">
        <x>&#xf410;</x>
        {{{f410}}}
    </span>
    <span class="icons">
        <x>&#xf55a;</x>
        {{{f55a}}}
    </span>
    <span class="icons">
        <x>&#xf56d;</x>
        {{{f56d}}}
    </span>
    <span class="icons">
        <x>&#xf56e;</x>
        {{{f56e}}}
    </span>
    <span class="icons">
        <x>&#xf56f;</x>
        {{{f56f}}}
    </span>
    <span class="icons">
        <x>&#xf574;</x>
        {{{f574}}}
    </span>
    <span class="icons">
        <x>&#xf5c0;</x>
        {{{f5c0}}}
    </span>
    <span class="icons">
        <x>&#xf6a9;</x>
        {{{f6a9}}}
    </span>
    <span class="icons">
        <x>&#xf78c;</x>
        {{{f78c}}}
    </span>
    <span class="icons">
        <x>&#xf7d9;</x>
        {{{f7d9}}}
    </span>
    <span class="icons">
        <x>&#xf829;</x>
        {{{f829}}}
    </span>
    <span class="icons">
        <x>&#xf82a;</x>
        {{{f82a}}}
    </span>
</div>
<</nobr>>


:: Int-JS-CSS-LoadingScreen [page int-jscss] {"position":"3200,1600","size":"100,100"}
<h1 id="intstyle-load">Editing the Loading Screen</h1>
If you are looking to change how the Loading Screen looks, to fit your project better, you will need to use a combination of JavaScript/jQuery and CSS. Since there is not Special Passage to edit the content of the Loading Screen, JavaScript/jQuery will help you empty the Built-In elements and add the one you wish.
\
<h3>The Loading Screen</h3>\
The Loading Screen is composed of two elements: {{{#init-loading}}} nested inside {{{#init-screen}}}. {{{#init-loading}}} is the animated element: a rounded square, where only the top and bottom borders are coloured, with a spinning animation
{{{
    html[data-init="loading"] #init-loading {
        display: block;
        border: 24px solid transparent;
        border-radius: 50%;
        border-top-color: #7f7f7f;
        border-bottom-color: #7f7f7f;
        width: 100px;
        height: 100px;
        animation: init-loading-spin 2s linear infinite;
    }
}}}
> ''Note:'' there are more CSS rules at play here. You may want to [[lock to Loading Screen|API-Lock]] and use the Inspect Tool when testing code.
\
If you just want to edit what is already there, you can do so in the JavaScript:
{{{
    $("#init-loading").css({ animation: "none", border: "none", width: "100%", height: "100%" });
→ this will remove the current loading animation
  and size the element to the screen
}}}
Or directly in the StyleSheet:
{{{
    html[data-init="loading"] #init-loading {
        /* New CSS code */
    }
}}}
> ''Note:'' if you are planning to add things to {{{#init-loading}}}, you may want to edit its CSS rules too.

If you are looking to add elements to {{{#init-loading}}}, like the logo of SugarCube bouncing around, you will need the following:
{{{
    $("#init-loading").empty().append('/* the new elements */');
}}}
Inside the {{{.append()}}}, you should indicate the HTML elements to add. A {{{<div>}}}, a {{{<span>}}}, an {{{<img>}}}... Whatever you end up adding should be edited in the StyleSheet.
{{{
    #init-loading [element] {
        /* CSS rules */
    }
}}}
\
<h3>Adding a Splash Screen</h3>\
A Splash Screen is a a graphical element appearing when a program/game is launching. It will often contain an image or logo of the program/game or developer/company. 
In SugarCube, you can create a Splash screen which would fade in-and-out, with some JavaScript and CSS, by adding an overlay on the page.
> ''Note:'' the code below was taken from this [[Forum page|https://twinery.org/forum/discussion/7910/intro-screen]], and assumes an image should appear on the screen and the Base SugarCube StyleSheet is used.
\
> In the JavaScript
{{{
    (function () {
        // Duration of the splash image's fade in.
        var fadeIn  = 3000; // in milliseconds

        // Delay before the splash screen begins to fade out.
        var linger  = 6000; // in milliseconds

        // Duration of the splash screen's fade out.
        var fadeOut = 3000; // in milliseconds

        // Splash image.
        var $image  = $('<img src="splash-image.jpg">').hide();

        // Display the splash screen.
        $(document.body)
            .append('<div id="splash-screen"></div>')
            .find('#splash-screen')
                .append($image)
                .find('img')
                    .fadeIn(fadeIn)
                    .end()
                .delay(linger)
                .fadeOut(fadeOut);

        // Set up the removal of the splash screen.
        setTimeout(function () {
            $('#splash-screen').remove();
        }, fadeIn + linger + fadeOut + 1000);
    })();
}}}
> In the StyleSheet:
{{{
    #splash-screen {
        position: fixed;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        z-index: 100;
        background-color: #111;
        color: #eee;
    }
    #splash-screen > img {
        display: block;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translateX(-50%) translateY(-50%);
    }
}}}


:: Int-JS-CSS-Media [page int-jscss] {"position":"3300,1400","size":"100,100"}
<h1 id="intstyle-media">Formatting for Different Screen Size</h1>
While the Base UI of SugarCube is already optimised for different screens/devices, any change in the interface, whether it be changing the size and display of elements in the StyleSheet or in {{{StoryInterface}}}, will need to be fitted for those different screen sizes. 

This can be done with the {{{@media}}} rule inside the StyleSheet.
{{{
    @media screen and (size) {
        [element] {
            /* CSS Rule */
        }
    }
}}}
Inside the {{{(size)}}}, you can target a specific range or screen size or ratio to apply different CSS rules. You will need to use as many {{{@media}}} rules as your interface would require (it will depend on the elements on the page). Each iteration of this rule should be ordered from most-restrictive size/ratio range to most-inclusive (you're essentially creating conditional statements).
> //Example://
{{{
    #passages {
        width: 50vw;
    }

    @media screen and (max-width: 585px) {
        #passages {
            width: 100%;
        }
    }

    @media screen and (max-width: 800px) {
        #passages {
            width: 85%;
        }
    }
}}}
If the screen used is 585px wide or smaller, the width of the passage will take the whole screen. For screen size is larger than wider than 585px but 800px wide or smaller, the width of the passage will take 85% of the screen. If the screen size is larger than 800px, the width of the passage will be half of the screen width.


:: Int-JS-CSS-Root [page int-jscss] {"position":"3200,1400","size":"100,100"}
<h1 id="intstyle-root">Using the Root and CSS var</h1>
As the UI gets more complex, whether because of its base customisation, or with the addition of [[Settings]], you may want to organise certain values within the StyleSheet, like colours, fonts, or asset URL. This can be done through the creation of CSS variables ({{{--var}}}) inside the {{{:root}}} selector.
> ''Note:'' this is used quite often in templates, to make changing colours of the UI easier for the user. Instead of finding all the different iterations of a value, there is only one to change!
\
In your StyleSheet, after any imported element:
{{{
    :root {
        /* the listed variable */
    }

    :root {
        --sansserif: 'Montserrat', sans-serif;
        --font-colour: #000;
        --dm-font-colour: #eee;
        --width: 50px;
        --timer: 3s;
        --gradient: linear-gradient(-90deg, blue, green, red);
    }
}}}
> ''Note:'' new versions of {{{:root}}} can be included inside the {{{@media}}} selector if a certain variable need to change for a different screen size.

The CSS variable can then be used as many times as needed in relevant CSS rules in other elements:
{{{
    .passage {
        color: var(--font-colour);
    }
    .dm #ui-dialog-body {
        color: var(--dm-font-colour);
    }
    .sansserif .passage {
        font-family: var(--sansserif);
    }
}}}
>''Note:'' the classes {{{.dm}}} and {{{.sansserif}}} would have been created with a [[Setting API|SettingsList]].
\
Setting a CSS variables can also be done outside of {{{:root}}}:
{{{
    .parent-element {
        --color: blue;
    }
    .child-element-1 {
        background : var(--color);
    }
    .child-element-2 {
        color: var(--color);
    }
}}}


:: Int-JS-CSS-Stat [page int-jscss] {"position":"3300,1500","size":"100,100"}
<h1 id="intstyle-stats">Creating Stats, Meter, and Progress Bars</h1>
Whether to show a character's abilities or affections, or a visual timer for quick-time event actions, these bars will allows for a meaningful visual to display the value of a variable, aside from a number.
There are different ways of achieving this, namely:
* using the {{{<progress>}}} or the {{{<meter>}}} HTML elements 
* building it from scratch with {{{<div>}}} or {{{<span>}}} elements 
* using custom macros (like [[Chapel's|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/meter-macros.md]]), which often ends up doing one of the options above but with more pazaaz and less HTML to deal with.
** See the custom macro's documentation for use.
\
<h3>The {{{<progress>}}} HTML element</h3>\
Like it's name suggests, {{{<progress>}}} is an HTML element used to create a progress bar. While it //can// be used for static bars, this element is more meant to represent the completion of a task/a timer.
<progress max="100"></progress> (indeterminate form)
<progress value="43" max="100"></progress> (determinate form)
> ''Note:'' when unstyled, the progress bar will look different between browsers.
\
The element had two specific attributes:
* {{{max}}} (optional) to indicate the completion value.
** default is 1.0
* {{{value}}} to indicate the current state of the progress. 
** must either be {between 0.0 and 1.0 incl.} or {less than or equal to the {{{max}}}}
** if used but left empty, you will get its indeterminate form 
** if not indicated, you will get its indeterminate form
> ''Note:'' the minimum will always be 0.
{{{
    <progress value="" max="100"></progress>
    <progress max="100"></progress> 
→ indeterminate form

    <progress value="43" max="100"></progress> 
    <progress value="0.43"></progress> 
→ determinate form
}}}
If either the {{{value}}} or the {{{max}}} should be related to the value of a set variable, you will need to use the {{{@}}} [[directive|Markup-Attribute]] to link it.
Assuming that {{{<<set $intext to 42>>}}}: <<set $intext to 42>>
{{{
    <progress @value="$intext" max="100"></progress>
}}}
→ will render as: <progress @value="$intext" max="100"></progress>

The {{{<progress>}}} element will also accept other global attributes, such as {{{.class}}}, {{{#id}}}, or ARIA-related elements. These attributes can make it easier to target a specific progress bar during styling.

If you want the {{{<progress>}}} element to look the same across browsers, you will need to edit the StyleSheet:
* {{{progress}}} to target the {{{<progress>}}} elements as a whole 
* {{{progress:not([value])}}} to target the {{{<progress>}}} if {{{value}}} is not indicated
* {{{progress:indeterminate}}} to target {{{<progress>}}} elements if {{{value}}} is not indicated or defined
* {{{progress[value]}}} to target {{{<progress>}}} elements if {{{value}}} is indicated (defined or empty)
\
To edit the value bar however, you will need to use browser specific Pseudo-Code:
* For Chrome and Chromium browsers:
** {{{::-webkit-progress-bar}}} to edit the appearance of the background bar 
** {{{::-webkit-progress-value}}} to edit the appearance of the value bar
* For Firefox :
** {{{no-pseudo-code}}} to edit the appearance of the background bar 
** {{{::-moz-progress-bar}}} to edit the appearance of the value bar
> //Example, if the progress bar has the id:// {{{#test-bar}}}
{{{
    #test-bar {
        background: #0b1f0b;
        width: 100%;
        height: 2em;
        border-radius: 20px;
        border: 2px solid #013c01;
    }
→ will set the base for the whole element
  + the background for Firefox

    #test-bar::-moz-progress-bar {
        background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
        border-radius: 20px;
    }
→ will set the appearance of the value bar in Firefox

    #test-bar::-webkit-progress-bar {
        background: #0b1f0b;
        border-radius: 20px;
    }
→ will set the appearance of the background in Chromium

    #test-bar::-webkit-progress-value {
        background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
        border-radius: 20px;
    }
→ will set the appearance of the value bar in Chromium
}}}
<progress id="test-bar" @value="$intext" max="100"></progress>

\
<h3>The {{{<meter>}}} HTML element</h3>\
The {{{<meter>}}} element is meant to showcase static values, when the range is known, like the capacity of a device or the health of a character. 
<meter @value="$intext" min="0" low="10" optimum="50" high="90" max="100"></meter> | <meter value="12" min="0" low="20" optimum="50" high="90" max="100"></meter> | <meter value="25" min="0" low="50" optimum="85" high="75" max="100"></meter>
> ''Note:'' when unstyled, the meter bar will look different between browsers.
\
The element has 6 specific attributes:
* {{{value}}} to indicate the current value of the measured range
** must be between {{{min}}} and {{{max}}}
* {{{min}}} (optional) to indicate the minimum value of the range 
** default is 0
** can be any value (even negative) as long as it is lower than {{{max}}}
* {{{max}}} (optional) to indicate the maximum value of the range 
** default i 1.0
** can be any value (even negative) as long as it is higher than {{{max}}}
* {{{low}}} (optional) to specify what is a low value in the range 
** must be higher than {{{min}}}, but lower than {{{high}}} and {{{max}}}
* {{{high}}} (optional) to specify what is a high value in the range 
** must be lower than {{{max}}}, but higher than {{{low}}} and {{{min}}}
* {{{optimum}}} (optional) to specifiy the optimal value in the range
** if used along {{{low}}} and {{{high}}}, it will indicate the preferred zone for the range
** can be any value within the {{{min}}}/{{{max}}} range
> ''Note:'' when {{{high}}}, {{{low}}}, and {{{optimum}}} are used, it will change the colour of the meter bar. See examples above.
{{{
    <meter value="0.5"></meter>

    <meter value="50" min="0" max="100"></meter>

    <meter value="42" min="0" low="10" optimum="50" high="90" max="100"></meter>
}}}
If any of those attributes should be related to the value of a set variable, you will need to use the {{{@}}} [[directive|Markup-Attribute]] to link it.
Assuming that {{{<<set $intext to 42>>}}}: <<set $intext to 42>>
{{{
    <meter @value="$intext" min="0" max="100"></meter>
}}}
→ will render as: <meter @value="$intext" min="0" max="100"></meter>

The {{{<meter>}}} element will also accept other global attributes, such as {{{.class}}}, {{{#id}}}, or ARIA-related elements. These attributes can make it easier to target a specific progress bar during styling.

If you want the {{{<meter>}}} element to look the same across browsers, you will need to edit the StyleSheet:
* {{{meter}}} to target the {{{<meter>}}} elements as a whole 
* {{{meter:not([value])}}} to target the {{{<meter>}}} if {{{value}}} is not indicated
* {{{meter[value]}}} to target {{{<meter>}}} elements if {{{value}}} is indicated (defined or empty)
\
To edit the value bar however, you will need to use browser specific Pseudo-Code:
* For Chrome and Chromium browsers:
** {{{::-webkit-meter-bar}}} to edit the appearance of the background bar 
** {{{::-webkit-meter-optimum-value}}} to edit the appearance of the value bar
* For Firefox :
** {{{no-pseudo-code}}} to edit the appearance of the background bar  
** {{{::-moz-meter-bar}}} to edit the appearance of the value bar
> ''Note:'' if you are using {{{high}}}/{{{low}}}/{{{optimum}}}, and want to change how the meter looks depending on where the value is in the range, you can also use the Pseudo-Elements:
> For Chromium: {{{::-webkit-meter-suboptimum-value}}}, {{{::-webkit-meter-even-less-good-value}}}
> For Firefox: {{{:-moz-meter-optimum}}}, {{{:-moz-meter-sub-optimum}}}, {{{:-moz-meter-sub-sub-optimum}}}
\
> //Example, if the progress bar has the id:// {{{#test-metbar}}}
{{{
    #test-metbar {
        background: #1d0b1f;
        width: 100%;
        height: 2em;
        border-radius: 20px;
        border: 2px solid #3a013c;
    }
→ will set the base for the whole element
  + the background for Firefox

    #test-metbar::-moz-meter-bar {
        background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
        border-radius: 20px;
    }
→ will set the appearance of the value bar in Firefox

    #test-metbar::-webkit-meter-bar {
        background: #1d0b1f;
        border-radius: 20px;
        height: 2em;
        border: 2px solid #3a013c;
    }
→ will set the appearance of the background in Chromium

    #test-metbar::-webkit-meter-optimum-value {
        background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
        border-radius: 20px;
    }
→ will set the appearance of the value bar in Chromium
}}}
<meter id="test-metbar" @value="$intext" min="0" max="100"></meter>
\
<h3>Build your own from {{{<div>}}} and {{{<span>}}}</h3>\
While progress and meter bars can be pretty neat to use, they do have some issues with compatibility with older browsers (especially {{{<meter>}}}), and require the use of Pseudo-Code to style the bar for the different browsers. And, if you are looking to add some [[animations|Int-JS-CSS-Animation]] to your bar, you would most likely require some JavaScript code.
> ''Note:'' the examples below will only use {{{<div>}}} but you could technically use any block elements. Though you may need to add a few more CSS rules.

This bit of a headache can be avoided if you build your start bar from scratch with basic elements. Something like this:
{{{
    <div class="statBarContainer">
        <div class="statBar" style="width:33%"></div>
    </div>
}}}
<div class="statBarContainer"><div class="statBar" style="width:33%"></div></div>
> //In the StyleSheet//:
{{{
    .statBarContainer {
        background: #660303;
        width: 100%;
        height: 2em;
        border-radius: 20px;
        border: 2px solid #a40606;
    }
    .statBar {
        background: linear-gradient(-90deg, #ff489e78, #6effc2, #ff489e78);
        border-radius: 20px;
        height: inherit;
    }
}}}

If any attribute defined in those {{{<div>}}} should be related to the value of a set variable, you will need to use the {{{@}}} [[directive|Markup-Attribute]] to link it.
{{{
    <div class="statBarContainer">
        <div class="statBar" @style="'width:' + $intext + '%;'"></div>
    </div>

→ the quotes are required to parse the value of the variable.
  otherwise it will not work.
}}}
<div class="statBarContainer"><div class="statBar" @style="'width: ' + $intext + '%;'"></div></div>

Instead of an attribute directive, you can also use some JavaScript/jQuery.
The example below assumes the stat-bar is coded as follow:
{{{
    <div class="statBarContainer">
        <div id="#intext" class="statBar"></div>
    </div>
}}}
{{{
    $(document).on(":passagedisplay", function() {
        var attributeStat = State.getVar("$intext") + "%";
        $("#intext").attr("style", "width: " + attributeStat);
    });
}}}
\
<h3>Using a {{{<<widget>>}}}</h3>\
If you are planning on adding multiple stat bars in one spot and want to avoid cluttering a passage with code, you can use the {{{<<widget>>}}} [[macro|Macro-Widget]].

Assuming we want to use the {{{<div>}}} stat bar introduced above, but want to assign a different {{{#id}}} and link it to the relevant stat variable:
{{{
    <div class="statBarContainer">
        <div id="#intext" class="statBar" @style="'width:' + $intext + '%;'"></div>
    </div>
}}}
The widget could look something like this, requiring 2 arguments, one for the {{{#id}}} and one for the relevant stat variable:
{{{
    :: Widget [widget]
    <<widget "StatBars">>
        <div class="statBarContainer">
            <div @id="_args[1]" class="statBar" @style="'width:' + _args[0] + '%;'"></div>
        </div>
    <</widget>>

    :: Passage 
    <<StatBar $statValue "#idForTheBar">>
}}}
> ''Note:'' this is a basic example. You could add more {{{<div>}}} to include a label for the bar, or the numerical value of the stat.


:: Lexicon [side popup] {"position":"1850,400","size":"100,100"}
__Types of Values__
//String//	: type of value, word, wrapped in {" "}
//Boolean// : type of value, true/false 
//Integer// : type of value, number
//Object//  : type of variable, can have multiple variables nested inside
	//Property//  : a sub element of an object
//Array//   : type of variable, can have multiple values inside

__Types of Variables__
//Temporary variable// ({{{_temp}}}) : an editable variable that disappears when moving to a new passage.
//Permanent variable// ({{{$var}}})  : an editable variable that tracks a value until changed or unset. 
//Setup variable// ({{{setup.var}}}) : a variable set at the start of the game, and cannot be edited.
//Settings variable// ({{{settings.var}}}) : a variable set with a Setting in the JavaScript passage.

__Other Concepts__
//UI//		 : User Interface, the page shown to the player
//API//      : Application Programming Interface, code that will trigger hidden built-in fuctions
//Macro//    : a block of code designed to do a specific task
	//Container// : (ref to macro) a block a code wrapped between an opening and closing tag 
	//Argument//  : (ref to macro) items set in the macro to process code.
//Function// : JavaScript blocks of code designed to do a specific task
//Method//   : JavaScript blocks of code designed to do a specific task, linked to a reciever

> If something is missing here, let me know!!!!


:: Local-L10n [page translate] {"position":"3800,1200","size":"100,100"}
<h1 id="local-strings">{{{l10nStrings}}}, and How to Edit Them</h1>
{{{l10nStrings}}} are strings of words which can only be edited in JavaScript. These strings populate your project pages in very specific spots, defined by the property you can attach to it. Depending on the property chosen, it can affect visible text on the screen, text only visible when hovering over an element, text inside a browser alert, or when the game is in Debugging Mode (Test).
{{{
    l10nStrings.property = "New Text";
}}}
> //For example://
{{{
    l10nStrings.restartTitle = "Restart";
    l10nStrings.restartTitle = "Are You Sure?";
    l10nStrings.restartTitle = "Restarting is for Babies :P";
}}}
> ''Note:'' any {{{l10nStrings}}} added to your JavaScript will override the built-in text. If you add multiple iteration of the same property in your file, only the last one will be used by the game.

You can find the whole list of accepted property on [[this page|https://github.com/tmedwards/sugarcube-2/blob/v2-develop/locale/l10n-template.js]] of the SugarCube repository. 
Just Copy-Paste the necessary lines into your JavaScript, and edit the text. The code will accept any [[Unicode Character and Symbols|https://en.wikipedia.org/wiki/List_of_Unicode_characters]] (testing for fonts advised).
> ''Note:'' If you remove an element in the UI, like the backward button, the related {{{l10nStrings.propery}}} (here {{{l10nStrings.uiBarLabelBackward}}}) do not have to be included in your project (because it won't be used).

You can also use the text of other properties inside an {{{l10nStrings}}} to avoid writing it multiple times, either by using the property itself ({{{l10nStrings.propery}}}) or creating a template ({{{l10nStrings._template}}}). For example, in the Built-In {{{l10nStrings}}}:
{{{
    l10nStrings.textIdentity  = 'game';

    l10nStrings._warningIntroLacking  = 'Your browser either lacks or has disabled';

    l10nStrings._warningOutroDegraded = ', so this {textIdentity } is running in a degraded mode. You may be able to continue, however, some parts may not work properly.';

    l10nStrings.warningNoWebStorage = '{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}';
}}}
> ''Note:'' as of 2.37, the templates are not used anymore by the built-in format. You can still define and use them, but at your own risk.

The three first {{{l10nStrings}}} (one a property, two templates) are used by the last string to create the following text:
> //Your browser either lacks or has disabled// the Web Storage API, //so this ''game'' is running in a degraded mode. You may be able to continue, however, some parts may not work properly.//


:: Local-Setting [page translate] {"position":"3800,1300","size":"100,100"}
<h1 id="local-langsetting">Providing Multiple Languages Options In-Game</h1>
If you want your project to be played in multiple languages, there are different ways to include those. Which way to code it will depend on the interface (Built-In or [[Custom|SP-StoryInterface]]), and whether the functionalities (e.g. Settings, Saves...) use any [[Built-In text|Local-L10n]]. It may be as simple as creating separate passage paths per language (with a starting screen displaying a list of available languages), to more complex, like having a Setting the player can use to change the language at anytime.
\
<h3>No Built-In Text and Language Choice at Start</h3>\
This first case will assume that players won't ever see any of the Built-In text, which can be done by removing the SideBar or creating a Custom Interface, and avoiding using the Built-In //Settings//, //Saves// and //Restart// popups (or you don't mind that they aren't translated).

This way to include localization is to create a starting passage, where the player can choose the wanted language from a list of links, which in turn would sent the player to a path of passages written in the selected language:
{{{
    :: Start
    THIS IS A GAME, REALLY...
    [[English|EN-Passage]]
    [[Français|FR-Passage]]
    [[Español|ES-Passage]]
    [[Nederlands|NL-Passage]]

    :: EN-Passage
    This passage is English.
    [[Continue|EN-Next]]

    :: FR-Passage
    Ce Passage est en Français. 
    [[Continuer|FR-Next]]
    
    :: ES-Passage
    Este pasaje esta en español.
    [[Continuar|ES-Next]]
    
    :: NL-Passage
    Deze passage is in het Nederlands.
    [[Doorgaan|NL-Next]] 
}}}
If you want to avoid creating copies of those passages when adding a new language, you can merge them all and track the language choice through a variable:
{{{
    :: Start
    THIS IS A GAME, REALLY...
    [[English|Passage][$language to "English"]]
    [[Français|Passage][$language to "French"]]
    [[Español|Passage][$language to "Spanish"]]
    [[Nederlands|Passage][$language to "Dutch"]]

    :: Passage
    <<switch $language>><<case "English">>
        This passage is English.
        [[Continue|Next]]
    <<case "French">>
        Ce Passage est en Français. 
        [[Continuer|Next]]
    <<case "Spanish">>
        Este pasaje esta en español.
        [[Continuar|Next]]
    <<case "Dutch">>    
        Deze passage is in het Nederlands.
        [[Doorgaan|Next]]
    <</switch>>
}}}
\
<h3>Built-In Text and Settings</h3>\
This other case can be used for any interface where the Built-In text appears on the page (Base UI or Custom), as it will target the Built-In text and display it in the wanted (coded) language. This will be done with some custom JavaScript code and include [[l10nStrings|Local-L10n]].

While you may choose to built your own, TME has already created a custom version ([[code here|https://gist.github.com/tmedwards/33f3b4b7ada317fc9cc70aa8580c03f0]]), which includes a Setting for the player to switch from one language to another at any time. This is the example explained below.
\
<h4>TME Internalization Code</h4>\
First, Copy-Paste the JavaScript code between the {{{:: Language Switching [script]}}} and {{{:: Start}}} lines into your project's JavaScript. Then, edit the code to fit your project's need. 

Two parts are the most important: changing the list of languages to choose from, and changing the Built-In text for each language. 
> ''Note:'' TME indicates where to edit the code with his {{{// ''Note:'' User customization required here.}}} comment.
{{{
    langs : {
        // ''Note:'' User customization required here.

		'Deutsche' : 'de',
		'English'  : 'en',
		'Français' : 'fr',
	},
}}}
In this part, you will want to list the languages you want to display, followed by a language code. This is required for the latter part of the code to work.
You will need to remove unnecessary cases as well. 

{{{
    switch (setup.i18n.langs[settings.lang]) {
		/*
			NOTE 1: User customization required here.
			NOTE 2: The `l10nStrings` properties shown in the cases below are an
			abbreviated set for example purposes.  There are many more properties
			within the `l10nStrings` object which you'll need to handle.
		*/
		case 'de':
			l10nStrings.settingsTitle = 'Einstellungen';
			l10nStrings.settingsOff   = 'Deaktivieren';
			l10nStrings.settingsOn    = 'Aktivieren';
			l10nStrings.settingsReset = 'Auf Standardeinstellung zurücksetzen';
			break;

		case 'fr':
			l10nStrings.settingsTitle = 'Paramètres';
			l10nStrings.settingsOff   = 'Désactiver';
			l10nStrings.settingsOn    = 'Activer';
			l10nStrings.settingsReset = 'Réinitialiser les paramètres par défaut';
			break;
	}
}}}
In this part, you will need to create the relevant cases with the language codes you created in the first part of the code, and list the relevant {{{l10nStrings}}}, so the Built-In text is shown in the chosen language.
The {{{case 'en':}}} is not listed here, since it already uses the Built-In text. If you want to change any of the [[l10nStrings|Local-L10n]] for English, you will need to add its case there.
> ''Note:'' you can find [[pre-translated packages|Local-Trans]] for the {{{l10nStrings}}}.
\
<h4>Setting up the Passages</h4>\
After the JavaScript code is set, you will have to set the passages. While similar to the first method, this way requires an empty passage to act as an anchor for the JavaScript code. From that anchor, the code will check the language chosen, add the relevant language code as a suffix to the anchor, and display the corresponding passage. 
For example, with the passage {{{Start}}}:
# Anchor {{{Start}}}
# Language: {{{English}}}
# Code into Suffix: {{{en}}} → {{{_en}}}
# Passage to display: {{{Start_en}}}
So, you will need to create as many passages as there are defined languages, on top of the anchor (e.g. 3 languages = 4 passages). In a project, it will look like this:
{{{
    :: Start
        /* 
            Code included here will run,
            but no text will show. 
        */
    
    :: Start_de
        Deutsche.
        [[Nächster|Next]]

    :: Start_en
        English.
        [[Next]]

    :: Start_fr
        Français.
        [[Prochain|Next]]

}}}
And so on and so forth...
> ''Note:'' The links to the next passage MUST go towards the anchor passage. If you link it to a suffixed passage ({{{Start_en}}}), it will add another suffix ({{{Start_en_en}}}) and display and error.
\
<h4>Language Choice at Start and Window Reload</h4>\
While the player can go into the settings to change the language of the game, it is also possible to give the player the option to choose a language as a starting passage. You will need to create a link, where you save the language choice in a setting variable.
{{{
    <<link "Français" "Next">>
        <<run Setting.setValue('lang', 'Français')>>
    <</link>>
}}}

Thanks to {{{Settings.setValue()}}} [[Setting API|Settings-More]], this will both change the setting to the wanted language and reload its code, so the page displays both the correct passage and any use Built-In text. This way, the player will see the game page refresh with a loading screen between clicking the link and seeing the new passage.
> ''Note:'' the refresh is recommended, because the {{{l10nStrings}}} are linked to the {{{lang}}} attribute, which is attached to {{{<html>}}}, which do not update automatically.

However, if you do not want the page refresh, you can get away with simply editing the value of the setting, and saving it, as such:
{{{
    <<link "Français" "Next">>
        <<set settings.lang to "Français">>
        <<run Setting.save()>>
    <</link>>
}}}
> ''Note:'' the Built-In text, especially in popups, won't be displayed with the correct text without the refresh.
\
<h4>Edit Settings Language or Other Custom Elements</h4>\
While TME's code allows the automation in displaying different version of Built-In text through the {{{l10nStrings}}}, you will need to do the same for custom text, such as Settings labels and descriptions, or whatever element you created on the page (e.g. Custom Menu in the UI). This, however, can easily be remedied with the {{{<<switch>>}}} macro.
> //In a Non-Story Passage://
{{{
    <<switch settings.lang>>
        <<case "English">>Settings
        <<case "Français">>Paramètres
    <</switch>>
}}}
> //In JavaScript Settings://
{{{
    Setting.addList('lang', {
		label    : `<<switch settings.lang>><<case "English">>Language<<case "Français">>Langue<</switch>>`,
        desc     : `<<switch settings.lang>><<case "English">>Select the wanted language<<case "Français">>Choisissez la langue voulue<</switch>>`,
		list     : setup.i18n.labels(),
		default  : setup.i18n.labelFromCode('en'),
		onInit   : initLanguage,
		onChange : changeLanguage
	});
}}}
> ''Note:'' the backticks {{{` `}}} allows the inclusions of SugarCube code inside JavaScript here.


:: Local-Trans [page translate] {"position":"3900,1200","size":"100,100"}
<h1 id="local-translate">Localization, and Pre-Translated Templates</h1>
If your project is not written in English, and you would prefer seeing the Built-In text match this, you will need to edit most of the defined [[l10nStrings|Local-L10n]]. This can be done by Copy-Pasting into your JavaScript the code from [[this page|https://github.com/tmedwards/sugarcube-2/blob/v2-develop/locale/l10n-template.js]] of the SugarCube repository, and edit the text.
> ''Note:'' you can forgo the first and last line of the code in that page (i.e. the {{{(function(){ }}} and {{{ {})();}}}).

If the wanted language is available, you can use one of the pre-translated localizations, done by volunteers. Any available localization package will be downloadable on the [[SugarCube website|http://www.motoslave.net/sugarcube/2/#downloads]]. You can Copy-Paste the code from the {{{.js}}} into your JavaScript.
> ''Note:'' you //may// want to check the translated version fits with your project, or whether some edits may be required.

While SugarCube 2.36 had many localization packages, which you can find here [[here|https://github.com/tmedwards/sugarcube-2/blob/v2-develop/locale/]], these are now outdated due to the many changes brought by the 2.37 update. You can still, however, use them as a base for your own translation. But, if your language (or its regional version) was not included in that list, you will need to edit every {{{l10nStrings}}} manually.
> ''Note:'' You may also want to provide this translation to TME, so a new localization package may be made available for future users. Simple [[create a new issue|https://github.com/tmedwards/sugarcube-2/issues]] on GitHub, and include the translation in your message (as a downloadable file or a link to the code).


:: Localization [chapter menu] {"position":"3800,1100","size":"200,100"}
<h1>Edit the Built-In Text or Change the Game's Language</h1>
Further customisation of a SugarCube project can be done with the {{{l10nStrings}}}, bits of JavaScript code that will change what text the Built-In elements will show. This can affect the buttons on the Sidebar, as well as the //Restart//, //Saves//, and //Settings// Popup. You can edit these strings to fit the vibe of your project, change its language entirely, or link them to a function to provide translation of your work. 

* [[l10nStrings, and How to Edit Them|Local-L10n]]
* [[Localization, and Pre-Translated Templates|Local-Trans]]
* [[Providing Multiple Languages Options In-Game|Local-Setting]]


:: Long-Return-JS [page int-conv] {"position":"1800,1400","size":"100,100"}
<h1 id="int-long-return">Arbitrarily Long Returns</h1>
While the {{{<<return>>}}} macro and the {{{previous()}}} function can be useful in sending the player back to the Story when visiting a Codex or Inventory page, it can also create inescapable loops, making it impossible for the player to //actually// go back to the Story. 

This can be solved in different ways:
* Using the {{{<<back>>}}} macro as is or the {{{Engine.backwards()}}} API,
** If multiple non-Story passages are clicked, the player will have to click each //Back// link.
* Creating Popups to display those non-Story passages,
** This will avoid navigating between passages.
* Using the JavaScript code below.
\
<h3>How to Code the Arbitrarily Long Return</h3>\
The //Arbitrarily Long Return// will record the last Story passage the player visited and store it in a variable, which can then be used inside a link, to send the player back to the Story. We will call here the variable {{{$return}}}.

The code also requires something to differentiate Story and non-Story passages: a tag. We will call it here {{{noreturn}}}. 

When all your non-Story passages are tagged correctly, add this code in your JavaScript passage:
{{{
    $(document).on(':passagestart', function (ev) {
        if (!ev.passage.tags.includes('noreturn')) {
            State.variables.return = ev.passage.title;
        }
    });
}}}
> ''Note:'' you may change the name of the variable or the tag, if you prefer another name for either.
> If you want to use multiple tags instead of one, change {{{!ev.passage.tags.includes('one-tag')}}} into {{{!ev.passage.tags.includesAny('one-tag two-tags')}}}, and separate the tags with a space.

When this is set, you can add your links in the non-Story passages to send the player back to the Story:
* {{{[[Return|$return]]}}}
* {{{<<link "Return" $return>><</link>>}}}
* {{{<<return "Return" $return>>}}} / {{{<<return [[Return|$return]]>>}}}
* {{{<<back "Return" $return>>}}} / {{{<<back [[Return|$return]]>>}}}
> ''Note:'' since Twine automatically creates a new passage when the {{{[[link]]}}} [[Markup|Markup-Link]], I recommend using the non-markup formatting instead (it does the same thing) - or you will need to delete the new passage after coding the macro. Otherwise, the player will be sent to a blank page.
> For the difference between {{{<<back>>}}} and {{{<<return>>}}} on the player's history, see [[this page|Macro-Back-Return]].
\
<h3>A Note on Navigating to a Previous Passage</h3>\
Navigating back to a previously visited passage can be problematic, especially when code could run into issues when re-executing the content of the passage. Code may have some side-effect, like changing the value of a variable, or printing a different text on the page (ex: using the [[-visited() functions|Function-Pass-Tag]] to display variation). 

This can be avoided if you:
* ensure the passages contain no code with side effect,
* wrap the code in something to prevent re-execution,
** ex: {{{<if visited() is 1>>only show on the first view<</if>>}}}
* use the code above with {{{<<back>>}}} macro to send the player back to the passage, erasing the record of visiting the non-Story passages,
** ex: {{{<<back "Return" $return>>}}} / {{{<<back [[Return|$return]]>>}}}
* move the non-Story passages into a PopUp with the Dialog API.


:: Macro [chapter menu] {"position":"2900,1800","size":"200,100"}
<h1>Creating your Own Macro</h1>
If you are looking to include a specific behaviour in your project that is not covered by the macros already built in SugarCube or custom ones available on the internet, you may want to consider creating your own.
SugarCube has many API to help you build your custom macros, or even chose to edit already-included macros.
> ''Note:'' Knowledge of JavaScript and understanding of the SugarCube format is very important here! 

* [[The Base APIs for Macros|Macro-API]] 
* [[Using Macro Context Objects in the handler|Macro-Context]]


:: Macro-API [page macro-apis] {"position":"2900,1900","size":"100,100"}
<h1 id="macro-apis-base">The Base APIs for Macros</h1>
\
<h3>{{{Macro.add()}}}</h3>\
If you want to create a custom macro in SugarCube, you will need to use this API. Knowledge of JavaScript/jQuery and understanding on how SugarCube works is required.

The API has 2 parameters:
* {{{name}}}: the name (or array of names) of the macro to add
** ''must start with a letter'', and consist of characters from the basic Latin alphabet (A → Z)
** you can also use numbers (0 → 9), underscores ({{{ _ }}}), and hyphens ({{{ - }}}) after the first letter 
* {{{definition}}}: how the macro will behave (see below)
** to copy the definition of an existing macro, indicate the name of //that// latter macro.
{{{
    Macro.add(name , definition)

    Macro.add(['link', 'button'] , {/* definition code */})
 → <<link>> and <<button>> will behave the same

    Macro.add('run', 'set');
 → <<run>> is an alias of <<set>>
}}}

The definition of a macro will be an object with multiple properties:
* {{{skipArgs}}} (optional): disable processing arguments into a discrete form (i.e. use the whole expression as an arguments)
** you can indicate {{{true}}} to affect the macro and macro tags (if defined), or the array of tags where it is relevant.
* {{{tags}}} (optional): will signify that the macro is a container macro (with an opening and closing tag)
** you can indicate an array of child tags (sub-macro) or {{{null}}} for a simpler container
* {{{handler}}}: the macro's function, called without arguments
** you may need some [[macro context objects|Macro-Context]] to parse the function
> ''Note:'' you can add other properties for internal use (JavaScript knowledge required)
\
> //Example from the Documentation for a simple implementation of// {{{<<if>>}}}
{{{
    Macro.add('if', {
        skipArgs : true,
        tags     : ['elseif', 'else'],
        handler  : function () {
            try {
                for (var i = 0, len = this.payload.length; i < len; ++i) {
                    if (
                        this.payload[i].name === 'else' ||
                        !!Scripting.evalJavaScript(this.payload[i].args.full)
                    ) {
                        jQuery(this.output).wiki(this.payload[i].contents);
                        break;
                    }
                }
            }
            catch (ex) {
                return this.error('bad conditional expression: ' + ex.message);
            }
        }
    });
}}}
\
<h3>{{{Macro.delete()}}}</h3>\
Like the code implies, this API will remove any existed macro listed inside its parentheses.
This can be useful if you are looking to edit one of the Built-In [[macros|Macros List]] (by deleting the macro, and using {{{Macro.add()}}} to reintroduce it).
{{{
    Macro.delete("amacro")
    Macro.delete(["amacro", "bmacro"])
}}}
> ''Note:'' The macros targeted ''must be defined prior'' to using this API.
\
<h3>{{{Macro.has()}}}</h3>\
This API will check whether the indicated macro exists in the code. 
{{{
    Macro.has("print")
}}}
\
<h3>{{{Macro.get()}}}</h3>\
This API will look at the definition of the targeted macro, or return NULL if there is none.
The output of this API is an object containing the definition of the macro
{{{
    Macro.get("print")
}}}
\
<h3>{{{Macro.tags.has()}}}</h3>\
This API will check whether the indicated macro tag exists - the macro tag being any child macro inside a container macro (e.g. {{{<<else>>}}} and {{{<<elseif>>}}} for {{{<<if>>}}}).
{{{
    Macro.tags.has("else")
}}}
\
<h3>{{{Macro.tags.get()}}}</h3>\
This API will return with the name of the all the macros which have included the targeted macro tag within their definition, or NULL on failure.
{{{
    Macro.tags.get("option")
→ will result in ['cycle', 'listbox']
}}}


:: Macro-Adv [chapter menu] {"position":"800,1800","size":"200,100"}
<h1>Advanced Macros</h1>
Below, you will find the last of the macros that haven't been discussed in the previous sections. These macros are considered advanced, as they will either require some HTML/CSS knowledge, or full control of coding logics. They are usually not needed for basic projects. 

* [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]] 
* [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* [[Capturing the Value of a Variable|Macro-Capture]]
* [[Emulating PassageDone for one Passage|Macro-Done]]


:: Macro-ApPreRepCopy [page int-macro] {"position":"1400,1200","size":"100,100"}
<h1 id="int-madom">DOM Macros and Revealing Text in Targeted Spots</h1>
DOM (Document Object Model) Macros target HTML elements on a page and affect the displayed content of that element. Those macros have the same functionality as the {{{<<link[insert-DOM]>>}}} [[macros|Macro-Link-AppPreRep]], but have more flexibility and do not require a link to work.
> ''Note:'' refreshing the page (F5 or returning) will undo any changes made by the macros.

There are four main macros and one extra:
* {{{<<append>>}}}, which will add content after the targeted element. 
* {{{<<prepend>>}}}, which will add content before the targeted element.
* {{{<<replace>>}}}, which will replace the content of the targeted element.
* {{{<<remove>>}}}, which will remove the targeted element.
* {{{<<copy>>}}}, which will copy the content of the targeted element.
\
The macros have each argument:
* the element to target: which can be an {{{#id}}}, a {{{.class}}} or an HTML {{{element}}}, or a combination.
> ''Note:'' if you are targeting an element that is on the page multiple time, the macro will affect all these elements.
\
{{{
	<<append "#chocolate">>
		This text will append the element with the ID "chocolate".
		It will appear after the content inside that element.
	<</append>>
	
	<<prepend h1>>
		This text will prepend every h1 element.
		It will appear before the content inside that element.
	<</prepend>>
	
	<<replace ".dog">>
		This text will replace the content of 
		the element with the Class "dog".
	<</replace>>
	
	<<remove p.test>> 
→ will remove the element <p class="test"> from the page
	
	<<copy span#sweet>> 
→ will copy the content of the element <span id="sweet">
}}}
> ''Notes:'' if the element you are trying to target is //not// on the page, you will get an error.
> If you want to empty an element, it is best to use an empty {{{<<replace>>}}} than a {{{<<remove>>}}}.
\
<h3>Transition or no transition</h3>\
Like with their {{{<<link[insert-DOM]>>}}} counterparts, {{{<<append>>}}}, {{{<<prepend>>}}} and {{{<<replace>>}}} have an optional extra argument:
* {{{t8n}}} or {{{transition}}} (optional) whether to show the new text with a transition.
{{{
	<<append "#chocolate" t8n>>
		This text will append the element with the ID "chocolate".
		It will do so with a transition.
	<</append>>
}}}
<span id="coco">This is a sentence.</span>
	<<link "Replace as is">><<replace "#coco">>This replaces the element without a transition.<</replace>><</link>> | <<link "Replace with transition">><<replace "#coco" t8n>>This replaces the element with a transition.<</replace>><</link>>
\
<h3>In combination with other macros</h3>\
The DOM macros are best used in combination with other interactive elements, like {{{<<link>>}}}, {{{<<button>>}}}, or even the {{{<<timed>>}}} [[macro|Macro-Timed]]. Here are some examples:
<span id="dog">The dog is barking</span>.
	<<link "Throw a ball">><<append "#dog">> at the ball<</append>><</link>>
{{{
	<span id="dog">The dog is barking</span>.
	<<link "Throw a ball">><<append "#dog">> at the ball<</append>><</link>>
}}}
> //Replacing a list of links with more text://
{{{
	<span id="choices">
		<<link "Go Home">>
			<<replace "#choices">>
				You went home. Nothing much happened.
				[[Next|Next Day]] 
			<</replace>>
		<</link>>
		<<link "Go to the Cinema">>
			<<replace "#choices">>
				You went to the Cinema, and met Charlie after the movie ended.
				[[Next|Convo Charlie]] 
			<</replace>>
		<</link>>
	</span>
}}}
> //Copying and Pasting://
{{{
	This is a <span class="one">terrible</span> idea!
	Well, I think this is <span class="two">a grand idea!</span>

	<<link "Or is it?">>
		<<replace ".two">>actually a <<copy ".one">> one as well...<</replace>>
	<</link>>
}}}
\
<h3>An Important note on DOM Macros</h3>\
Since the macros require the targeted element to be on the page, they ''cannot'' be coded as is on the page, due to how the [[page renders|SP-PassageReady-Done]]. As such, you will need either to:
* use the {{{<<link>>}}} or {{{<<button>>}}} macro, letting the player interact with the element,
* use the {{{<<done>>}}} [[macro|Macro-Done]], which will trigger when the page is fully rendered,
* use the {{{<<timed>>}}} [[macro|Macro-Timed]], which will delay the trigger long after the page is rendered,
** if you are planning on doing {{{<<timed 0s>>}}}, just use {{{<<done>>}}} instead
* code it inside the {{{PassageDone}}} [[special passage|SP-PassageReady-Done]] (same as the {{{<<done>>}}} macro, but will trigger with every new passage).
> ''Note:'' an alternative to the {{{<<replace>>}}} macro can be found in the {{{<<do/redo>>}}} [[macro set|Macro-Do-Redo]].


:: Macro-Audio [chapter menu] {"position":"2900,1100","size":"200,100"}
<h1>Adding Sound with the Audio Macros</h1>
Adding any asset to a project can be daunting, especially when it can involve so many macros. But adding audio is actually quite simple and, at the minimum, only requires the use of 2 macros: {{{<<audio>>}}} and {{{<<cacheaudio>>}}}.

* [[Setting up the Audio Tracks|CacheAudio]]
* [[Create Track Groups and Playlists|Macro-Group-Playlist]]
* [[Playing Tracks in a Passage|Audio-Macro]]
* [[Other Audio Macros|Audio-Other]]


:: Macro-Back-Return [page int-conv] {"position":"1700,1400","size":"100,100"}
<h1 id="int-backreturn">Going Back or Returning to a Passage with a Special Link</h1>
Whether it is to return to the story from a codex page, or going back to a certain location, the {{{<<back>>}}} and {{{<<return>>}}} macros create an easy link towards previously visited passages.
> ''Note:'' If the player has not visited the coded passage, they //will// get an error message.
{{{
    <<back [linkText [passageName]]>>
    <<return [linkText [passageName]]>>
}}}
Both macros are formatted the same way and only has 1 arguments:
* {{{linkText}}}: (optional*) the text to display on the page
** you can also use the [[Image Markup|Markup-Image]]
** not optional if a Passage is indicated
* {{{passageName}}}: (optional) the name of the Passage to reach
** if undefined, it will undo one action 
\
{{{
→ Going back one passage:
    <<back>>
    <<return>>

→ Going back one passage, showing the text "Home" in the link:
    <<back "Home">>
    <<return "Home">>

→ Going back to the passage "Home", showing the text "Going Home" in the link:
    <<back "Going Home" "Home">>
    <<return "Going Home"  "Home">>

→ Going back to the passage "Home" with the Link Markup:
    <<back [[Home]]>>
    <<return [[Going Home|Home]]>>

→ Going back to a passage with an Image Markup:
    <<back [img[URL]]>>
    <<return [img[URL][Home]]>>  
}}}
> ''Note:'' Going back one passage is essentially the same as {{{[[Text|previous()]]}}}, see the {{{previous()}}} [[function|Functions]].
\
<h3>{{{<<back>>}}} or {{{<<return>>}}}?</h3>\
Though they seem to perform the same action (going to a specific passage), the macros behave differently under the hood. The {{{<<back>>}}} macro goes back in the player history, undoing any action made between the current passage and the targeted one. The {{{<<return>>}}} macro goes to the passage by going forward in the player history (like a regular {{{<<link>>}}}), keeping any action performed between the two passages safe.

For example, the player goes to "NPC Codex Page" from the "Tavern" passage. Their history would look like this:
{{{State.history = ["Tavern", "NPC Codex Page"]}}}
In the Codex page, if the player clicks on the {{{<<return>>}}} macro, the history would look liks this:
{{{State.history = ["Tavern", "NPC Codex Page", "Tavern"]}}}
On the other hand, if the player clicks on the {{{<<back>>}}} macro, the history would look like this:
{{{State.history = ["Tavern"]}}}
\
<h3>Using a variable as the targeted passage</h3>\
If your project includes Codex pages (or other non-Story Passages), and you want to send the player back to the story with one easy link, you can use the [[Long Arbitrarily Return|Long-Return-JS]] in combination with the {{{<<back>>}}} or {{{<<return>>}}} macros. Thanks to that code, you can include a variable where the last visited Story Passage is stored.
This method is particularly helpful to avoid neverending loops.
{{{
    <<back [[Return to the Story|$passage]]>>
    <<return [[Return to the Story|$passage]]>>
→ or 
    <<back "Return to the Story" $passage>>
    <<return "Return to the Story" $passage>>
}}}
> ''Note:'' since Twine automatically creates a new passage when the {{{[[link]]}}} [[Markup|Markup-Link]], I recommend using the second formatting instead (it does the same thing) - or you will need to delete the new passage after coding the macro. Otherwise, the player will be sent to a blank page.
> An alternative to the {{{<<return>>}}} option (which allows you to run //extra// code):
> {{{<<link "Return to the Story" $passage>><</link>>}}}


:: Macro-Basic [chapter menu] {"position":"1100,600","size":"200,100"}
<h1>Going Further with the Basics</h1>
With [[linking passages|Macro-Link-Basic]], [[setting variables|Macro-Set-Basic]], and creating some simple [[conditional statements|Macro-If-Basic]], you would have the basics required to make a textual game. However, if you want to push your project a bit further, and add onto that base, this section will cover slightly more complex uses for these macros, as well as include a few more related ones.

* [[Setting and Changing Variables|Macro-Set]]
* [[Unsetting Variables|Macro-Unset]]
* [[More Conditional Statements|Macro-If]]
* [[Displaying more than text in Links|Macro-Link]]
* [[Display Variables, the Print Macro and Variants|Macro-Print]]


:: Macro-Capture [page adv-macro] {"position":"800,2000","size":"100,100"}
<h1 id="adv-capture">Capturing the Value of a Variable</h1>
The {{{<<capture>>}}} macro is considered one of the hardest macro to grasp for most Twine users, as its use is pretty limited (to the more complex form of code). Essentially, the macro allows to create a copy of the value of a variable, for the current passage, regardless of whatever happens to that variable later on.

The macro is most useful with interactive macros, loop macros, or delayed ones.

Assuming {{{_n = 1}}} at the start, but changing later down the code:<<nobr>>
	<<set _n = 1>>
	<<button "Non-Captured Value">>
		<<run alert(_n)>>
	<</button>>
	<<capture _n>>
        <<button "Captured Value">>
            <<run alert(_n)>>
        <</button>>
	<</capture>>
	<<set _n = 4>>
<</nobr>>

The macro has 1 argument:
* {{{variableList}}}: the variable, or list of variables, whose value need to be captured 
** the macro will work with both {{{$var}}} and {{{_temp}}}
{{{
    <<capture $var>>...<</capture>>
    <<capture _var, $var, $varvar>>...<</capture>>
}}}
\
<h3>Some Examples</h3>\
> //Below is the code for the interactive example at the top of this passage://
{{{
    <<nobr>>
        <<set _n = 1>>
        <<button "Non-Captured Value">>
            <<run alert(_n)>>
        <</button>>
        <<capture _n>>
            <<button "Captured Value">>
                <<run alert(_n)>>
            <</button>>
        <</capture>>
        <<set _n = 4>>
    <</nobr>>
}}}
While the value of {{{_n}}} changes, only the first button will show the updated value when clicked, as it will take the most recent value of {{{_n}}} (" 4 "). The second button, on the other hand, copied the value of {{{_n}}} before the variable changed (" 1 "), and kept that value.

> //A more complex example involving a loop and an interactive element://
<<nobr>><<set _what to ["a crab rangoon", "a gaggle of geese", "an aardvark", "the world's smallest violin"]>>
<<for _i to 0; _i lt _what.length; _i++>>
	<<capture _i>>
		I spy with my little <<linkappend "eye" t8n>>, _what[_i]<</linkappend>>.
	<</capture>>
<</for>><</nobr>>
{{{
    <<set _what to [
        "a crab rangoon",
        "a gaggle of geese",
        "an aardvark",
        "the world's smallest violin"
    ]>>
    <<for _i to 0; _i lt _what.length; _i++>>
        <<capture _i>>
            I spy with my little <<linkappend "eye" t8n>>, _what[_i]<</linkappend>>.
        <</capture>>
    <</for>>
}}}
For each element of the array {{{_what}}}, the loop will create a new sentence, within which is linked a different variable of that array.


:: Macro-CheckRadio [page basic-interact] {"position":"1500,800","size":"100,100"}
<h1 id="basics-checkradio">Multi or Single Option Choices</h1>
Aside from links (in-text or as a list), there are other ways to display choice options, such as using the {{{<<checkbox>>}}} and {{{<<radiobutton>>}}} macros. The first allows the player to choose multiple options from a list, while the second only give the player one option to select. Both let player make choices without moving to a new passage.
These macros are great for customising characters!
\
<h3>{{{<<checkbox>>}}}</h3>\
The {{{<<checkbox>>}}} creates a visual checkbox, which will modify the value of a variable, depending on whether the box is checked or not.

<<checkbox "_warning" false true>> //Yes, I've read the warnings...//

This macro has 5 arguments:
* the variable saving the player's choice
* the value to give the variable when the checkbox is //unchecked//
* the value to give the variable when the checkbox is //checked//
* {{{autocheck}}} (optional): whether the checkbox should match the state of the named variable 
** this will check the box if the variable has the same current value as when the checkbox is checked
* {{{checked}}} (optional): whether the checkbox should be checked when the passage loads
{{{
    <<checkbox "_example" false true autocheck>> Displayed Text
    <<checkbox "_object.property" 1 0 autocheck>> Displayed Text
    <<checkbox "_array[0]" "Tim" "Tom" autocheck checked>> Displayed Text
}}}
> ''Note:'' unlike {{{<<radiobutton>>}}}, you cannot use the same variable (or array position or object property) for more than one {{{<<checkbox>>}}}. Otherwsie, the last iteration with that re-used variable will override any previous choice.
\
<h3>{{{<<radiobutton>>}}}</h3>\
The {{{<<radiobutton>>}}} creates a visual radiobutton, which will modify the value of a variable. You can use multiple of these linked to one variable to create a group of options, where only one of these options can be chosen.

<<radiobutton "_pieBlueberry" false>> I've read the warnings...

This macro has 4 arguments:
* the variable saving the player's choice
* the value to give the variable when the option is //checked//
* {{{autocheck}}} (optional): whether the radiobutton should match the state of the named variable 
** this will check the option with the same current value of the variable 
* {{{checked}}} (optional): whether the option should be checked from the start (only for one per group)
{{{
    <<radiobutton "_example" false>> Displayed Text
    <<radiobutton "_object.property" 1>> Displayed Text
    <<radiobutton "_array[0]" "Tim" checked>> Displayed Text

A radiobutton group:
    <<radiobutton "$pie" "blueberry" checked>> Blueberry?
    <<radiobutton "$pie" "cherry">> Cherry?
    <<radiobutton "$pie" "coconut cream">> Coconut cream?
}}}
\
<h3>Using a {{{<label>}}}</h3>\
For accessibility reasons, it is recommended to wrap each option of the macros above with the HTML markup {{{<label>}}}. Rather than forcing the player to click on a small checkbox or radiobutton, they will be able to click on the displayed text to trigger the macro.
{{{
    <label><<checkbox "_example" false true autocheck>> Displayed Text</label>
    <label><<radiobutton "_example" false>> Displayed Text</label>
}}}
<label><<checkbox "_example" false true autocheck>> Displayed Text</label>
<label><<radiobutton "_example" false>> Displayed Text</label>
\
> ''Note:'' styling a checkbox or a radiobutton is pretty limited, as these elements are styled by the browser used (without a third-party plug-in or building it from scratch).


:: Macro-Context [page macro-apis] {"position":"3000,1900","size":"100,100"}
<h1 id="macro-apis-context">Using Macro Context Objects in the handler</h1>
While Macro [[handlers|Macro-API]] are called with no arguments, you can use {{{this}}} and the context object properties below to refer to different components of the macro (e.g. macro arguments and expressions, data, methods).
\
<h3>Referring to the Macro Arguments and Expressions</h3>\
\
<h4>{{{<MacroContext>.args}}}</h4>\
This property will refer to the arguments you can indicate in a macro. It is saved as an array.
> Assuming that {{{<<someMacro "a" "b" "c">>}}}:
{{{
    this.args.length  → 3
    this.args[0]      → 'a'
    this.args[1]      → 'b'
    this.args[2]      → 'c'
}}}
\
<h4>{{{<MacroContext>.args.full}}}</h4>\
This property will convert the argument into native JavaScript code. It is useful for expression arguments.
> Assuming that {{{<<if "a" is "b">>}}}:
{{{
    this.args.full  → '"a" === "b"'
}}}
\
<h4>{{{<MacroContext>.args.raw}}}</h4>\
This property will take the unprocessed expression.
> Assuming that {{{<<if "a" is "b">>}}}:
{{{
    this.args.raw  → '"a" is "b"'
}}}
\
<h3>Referencing the Macro Information</h3>\
\
<h4>{{{<MacroContext>.name}}}</h4>\
This property will refer to the name of the macro.
> Assuming that {{{<<someMacro ...>>}}}
{{{
    this.name  → 'someMacro'
}}}
\
<h4>{{{<MacroContext>.self}}}</h4>\
This property will refer to the definition of the macro, indicated in the second property of {{{Macro.add()}}}.
{{{
    this.self → { /* definition object */ }
}}}
\
<h4>{{{<MacroContext>.parent}}}</h4>\
This property will refer to the macro's parent (or null, if it does not have a parent).
{{{
    this.parent → /* name of parent or NULL */
}}}
\
<h4>{{{<MacroContext>.output}}}</h4>\
This property references the output element, as an HTML Element object.
{{{
    this.output
}}}
\
<h4>{{{<MacroContext>.parser}}}</h4>\
This property will refer to the parser instance that generated the macro call.
{{{
    this.parser
}}}
\
<h4>{{{<MacroContext>.payload}}}</h4>\
This property is only useful for container macros, and will not work otherwise. The text of the macro is parsed into discrete payload objects by tag, each having the following properties:
* {{{name}}}: name of the current tag 
* {{{args}}}: similar to {{{<MacroContext>.args}}}, but regarding the current tag
** {{{args.full}}} will be similar to {{{<MacroContext>.args.full}}}, and {{{args.raw}}} to {{{<MacroContext>.args.raw.}}}
* {{{contents}}}: the content between the current tag and the next.
{{{
    this.payload 
    this.payload.name 
    this.payload.args 
    this.payload.contents

    this.payload[0] 
 → the text between the first and second tag of the macro
}}}
\
<h3>Macro Context Methods</h3>\
\
<h4>{{{<MacroContext>.contextSome()}}}</h4>\
This method will look at whether the macro's parent(s) passed the test implemented by the defined filter function.
> //Example for// {{{<<break>>}}}:
{{{
    if (this.contextSome(ctx => ctx.name === 'for')) {
        TempState.break = this.name === 'continue' ? 1 : 2;
    }
    else {
        return this.error('must only be used in conjunction with its parent macro <<for>>');
    }
→ if <<break>> is not used inside a <<for>>, you will get an error
}}}
\
<h4>{{{<MacroContext>.contextFind()}}} and {{{<MacroContext>.contextFilter()}}}</h4>\
These two methods work similarly to {{{<MacroContext>.contextSome()}}}, in that it will check whether the macro's ancestor(s) passed the test implemented byt the given filter function.
If passed:
* {{{<MacroContext>.contextFind()}}} will return an object of the first ancestor 
* {{{<MacroContext>.contextFilter()}}} will return an array of objects of all ancestors 
If failed:
* {{{<MacroContext>.contextFind()}}} will return NULL
* {{{<MacroContext>.contextFilter()}}} will return an empty array 
> //Examples://
{{{
    var includeAncestor = function (ctx) { return ctx.name === "include"; };
    this.contextFind(includeAncestor);  
→ Returns the first <<include>> macro ancestor

    var includeAncestor = function (ctx) { return ctx.name === "include"; };
    this.contextFilter(includeAncestor);  
→ Returns an array of all <<include>> macro ancestors
}}}
\
<h4>{{{<MacroContext>.shadowHandler()}}}</h4>\
> ''Forenote:'' this method is only useful when you have asynchronous callback that invokes code/content that needs to access story and/or temporary variables shadowed by {{{<<capture>>}}}. ''Do not use this if you don't know what this means''. /* 
    Honestly, I have no idea what this does really, but it's macro relevant I guess.
    TME (the creator of SugarCube) REALLY does not recommend using this API unless you are absolutely sure what you are doing. And even then, cases where you would need it are super small... 
*/
This method creates a callback wrapper around the given parameters, which are themselves callbacks, that shadows variables, as necessary, for its first callback parameter. You can use up to 3 parameters (all functions):
* {{{callback}}}: The main callback function, executed when the wrapper is invoked. Receives access to variable shadows.
* {{{doneCallback}}}: (optional) The finalization callback function, executed after the main callback returns. Does not receive access to variable shadows.
* {{{startCallback}}}: (optional) The initialization callback function, executed before the main callback is invoked. Does not receive access to variable shadows.
\
> Basic Example:
{{{
    $someElement.on(
        'some_event', 
        this.shadowHandler(function (ev) {
            /* main asynchronous code */
        })
    );
}}}
> //With an optional doneCallback//
{{{
    $someElement.on('some_event', this.shadowHandler(
        function (ev) {
            /* main asynchronous code */
        },
        function (ev) {
            /* asynchronous code invoked after the main code */
        }
    ));
}}}
> //With an optional doneCallback and startCallback//
{{{
    $someElement.on('some_event', this.shadowHandler(
        function (ev) {
            /* main asynchronous code */
        },
        function (ev) {
            /* asynchronous code invoked after the main code */
        },
        function (ev) {
            /* asynchronous code invoked before the main code */
        }
    ));
}}}
> //Example from the macro// {{{<<link>>}}}:
{{{
    $link
		.addClass(`macro-${this.name}`)
		.ariaClick({
			namespace : '.macros',
			role      : passage != null ? 'link' : 'button', // equality for null
			one       : passage != null // lazy equality for null
		}, this.shadowHandler(
			this.payload[0].contents !== ''
				? () => Wikifier.wikifyEval(this.payload[0].contents.trim())
				: null,
			passage != null // lazy equality for null
				? () => Engine.play(passage)
				: null
		))
		.appendTo(this.output);

→ the code will look at whether there is code to trigger inside the <<link>> macro 
    then it will look at whether there is a passage to go to
}}}
\
<h4>{{{<MacroContext>.error()}}}</h4>\
This property will render an error message for then the macro can't be processed. It requires an error message in the form of a string.
> //Assuming that// {{{<<someMacro …>>}}}
{{{
    return this.error("oops");

→ will output on the page as:
    '<<someMacro>>: oops'
}}}
The message can include full expressions, including pure JavaScript rendering.
> //Error message from// {{{<<if>>}}}
{{{
    return this.error(`whitespace is not allowed between the "else" and "if" in <<elseif>> clause${i > 0 ? ' (#' + i + ')' : ''}`)
}}}


:: Macro-Conv [chapter menu] {"position":"1700,1100","size":"200,100"}
<h1>Macros of Convenience</h1>
Whether you need a more convenient way to format your code or the text in passages, to send players to a specific varying story passage, or include more JavaScript in the game, SugarCube has a couple of very convenient macros.

* [[An Alternative to Conditional Statements|Macro-Switch]]
* [[Sending the Player to a Passage|Macro-Goto]]
* [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
** [[Arbitrarily Long Returns|Long-Return-JS]]
* [[Updating Parts of the Passage|Macro-Do-Redo]]
* [[Including a Passage inside Another|Macro-Include]] 
* [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
* [[Creating and Using a Widget|Macro-Widget]] 
* [[Using JavaScript in the Passage|Macro-Script-Run]]


:: Macro-Cycle [page basic-interact] {"position":"1400,700","size":"100,100"}
<h1 id="basics-cycle">Cycles and Conditional Options</h1>
Cycles can be a fun way to have the player interact with the story, as they give a different way to format choices or display different variations on the screen. The {{{<<cycle>>}}} macro can be useful to lists MC characteristics options, or changing environmental observations.

I looked at her and she <<cycle "_example">>
	<<option "seemed fine">>
	<<option "was distraught">>
	<<option "was in tears">>
	<<option "smiled">>
<</cycle>>.

The macro has two sets of arguments: one for the container {{{<<cycle>>}}} and one set for the {{{<<option>>}}}/{{{<<optionfrom>>}}}.
* {{{<<cycle>>}}}:
** the variable to save the player's choice
** {{{once}}} (optional): whether the cycle stops at the last option
** {{{autoselect}}} (optional): will autoselect the option from the list, if the value of the variable is included in the list of options
* {{{<<option>>}}}
** the name of the option.
** (optional) the value of the option (if different from the name).
* {{{<<optionfrom>>}}}:
** the variable containing the list of options (array or object).

Assuming that the array {{{_pieOptions = ["blueberry", "cherry", "coconut cream"]}}}:
{{{
    <<cycle "_example" autoselect>>
        <<option "seemed fine" false>>
        <<option "was distraught">>
        <<option "was in tears" 0>>
        <<option "smiled" "bad">>
    <</cycle>>
 → the example, aside from some values.

    <<cycle "$pie" once autoselect>>
        <<optionsfrom _pieOptions>>
    <</cycle>>
 → display the options from the array _pieOptions, and stop when reaching the end.
}}}
\
<h3>Why {{{<<optionfrom>>}}} instead of {{{<<option>>}}}?</h3>\
The {{{<<cycle>>}}} macro provides two ways of getting the source of options to display, with {{{<<option>>}}} and {{{<<optionfrom>>}}}. Whether to choose one rather than the other will depend on preferences and situations.

{{{<<option>>}}} allows for an easier read of the code, as all options and their respective values are explicitly displayed in the code. However, due to how the {{{<<cycle>>}}} macro is built, it won't let you add or remove options depending on situations (i.e. you can't do {{{<<if $var>><<option "value">><</if>>}}}).
> ''Note:'' You can also have different {{{<<cycle>>}}}/{{{<<option>>}}} combo for each situation...  which you can hide inside [[widgets|Macro-Widget]]!
\
On the other hand, {{{<<optionfrom>>}}} will only display the sourcing variable, allowing for cleaner but more obtuse code (see examples above). However, this means you can show different options depending on the situation by modifying the source variable ahead of time.

So, if the list of options is supposed to be the same, regardless of conditions, {{{<<option>>}}} will be the easiest way to do. However, if the options are conditional on a specific situation, then {{{<<optionfrom>>}}} might be more fitting.
\
<h4>Objects or Arrays?</h4>\
As you can indicate either an array or object in {{{<<optionfrom>>}}}, choosing one or the other will depend on whether you wan the displayed text to match the value of the option. 
With an array {{{ [] }}}, what you see is what you ==get== save in the variable (just like {{{<<option "smiled">>}}}). On the other hand, an object {{{ {} }}} might seem a bit more complex to set up, but it allows you so save a different value for each option to display (like {{{<<option "smiled" true>>}}}). 

For example, assuming that:
{{{
    _pieOptionsArray = ["blueberry", "cherry", "coconut cream"]

    _pieOptionsObject = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }
}}}
<<set _pieOptions = ["blueberry", "cherry", "coconut cream"], _pieOptions2 = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }>>\
The array will show : <<cycle "_pie" autoselect>>
	<<optionsfrom _pieOptions>>
<</cycle>> (value of the first option: _pie)
While the object will show: <<cycle "_pie2" autoselect>>
	<<optionsfrom _pieOptions2>>
<</cycle>> (value of the first option: _pie2)

> ''Note on the macro:'' this macro has some issues with accessibility (among others, with screen readers). While this can be remedied with some [[extra code|Accessibility-Cycle]], this should be taken into account when creating a project.


:: Macro-DOM-Adv [page adv-macro] {"position":"800,1900","size":"100,100"}
<h1 id="adv-DOM">DOM Macros and Changing Class of an Element</h1>
As [[DOM Macros|Macro-ApPreRepCopy]] can affect the content displayed on the page, so can they change //how// elements on the page look, by adding or removing an HTML class from that element. There are three macros in this set:
* {{{<<addclass>>}}}, which will add a class to the targeted element.
* {{{<<removeclass>>}}}, which will remove a class from the targeted element.
* {{{<<toggleclass>>}}}, which will either add or remove a class from the targeted element, depending on whether the class was there in the first place.

<<button "Click Me to Change the Title Colour!">>
    <<toggleclass ".passage h1" "colour">>
<</button>>

The macros have 2 arguments:
* {{{selector}}}, or the targeted element 
* {{{className(s)}}}, the classe(s) to add/remove/toggle from the element 
** This one is optional for {{{<<removeclass>>}}} 
\
The macro will target any element you indicate in the first argument. It can be as simple as {{{h1}}}, which will target //all// large header on the page, to more specific like {{{.passage h1}}}, which will only target the large header in the passage.
{{{
    <<addclass "h1" "colour">> 
→ will add ".colour" to the "h1" element

    <<removeclass "#passages">>
→ will remove ALL classes from "#passages"

    <<toggleclass ".dog" "sweet">>
→ will add/remove the class ".sweet" from the ".dog" element
}}}
> ''Note:'' the element indicated in the macro should be on the page. Otherwise, this will trigger an error.
> When using {{{<<removeclass>>}}} to remove classes, please note that it can also affect class created by the Passage Tags, or in JavaScript settings. You can check what classes were removed with the macro via the Inspect Tool of your browser.
\
<h3>An important note on DOM Macros</h3>\
Since the macros require the targeted element to be on the page, they ''cannot'' be coded as is on the page, due to how the [[page renders|SP-PassageReady-Done]]. As such, you will need either to:
* use the {{{<<link>>}}} or {{{<<button>>}}} macro, letting the player interact with the element,
* use the {{{<<done>>}}} macro, which will trigger when the page is fully rendered,
* use the {{{<<timed>>}}} macro, which will trigger long after the page is rendered,
* code it in the {{{PassageDone}}} [[special passage|SP-PassageReady-Done]] (same as the {{{<<done>>}}} macro, but will trigger at every passage render).


:: Macro-Do-Redo [page int-conv] {"position":"1700,1600","size":"100,100"}
<h1 id="int-doredo">Updating Parts of the Passage</h1>
There comes times when you may want to update certain elements on the page, without having the player go to a new passage or refresh the whole page. Working similarly to the {{{<<replace>>}}} [[macro|Macro-ApPreRepCopy]], the {{{<<do/redo>>}}} macro-set lets you update elements of the page with minimal code. However, unlike the DOM macro, the changes aren't temporary.
> ''Note:'' users of the {{{<<liveupdate>>}}} [[custom macro|https://github.com/cyrusfirheir/cycy-wrote-custom-macros/tree/master/live-update]] will be familiar with the logic of this macro, it was based on Cycy's work. 

The macro involves two elements: the {{{<<do>>}}} container, which you will need to wrap around the block you want to update, and {{{<<redo>>}}}, which will force the container to "refresh" its content. 
{{{
    <<do [tag tags] [element tag]>> … <</do>>
    <<redo [tags]>>
}}}
<<do tag "guide">><<if _clicked>>Hey! You clicked the button!<<else>>Don't click the button...<</if>><</do>>
<<button "//THE// button">><<set _clicked to !_clicked>><<redo "guide">><</button>>

The Macro has two argument for the container, and one for the submacro:
* {{{<<do>>}}}, wrapped around the block to update.
** {{{tag}}} (optional), a list of tags to identify the blocks and helps filtering 
** {{{element}}} (optional), the HTML elements which will wrap the whole block.
*** if omitted, {{{<span>}}} will be the default
* {{{<<redo>>}}}, which will trigger the update.
** {{{tag}}} (optional), the list of tags to target when updating
*** if omitted, it will target all available {{{<<do>>}}} on the screen
\
{{{
→ Basic use:
    ''Apples:'' <<do>>$apples<</do>>
    <<link "Pick up Apples">>
        <<set $apples += 10>>
        <<redo>>
    <</link>>

    <<do>>
        <<if $key>>
            You have the $key key.
            [[Open the Door!]]
        <<else>>
            You do not have a key.
            <<link "Pick Up the Key!">>
                <<set $key to ["", "red", "blue", "skull"].random()>>
                <<redo>>
            <</link>>
        <</if>>
    <</do>>


→ Use with tags:
    ''Apples:'' <<do tag "apple">>$apples<</do>>
    ''Money:'' <<do tag "money">>$apples<</do>>

    <<link "Pick up Apples">>
        <<set $apples += 10>>
        <<redo "money">>
    <</link>>
    <<link "Buy Apples">>
        <<set $apples += 10, $money -= 100>>
        <<redo "apple money">>
    <</link>>

→ Use with tags and elements:
    <<do tag "inventory" element "div">>
        <<if $InventoryAmount gt 5>>
            [[Open Bag]]
        <</if>>
    <</do>>

    <<button "Stuff Bag">><<redo>><</button>>
}}}
> ''Note:'' In HTML, the block inside a {{{<<do>>}}} will look like this:
{{{
    <[element] class="macro-do redo-target" data-do-tags="[indicated tags]">1</[element]>
}}}
> For styling, you will be able to target a tagged {{{<<do>>}}} with {{{[data-do-tags~="YOUR-TAG"]}}} in the CSS.


:: Macro-Done [page adv-macro] {"position":"900,2000","size":"100,100"}
<h1 id="adv-done">Emulating PassageDone for one Passage</h1>
While it is possible to target one single passage with the [[Special Passage|SP-PassageReady-Done]] {{{PassageDone}}}, the same can be achieved with the {{{<<done>>}}} macro inside that particular passage. Instead of having the code run on every visited passage, it will only trigger where {{{<<done>>}}} has been coded.
> ''Note'': for multiple passages use, {{{PassageDone}}} should be preferred. Or even assigning code to the {{{:passagedisplay}}} [[event|Events-Passage]] in the JavaScript.

This macro is especially useful to trigger DOM Macros whether it is [[adding elements to the page|Macro-ApPreRepCopy]] or [[changing the class of that element|Macro-DOM-Adv]].
> ''Note:'' the player will not see any delay between the rendering of the passage and triggering the macro. For delayed needs, use the {{{<<timed>>}}} macro.
{{{
    @@#spy;@@

    <<done>>
        <<replace "#spy">>I spy with my little eye, a crab rangoon.<</replace>>
    <</done>>
}}}


:: Macro-For-Repeat [page adv-macro] {"position":"900,1900","size":"100,100"}
<h1 id="adv-forrepeat">Loops and Repeats - Two Ways</h1>
There may be situations and mechanics that will require a looping function to repeat code or print elements on the page. This can be done with the {{{<<for>>}}} and {{{<<repeat>>}}} macros.

While both {{{<<for>>}}} and {{{<<repeat>>}}} will loop and repeat their action, they do it in different ways. The {{{<<repeat>>}}} macro will trigger its content at an indicated interval until stopped, while the {{{<<for>>}}} macro will trigger an indicated amount of time (almost) at once. Whether time is involved is the biggest difference.
\
<h3>The {{{<<repeat>>}}} macro</h3>\
The macro will repeatedly execute its content after the indicated delay. It can be useful as a countdown, check the value of a variable before triggering some code, or replace elements on the page. It can be stopped either by using the {{{<<stop>>}}} macro inside the container or moving to a new passage.

The macro has 2 arguments:
* {{{delay}}}, or the interval between each iteration, should be indicated in seconds or milliseconds.
** the minimum is 40ms
* {{{t8n}}}/{{{transition}}} (optional), whether any insertion on the page should be done with an animation 
{{{
    <<repeat 1s t8n>> 
        /* Your Code */ 
    <</repeat>>
}}}

When creating a loop, it should be remembered that the macro ''will not stop'' until it encounters a {{{<<stop>>}}} macro within the code (or when moving to a different passage).

An example of a loop, as a countdown timer, updating the text every second, before sending the player to an end passage:
{{{
    <<set $seconds to 10>>

    Countdown: <span id="countdown">$seconds seconds</span> remaining!

	<<repeat 1s>>
		<<set $seconds to -->>
		<<if $seconds is 1>>
            <<replace "#countdown">>$seconds second<</replace>>
        <<elseif $seconds gt 0>>
			<<replace "#countdown">>$seconds seconds<</replace>>
		<<else>>
			<<replace "#countdown">>Too Late<</replace>>
            <<timed 3s>>
                <<goto "Too Late END">>
            <</timed>>
			<<stop>>
		<</if>>
	<</repeat>>
}}}
\
<h3>The {{{<<for>>}}} macro</h3>\
The macro will repeatedly execute its content for a certain amount of times, set in three forms: conditional, 3-part conditional, and range. Unless used in combination with the submacros {{{<<break>>}}} and {{{<<continue>>}}}, the loop will execute until the condition in the form is fulfilled.
This macro is quite useful in displaying content of an inventory, or doing code loop.
\
<h4>The Conditional forms</h4>\
The conditional forms come in two ways: simple and 3-part. They will execute the content of the macro until the condition is no longer true.
{{{
    <<for [init]; [conditional]; [post]>>
}}}

For this form, the macro has three arguments:
* {{{init}}} (optional), or the initialisation of a counter variable (ex: {{{_i}}})
* {{{conditional}}}, or the conditional expression which should be check at the start of every loop, triggering the code until it is no longer true
* {{{post}}} (optional), the change of value of the counter variable, happening at the end of each loop.
> ''Note:'' the arguments HAVE to be separated by a semi-colon {{{ ; }}}
\
> //Single Conditional://
{{{
    <<set _filling to ["Apple", "Chocolate", "Cherry", "Pumpkin"]>>
    <<for _done isnot true>>
        <<if _filling.length is 0>>
            <<set _done to true>>
            The Pies Have ALL Been Eaten!
        <<else>>
            <<set _taste to _filling.pluck()>>
            You eat the _taste Pie!
        <</if>>
    <</for>>

→ This will print //You eat the [type] Pie!// until all {{{_filling}}} have been listed.
}}}
> //3-Part Conditional://
{{{
    <<set $dwarves to ["Doc", "Dopey", "Bashful", "Grumpy", "Sneezy", "Sleepy", "Happy"]>>

    <ol>
        <<for _i to 0; _i lt $dwarves.length; _i++>>
            <li> $dwarves[_i]</li>
        <</for>>
    </ol>

→ This will print the array as an ordered list
}}}
\
<h4>The Range form</h4>\
This form will go through all entries of a given collection, and stop executing when the collection has run out. The collection can have a multitude of form, from arrays to a simple number.

There are 4 arguments for this form:
* {{{keyVariable}}} (optional), a temporary variable holding the loop iteration number (starting at 0)
* {{{valueVariable}}} (optional), as a {{{$var}}} or {{{_temp}}}, holding the value of the current loop iteration
* {{{range}}}, required to tell the system this is a range form
* {{{collection}}}, the variable holding as many entries are there will be iterations
** among others, it will accept: arrays, objects, strings (as an array of characters) and integer
> //Using an array://
{{{
    <<set $dwarves to ["Doc", "Dopey", "Bashful", "Grumpy", "Sneezy", "Sleepy", "Happy"]>>

    <<for _i, _name range $dwarves>>
        <<print _i + 1>>. _name
    <</for>>
→ will print the content of the array as a list (#. value)
}}}
> //Using an integer//:
{{{
    <<for _value range 7>>
        <<set $hp -= random(2, 10)>>
    <</for>>
→ will run the code 7 times and remove a random number each time
}}}
\
<h4>Using {{{<<break>>}}} and {{{<<continue>>}}}</h4>\
The {{{<<for>>}}} macro has also two submacros to skip finishing an iteration or stop the loop altogether before it is completed, respectively with the {{{<<continue>>}}} and {{{<<break>>}}} macros. 

For example, the code below is set to run 10 times, and will check if the number of iteration and:
* not print a number if the iteration is 2, 3, or 5
* stop the looping altogether if the iteration is greater than 8 
{{{
    <<for _i to 0; _i lt 10; _i++>>
        <<if [2,3,5].includes(_i)>>
            <<continue>>
        <<elseif _i gt 8>>
            <<break>>
        <</if>>
        <<print _i>>
    <<for>>

→ Printed output:
    0 1 4 6 7 8
}}}


:: Macro-Goto [page int-conv] {"position":"1700,1500","size":"100,100"}
<h1 id="int-goto">Sending the Player to a Passage</h1>
The [[Link Markup|Markup-Link]] and {{{<<link>>}}} [[macro|Macro-Link]] are not the only macros to send the player to a specific passage. You also have the {{{<<goto>>}}} macro.

While it should not be overused, as it can clutter the player history, and it also is an argument in the {{{<<link>>}}} macro, there are situations where {{{<<goto>>}}} can actually be necessary. Like the destination of the next passage being conditional.
{{{
    <<goto [passageName]>>
}}}
The macro has 1 argument:
* {{{passageName}}}: the name of the wanted passage, variable or function
{{{
    <<goto "PassageName">>
    <<goto [[PassageName]]>> ← will create an arrow in Twine
    <<goto $passage>>
    <<goto [[$passage]]>>
    <<goto `previous()`>>
}}}
> ''Note:'' since Twine automatically creates a new passage when the {{{[[link]]}}} [[Markup|Markup-Link]], you should avoid that formatting when indicating a variable or function.
\
With {{{<<goto>>}}} only sending the player to the wanted passage, it is important to code it inside another interactive macro (like a {{{<<link>>}}}, {{{<<button>>}}}, or {{{<<timed>>}}}). Otherwise, the macro will trigger automatically as the current passage loads, and the player will be sent to the new passage without interacting with the current page.
> ''Note:'' Both the incompletely loaded and new passage will be included in the player's visited passages.
> //Some example of uses://
{{{
    <<link "Attack!">>
        <<if $attack gt 5>>
            <<goto "Success">>
        <<else>>
            <<goto "Failure">>
        <</if>>
    <</link>>

    <<timed 3s>>
        <<goto "No Action">>
    <</timed>>
}}}
\
> ''Note:'' in some instances, it is even preferable to use the [[Navigation Override|Basic-Config-Navig]] instead of {{{<<goto>>}}}.


:: Macro-Group-Playlist [page audio-macro] {"position":"3000,1200","size":"100,100"}
<h1 id="audio-groupplay">Create Track Groups and Playlists</h1>
On top of adding audio tracks to your project, you can also create groups of tracks, for a better control over multiple tracks at once, and playlists. The first is set by the {{{<<createaudiogroup>>}}} macro, while the second is done through {{{<<createplaylist>>}}}. Both macros need to be set in {{{StoryInit}}} ''after'' the tracks are cached (with {{{<<cacheaudio>>}}}).
\
<h3>Create a Track Group</h3>\
{{{
    <<createaudiogroup groupId>>
        [<<track trackId>> …]
    <</createaudiogroup>> 
}}}
The macro only has one argument for the container, and one arugment for the sub-macro:
* {{{<<createaudiogroup>>}}}
** {{{groupId}}}: the name of the group, starting with {{{:}}}
* {{{<<track>>}}}
** {{{trackId}}}: the ID of the track(s)
Assuming that the tracks {{{beep}}}, {{{boop}}}, and {{{swish}}} were defined above:
{{{
    <<createaudiogroup ":controls">>
        <<track "beep">>
        <<track "boop">>
        <<track "swish">>
    <</createaudiogroup>> 
}}}
>'' Note:'' You cannot name your group with the following: {{{:all}}}, {{{:looped}}}, {{{:muted}}}, {{{:not}}}, {{{:paused}}}, {{{:playing}}}, as they are used for [[audio control|Audio-Macro]].
\
<h3>Create a Playlist</h3>\
{{{
    <<createplaylist listId>>
        [<<track trackId actionList>> …]
    <</createplaylist>> 
}}}
The macro only has one argument for the container, and three argument for the sub-macro:
* {{{<<createplaylist>>}}}
** {{{listId}}}: the ID of the playlist
* {{{<<track>>}}}
** {{{trackId}}}: the ID of the track
** {{{volume}}} (optional): to set the volume of the track, set from 0 (for 0%) to 1 (for 100%).
** {{{own}}} (optional): to create an independent copy of the track for the playlist
Assuming that the tracks {{{beep}}}, {{{boop}}}, and {{{swish}}} were defined above:
{{{
    <<createplaylist "controls">>
        <<track "beep" own>>
        <<track "boop" volume 0.5>>
        <<track "swish" volume 0.3 own>>
    <</createplaylist>> 
}}}


:: Macro-If [page basic-macro] {"position":"1200,700","size":"100,100"}
<h1 id="basics-maif">More Conditional Statements</h1>
While the {{{is}}} operator covers many cases in [[conditional statements|Macro-If-Basic]], the {{{<<if>>}}} macro will accept many more, in either SugarCube or JavaScript form. With the following operators, you can create more general conditions (e.g. if a variable is greater/lower than a value). It is also possible to mix-n-match the forms.

<<nobr>>
    <table class="ifses">
        <tr>
            <th>SugarCube</th><th>JavaScript</th><th>Description</th><th>Example</th>
        </tr>
        <tr>
            <td>{{{is}}}</td><td>{{{===}}}</td><td>Check if //strictly// equal</td><td>{{{<<if $test is 1>>}}} {{{<<if $test === 1>>}}}</td>
        </tr>
        <tr>
            <td>{{{isnot}}}</td><td>{{{!==}}}</td><td>Check if //strictly// NOT equal</td><td>{{{<<if $test isnot "apple">>}}} {{{<<if $test !== "apple">>}}}</td>
        </tr>
        <tr>
            <td>{{{eq}}}</td><td>{{{==}}}</td><td>Check if equivalent</td><td>{{{<<if $test eq 45>>}}} {{{<<if $test == 45>>}}}</td>
        </tr>
        <tr>
            <td>{{{neq}}}</td><td>{{{!=}}}</td><td>Check if NOT equivalent</td><td>{{{<<if $test neq "dinner">>}}} {{{<<if $test != "dinner">>}}}</td>
        </tr>
        <tr>
            <td>{{{gt}}}</td><td>{{{>}}}</td><td>Check if greater than</td><td>{{{<<if $test gt 12>>}}} {{{<<if $test > 12>>}}}</td>
        </tr>
        <tr>
            <td>{{{gte}}}</td><td>{{{>=}}}</td><td>Check if greater or equal</td><td>{{{<<if $test gte $tries>>}}} {{{<<if $test >= $tries>>}}}</td>
        </tr>
        <tr>
            <td>{{{lt}}}</td><td>{{{<}}}</td><td>Check if lower than</td><td>{{{<<if $test lt ($tries + 2)>>}}} {{{<<if $test < ($tries + 2)>>}}}</td>
        </tr>
        <tr>
            <td>{{{lte}}}</td><td>{{{<=}}}</td><td>Check if lower or equal</td><td>{{{<<if $test lte $listparticipant.length>>}}} {{{<<if $test <= $listparticipant.length>>}}}</td>
        </tr>
        <tr>
            <td>{{{def}}}</td><td>/</td><td>Check if variable is defined</td><td>{{{<<if def $test>>}}}</td>
        </tr>
        <tr>
            <td>{{{ndef}}}</td><td>/</td><td>Check if variable is NOT defined</td><td>{{{<<if ndef $test>>}}}</td>
        </tr>
        <tr>
            <td>{{{not}}}</td><td>{{{!}}}</td><td>Check if condition is //false// or Falsy</td><td>{{{<<if not $test>>}}} {{{<<if !$test>>}}}</td>
        </tr>
        <tr>
            <td>{{{ }}}</td><td>{{{ }}}</td><td>Check if condition is //true// or Truthy</td><td>{{{<<if $test>>}}}</td>
        </tr>
        <tr>
            <td>{{{and}}}</td><td>{{{&&}}}</td><td>Evaluate if //all// conditions are true</td><td>{{{<<if $test is 1 and $name is "Jane">>}}} {{{<<if $test === 1 && $name === "Jane">>}}}</td>
        </tr>
        <tr>
            <td>{{{or}}}</td><td>{{{||}}}</td><td>Evaluate if //one// of the conditions is true</td><td>{{{<<if $test is 1 or $test if 4>>}}} {{{<<if $test === 1 || $test === 4>>}}}</td>
        </tr>
    </table>
<</nobr>>\
> ''Attention:'' As of 2.37.0, SugarCube will not display an error if {{{=}}} is used instead of {{{is/eq}}} or {{{===/==}}}, and will display the variation even if false. You will need to turn the {{{Config.enableOptionalDebugging}}} [[API|DebugAPI]] if you want to see those errors during testing.
\
<h3>Ordering your Conditional Statements</h3>\
When including multiple conditions inside one {{{<<if>>}}} block, it is //really// ''important'' to order the conditional statements ''most strict'' to the //least//. This is because Twine reads code from top to bottom: the program will stop at the first fulfilled condition, even if there is a better fitting situation below. For example:
{{{
    <<if $turn gt 3>>
        The Code will stop here and only show this text...
    <<elseif $turn gt 3 && $turn lt 5>>
        ... even if the value of $turn is 4.
    <</if>>

    <<if $turn gt 3 && $turn lt 5>>
        But this code will only show if the value of $turn is 4...
    <<elseif $turn gt 3>>
        ...while this one will show if the value of $turn is greater than 3 
        AND does not meet the previous condition.
    <</if>>
}}}
\
<h3>Mixing AND and OR</h3>\
Linking operators like {{{and}}} and {{{or}}} are particularly useful in avoiding bloating passages with unnecessary {{{<<elseif>>}}} and nested {{{<<if>>}}} blocks. Those operators allow you to merge conditions and make your code easier to go through.

If a variation requires multiple conditions to be met, you can merge them into one statement using the {{{and}}} operator (or {{{ && }}}). For a variation that could be applied to different distinct conditions, you can merge them into one statement using the {{{or}}} operator (or {{{ || }}}). 
{{{
    <<if ($turn is 1) and ($name is "Jane")>>
→ will only work if $turn has a value of 1 >AND< $name is "Jane"

    <<if ($turn is 3) or ($pet is "dog")>>
→ will work if $turn has the value of 3 >OR< $pet is "dog"
}}}
> ''Note:'' here, the parentheses are not mandatory, but it can help separate conditions for easier code reading.
\
It is also possible to mix and match those operators for more complex merge of conditional statements (see below). To organise the different conditions, it is recommended to uses parentheses {{{ ( ) }}}.
> ''Note:'' you must remember that the order of which the operators are applied, work like maths (or an onion): the most inside parentheses first, then one external layer at a time.
{{{
    <<if ($turn is 4 or $pet is "dog") && ($name is "Jane" or $credit gt ($cost * 2))>>
→ will only work if one of the conditions in >EACH< block is true:
    → if $turn has the value of 4 >OR< $pet is "dog"
    → if $name is "Jane" >OR< the value of $credit is greater than 
      the value of $cost multiplied by 2
}}}
\
<h3>True/False and Truthy/Falsy</h3>\
The {{{ }}} and {{{!}}} operators will not only look whether a boolean variable is true/false, but can also be used with non-boolean variables (i.e. string/integer) and see if they meet the truthy/falsy condition. Though they sound pretty similar, there is a big difference between //true/false// and //truthy/falsy//:
* //True/False// is strictly related to Boolean values and situations
** {{{$var is true}}} or {{{hasVisited("PASSAGE") is false}}}
* //Truthy/Falsy// will look at whether a variable is defined, and what types of value it holds (including //True/False//)
<table id="truthy">
    <tr>
        <th>Truthy values</th><th>Falsy values</th>
    </tr>
    <tr>
        <td>true
        any number that is not 0
        any filled string (inc. 'false' and '0')
        {{{ [] }}} (defined but empty arrays)
        {{{ {} }}} (defined but empty objects)
        </td>
        <td>false
        0
        {{{ '' }}} (empty string)
        null
        undefined
        NaN
        </td>
    </tr>
</table>\
Assuming that {{{$test = ''}}}:
{{{
    <<if $test>>
        This text will not show because $test is an empty string, and so a falsy condition.
    <</if>>
    <<if !$test>>
        This text //will// show, because $test is an empty string, and so a falsy condition.
    <</if>>

Note:
    <<if def $test>>
        This text //will// show, because $test is defined, even as an empty string.
    <</if>>
}}}


:: Macro-If-Basic [page basics] {"position":"900,300","size":"100,100"}
<h1 id="basic-if">Display Variation and the {{{<<if>>}}} Macro</h1>
Following a player's choice, you may want to show a specific variant of the next passage, based on that choice. This will be possible with ''conditional statements'', through the {{{<<if>>}}} Macro (you will need to [[set a variable|Macro-Set-Basic]] first).
> ''Note:'' the example below showcase different types of [[values|Variables-Base]].
\
> //A single variation://
{{{
    <<if $choice is 1>>
        This text will only show if the value of variable $choice is 1.
    <</if>>
}}}
> //Two variations://
{{{
    <<if $choice is true>>
        This text will show if the variable $choice is true.
    <<else>>
        If not, this text will show.
    <</if>>
}}}
> //Two specific variations://
{{{
    <<if $choice is "stone">>
        This text will show if the value of variable $choice is "stone".
    <<elseif $choice is "grass">>
        But if the value of the variable $choice is "grass", then this text will show.
    <</if>>
}}}
> //Three variations://
{{{
  At the store you picked <<if $pet is "dog">>a dog<<elseif $pet is "car">>a cat<<else>>a bird<</if>>.
}}}
> ''Note:'' the code of the examples above are only indented to showcase it better. While this is a recommended method, to keep track of macros, it will create extra blank space.

Conditional statements can also be nested inside one another:
{{{
    <<if $choice is 1>>       ← first conditional 
        <<if $pet is "dog">>  ← nested conditional
            This will show this sentence on the page.
        <<elseif $pet is "cat">>
            Or maybe this one.
        <</if>>
    <<else>>
        Otherwise it will be this one.
    <</if>>
}}}

For other operators and more advanced uses of the {{{<<if>>}}} Macro, see [[this page|Macro-If]].


:: Macro-Include [page int-conv] {"position":"1700,1300","size":"100,100"}
<h1 id="int-include">Including a Passage inside another</h1>
The {{{<<include>>}}} macro is quite helpful when it comes to including a bit of text or code inside multiple passages, or simple helping organising the content of a passage (especially if it includes quite a bit of code) to avoid unnecessary clutter. It essentially includes the content of a passage inside the one where the macro is coded.
{{{
    <<include [passageName] [elementName]>>
}}}
The macro has 2 arguments:
* {{{passageName}}}: the name of the passage 
** this can be done plainly by indicating the name of the passage, or through a variable.
* {{{elementName}}}: the HTML element type (optional) to wrap the included passage (ex: h1, div, p, etc...)
{{{

    <<include "Passage Name">>
    <<include [[Passage Name]]>> ← creates an arrow in Twine
→ will display the content of //Passage Name//

    <<include $var>>
→ will display the content of the passage, whose name has to be saved
    in the variable, or it will display an error.

    <<include "Passage Name" "div">> ← 
→ will display the passage inside a 'div'

    <<include [[Passage Name]] "h1">>
→ will display the passage in the largest header 
     (and create an arrow in Twine)
}}}

You can use {{{<<include>>}}} in any passage you want, even the [[Special Passages|Special-Passage]]! It can be pretty practical for {{{StoryInit}}} if you have a lot of variables or macros to set up and want to organise them.

If an HTML element is indicated in {{{<<include>>}}}, that element will also carry a special class name (if you want to edit that included block in the StyleSheet). That class will be defined after the name of the included passage, only in lowercases, with hyphens {{{-}}} replacing spaces, and removing any punctuation.
So {{{Passage Name}}} will have the class {{{passage-passage-name}}}, or {{{To the Left !}}} will look like {{{passage-to-the-left-}}}.
> ''Note:'' It is not recommended to use punctuation in a passage name.
{{{
    :: Start 
    This is the Start. 
    <<include "Left">>

    :: Left 
    And now you go left!

→ will appear on the page as:
    This is the Start.
    And now you go left!
}}}
> ''Note:'' unlike the {{{<<widget>>}}} [[macro|Macro-Widget]], {{{<<include>>}}} will add the whole passage called to the page, whether it is one line or a hundred long (space, line breaks and all).


:: Macro-Input [page basic-interact] {"position":"1400,900","size":"100,100"}
<h1 id="basics-input">Player Input in three macros</h1>
SugarCube offers three variations of input boxes: the {{{<<textbox>>}}}, the {{{<<textarea>>}}}, and the {{{<<numberbox>>}}}. The latter deals with integer (numbers), while the other two save inputs into strings (words).
\
<h3>The {{{<<textbox>>}}} macro</h3>\
The textbox allows the player to indicate a string of word(s). This can be useful for short and simple inputs, like a name.

<<textbox "_wager" "Jane">>

The macro has four arguments:
* the variable to save the player input
* the default text visible to the player
** this can be empty ({{{ "" }}})
* {{{"PassageName"}}} (optional) whether the player will be sent to another passage when pressing //Enter//
* {{{autofocus}}} (optional) whether the area is automatically in focus when the passage loads
{{{
    <<textbox "$variable" "Default Text" "NextPassage" autofocus>>
→ this will be in focus, showing "Default Text", with the final value saved in $variable, and the player sent to "NextPassage" when pressing Enter.

    <<textbox "$variable" "">>
→ this will not be in focus, showing nothing as the default value, and saving the input in $variable.
}}}
> ''Note:'' if you need to check the value of the {{{<<textbox>>}}} before the player moves to another passage, I would not recommend indicating a passage name in the macro, but use a separate button/link.
\
<h3>The {{{<<numberbox>>}}} macro</h3>\
The macro works similarly to the {{{<<textbox>>}}}, aside from saving the input as an integer instead of a string.

<<numberbox "_wager" 100>>

The macro has four arguments:
* the variable to save the player input
* the default number visible to the player
** if ({{{ "" }}}) is indicated, it will default to 0
* {{{PassageName}}} (optional) whether the player will be sent to another passage when pressing //Enter//
* {{{autofocus}}} (optional) whether the area is automatically in focus 
{{{
    <<numberbox "$variable" 10 "NextPassage" autofocus>>
→ this will be in focus, showing the number 10, with the final value saved in $variable, and the player sent to "NextPassage" when pressing Enter.

    <<numberbox "$variable" "">>
→ this will not be in focus, showing 0 as the default value, and saving the input in $variable.
}}}
> ''Notes:'' while the macro does not have min or max value, [[the Numberpool custom macro|http://www.motoslave.net/sugarcube/2/#downloads]] does.
> If you need to check the value of the {{{<<numberbox>>}}} before the player moves to another passage, I would not recommend indicating a passage name in the macro, but use a separate button/link.
\
<h3>The {{{<<textarea>>}}} macro</h3>\
This macro creates a multi-line area for the player to input text, and saves this input inside a variable. This is a good interactive macro to save longer bits of text, like journal entries.
Unlike the two previous macros, the {{{<<textarea>>}}} allows the player to resize the input box (unless disabled with some CSS).

<<textarea "_example" "This is an example of a text area.">>

The macro has three arguments:
* the variable to save the player input
* the default text visible to the player
* {{{autofocus}}} (optional) whether the area is automatically in focus 
{{{
    <<textarea "$variable" "Visible Text" autofocus>> 
→ this will be in focus and the player will see "Visible Text" in the box, and the player input will be saved in $variable

    <<textarea "$variable" "">> 
→ this will not be in focus, and will not show any text, but the final input will be saved in $variable
}}}

> ''Note on autofocus:'' there are instances where the {{{autofocus}}} will not trigger. 
> For example, on the first passage loaded when opening the game (or on refreshing the page), which you can fix this by forcing focus with some jQuery on the specific textbox (though it may be unnecessary if its clear the input should be interacted with). 
> Another example is when multiple {{{autofocus}}} are coded on one page. In this case, the autofocus will only trigger ''on the last one''.


:: Macro-Interact [chapter menu] {"position":"1400,600","size":"200,100"}
<h1>Adding some Interactivity</h1>
While links make up for the majority of interactions in Twine games, SugarCube includes other types of interactivity through macros, which can help add different kinds of gameplay elements. The macros mentioned in this section are particularly useful for character creation, puzzles, and even combat systems.
\
* [[Multi or Single Option Choices|Macro-CheckRadio]]
* [[Cycles and Conditional Options|Macro-Cycle]] 
** [[Make the Cycle Macro Accessible|Accessibility-Cycle]]
* [[Listboxes and Conditional Options|Macro-Listbox]] 
* [[Player Input in three macros|Macro-Input]]
* [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
\
> ''Note:'' For a concrete example of interactive character creator, see my [[Character Creator Template|https://manonamora.itch.io/twine-sugarcube-templates]].


:: Macro-Interact-Adv [chapter menu] {"position":"1400,1100","size":"200,100"}
<h1>More Interactivity Macros</h1>
While a previous section touched upon the [[Base Interactive Macros|Macro-Interact]], SugarCube still has more interactive macros, of a more intermediate use level. These macros will add different kinds of interactivity to the project, or more flexibility in said interactivity.

* [[Delaying Displaying Text or Running Code|Macro-Timed]]
* [[Displaying Text Letter by Letter|Macro-Type]] 
* [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]] 
* [[Using Custom Macro|Custom-Macro]]


:: Macro-Link [page basic-macro] {"position":"1100,700","size":"100,100"}
<h1 id="basics-malinks">Displaying more than text in Links</h1>
Just like the [[Link Markup|Markup-Link]], you can display more than just plain text as links. This includes the content of variables, widgets, or even images (similar to the [[Image Markup|Markup-Image]]). 

You can use variables to display the entirety of the link's text, or send the player to a certain passage. Assuming that {{{$passage = "Garden"}}} and {{{$text = "Go take a walk"}}}:
{{{
    <<link $text $passage>><</link>>
 → will work the same way as
    <<link [[Go take a walk|Garden]]>><</link>> 
 → or 
    <<link "Go take a walk" "Garden">><</link>>
}}}

Displaying ''the value of a variable'' is a bit more straightforward than with the [[Link Markup|Markup-Link]], as you won't need to separate text with quotes and pluses ({{{ + }}}).
Assuming that {{{$name = "Jane"}}} and {{{$location = "Garden"}}}:<<set $name to "Jane">>
{{{<<link "I am $name" "Passage">><</link>>}}} → <<link "I am $name" "Passage">><</link>>

You can even use ''conditional statements'' to display variation inside a link. In the example below, depending on the value of {{{$location}}}, the link will show a different text.
{{{
<<link '<<if $location is "Garden">>Go back to the house<<else>>Go to the house<</if>>' "House">><</link>>

<<link `($location === "Garden") ? "Go back to the house" : "Go to the house"` "House">><</link>>
}}}
> ''Note:'' the second example is called a //ternary conditional operator//, used in JavaScript as a one-line if-else statement. You will require a backtick {{{ ` }}} instead of a quote or apostrophe, as it is technically JavaScript code.
> //It is also the preferred method when using two-conditional statements in a link.//
\
Similarly, for ''widgets'', assuming that {{{<<widget "SomeWidget">>Wow Some Text<</widget>>}}}:
{{{<<link "<<SomeWidget>>" "Passage">><</link>>}}} → <<link "<<SomeWidget>>" "Passage">><</link>>
> ''Note:'' you still need to wrap the widget with quotes/apostrophe inside the link! Otherwise, you will get an error.
\
As for ''images'', you can use the [[Image Markup|Markup-Image]] inside the {{{<<link>>}}} macro, or the HTML markup ({{{<img>}}}). You will also need to know the [[URL|URL-Types]] of the relevant image.
{{{
    <<link [img[URL][Passage]]>><</link>>

    <<link "[img[URL]]" "Passage">><</link>>

    <<link '<img src="URL">' "Passage">><</link>>
}}}
> ''Note:'' if you want to set a variable, you will need to do so inside the container, not in the Image Markup.
\
<h3>Quotes or Apostrophes... or both?</h3>\
To use the {{{<<link>>}}} macro, you need to either include the [[Link Markup|Markup-Link]] or wrap the wanted text (and potentially the passage) with either Apostrophes {{{ ' ' }}} or Quotes {{{" "}}}, which are essentially interchangeable (see examples below). 

However, this can become an issue if the wrapped text/element contains apostrophes or quotes to function (like the image or the conditional statement examples above), or to format the text (like with [[bolding|Markup-Styling]]). In this case, you have multiple solutions:
> //Nest one inside the other// {{{' " " '}}} or {{{" ' ' "}}}: 
{{{
    <<link '"I am speaking!"' "Passage">><</link>>
    <<link "I don't think this is a good idea..." "Passage">><</link>>
    <<link '<img src="URL">' "Passage">><</link>>
    <<link "//''HEY!''//" "Passage">><</link>>
}}}
> //Use the backslash before the nested character// {{{\}}}:
{{{
    <<link "\"I am speaking!\"" "Passage">><</link>>
    <<link 'I don\'t think this is a good idea...' "Passage">><</link>>
    <<link "<img src=\"URL\">" "Passage">><</link>>
    <<link "//\'\'HEY!\'\'//" "Passage">><</link>>
}}}
> ''Note:'' For story text requiring an apostrophe or quotes, I would recommend the use of the curly type ({{{“ ”}}} and {{{‘ ’}}}) rather than straight ones. This way, you would not run into the nesting issue mentioned above.
> {{{<<link '“I am speaking!”' "Passage">><</link>>}}} → <<link '“I am speaking!”' "Passage">><</link>>


:: Macro-Link-AppPreRep [page basic-interact] {"position":"1500,900","size":"100,100"}
<h1 id="basics-appprerep">Revealing Extra Text and Disappearing Links</h1>
Rather than moving the player to another passage to continue the story, or if you want to insert extra flavour text through interactivity, SugarCube has three link macros with a twist: {{{<<linkappend>>}}}, {{{<<linkprepend>>}}} and {{{<<linkreplace>>}}}. Like their name suggests, when the link is clicked, the macro will add text //after// the link ({{{<<linkappend>>}}}), add text //before// the link ({{{<<linkprepend>>}}}), or //replace// the link with a new text ({{{<<linkreplace>>}}}).

The three container macros have each 2 arguments:
* the text to display in the link
* (optional) whether to show the new text with a transition : {{{t8n}}} or {{{transition}}}
\
<h3>{{{<<linkappend>>}}}</h3>\
This macro is essentially a combination of the {{{<<link>>}}} and {{{<<append>>}}} macros, by creating a one-time use link that deactivates itself when clicked and prints the content coded inside the container ''after'' that link.
{{{
    <<linkappend "text in link" t8n>>
        text to appear after the link
    <</linkappend>>
    <<linkappend "text in link" t8n>>/* Code */<</linkappend>>
}}}
Ex: I ate a <<linkappend "cookie" t8n>>, which was filled with chocolate<</linkappend>>.
\
<h3>{{{<<linkprepend>>}}}</h3>\
This macro is essentially a combination of the {{{<<link>>}}} and {{{<<prepend>>}}} macros, by creating a one-time use link that deactivates itself when clicked and displays the content coded inside the container ''before'' that link.
{{{
    <<linkprepend "text in link" t8n>>
        text to appear before the link
    <</linkprepend>>
    <<linkprepend "text in link" t8n>>/* Code */<</linkprepend>>
}}}
Ex: I ate a <<linkprepend "cookie" t8n>>delicious <</linkprepend>>.
\
<h3>{{{<<linkreplace>>}}}</h3>\
This macro is essentially a combination of the {{{<<link>>}}} and {{{<<replace>>}}} macros, by creating a one-time use link that replaces itself with the content coded inside the container when clicked.
{{{
    <<linkreplace "text in link" t8n>>text to appear before the link<</linkreplace>>
    <<linkreplace "text in link" t8n>>/* Code */<</linkreplace>>
}}}
Ex: I ate a <<linkreplace "cookie" t8n>>slice of pie<</linkreplace>>.

> ''Note:'' if you are looking for more flexibility in the placement of the link and/or the display of the added text, you may want to use their respective [[DOM macros|Macro-ApPreRepCopy]] nested inside a {{{<<link>>}}} instead.
\
> ''Note on customisation:'' these macros will look exactly like regular links to the player. You can help the player differentiate between those to by targetting the following elements in the StyleSheet: {{{.macro-linkappend}}}, {{{.macro-linkprepend}}} and {{{.macro-linkreplace}}}.


:: Macro-Link-Basic [page basics] {"position":"900,200","size":"100,100"}
<h1 id="basic-links">Linking Passages and the {{{<<link>>}}} Macro</h1>
To move the player from one part of the story to the next, you need to link the different story passages. This can be done in two ways: the {{{[[Link]]}}} markup or the {{{<<link>>}}} macro. Both ways will achieve the same thing, but the macro will give you more flexibility with interactivity. 
> ''Note:'' in some cases, the {{{<<link>>}}} macro will not create a visual link between passage blocks in map of the project on Twine.
\
<h3>The {{{[[Link]]}}} markup</h3>\
To create a link with the {{{[[Link]]}}} markup, you need to wrap the relevant text with double square brackets {{{ [[ ]] }}}.
> ''Note:'' in the Twine application, wrapping a bit of text with the square brackets will automatically create a passage with the text inside the brackets as that passage's name.
{{{
 [[Go to the Garden]] 
    → will send the player to the passage called "Go to the Garden"

 [[Home234]]
    → will send the player to the passage called "Home234"
}}}

If you want to display something else than the Passage name in the link, you can use a pipe separator {{{ | }}}, or an arrow ({{{ -> }}} or {{{ <- }}}) to separate the displayed text and the name of the passage. Formatting links this way is pretty useful when you have multiple links going to one same passage.
> ''Note:'' there can't be a space between the separator and the passage's name, or it can break the link.
{{{
 [[Go to the Garden|Garden]] 
    → display the text "Go to the Garden" and send the player to the passage called "Garden"
    → also the format mostly used in this Guide 

 [[Go to the Garden->Garden]] 
 [[Garden<-Go to the Garden]] 
    → the arrow should be pointing towards the passage's name
}}}
> For more advanced uses of the link markup, see [[the Link Markup page|Markup-Link]].
\
<h3>The {{{<<link>>}}} macro</h3>\
One of the use of the {{{<<link>>}}} macro is to send the player to a different passage. This can be formatted in different ways.
> //In combination with the link markup://
{{{
 <<link [[Go to the Garden]]>><</link>> 
    →  will send the player to the passage called "Go to the Garden"

 <<link [[Go to the Garden|Garden]]>><</link>> 
    → display the text "Go to the Garden" and send the player to the passage called "Garden"
}}}
> //Without the link markup://
{{{
 <<link "Go to the Garden" "Garden">><</link>> 
    → display the text "Go to the Garden" and send the player to the passage called "Garden"
}}}
> ''Note:'' Without the link markup, this ''won't create a visual link between passage blocks'' in the Twine map of the project.

Since the {{{<<link>>}}} macro is a container macro (with an opening and a closing block), you can add more code inside the blocks, like another macro or pure JavaScript code.
{{{
    <<link "Text">>  ← opening block
        /*Code Here*/
    <</link>>        ← closing block

 → Example:
    <<link "Take Coin">><<unset $coin>><</link>>
}}}
> ''Note:'' you can switch the {{{<<link>>}}} macro for the {{{<<button>>}}} macro, as their only difference is how they are formatted on the page (a simple link or a button).
\
> For more advanced uses of the link macro, see [[the Link Macro page|Macro-Link]].


:: Macro-Listbox [page basic-interact] {"position":"1400,800","size":"100,100"}
<h1 id="basics-listbox">Listboxes and Conditional Options</h1>
Listboxes are an easy way to have the player interact with the story, and give a different way to format choices. The {{{<<listbox>>}}} macro can be useful to lists options for a character's characteristics, or choosing a location to travel to.

Where to go next? <<listbox "_example">>
	<<option "Home">>
	<<option "Garden">>
	<<option "Cinema">>
	<<option "School">>
<</listbox>>

The macro has two sets of arguments: one for the container {{{<<listbox>>}}} and one set for the {{{<<option>>}}}/{{{<<optionfrom>>}}}.
* {{{<<listbox>>}}}:
** the variable to save the player's choice.
** {{{autoselect}}} (optional): will autoselect the option from the list, if the current value of the variable is included in the list of options
* {{{<<option>>}}}
** the name of the option.
** (optional) the value of the option (if different from the name).
* {{{<<optionfrom>>}}}:
** the variable containing the list of options (array or object).

Assuming that the array {{{_pieOptions = ["blueberry", "cherry", "coconut cream"]}}}:
{{{
    <<listbox "_example" autoselect>>
        <<option "Home" false>>
        <<option "Garden">>
        <<option "Cinema" 0>>
        <<option "School" "bad">>
    <</listbox>>
→ same as example, aside for some values.

    <<listbox "$pie" autoselect>>
        <<optionsfrom _pieOptions>>
    <</listbox>>
→ isplay the options from the array _pieOptions.
}}}
\
<h3>Why {{{<<optionfrom>>}}} instead of {{{<<option>>}}}?</h3>\
The {{{<<listbox>>}}} macro provides two ways of getting the source of options to display, with {{{<<option>>}}} and {{{<<optionfrom>>}}}. Whether to choose one rather than the other will depend on preferences and situations.

{{{<<option>>}}} allows for an easier read of the code, as all options and their respective values are explicitly displayed in the code. However, due to how the {{{<<listbox>>}}} macro is built, it won't let you add or remove options depending on situations (i.e. you can't do {{{<<if $var>><<option "value">><</if>>}}}).
> ''Note:'' You can also have different {{{<<listbox>>}}}/{{{<<option>>}}} combo for each situation...  which you can hide inside [[widgets|Macro-Widget]]!
\
On the other hand, {{{<<optionfrom>>}}} will only display the sourcing variable, allowing for cleaner but more obtuse code (see examples above). However, this means you can show different options depending on the situation by modifying the source variable ahead of time.

So, if the list of options is supposed to be the same, regardless of conditions, {{{<<option>>}}} will be the easiest way to do. However, if the options are conditional on a specific situation, then {{{<<optionfrom>>}}} might be more fitting.
\
<h4>Objects or Arrays?</h4>
As you can indicate either an array or object in {{{<<optionfrom>>}}}, choosing one or the other will depend on whether you wan the displayed text to match the value of the option. 
With an array {{{ [] }}}, what you see is what you ==get== save in the variable (just like {{{<<option "smiled">>}}}). On the other hand, an object {{{ {} }}} might seem a bit more complex to set up, but it allows you so save a different value for each option to display (like {{{<<option "smiled" true>>}}}). 
For example, assuming that:
{{{
    _pieOptionsArray = ["blueberry", "cherry", "coconut cream"]

    _pieOptionsObject = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }
}}}
<<set _pieOptions = ["blueberry", "cherry", "coconut cream"], _pieOptions2 = { "Blueberry" : "1", "Cherry" : "2", "Coconut cream" : "3" }>>\
The array will show : <<listbox "_pie" autoselect>>
	<<optionsfrom _pieOptions>>
<</listbox>> (value of the first option: _pie)
While the object will show: <<listbox "_pie2" autoselect>>
	<<optionsfrom _pieOptions2>>
<</listbox>> (value of the first option: _pie2)

> ''Note:'' While the {{{<<listbox>>}}} is customisable in the StyleSheet, there may be aspects that cannot be modified (like the arrow), as it is forced by the browser itself.


:: Macro-Nobr-Silent [page int-conv] {"position":"1800,1200","size":"100,100"}
<h1 id="int-nobrsilent">Removing Blank Space and Hiding Code</h1>
It can be //very// frustrating to code and format a whole passage, only to find when playing it a bunch unwanted blank space. While some of it can be resolved with the [[nobr Markup|Markup-Nobr]], for longer block of text or code, you may want to use the {{{<<nobr>>}}} and {{{<<silent>>}}} macros. 
{{{
    <<nobr>> … <</nobr>>
    <<silent>> … <</silent>>
}}}
\
<h3>{{{<<nobr>>}}} or {{{<<silent>>}}}</h3>\
Both macros will remove any blank space created by the code inside its container, making them quite useful when indenting the code for a clearer read through (especially for complex code).

The main difference between the macros is whether an output is expected within the macro. As in: is there text inside the container that should appear on the screen where the macro is coded?

{{{<<silent>>}}} will run any code inside the macro, but will not print anything on the page (unless you play the game in //Test/Debug// [[mode|DebugAPI]]). {{{<<nobr>>}}} will run the code inside the macro, as well show any output on the page, without any linebreak (like the [[nobr Markup|Markup-Nobr]]). 
> //An example for// {{{<<nobr>>}}}
{{{
    I'd like a <<nobr>>
        <<if $feeling eq "blue">>
            blueberry
        <<else>>
            cherry
        <</if>>
    <</nobr>> pie.

→ will show either:
    I'd like a blueberry pie.
    I'd like a cherry pie.
}}}
> //An example for// {{{<<silent>>}}}
{{{
    <<silent>>
    	You'll never see any of this! But this code will run...
        <<set _time to "9s">>
        <<timed _time>>
            <<goto "END">>
        <</timed>>
    <</silent>>

→ will send you to the passage "END" but nothing will appear on the page
}}}
\
> ''Note:'' another method is to enable the [[nobr Config API|Basic-API-Config]], which will remove ''//ALL//'' line breaks inside the project.


:: Macro-Print [page basic-macro] {"position":"1100,900","size":"100,100"}
<h1 id='basics-maprint'>Display Variables, the {{{<<print>>}}} Macro and Variants</h1>
There are essentially four ways of displaying a variable:
* [[bare|Markup-Variable]]: {{{$variable}}}
* with the {{{<<print>>}}} macro: {{{<<print $variable>>}}}
* with the {{{<<=>>}}} macro: {{{<<= $variable>>}}}
* with the {{{<<->>}}} macro: {{{<<- $variable>>}}}

Unlike the bare version, the macros will actually display [[special variables|Variables-Base]] and [[methods|Methods]] attached to variables as intended, rather than an error. 

Assuming that {{{$choice = "dog"}}}: <<set $choice = "dog">>
{{{$choice}}} → $choice
{{{<<print $choice>>}}} → <<print $choice>>
{{{<<= $choice>>}}} → <<= $choice>>
{{{<<- $choice>>}}} → <<- $choice>>

Assuming that {{{$name = "jane"}}}: <<set $name = "jane">>
{{{$name.toUpperCase()}}} → $name.toUpperCase()
{{{<<print $name.toUpperCase()>>}}} → <<print $name.toUpperCase()>>
{{{<<= $name.toUpperCase()>>}}} → <<= $name.toUpperCase()>>
{{{<<- $name.toUpperCase()>>}}} → <<- $name.toUpperCase()>>
> ''Note:'' For more methods, [[see this page|Methods]].
\
All three macros are interchangeable, aside from one distinction: the {{{<<->>}}} macro will show HTML markup and some nested SugarCube code as regular characters.
Assuming that {{{$example = "<i>this</i>"}}} <<set $example = "<i>this</i>">>
{{{$example}}} → $example
{{{<<print $example>>}}} → <<print $example>>
{{{<<= $example>>}}} → <<= $example>>
{{{<<- $example>>}}} → <<- $example>>

Assuming that {{{$test = "<<SomeWidget>>"}}} and the widget {{{<<widget "SomeWidget">>Wow Some Text<</widget>>}}}: <<set $test = "<<SomeWidget>>">>
{{{$test}}} → $test
{{{<<print $test>>}}} → <<print $test>>
{{{<<= $test>>}}} → <<= $test>>
{{{<<- $test>>}}} → <<- $test>>
\
<h3>Display all the values of an object:</h3>\
To print whole object variables on the page, you need to use a bit of JavaScript:
Assuming that {{{$npc = {name: 'Jane', age: '53'} }}}: <<set $npc = {name: 'Jane', age: '53'}>>
{{{<<print Object.values($npc)>>}}} → <<print Object.values($npc)>>
{{{<<print JSON.stringify($npc)>>}}} → <<print JSON.stringify($npc)>>
<<unset $choice, $name, $example, $test, $npc>>

<h3>Display non-variable elements</h3>\
The macros don't just accept variables, but a multitude of other information about the game. For example, if you want to display the name of the current passage on the screen, which can be done with a [[function|Functions]]:
{{{passage()}}} → passage()
{{{<<print passage()>>}}} → <<print passage()>>
{{{<<= passage()>>}}} → <<= passage()>>
{{{<<- passage()>>}}} → <<- passage()>>


:: Macro-Script-Run [page int-conv] {"position":"1800,1500","size":"100,100"}
<h1 id="int-scriptrun">Using JavaScript in the Passage</h1>
While you can add JavaScript or jQuery code inside the JavaScript tab, it is sometimes necessary to include it directly inside the passage. This can be done inside the {{{<<script>>}}} or the {{{<<run>>}}} macro.
> ''Note:'' the {{{<<script>>}}} macro has the same use as the {{{<script>}}} HTML markup, though the latter will only work inside the {{{StoryInterface}}} [[passage|Pages-2-Intermediate/Special-Tags.tw]].

While both macros will run code, {{{<<run>>}}} is usually used for one-line type of codes (e.g. calling SugarCube [[APIs|Basic-API]], functions defined in the JavaScript tab, etc..), while {{{<<script>>}}} is more fitted for multi-line and more complex code.
> ''Note:'' some knowledge of JavaScript/jQuery is necessary here, especially if the code runs into issues.

If added as is on the page, the code will triggers as soon at the passage is loaded. But it can also be included inside a {{{<<link>>}}} macro, or triggered at a later time with the {{{<<timed>>}}} macro.
{{{
    <<script>>
        /*Your JavaScript/jQuery code*/
    <</script>>

    <<script>>
        setup.Hi = function (name) {
            if (name == undefined) {
                return "Hi.";
            } else {
                return "Hi, " + name + ".";
            }
        };
    <</script>>

    <<run $(document.body).append('<div id="report-down"></div>').find('#report-down')>>
    <<run setup.ScrollDown()>>
}}}
> ''Note:'' when using the {{{<<script>>}}} macro with {{{<<nobr>>}}}, the latter macro will transform the code into one line. If comments are included with backslash {{{//}}}, it will render the rest of the code unusable. {{{/* Comments */}}} is preferred in this case.


:: Macro-Set [page basic-macro] {"position":"1100,800","size":"100,100"}
<h1 id="basics-maset">Setting and Changing Variables</h1>
To first [[set a variable|Macro-Set-Basic]], you would most commonly use the {{{to}}} operator, as the example below:
{{{
    <<set $variable to "a value">>
}}}

But, to change the value of a variable, especially if that value is numerical, the {{{<<set>>}}} macro will accept other JavaScript (mathematical) operators: 
<<nobr>>
<table id="basma-set">
    <tr>
        <th>Operator</th><th>Explanation</th><th>Example</th>
    </tr>
    <tr>
        <td>{{{ = }}}</td><td>Works like {{{to}}}.<br> Assign the value to the variable.</td><td>{{{<<set $apples = 6>>}}}</td>
    </tr>
    <tr>
        <td>{{{+=}}}</td><td>Adds to the current value.</td><td>{{{<<set $apples += 6>>}}} or {{{<<set $apples to $apples + 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{-=}}}</td><td>Subtract to the current value.</td><td>{{{<<set $apples -= 6>>}}} or {{{<<set $apples to $apples - 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{*=}}}</td><td>Multiplies the current value.</td><td>{{{<<set $apples *= 6>>}}} or {{{<<set $apples to $apples * 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{/=}}}</td><td>Divides the current value.</td><td>{{{<<set $apples /= 6>>}}} or {{{<<set $apples to $apples / 6>>}}} </td>
    </tr>
    <tr>
        <td>{{{%=}}}</td><td>Removes a percentage of the current value.</td><td>{{{<<set $apples %= 6>>}}}</td>
    </tr>
    <tr>
        <td>{{{++}}}</td><td>Adds 1 to the current value.</td><td>{{{<<set $apples ++>>}}}</td>
    </tr>
    <tr>
        <td>{{{--}}}</td><td>Removes 1 to the current value.</td><td>{{{<<set $apples -->>}}}</td>
    </tr>
</table>
<</nobr>>
\
Aside from assigning a particular value to a variable, you can also use another variable (or a combination of multiple variables) to set the value.
Assuming that {{{$test = 6}}} and {{{$apple = 4}}}:
{{{
    <<set $test to $apple>>
→ $test will have the value of $apple (= 4)

    <<set $test += $apple>>
→ $test will have the value of ($test + $apple) (= 10)

    <<set $test to (($apple * 4)/($test - 2))>>
→ $test will have the value of ($apple multiplied by 4) divided by ($test minus 2) (= 4)
}}}
> ''Note:'' when handling complex calculations of variable, using parentheses {{{ ( ) }}} will help order the code.
\
It is also possible to use some of these operators with string values and variables.
Assuming that {{{$name = "Jane"}}} and {{{$surname = "Doe}}}:
{{{
    <<set $wholename to $name + $surname>>
→ $wholename will have the value "JaneDoe"
    <<set $wholename to $name + " " + $surname>>
→ $wholename will have the value "Jane Doe"

    <<set $address to "Hello, $name">>
→ $address will print "Hello, Jane" on the page.
}}}
> ''Note:'' if the value {{{$name}}} changes or (new value or unset) during the story, this will affect how {{{$address}}} is displayed, but not {{{$wholename}}}. 
> {{{$address}}} will not show "Hello, Jane" if {{{$name}}} changes, but will show the current value of {{{$name}}} (or the name of the variable, if unset). 
Assuming that the widget {{{<<widget "SomeWidget">>Wow Some Text<</widget>>}}}:
{{{
    <<set $text to "<<SomeWidget>>">>
→ $text will print the content of the widget, here "Wow Some Text".
}}}

You can also mix the types of values when combining them, similarly to the examples above. Mixing anything with a string value will result in a string value. Mixing integer with a boolean will result in a integer.
Assuming that {{{$name = "Jane"}}} and {{{$apple = 4}}}
{{{
    <<set $test to $name + $apple>>
→ $test will have the value "Jane4" (string)
}}}
> ''Note:'' using some mathematical operators on a string-based variable will give an error: {{{<<set $name /= 2>>}}}.
\
<h3>Setting up Arrays and Objects</h3>\
To use an array or object variable, you need to define it as an array or object ahead of time. This can be done at the earliest inside [[StoryInit|SP-Init]], and, at the latest, just before you use them. Defined arrays and objects can be empty before use.
Arrays need to be defined with square brackets {{{ [ ] }}}, while objects need curly brackets {{{ { } }}}
{{{
→ Array:
    <<set $array to []>>
 → defined but empty

    <<set $array to [1, "word", true]>>
    <<set $inventory to ["pen", "coins", "apple"]>>

→ Object:
    <<set $object to {}>>
 → defined but empty

    <<set $object to {number: 1, string: "word", boolean: true}>>
    <<set $mc to {age: 51, hair: "bald", degree: true}>>
}}}
Modifying arrays, such as adding or removing elements, will require the use of [[methods|Method-Array]].

After an object is defined, you can add any property to it, even if they were not listed when the main variable was set. You can also change the value of an already defined property the same way you would a regular variable.
{{{
    <<set $object.newproperty = "value of your choice">>
    <<set $object.definedproperty = "new value">>
    <<set $object[property] = "a value">>
}}}

\
<h3>Going further:</h3>\
Along with modifying the content of arrays, [[methods|Methods]] can be used to both set or modify the content of a simple variable or property of an object. Some examples of useful application: capitalising a string value, ensuring a heatlh variable stays between certain numbers, or stats change.

You can also save special information about the game, such as name passages or turns, inside variables thanks to [[functions|Functions]].


:: Macro-Set-Basic [page basics] {"position":"800,300","size":"100,100"}
<h1 id="basic-set">Tracking Information and the {{{<<set>>}}} Macro</h1>
To track information and choices made by the player, you need to set [[variables|Variables-Base]], and save the tracked information as a value in the variable, by using the {{{<<set>>}}} Macro.

While there are multiple ways to [[store information|Variables-Base]], the most relevant way is through using ''temporary'' or ''permanent'' variables. As their name suggests, a temporary variable is temporary, disappearing when the player moves to another passage, while the permanent variable will stick around (until you [[destroy|Macro-Unset]] it or change its value).
{{{
    <<set $variable to 5>>
    <<set $variable to 'some words'>>
    <<set $variable to true>>
    <<set _temporary to 5>>
}}}

You can also set multiple variables at once, by separating each with a {{{,}}} comma:
{{{
    <<set $var to 5, $var2 to 'some words', $var3 to true, _temp to 5>>

    <<set 
        $var to 5, 
        $var2 to 'some words', 
        $var3 to true, 
        _temp to 5
    >>
}}}
> ''Note:'' the type of value stored in a variable is not set in stone when the variable is first set.
> You can set a variable as an //integer// (number), before setting it as a //string// (words) a few passages later, without needing the unset it in-between.

If you want to track the player's choice of action, before the passage changes, you will need to set a variable inside a link. This method is often the best way to store information, and avoid a variable to change value if the player revisit a passage.
> ''Note:'' setting a temporary variable in a forwarding link is useless...
\
> //Example with the Link markup://
{{{
    [[Displayed Text|PassageName][$var to {value}]]

    [[Pick apples|Garden][$apple to 5]]
    [[Displayed Text|PassageName][$variable to 5, $var2 to 'some words', $var3 to true]]
}}}
> //Example with the Link macro://
{{{
    <<link [[Displayed Text|PassageName]]>><<set $variable to 5>><</link>>
    <<link [[Displayed Text|PassageName]]>>
        <<set $var to 5, $var2 to 'some words', $var3 to true, _temp to 5>>
    <</link>>
}}}

For other mathematical operators or advanced uses of the {{{<<set>>}}} Macro, [[see the Set Macro page|Macro-Set]].
For creating links, start with [[this page|Macro-Link-Basic]].


:: Macro-Switch [page int-conv] {"position":"1700,1200","size":"100,100"}
<h1 id="int-switch">An Alternative to Conditional Statements</h1>
If you are working with conditional statements only looking specific values of ''one'' variable or function (i.e. {{{<<if $var is 'value'>>}}}), and would like to be more efficient with your code, the {{{<<switch>>}}} macro might be a useful alternative to the {{{<<if>>}}} macro.
{{{
    <<switch [expression]>>
        [<<case [valueList]>> …]
        [<<default>> …]
    <</switch>> 
}}}
The Macro has one argument for the container, and one for the submacro:
* {{{<<switch>>}}}:
** {{{expression}}}: the element whose value you want to check
*** this can be a variable or a function
* {{{<<case>>}}}
** {{{valueList}}}: the value(s) of the element for the particular case, separated with a space
* {{{<<default>>}}} (optional) does not have an argument, works exactly like {{{<<else>>}}}
\
> //Using a variable://
{{{
    <<switch $dice>>
        <<case 1>>You rolled a 1, this is a critical failure...
        <<case 2>>You rolled a 2, this is a failure.
        <<case 5>>You rolled a 5, this is a success.
        <<case 6>>You rolled a 6, this is a critical success!
        <<default>>You rolled a $dice. Nothing happens.
    <</switch>>

→ <<switch>> will look at the value of $dice and display the relevant text.
}}}
> //Using a function://
{{{
    <<switch previous()>>
        <<case "Home">>Leaving your house, you soon arrive at the park.
        <<case "Work">>Finally done with work, you skip towards the park.
        <<case "Cinema" "Theater">>Waking up after a boring movie, you sluggishly walk towards the park.
    <</switch>>

→ <<switch>> will look at the name of the previously visited passage, and will display the text if it matches to the cases. For any other case, it will not display anything.
}}}


:: Macro-Timed [page int-macro] {"position":"1400,1300","size":"100,100"}
<h1 id="int-timed">Delaying Displaying Text or Running Code</h1>
If you need to delay the display of text or the trigger of code, after the passage is completely loaded, you should use the {{{<<timed>>}}} macro. As its name suggests, the macro will run a timer before doing whatever was coded inside.

<<timed 4s>>//Whoop, there it is!//<</timed>>
The macro has 2 arguments for its container, and 1 for the submacro:
* {{{<<timed>>}}}:
** the delay before the macro triggers, can be indicated in seconds or milliseconds.
*** the minimum recommended delay is 40ms.
** {{{t8n}}}/{{{transition}}}, whether the text appearing does so like the transition between passages.
* {{{<<next>>}}}:
** (optional) the delay before the next part of the macro triggers, can be indicated in seconds or milliseconds.
*** the minimum recommended delay is 40ms.
*** if not indicated, it will take the delay from the {{{<<timed>>}}} macro.
\
{{{
	<<timed 2s t8b>>
		This will appear with a transition after 2 seconds.
	<<next>>
		And this will appear 2 seconds after the previous text.
	<<next 4s>>
		While this will appear 4 seconds after the previous block.
	<</timed>>
}}}

Aside from displaying text, you can use the {{{<<timed>>}}} macro to trigger code:
{{{
→ sending the player to another passage:
	<<timed 10s>><<goto "END">><</timed>>

→ replacing some text on the page:
	Can I by some <span id="text">eggs</span>?
	<<timed 2s>><<replace "#text">>milk<</replace>><</timed>>
}}}
\
> ''Note:'' When using this macro, it is important to test the passage ''extensively'', to ensure it works as intended.
> To players, timers will often feel longer than indicated.


:: Macro-Type [page int-macro] {"position":"1500,1200","size":"100,100"}
<h1 id="int-type">Displaying Text Letter by Letter</h1>
Whether wanting to emulate a computer monitor or a typewriter, displaying a text letter by letter, the {{{<<type>>}}} macro will do the job!

<<type 80ms>>Here is the macro in action! It can also do [[links|Macro-Type]] and ''formatting''...<</type>>
\
The macro has 8 arguments:
* {{{speed}}}: the amount of time between each letter, can be indicated in seconds or milliseconds.
** 20-60ms is a good printing rate. 0s will show the whole text without animation.
* {{{start}}} (optional): adding a delay before the typing starts, indicated in seconds or milliseconds
** if only {{{start}}} is indicated, the default will be 400ms.
* {{{class}}} (optional): will assign an extra CSS {{{.class}}} to the typing container.
* {{{id}}} (optional): will assign a CSS {{{#id}}} to the typing container.
* {{{element}}} (optional): will transform the container from a {{{<div>}}} to another HTML element.
* {{{keep}}} (optional): will keep the cursor even after the typing is complete.
* {{{none}}} (optional): will not use the cursor during typing.
* {{{skipkey}}} (optional): when the key is pressed, the typing will display the whole text immediately.
** If only {{{skipkey}}}, the default value must be indicated with the {{{Config.macros.typeSkipKey}}} [[API|Confic-Macro]].
\
{{{
	<<type 40ms>>I ate an apple.<</type>>
→ The base required, with characters showing every 40 milliseconds.

	<<type 40ms start 2s none>>Oh no, I'm late...<</type>>
→ After a 2-second delay, this will show characters every 40 milliseconds, without the cursor.

	<<type 40ms class "menu">>[[Start Now!]]<</type>>
→ This will type the characters of the link every 40 milliseconds, and add the class '.menu' to the container.

	<<type 40ms element "span" keep>>Now I'm a span!<</type>>
→ Instead of the base container, this will be a '<span>'. When all text is displayed, the cursor will stay on the page.

	<<type 40ms id "words" skipkey "Enter">>Last one!<</type>>
→ This will type the characters every 40 milliseconds, unless the key 'Enter' is pressed to display everything at once. The container will also get the id '#words' added to it.
}}}
\
<h3>Order of triggers</h3>\
You can have as many iteration of {{{<<type>>}}} inside one passage, thought they will trigger only one after the other.
If you nest a {{{<<type>>}}} macro inside another one, the nested {{{<<type>>}}} will only start ''after all non-nested'' iteration have been completed.
{{{
	<<type 40ms>>First.
		<<type 40ms>>Fourth.
			<<type 40ms>>Sixth.<</type>>
		<</type>>
	<</type>>
	<<type 40ms>>Second.<</type>>
	<<type 40ms>>Third.
		<<type 40ms>>Fifth.<</type>>
	<</type>>
}}}
> ''Note:'' Because the macro is time dependant, it is important to test the passages extensively, to ensure it works as wanted.
> Typed text will often seem much slower to players than expected.
\
<h3>Customising the typed text with CSS</h3>\
While the typed text does not have default styling (aside from the cursor), the macro includes special classes you can target and edit:
* {{{.macro-type}}}, to change the base styling of the macro (e.g. colour, font...)
* {{{.macro-type-done}}}, to change the styling when all iterations of the macro are complete
* {{{.macro-type-cursor:after}}}, to edit the cursor
{{{
	.macro-type {
		color: limegreen;
		font-family: monospace, monospace;
	}
	.macro-type-cursor:after {
		color: limegreen;
		content: "\269C\FE0F"; /* Fleur-de-lis emoji */
		font-family: monospace, monospace;
	}
}}}

> ''Note:'' for even more advanced customisation of the macro, you can also add custom JavaScript code with the [[Typing Events|Events-Type]].


:: Macro-Unset [page basic-macro] {"position":"1200,800","size":"100,100"}
<h1 id="basics-maunset">Unsetting Variables with {{{<<unset>>}}}</h1>
To avoid bloating your game (lag during loading passages), it is recommended to keep the number of active variables to a minimum. While the limit is fairly high before a player could notice the lag, it is still a good practice to do so.

One way to avoid bloat is to use [[temporary variables|Variables-Base]] {{{_temp}}}, which disappear automatically when the player moves to another passage. Another is to rely more on [[functions|Functions]] (intermediate level). Finally, the one covered here, and most useful, is to ''unset'' the permanent variables {{{$var}}} you don't need anymore, with the {{{<<unset>>}}} macro.
{{{
    <<unset $variable>>

→ multiple at once:
    <<unset $var, $var2, $var3>>

→ properties of objects:
    <<unset $object.property1, $object.property2>>
}}}
The macro can be used as is in the passage, or inside other container macros, like a {{{<<link>>}}} or a {{{<<button>>}}}.
\
<h3>Using the {{{<<run>>}}} macro.</h3>\
The {{{<<run>>}}} macro will, as the name suggest, [[run|Macro-Script-Run]] any one-line JavaScript/jQuery code given. It can also help unset (or delete) variables from the game state. To do this, you should use the {{{<<run>>}}} macro coupled with the JavaScript {{{delete}}} operator:  
{{{
    <<run delete $var>>
    <<run delete $object.property>>
}}}

Assuming that {{{$count = 1}}} and {{{$mc = {name: "Jane", nickname: "Janie", age: 10} }}}:
{{{
    <<run delete $count>>
→ will remove the value of $count

    <<run delete $mc.nickname>>
→ will only remove the {nickname} property from $mc

    <<run delete $mc.nickname, delete $mc.age>>
→ this will remove both the {nickname} and {age} properties from $mc 
}}}
> ''Note:'' there are no differences between {{{<<unset>>}}} and {{{<<run delete>>}}}, aside from their name.


:: Macro-Widget [page int-conv] {"position":"1800,1300","size":"100,100"}
<h1 id="int-widget">Creating and Using a Widget</h1>
Widgets are a basic way of creating "custom macros" without having to deal with the [[Macro APIs|Macro-API]] or JavaScript. It is a pretty practical macro, which allows you to do whatever you could want with basic SugarCube, or a combination of SugarCube and JavaScript/jQuery.

Like Custom Macros, you can call a defined widget as many times as you want, wherever you want in the story, to display bits of text or run blocks of code without cluttering passages. One of its form, as a container, allows you to customise formatting in an easier way.

The {{{<<widget>>}}} macro is also useful for: creating shortcuts for pronouns, grouping list of links to appear on multiple passages (e.g. exposition conversation), adding special hovertext to elements (e.g. images, translation), formatting dialogue with character portraits... anything to help declutter passages from unwieldy and complex code.

For widgets to work, they need to be:
* set inside a non-story passage [[tagged|Tags-Built]] with {{{widget}}}
** the passage can have any non-[[Special|Special-Passage]] name.
* called inside another passage:
** the name of the widget wrapped with double arrowheads {{{<<WIDGETNAME>>}}}
\
You can have as many widgets as you want inside one {{{widget}}}-tagged passage. You can also have multiple widget passages (though they should be kept to a minimum).
It is recommended to either wrap the code inside the {{{<<widget>>}}} with [[line-break remover macro|Macro-Nobr-Silent]] or add the {{{nobr}}} [[tag|Tags-Built]] to the widget passage. This will remove any unwanted space.
> ''Note:'' this macro differs from the {{{<<include>>}}} [[macro|Macro-Include]], in that {{{<<include>>}}} will include the whole indicated passage on the page, while {{{<<widget>>}}} will only call what is defined inside the macro.
{{{
    <<widget "widgetName" [container]>> … <</widget>>
}}}
The macro has 2 arguments:
* {{{widgetName}}}: the name of the widget, which:
** has to be one word
** is case sensitive
** cannot include punctuation 
** cannot start with a number
** cannot have the same name as a Base SugarCube Macro or any custom macro included in your JavaScript
* {{{container}}} (optional), to create a container macro.
{{{
    <<widget "Name" container>>
        /* Your code */
    <</widget>>
}}}
> //Example://
{{{
    :: Widgets [widget]
    <<widget "SimonSays">>
        <<set _array to ["Raise your hands!", "Jump!", "Dance!"]>>
        <<print _array.random()>>
    <</widget>>

    :: Story Passage 
    > Simon says: <<SimonSays>>
}}}
> Simon says: <<SimonSays>> <<if passage() isnot "OnePage">>[ [[Reload|Macro-Widget]] ]<</if>>
\
<h3>Arguments and Contents</h3>\
Aside from using basic SugarCube code (or even JavaScript/jQuery inside a {{{<<run>>}}} or {{{<<script>>}}} [[macro|Macro-Script-Run]]), widgets allows the use of extra arguments when called, as well as becoming containers.
This is possible thanks to the special temporary variables: {{{_args[]}}} and {{{_contents}}} 
\
<h4>{{{_args[]}}} widgets</h4>\
An argumented widget is used to create more complex but general macros. Arguments can be in the form of base value or variables, and will be stored in an array called {{{_args[]}}} (starting with the position 0).
\
> //Example://
{{{
    :: Widget [widget]
    <<widget "SimonSpecialSay">>
        <<if _args[0]>>
            <<print _args[0]>>
        <<else>>
            <<SimonSays>>
        <</if>>
    <</widget>>

→ this will check whether an argument has been included when calling the widget, and if so show the content of the argument.

    :: Story Passage
    > Simon says? <<SimonSpecialSay>>
    > Simon says: <<SimonSpecialSay "Fooled you!">>
}}}
> Simon says: <<SimonSpecialSay>>
> Simon says: <<SimonSpecialSay "Fooled you!">>
\
You can also use the {{{_args.name}}} property to access the widget's name.
\
<h4>{{{_contents}}} widgets</h4>\
A container widget will create a special "macro", with an opening and closing brackets that can be wrapped around some text in the main passage to format it in a special way. It uses the variable {{{_contents}}} to link that text with the macro. 
> //Example://
{{{
    :: Widget [widget]
    <<widget "SimonDoes" container>>
        <div class="simon">
            <hr class="before-simon">
            <p class="simon-does">_contents</p>
        </div>
    <</widget>>

    :: StyleSheet [sheet]
    .simon {
        width: 134px;
        margin: auto;
    }
  
    hr.before-simon {
        border-color: darkgreen;
    }
  
    .simon-does {
        text-transform: capitalize;
    }

    :: Story Passage
    <<SimonDoes>>And so he does!<</SimonDoes>>
}}}
<<SimonDoes>>And so he does!<</SimonDoes>>
\
<h4>Combining {{{_args}}} and {{{_contents}}}</h4>\
If needed, you can combine both types of widgets, making is an argumented container widget.
> //Example from the Documentation://
{{{
    <<widget "say" container>>
        <div class="say-box">
            <img class="say-image" @src="'images/' + _args[0].toLowerCase() + '.png'">
            <p class="say-text">_contents</p>
        </div>
    <</widget>>

    <<say "Chapel">>
        Tweego is a pathway to many abilities some consider to be… unnatural.
    <</say>>
}}}
This code will create a dialogue box ({{{<div>}}}), showing an image ({{{<img>}}}) next to the text ({{{<p>}}}). The url of image is pulled by the argument ({{{images/chapel.png}}}).
\
<h4>Nesting Widgets</h4>\
Though ''it should not be abused'', it is possible to call different widgets inside one another. This method can be useful when organising code, and merging duplicate blocks of code.
{{{
    <<widget "Test">>This is a test<</widget>>

    <<widget "whoops">>
        <<if $var is 0>>
            <<Test>>
        <<else>>
            This is a bug.
        <</if>>
    <</widget>>
}}}
\
<h4>Warnings with Nesting and Contents</h4>\
Calling widgets inside another widget must be done with care, as it can throw errors. This is the case when nesting {{{_contents}}} inside widgets:
{{{
    <<widget "inner" container>>
        _contents
    <</widget>>

    <<widget "outer" container>>
        <<inner>>_contents<</inner>>
    <</widget>>

    <<outer>>ford<</outer>>
}}}
Though it might seem logical, this code will cause uncontrolled recursion, and only display an error on screen. Instead, it is better to do nest the macros on the passage directly, like this:
{{{
    <<widget "inner" container>>
        _contents
    <</widget>>

    <<widget "outer" container>>
        _contents
    <</widget>>

    <<outer>>
        <<inner>>
            ford
        <</inner>>
    <</outer>>
}}}


:: Macros List {"position":"1200,200","size":"200,100"}
<h1>Macro List</h1>
Below, you will find the alphabetical list of SugarCube macro, and where they are discussed in this guide.

* {{{<<addclass>>}}}: [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]]
* {{{<<append>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<audio>>}}}: [[Playing Tracks in a Passage|Audio-Macro]]
* {{{<<back>>}}}: [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
* {{{<<break>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<button>>}}}: See {{{<<link>>}}}
* {{{<<cacheaudio>>}}}: [[Setting up the Audio Tracks|CacheAudio]]
* {{{<<capture>>}}}: [[Capturing the Value of a Variable|Macro-Capture]]
* {{{<<checkbox>>}}}: [[Multi or Single Option Choices|Macro-CheckRadio]]
* {{{<<continue>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<copy>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<createaudiogroup>>}}}: [[Create Track Groups and Playlists|Macro-Group-Playlist]]
* {{{<<createplaylist>>}}}: [[Create Track Groups and Playlists|Macro-Group-Playlist]]
* {{{<<cycle>>}}}: [[Cycles and Conditional Options|Macro-Cycle]]
* {{{<<do>>}}}: [[Updating Parts of the Passage|Macro-Do-Redo]]
* {{{<<done>>}}}: [[Emulating PassageDone for one Passage|Macro-Done]]
* {{{<<for>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<if>>}}}: [[Display Variation|Macro-If-Basic]], [[More Conditional Statements|Macro-If]]
* {{{<<include>>}}}: [[Including a Passage inside another|Macro-Include]]
* {{{<<goto>>}}}: [[Sending the Player to a Passage|Macro-Goto]], [[Overriding the Navigation to a Passage|Basic-Config-Navig]]
* {{{<<link>>}}}: [[Linking Passages|Macro-Link-Basic]], [[Displaying more than text in Links|Macro-Link]]
* {{{<<linkappend>>}}}: [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* {{{<<linkprepend>>}}}: [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* {{{<<linkreplace>>}}}: [[Revealing Extra Text and Disappearing Links|Macro-Link-AppPreRep]]
* {{{<<listbox>>}}}: [[Listboxes and Conditional Options|Macro-Listbox]]
* {{{<<masteraudio>>}}}: [[Other Audio Macros|Audio-Other]]
* {{{<<nobr>>}}}: [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
* {{{<<numberbox>>}}}: [[Player Input in three macros|Macro-Input]]
* {{{<<playlist>>}}}: [[Playing Tracks in a Passage|Audio-Macro]]
* {{{<<prepend>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<print>>}}} / {{{<<=>>}}} / {{{<<->>}}}: [[Display Variables, the Print Macro and Variants|Macro-Print]]
* {{{<<radiobutton>>}}}: [[Multi or Single Option Choices|Macro-CheckRadio]]
* {{{<<redo>>>}}}: [[Updating Parts of the Passage|Macro-Do-Redo]]
* {{{<<remove>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<removeaudiogroup>>}}}: [[Other Audio Macros|Audio-Other]]
* {{{<<removeclass>>}}}: [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]]
* {{{<<removeplaylist>>}}}: [[Other Audio Macros|Audio-Other]]
* {{{<<repeat>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<replace>>}}}: [[DOM Macros and Revealing Text in Targeted Spots|Macro-ApPreRepCopy]]
* {{{<<return>>}}}: [[Going Back or Returning to a Passage with a Special Link|Macro-Back-Return]]
* {{{<<run>>}}}: [[Unsetting Variables|Macro-Unset]], [[Using JavaScript in the Passage|Macro-Script-Run]]
* {{{<<script>>}}}: [[Using JavaScript in the Passage|Macro-Script-Run]]
* {{{<<set>>}}}: [[Tracking Information|Macro-Set-Basic]], [[Setting and Changing Variables|Macro-Set]]
* {{{<<silent>>}}}: [[Removing Blank Space and Hiding Code|Macro-Nobr-Silent]]
* {{{<<stop>>}}}: [[Loops and Repeats - Two Ways|Macro-For-Repeat]]
* {{{<<switch>>}}}: [[An Alternative to Conditional Statements|Macro-Switch]]
* {{{<<textarea>>}}}: [[Player Input in three macros|Macro-Input]]
* {{{<<textbox>>}}}: [[Player Input in three macros|Macro-Input]]
* {{{<<timed>>}}}: [[Delaying Displaying Text or Running Code|Macro-Timed]]
* {{{<<toggleclass>>}}}: [[DOM Macros and Changing Class of an Element|Macro-DOM-Adv]]
* {{{<<type>>}}}: [[Displaying Text Letter by Letter|Macro-Type]]
* {{{<<unset>>}}}: [[Unsetting Variables|Macro-Unset]]
* {{{<<waitforaudio>>}}}: [[Setting up the Audio Tracks|CacheAudio]]
* {{{<<widget>>}}}: [[Creating and Using a Widget|Macro-Widget]]

<div id="link-menu"><<back "Return to Previous Page">></div>


:: Markup [chapter menu] {"position":"800,600","size":"200,100"}
<h1>SugarCube Markup and Basic Styling</h1>
To format your text or code in a specific way, SugarCube includes some special code, called ''markup'', separate from HTML and macros. 
There are different types of markups, from formatting your text (''bold'', //italics//, etc...) to more complex interactions between HTML and variables. This section will cover the basics, used in most projects. For more advanced Markup, see [[this page|Markup-Int]].

* [[Basic Text Styling|Markup-Styling]] (long) 
* [[Display an Image, and turn an Image into a Link|Markup-Image]]
* [[Showing the Value of a Variable|Markup-Variable]]
* [[Using a Variable inside a Link|Markup-Link]] 
* [[Removing a Line-break|Markup-Nobr]] (Empty space on the page)


:: Markup-Attribute [page int-markup] {"position":"800,1200","size":"100,100"}
<h1 id="int-muattri">Special Attributes and Directives</h1>
Macros are not the only way to interact with elements on the page and affect their aspects. You link up a variable or passage with an HTML element with a few extra characters, and enable special behaviours unattainable with built-in macros.
\
<h3>Special Attributes</h3>\
HTML attributes are additional information added on to an element or enable special behaviours, such as the source of an image ({{{src="URL"}}}), alternative text ({{{alt="text"}}}) and even styling ({{{style="some CSS"}}}). To this, SugarCube adds two extra attributes: {{{data-passage}}} and {{{data-setter}}}. The latter will set a variable (like {{{<<set>>}}}), while the former is dependent on the element attached.
\
<h4>{{{data-setter}}}</h4>\
To function, the {{{data-setter}}} attribute should be added to interactive elements like a link ({{{<a>}}}), a button ({{{<button>}}}) or an area inside a clickable image ({{{<area>}}}). It will save any wanted value to the indicated SugarCube variable:
{{{
    data-setter="$var to 'value'"
}}}
> ''Note:'' be mindful when using quotes/apostrophes, or the attribute will not work!
{{{
    <a data-passage="Passage" data-setter="$checked to true">Check the Room</a>

    <button data-passage="Passage" data-setter="$thing to 'done'">Do the thing</button>

    <area shape="rect" coords="25,25,75,75" data-passage="Passage"
	data-setter="$treasure to 'empty'">
}}}
\
<h4>{{{data-passage}}}</h4>\
The {{{data-passage}}} will connect a passage to the selected element, creating either a link between passages (like a {{{<<link>>}}}), displaying images or videos, or playing audio. 
    
Using {{{data-passage}}} to create a link between passages can be used for elements such as a link ({{{<a>}}}), a button ({{{<button>}}}) or an area inside a clickable image ({{{<area>}}}). It is most useful for map images, or other custom elements.
{{{
    <a data-passage="PassageName">Do the thing</a>

    <button data-passage="PassageName">Do the thing</button>

    <area shape="rect" coords="25,25,75,75" data-passage="PassageName">
}}}
> ''Note:'' This method will not create an arrow between passages on the Twine map.

As for multi-media elements, such as {{{<audio>}}}, {{{<img>}}}, {{{<source>}}} or {{{<video>}}}, {{{data-passage}}} will become the link between the element and the asset to use in the passage. These can be helpful when wanting to include external online assets.
> ''Note:'' this should be used in combination with the [[Asset Passage Tags|Tags-Asset]]
{{{
    <audio data-passage="AudioPassageName">

    <img data-passage="ImagePassageName">

    <source data-passage="AudioOrVideoPassageName">

    <video data-passage="VideoPassageName">
}}}
> ''Note:'' {{{data-passage}}} can also be used in the {{{StoryInterface}}} [[Special Passage|SP-StoryInterface]].
\
<h3>Attribute Directive</h3>\
SugarCube also allows variables to affect elements and their attribute, changing how they are styled or how they behave. This is done through an ''attribute directive'', which will connect a variable to the wanted attribute. This method can be used for any attribute of an element, except for {{{data-setter}}}.

The //attribute directive// is particularly useful when wanting to use HTML interactive element not included in SugarCube (see [[HTML forms|https://developer.mozilla.org/en-US/docs/Web/HTML/Element#forms]]), creating stat bars without diving into JavaScript code, or formatting an element depending on the state of the game.

The directives can be coded two ways: {{{sc-eval:}}} or {{{@}}} before the relevant attribute. The latter is the easiest form to use.
Assuming that {{{_id = "foo"}}}:
{{{
    <span sc-eval:id="_id">…</span>
    <span @id="_id">…</span>

→ will work the same as:
    <span id="foo">…</span>
}}}
Assuming that {{{$stat = 45}}}
{{{
    <progress @value="$stat" max="100"></progress>
→ will display a simple stats bar
}}}
> ''Note:'' For examples of stats bar, see [[this page|Int-JS-CSS-Stat]].


:: Markup-Code-Verbatim [page int-markup] {"position":"900,1200","size":"100,100"}
<h1 id="int-mucode">Displaying Code and Verbatim Text</h1>
This section won't be useful for almost all game projects, as it involves displaying code or text without formatting. However, if your Twine project is meant to be a guide, a tutorial, or other resources requiring the display of code, the markups below will prove quite useful.
> ''Note:'' I've been using it for all code examples in this guide.

There are two forms you can use: the Code Markup, with triple curvy brackets {{{ { } }}}, or the Verbatim Markup with triple quotes {{{ " " }}}. The difference between the markups will be on how it is translated into HTML.

The Code Markup will take two forms: an in-line one (HTML: {{{<code></code>}}}) and a block one (HTML: {{{<pre><code></code></pre>}}}). This guide has displayed both form with the different coloured blocks elements when showcasing code examples. In this guide, I've used the in-line form for code in-text, and the block for examples (like below).
> //In-Line Code//:
{{{
    {{{<<set $var to true>>}}}

→ will be rendered as:

    <code><<set $var to true>></code>
}}}
> //Block Code//:
{{{
    {{{
        <<set $var to true>>
    }}}

→ will be rendered as:

    <pre><code><<set $var to true>></code></pre>
}}}
> ''Note:'' there ''cannot'' be any space after the opening bracket or before the closing bracket. Otherwise the code will transform into an //in-line//. 

The Verbatim Markup will require triple quotes {{{ " " }}} (HTML: {{{<nowiki></nowiki>}}})
{{{
    """No //format//"""

→ will be rendered as:

    <nowiki>No //format//</nowiki>
}}}


:: Markup-Image [page basic-plus] {"position":"800,800","size":"100,100"}
<h1 id="basics-muimage">Display an Image, and turn an Image into a Link</h1>
The Markup code to display an image works similarly to the [[Link Markup|Markup-Link]], though you will need to include the [[URL of the image|URL-Types]] for it to work:
{{{
    [img[URL]]
}}}
> ''Note:'' When compiling the code into an HTML file, the code will automatically transform the SugarCube markup into the HTML version: {{{<img src="URL">}}}.

This required URL can be an absolute, relative or online [[URL|URL-Types]], or even the name of an [[image passage|Tags-Asset]]:
{{{
→ absolute URL:
    [img[C:/Users/YourAccount/Documents/Folder/image/garden.png]]

→ relative URL:    
    [img[images/garden.png]]

→ online URL:
    [img[https://your-domain.com/garden.png]]

→ image Passage:
    [img[PassageName]]
}}}
> ''Note:'' it is ''not'' recommend using absolute URLs, especially if you are sharing your project with others, as it won't display the image.
\
You can use this formatting in any passage of Twine (see above), as well as the StyleSheet:
{{{
→ using an URL:
    body {
        background-image: [img[images/garden.png]];
    }

→ using an Image Passage:
    body {
        background-image: [img[PassageName]];
    }
}}}

The URL of the image can also be stored inside a variable. Assuming that {{{$url = "garden.png"}}}:
{{{
 [img[$url]]
    → will work the same way as
 [img[garden.png]]
}}}

You can also turn the image into a clickable one, sending the player to another passage, like you would have with the [[Link Markup|Markup-Link]]. For example, the image below will send you to the Wikipedia website:
[img[https://upload.wikimedia.org/wikipedia/en/8/80/Wikipedia-logo-v2.svg][https://en.wikipedia.org/wiki/Main_Page]]
{{{
    [img[URL][PASSAGE]]
}}}
> //using variables//: {{{$passage = "Garden"}}} and {{{$url = "garden.png"}}}
{{{
    [img[$url][$passage]]
        → will work the same way as
    [img[garden.png][Garden]]
}}}
You can go even further and set a variable inside that Image Link:
{{{
    [img[URL][PASSAGE][$var to true]]
}}}
> ''Note:'' for the Image Link, I would recommend using the {{{<<link>>}}} macro with the {{{<img>}}} HTML markup instead.

And for extra accessibility, you can add a "title" to the image, to show what it is supposed to represent. This title will be displayed when the player's mouse hovers over the image.
{{{
 → Basic Use:
    [img[Title|URL]]

 → As a link:
    [img[Title|URL][PASSAGE]]

 → Setting a variable:
   [img[Title|URL][PASSAGE][$var to true]] 

 → Only using variables:
    [img[$imageTitle|$imageURL][$NextPassage][$done to true]]
}}}


:: Markup-Int [chapter menu] {"position":"800,1100","size":"200,100"}
<h1>More SugarCube Markup</h1>
While [[Markup]] can help format text on the screen, display an image or create a link, it can also be useful in affecting HTML elements on the page (like updating stats bars), or display small variation (like changing pronouns). And, if you are trying to make a guide or tutorials in SugarCube, it will help display code!

* [[Special Attributes and Directives|Markup-Attribute]] 
* [[Displaying Code and Verbatim Text|Markup-Code-Verbatim]] 
* [[Display Small Variation with Templates|Markup-Template]]


:: Markup-Link [page basic-plus] {"position":"900,700","size":"100,100"}
<h1 id="basics-mulink">Using a Variable inside a Link</h1>
Aside from [[storing information|Macro-Set-Basic]], or being used inside [[conditional statements|Macro-If-Basic]], variables are also useful with links. 

For example, you can display their value as the text for the link, or send the player to a specific passage. 
Assuming that {{{$passage = "Garden"}}} and {{{$text = "Go take a walk"}}}:
{{{
 [[$text|$passage]]
    → will work the same way as
 [[Go take a walk|Garden]]
}}}
> ''Note:'' using a variable to send the player to a passage is quite useful as a //Back to the Story// link for non-Story pages, like Menus and Codexes (see [[this page|Long-Return-JS]]).

You can also display the value of a variable as //part// of text for the link. For example, including the name of the player or the amount of a type of object. To do so, you will need to wrap the rest of the text with quotes to tell the code to differentiate it from the variable.
Assuming that {{{$name = "Jane"}}}:<<set $name to "Jane">>
{{{[["I am " + $name|Passage]]}}} → [["I am " + $name|Passage]]
{{{[["She is " + $name + ", a friend."|Passage]]}}} → [["She is " + $name + ", a friend."|Passage]]
> ''Note:'' Do not use this markup as {{{[["Text" + $var]]}}}, as it will break the game!
> ''Note:'' You can use apostrophes {{{' '}}} instead of quotes {{{" "}}}.

If your link includes a quoted sentence and a variable, or a combination of straight quotes and apostrophes, you may run into issue with the printed link. I recommend using the curly types of quotes {{{“ ”}}} and apostrophes {{{‘ ’}}} for the text itself, as it is not recognised as code by Twine/SugarCube, and the straight version for the code. 
It is also possible to use {{{\}}} before the non-code character, as shown below:
{{{[["\"She\'s " + $name + ", a friend.\""|Passage]]}}} → [["\"She\'s " + $name + ", a friend.\""|Passage]]
<<unset $name>>
> ''Note:'' this wrapping method is unnecessary with the {{{<<link>>}}} [[macro|Macro-Link]], as you can do: {{{<<link "I am $name" "Passage">>}}}


:: Markup-Nobr [page basic-plus] {"position":"900,800","size":"100,100"}
<h1 id="basics-munobr">Removing a Line-break</h1>
When having multiple paragraphs of text, as well as code, you may notice extra space added to the page - space that you may not want. This is because every time you start a new line (of code or text) in a passage, Twine will automatically add a {{{<br>}}} HTML markup (also called a line-break) to match. 
This can be especially annoying when using macros or formatted text (header, lists, etc..) forcing that extra unwanted space. However, it can be managed with markup!

If you want to remove a line-break, you can do so with a backslash {{{\}}}:
{{{
    This is part of a sentence... \
    ... that is broken in two.

or 

    This is part of a sentence... 
    \... that is broken in two.

→ will show as:
    This is part of a sentence... ... that is broken in two.
}}}
> ''Note:'' Though the backslash is quite useful, you will find more efficient methods to remove multiple {{{<br>}}} at once through the {{{<<nobr>>}}} [[macro|Macro-Nobr-Silent]], the {{{nobr}}} [[special tag|Special-Tags]], or the [[Config setting|Basic-API-Config]].


:: Markup-Styling [page basic-plus] {"position":"800,900","size":"100,100"}
<h1 id="basics-mustyling">Basic Text Styling</h1>
Text styling is an important part of adding visual flavouring to the text, to pull focus towards certain elements or accentuate other parts. Adding colour to a certain word, bolding whole sentences, or creating headers for chapter titles, all this and more can be done with formatting markup (rather than HTML/CSS).
> ''Note:'' when {{{Beginning a line with...}}} is indicated, that character ''has to be'' the first on the line. If you have a space or an indentation at the start of the line, the text will not transform. 
> Also, if the text, passage, or project uses one of the [[Line-Break features|Markup-Nobr]], the Style Markup will not work. Only the HTML markup will!
\
<h3>Headings</h3>\
Beginning a line with an exclamation point {{{!}}}, you can define different levels of headings. Starting with 1 (for the largest heading), all the way to 6 (for the smallest one), each new exclamation point will decrease the importance and size of the header.
{{{
        Markup          HTML
          --             --
    !Level 1        → <h1></h1>
    !!Level 2       → <h2></h2>
    !!!Level 3      → <h3></h3>
    !!!!Level 4     → <h4></h4>
    !!!!!Level 5    → <h5></h5>
    !!!!!!Level 6   → <h6></h6>
}}}
\
<h3>Styling</h3>\
To render a text ''bold'' or //italics//, you need to wrap the text with special characters. You can mix and match the different stylings, as long as you nest one inside the other(s).
{{{
    //Italics//         → <em></em>
    ''Bold''            → <strong></strong>
    __Underline__       → <u></u>
    ==Strikethrough==   → <s></s>
    ^^Superscript^^     → <sup></sup>
    ~~Subscript~~       → <sub></sub>
}}}
> //Nesting styles//
{{{''//Bold and Italics//''}}} → ''//Bold and Italics//''
> ''Note:'' using styling markup (SugarCube or HTML) to style only part of the text inside a [[Link Markup|Markup-Link]] often leads to strange results (or plainly won't work). The use of the {{{<<link>>}}} [[macro|Macro-Link]] in this case is recommended.
\
<h3>Lists - ordered and unordered</h3>\
Beginning the line with an asterisk {{{*}}} or a number/pound sign {{{#}}}, you can create respectively unordered or ordered lists of items (or code). Similarly the headings, adding more than one character consecutively will define the indentation of the list.
{{{
    * Item 1
    ** Item a
    * Item 2
→ will be the same as:
    <ul>
        <li> List
            <ul>
                <li>List</li>
            </ul>
        </li>
        <li>List</li>
    </ul>
}}}
* Item 1
** Item a
* Item 2
{{{
    # Item 1
    ## Item a
    # Item 2
→ will be the same as:
    <ol>
        <li> List
            <ol>
                <li>List</li>
            </ol>
        </li>
        <li>List</li>
    </ol>
}}}
# Item 1
## Item a
# Item 2
\
<h3>Horizontal Rule</h3>\
Beginning the line with four hyphen {{{-}}} characters, will create a horizontal line (like the one at the bottom of the page) marking a thematic break:
{{{
    ---- 
→ will be the same as:
    <hr>
}}}
\
<h3>Blockquotes</h3>\
Beginning the line with a right angle bracket {{{>}}}, you can create blockquote elements to include quotes on the page. This styling has been used in this quite for ''Notes''.
Similarly the headings, adding more than one character consecutively will define the indentation of the list.
{{{
    >Main 1
    >>Nested 1
    >>Nested 2
    >Main 2
→ will be the same as:
    <blockquote>Line 1<br>
        <blockquote>Nested 1<br>
        Nested 2<br>
        </blockquote>
    Line 2<br>
    </blockquote>
}}}
>Main 1
>>Nested 1
>>Nested 2
>Main 2
\
<h3>Custom Style</h3>\
To create a block (like a {{{<span>}}} or a {{{<div>}}}) to target a specific bit of text, you need to wrap it with two at signs{{{@@}}}:
{{{
    @@Text@@ → <span>Text</span>

    @@
    Text     → <div>Text<div>
    @@

}}}
> ''Note:'' a {{{<div>}}} will create a block of text, while a {{{<span>}}} will stay inside a line.

To further customise a block, you can assign it a class {{{.class}}}, id {{{#id}}}, or CSS rule to it, separating each and it from the text with a semi-colon {{{;}}}:
{{{
    @@#id;.class;color:red;Text@@ 
→ <span id="id" class="class" style="color:red;"></span>

    @@#id;.class;color:red;
    Text
    @@    
→ <div id="id" class="class" style="color:red;"><div>
}}}
> ''Note:'' you should only have one id per element, and no element on the page should share the same id. Multiple classes can be added to an element, and can be used for multiple elements at once.
\
<h3>Comments</h3>\
There are three ways of leaving a note in your passage which will be hidden to the player:
{{{
    /* A comment */     → Passage, JavaScript, Stylesheets
    /% A comment %/     → Passage
    <!-- A comment -->  → Passage, Special Passages
}}}


:: Markup-Template [page int-markup] {"position":"800,1300","size":"100,100"}
<h1 id="int-mutemp">Display Small Variation with Templates</h1>
The Template markup is essentially a text replacement code that will display small variation (one-two words). It works in combination with the [[Template API|TemplateAPI]], where the variation is defined. It is most useful for displaying pronouns, especially pronoun sets defined before player input.
> ''Note:'' For an example of Pronoun Template, see [[Chapel's Macro|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/pronoun-templates.md]] or [[HiEv's Widget|https://hiev-heavy-ind.com/Sample_Code/Sample_Code.html#Pronoun%20Templates]]. 

The markup is set with a question mark {{{?}}} before the defined template name ({{{?this}}}). If a Template has been defined in JavaScript, the code will look for any template markup on the page, and display the relevant element on the screen.
> ''Note:'' if the API is not set or the element is not defined in the Template, the markup will display the text as is, like {{{?this}}.}

Assuming that the template sets {{{?He}}} into //She// and {{{?his}}} into //her://
{{{
    ?He was always willing to lend ?his ear to anyone.
→ will be rendered into:
    She was always willing to lend her ear to anyone.
}}}


:: Markup-Variable [page basic-plus] {"position":"800,700","size":"100,100"}
<h1 id="basics-muvariable">Showing the Value of a Variable</h1>
While you may be tempted to use a [[macro|Macro-Print]] to display the value of a variable (a valid and correct way), there is a much simpler way to print the value on the screen: simply add {{{$variable}}} in the passage.
> ''Note:'' depending on the type of variable, you may need extra elements.
\
Assuming that {{{$name}}} was set with the value {{{"Jane"}}}, you would see here its value:<<set $name to "Jane">>
{{{$name}}} → $name

For [[arrays|Variables-Base]], you can print either the full list of values, or a specific value on the page. Assuming that {{{$list}}} has been set with the following values {{{[1, 9, 3, 4, 7]}}}, you would see:<<set $list = [1, 9, 3, 4, 7]>>
> //the whole array://
{{{$list}}} → $list
> //one specific value:// (here, the third)
{{{$list[2]}}} → $list[2]
> ''Note:'' the first value inside an array is at position {{{[0]}}}, the second has the position {{{[1]}}}, etc...

For [[objects|Variables-Base]], there are two ways to show a stored value: indicating the specific propery inside square brackets {{{[' ']}}} or after a dot {{{.}}}. Assuming {{{$npc}}} has been set as {{{$npc = {name: 'Jane', age: '53'} }}}: <<set $npc = {name: 'Jane', age: '53'}>>
> //property after a dot://
{{{$npc.name}}} → $npc.name
> //property inside brackets://
{{{$npc['age']}}} → $npc['age']
> ''But'' you can't show the whole object as is:
{{{$npc}}} → $npc

> ''Note:'' See the {{{<<print>>}}} [[macro page|Macro-Print]] for other ways to show a value on the page.
<<unset $name, $list, $npc>>


:: Method-Array [page methods] {"position":"2600,1200","size":"100,100"}
<h1 id="methods-array">Methods and Arrays</h1>
Arrays are where the methods are the most useful, as they are the main way to edit them or check their content. These methods can be used with the {{{<<set>>}}}/{{{<<run>>}}} macros, or in conditional statements.
> ''Note:'' These methods do not need to be attached to a variable, they can be attached to a non-saved array (see the {{{<Array>.includes()}}} examples).
\
<h2>Add elements to an array</h2>\
There are multiple ways to add elements to an array, but the methods listed below will do so differently.
The examples below will assume that {{{_array = ['Apple', 'Potatoe', 'Sausage']}}} and {{{_array2 = [1, 2, 3]}}}
\
<h4>{{{<Array>.concat()}}}</h4>\
{{{<Array>.concat()}}} will merge other arrays or lists of values to the original array, with the new values added at the end of the original array:
{{{
    _array.concat(value/variable)
}}}
{{{
    _array.concat(_array2) 
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3]

    _array.concat(_array2, 'words')
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3, 'words']

    _array.concat('words')
        → ['Apple', 'Potatoe', 'Sausage', 'words']
}}}
As the method will not edit the original variable, you would need to use the {{{<<set>>}}} macro for the change the stay constant:
{{{<<set _array to _array.concat(_array2)>>}}}
> ''Note:'' if you want to only include new values to the array, you would need to use {{{<Array>.concatUnique()}}}
\
<h4>{{{<Array>.push()}}}</h4>\
{{{<Array>.push()}}} will add values to the original array, with the new values to be added at the end of the original array:
{{{
    _array.push(value/variable)
}}}
{{{
    _array.push(_array2)
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3]

    _array.push(_array2, 'words')
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3, 'words']

    _array.push('words')
        → ['Apple', 'Potatoe', 'Sausage', 'words']
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.push(_array2)>>
    <<set _array.push(_array2)>>
    <<run _array.push(_array2)>>
}}}
> ''Note:'' if you want to only include new values to the array, you would need to use {{{<Array>.pushUnique()}}}
\
<h4>{{{<Array>.unshift()}}}</h4>\
{{{<Array>.unshift()}}} will add values to the original array, with the new values to be added at the ''beginning'' of the original array:
{{{
    _array.unshift(value/variable)
}}}
{{{
    _array.unshift(_array2)
        → [1, 2, 3, 'Apple', 'Potatoe', 'Sausage']

    _array.unshift(_array2, 'words')
        → [1, 2, 3, 'words', 'Apple', 'Potatoe', 'Sausage']

    _array.unshift('words')
        → ['words', 'Apple', 'Potatoe', 'Sausage']
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.unshift(_array2)>>
    <<set _array.unshift(_array2)>>
    <<run _array.unshift(_array2)>>
}}}
> ''Note:'' if you want to only include new values to the array, you would need to use {{{<Array>.unshiftUnique()}}}
\
<h3>Remove elements from an array</h3>\
There are multiple ways to remove elements from an array, but the methods listed below will do so differently.
The examples below will assume that {{{_array = ['Apple', 'Apple', 'Potatoe', 'Sausage', 1, 2, 3]}}} and {{{_array2 = [1, 2, 3]}}}.
\
<h4>{{{<Array>.deleteAll()}}}</h4>\
{{{<Array>.deleteAll()}}} will remove any instance of the targeted value.
{{{
    _array.deleteAll(value/variable)
}}}
{{{
    _array.deleteAll(_array2)
        → ['Apple', 'Apple', 'Potatoe', 'Sausage']
    _array.deleteAll(_array2, 'Apple')
        → ['Potatoe', 'Sausage']
    _array.deleteAll('Apple')
        → ['Potatoe', 'Sausage', 1, 2, 3]
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.deleteAll(_array2)>>
    <<set _array.deleteAll(_array2)>>
    <<run _array.deleteAll(_array2)>>
}}}
\
<h4>{{{<Array>.deleteFirst()}}}</h4>\
{{{<Array>.deleteFirst()}}} will work similarly to the previous method, except that it will only delete the first instance of the indicated value.
{{{
    _array.deleteFirst(value/variable)
}}}
{{{
    _array.deleteFirst('Apple')
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3]
    _array.deleteFirst('Potatoe', 1)
        → ['Apple', 'Apple', 'Sausage', 2, 3]
    _array.deleteFirst(_array2)
        → ['Apple', 'Apple', 'Potatoe', 'Sausage']
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.deleteFirst(_array2)>>
    <<set _array.deleteFirst(_array2)>>
    <<run _array.deleteFirst(_array2)>>
}}}
\
<h4>{{{<Array>.deleteLast()}}}</h4>\
{{{<Array>.deleteLast()}}} will work similarly to the previous method, except that it will only delete the last instance of the indicated value.
{{{
    _array.deleteLast(value/variable)
}}}
{{{
    _array.deleteLast('Apple')
        → ['Apple', 'Potatoe', 'Sausage', 1, 2, 3]
    _array.deleteLast('Apple', 1)
        → ['Apple', 'Potatoe', 'Sausage', 2, 3]
    _array.deleteLast(_array2)
        → ['Apple', 'Apple', 'Potatoe', 'Sausage']
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.deleteFirst(_array2)>>
    <<set _array.deleteFirst(_array2)>>
    <<run _array.deleteFirst(_array2)>>
}}}
\
<h4>{{{<Array>.deleteAt()}}}</h4>\
{{{<Array>.deleteAt()}}} will work similarly to the previous method, but will target the element at a certain position in the array.
> ''Note:'' the first element in an array starts at 0.
> You can use an array filled with numbers instead of of multiple values.
{{{
    _array.deleteAt(value/variable)
}}}
{{{
    _array.deleteAt(_array2)
        → ['Apple', 1, 2, 3]
    _array.deleteAt(0, _array2)
        → [1, 2, 3]
    _array.deleteAt(6)
        → ['Apple', 'Apple', 'Potatoe', 'Sausage', 1, 2]
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.deleteAt(_array2)>>
    <<set _array.deleteAt(_array2)>>
    <<run _array.deleteAt(_array2)>>
}}}
\
<h4>{{{<Array>.pluck()}}}</h4>\
{{{<Array>.pluck()}}} and {{{<Array>.pluckMany()}}} are two methods what will respectively remove an element/multiple elements from the array in a random manner.
{{{
    _array.pluck()
    _array.pluckMany(number/variable)
}}}
> ''Note:'' for {{{<Array>.pluckMany()}}}, you can use an integer variable to indicate the number of elements you want to remove.
{{{
    _array.pluckMany(3)
    _array.pluckMany(_var)
}}}
These methods can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.pluck(_array2)>>
    <<set _array.pluckMany(_array2)>>
    <<run _array.pluck(_array2)>>
}}}
\
<h4>{{{<Array>.pop()}}} and {{{<Array>.shift()}}}</h4>\
{{{<Array>.pop()}}} and {{{<Array>.shift()}}} will remove respectively the last and first element in an array.
{{{
    _array.pop()
→ will remove the element "3" from the array

    _array.shift()
→ will remove the element "Apple" from the array
}}}
These methods can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.pluck(_array2)>>
    <<set _array.pluckMany(_array2)>>
    <<run _array.pluck(_array2)>>
}}}
\
<h3>Check the properties of an array</h3>\
There are multiple ways to check the properties of an array. Depending on what you are looking for, you may find one method working better than another.
\
<h4>{{{<Array>.includes()}}} and its alternatives</h4>\
{{{<Array>.includes()}}} will check whether an element is included in the array. It also comes in two other flavours: {{{<Array>.includesAll()}}}, which will check if all listed elements are included in an array, and {{{<Array>.includesAny()}}}, which will check whether one of the elements listed is included in an array.
{{{
    <Array>.includes(value, position)
    <Array>.includesAll(value/variable)
    <Array>.includesAny(value/variable)
}}}
> ''Note:'' the {{{position}}} parameter of {{{<Array>.includes()}}} will start the search for the wanted element starting that position in the array.
\
The method is best used in conditional statements:
{{{
    <<if _array.includes("Apple")>>...<</if>>
→ since the array has the element "Apple", it will run the content
    <<if _array.includes("Apple", 3)>>...<</if>>
→ this won't run, since the elements "Apple" are in positions 0 and 1

    <<if _array.includesAll(_array2, "Apple")>>...<</if>>
→ since the array has those elements, it will run the content
    <<if _array.includesAll(_array2, 4)>>...<</if>>
→ won't run, since the array does not have the element 4

    <<if _array.includesAny(_array2, "Apple")>>...<</if>>
    <<if _array.includesAny(_array2, 4)>>...<</if>>
→ since the array has those elements, it will run the content

Using a non-variable array as the receiver:
    <<if ["John", "Jane", "Sylvia"].includes($var)>>...<</if>>
→ if the value of the variable is included in this array, the code will run.
}}}
> ''Note:'' this last example can be useful to block certain names from being used by the player when setting their character.
\
<h4>{{{<Array>.first()}}} and {{{<Array>.last()}}}</h4>\
{{{<Array>.first()}}} and {{{<Array>.last()}}} will return respectively the element in the first and last position in the array.
{{{
    <Array>.first()
    <Array>.last()
}}}
Among other, they can be used in conditional statements or setting another variable:
{{{
    <<if _array.first() is "Apple">>...<</if>>
→ this will run, since the first element of the array is "Apple"

    <<if _array.first() is 1>>...<</if>>
→ this won't run

    <<set $var to _array.last()>>
→ the value of $var will be "3"
}}}
<h4>{{{<Array>.count()}}}</h4>\
{{{<Array>.count()}}} will check how many times an element is included in the array. You can indicate a {{{position}}} to start the search at said position in the array
{{{
    <Array>.count(value, position)
}}}
{{{
    _array.count("Apple")    → 2
    _array.count("Apple", 4) → 0
→ the elements 'Apple' are at position 0 and 1
}}}
> ''Note:'' the method cannot be left empty. If you are looking to check the length of an array, you should use {{{.length}}} instead.
\ 
<h3>Other Array Methods</h3>\
There are handful of other methods one can use with arrays.
<h4>{{{<Array>.random()}}}</h4>\
{{{<Array>.random()}}} will take a value from the array at random (but not modify the original array), and {{{<Array>.randomMany()}}} will do the same thing but take as many as indicated:
{{{
    <Array>.random()
    <Array>.randomMany(number)
}}}
> ''Note:'' it words similarly to the [[function|Function-Clone-Random]] {{{either()}}}.
You can use these methods in conditional statements, to set variable, or simply print on the screen:
{{{
    <<set $var to _array.random()>>
    <<= _array.randomMany(3)>>
    <<if _array.random() is "Apple">>...<</if>>
}}}
\
<h4>{{{<Array>.shuffle()}}}</h4>\
{{{<Array>.shuffle()}}} will shuffle the order of the values in the array, at random.
{{{
    _array.shuffle()
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.shuffle()>>
    <<set _array.shuffle()>>
    <<run _array.shuffle()>>
}}}
\
<h4>{{{<Array>.toShuffled()}}}</h4>\
{{{<Array>.toShuffled()}}} will shuffle the order of the values in the array, at random, without modifying the original array. It is particularly useful when needing a shuffled copy of the original array saved in another variable.
{{{
    _array.toShuffled()
}}}
The example below will assume that {{{_array = ['Apple', 'Apple', 'Potatoe', 'Sausage']}}}.
{{{
    <<set _array.toShuffled()>>
→ Nothing will happen

    <<set $var to _array.toShuffled()>>
→ A potential output for $var: ['Potatoe', 'Apple', 'Sausage', 'Apple']
  _array will not change

    <<set _array to _array.toShuffled()>>
→ will work the same way as {.shuffle()} above
}}}
\
<h4>{{{<Array>.toUnique()}}}</h4>\
{{{<Array>.toUnique()}}} will return the list of unique elements from an array, without modifying the original array. It is particularly useful when wanting to remove duplicates.
{{{
    _array.toUnique()
}}}
The example below will assume that {{{_array = ['Apple', 'Apple', 'Potatoe', 'Sausage']}}}.
{{{
    <<set _array.toUnique()>>
→ Nothing will happen

    <<set $var to _array.toUnique()>>
→ will save in $var: ['Apple', 'Potatoe', 'Sausage']
  _array will not change

    <<set _array to _array.toUnique()>>
→ will do the same as above, but save in _array.
}}}
\
<h4>{{{<Array>.flat()}}}</h4>\
{{{<Array>.flat()}}} will flatten an array containing sub-arrays.
{{{
    <Array>.flat(depth)
}}}
> ''Note:'' the {{{depth}}} parameter is optional, if omitted, it will default to 1.
Assuming that {{{_array3 = [["Alfa", "Bravo"], [["Charlie", "Delta"], ["Echo"]], "Foxtrot"]}}}
{{{
    _array.flat()   → ["Alfa", "Bravo", ["Charlie", "Delta"], ["Echo"], "Foxtrot"]
    _array.flat(2)  → ["Alfa", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot"]
}}}
The method can be run on either the {{{<<set>>}}} or {{{<<run>>}}} macros.
{{{
    <<set _array to _array.flat()>>
    <<set _array.flat(2)>>
    <<run _array.flat(3)>>
}}}


:: Method-Number [page methods] {"position":"2700,1200","size":"100,100"}
<h1 id="methods-numbers">Methods and Numbers</h1>
Mathematical methods can be quite useful in a project, especially when dealing with player statistics and stat bars, to ensure a value does not exceed or go below a certain range.
\
<h3>{{{Math.round()}}} </h3>\
This method will round the numerical value of a variable or equation to the nearest full number. It is most useful when wanting to keep the results of statistic calculations to a round value.
{{{
    Math.round(value)
    Math.round(5.5)  → 6
    Math.round(-5.5) → -5
}}}
> ''Note:'' this method is native to [[JavaScript|https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round]].

While the use of this method can be as simple as rounding the value of a variable, you can use it for more complex equations:
{{{
    <<set $stoic to Math.round($stoic)>>
→ will round the value of the value of $stoic to the nearest full number.

    <<set $stoic to Math.round( $stoic + ( ( 100 - $stoic ) * ( _increase / 100 ) ) )>>
→ will increase the value of $stoic by a percentage set by _increase, then round it to the nearest number.
}}}
> ''Note:'' This last calculation is a recreation of the ChoiceScript Fairmath system.
\
<h3>{{{Math.trunc()}}}</h3>\
This method will remove any decimal from the value.
{{{
    Math.trunc(value)
    Math.trunc(5.5)    → 5
    Math.trunc(12.678) → 12
}}}
> ''Note:'' this method is native to [[JavaScript|https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc]].
\
<h3>{{{Math.clamp()}}}</h3>\
This method will check whether the value is within a set range, and calculate a new value within the bounds. It is most useful when when wanting to ensure the value of a variable stays between bounds (ex: a stat not going above 100% or lower than 0%).
{{{
    Math.clamp(value, min, max)
    Math.clamp($var, 6, 300)
}}}
The method alone will not change the value of a variable, this needs to be done with a {{{<<set>>}}} macro:
{{{
    <<set $stoic to Math.clamp($stoic, 0, 100)>>
    <<set $stoic to Math.clamp(($stoic + 4) * 5, 0, 100)>>
}}}


:: Method-String [page methods] {"position":"2600,1300","size":"100,100"}
<h1 id="methods-string">Methods and String Variables</h1>
The methods below are mainly useful to change the formatting of string variables, or see if certain characters are included in the strings. With those methods, the code will look at a string as if it was an array of character (including space and punctuation), with the first having the position 0.
\
<h3>Changing the Formatting of Strings.</h3>\
Whether to change the string to its upper or lowercase version, or just capitalise the first character, you would need to use one of the following methods: {{{.toLowerCase()}}}/{{{.toLocaleLowerCase()}}}, {{{.toUpperCase()}}}/{{{.toLocaleUpperCase()}}}, {{{.toUpperFirst()}}}/{{{.toLocaleUpperFirst()}}}
> ''Note:'' the {{{.toLocale-()}}} method transforms the string in accordance to the user's language and region in their device.
Assuming that {{{$jane = "jane"}}} and {{{$john = "John"}}} 
{{{
    <<print $jane.toUpperFirst()>> → Jane
    <<print $jane.toUpperCase()>>  → JANE
    <<print $john.toLowerCase()>>  → john
}}}
You can also save this information into a variable or use them in conditional statements:
{{{
    <<set $name to $jane.toUpperFirst()>>
→ $name will have the value "Jane"

    <<if $john.toLowerCase() is "john">>...<</if>>
}}}
\
<h3>Get the First or Last Character of a String</h3>\
To find the first or last character of a string variable, you would need to use respectively {{{.first()}}} and {{{.last()}}}. Assuming that {{{$var = "Hello, World :D"}}}:
{{{
    <<print $var.first()>> → H
    <<print $var.last()>>  → D
}}}
\
<h3>Find if or how many times a Substring is included in a String Variable</h3>\
Similarly to [[arrays|Method-Array]], to find if a substring is included in a variable, you would need to use {{{.includes()}}}. With this method, you can do a wide search, or start it at a certain number. Assuming that {{{$var = "Hello, World :D"}}}:
{{{
    <<if $var.includes('lo')>>.this will show.<</if>>
    <<if $var.includes('lo', 2)>>.this won't show.<</if>>
    <<if $var.includes('lo', 6)>>.this won't show.<</if>>
    <<if $var.includes('love')>>.this won't show either.<</if>>
}}}
On the other hand, {{{.count()}}} will look at how many times a substring is included in a variable. Assuming that {{{$var = "Hello, World :D"}}}:
{{{
    <<print $var.count('l')>> → 3
    <<print $var.count('l', 5)>> → 1
}}}
> ''Note:'' the method cannot be left empty. If you are looking to check the length of a string, you should use {{{.length}}} instead.


:: Method-Variables [page adv-methods] {"position":"1100,1900","size":"100,100"}
<h1 id="advmeth-var">More Methods to change Variables</h1>
The methods below should be used with other macros, such as {{{<<set>>}}}, {{{<<run>>}}}, {{{<<print>>}}} or even {{{<<if>>}}}, as well as JavaScript.
\
<h3>String-related Methods</h3>\
<h4>{{{String.format()}}}</h4>\
This method will help merge and format strings together, following the coded arguments.
{{{
    String.format(format , arguments…)
}}}
This method had 2 parameters:
* {{{format}}} (string), consisting of normal text and format items.
** {{{index}}}, starting from {{{0}}}, indicating where to place the item 
** {{{alignment}}} (optional), inside the index, length of the field and the alignment of the argument within the field (positive = right, negative = left)
* {{{arguments}}}, a list of arguments, corresponding to the elements to place in the index.
** can be a list of strings {{{"word", "word"}}} or an array {{{['word', 'word']}}}
\
> //Examples://
{{{
→ List of arguments:
    String.format("{0}, {1}!", "Hello", "World") 
    → returns "Hello, World!"
    
→ Array argument:
    String.format("{0}, {1}!", [ "Hello", "World" ])
    → returns "Hello, World!"

→ Alignment right:
    String.format("{0,6}", "foo")
    → returns "   foo"

→ Alignment left:
    String.format("{0,-6}", "foo")
    → returns "foo   "
}}}
\
You can also use variables for either parameter.
> //Assuming that// {{{_var = Hello}}} and {{{_var2 = World}}}
{{{
    String.format("{0}, {1}!", "_var", "_var2")

→ will be the same as:
    String.format("{0}, {1}!", [ "Hello", "World" ])
}}}
> //Using the method inside// {{{<<set>>}}}
{{{
    <<set $var to String.format("{0}, {1}!", "_var", "_var2")>>
→ will be the same as:
    <<set $var to _var + ", " + _var2 + "!">>
}}}
\
<h4>{{{RegExp.escape()}}}</h4>\
This method will take the given string and return an expression where the [[metacharacters|https://www.w3schools.com/jsref/jsref_obj_regexp.asp]] would be ignored.
{{{
    RegExp.escape('That will be $5 (cash only)')   
→ returns 'That will be \$5 \(cash only\)'
}}}
> ''Note:'' there will only be very specific situations where this method is relevant to a project.
\
<h3>Array-related Methods</h3>\
\
<h4>{{{<Array>.countWith()}}}</h4>\
This method will count every element in an array fitting the defined function. It will be useful to count the number of elements in an array for complex conditions requiring functions.
{{{
    <Array>.countWith(predicate [, thisArg])
}}}
It has 2 parameters:
* {{{predicate}}}, the function used to test each member of the array. It is called with 3 arguments:
** {{{value}}}, the processed member 
** {{{index}}} (optional), the index of the member being processed
** {{{array}}} (optional), the array being processed
* {{{thisArg}}} (optional), the value used as {{{this}}}
\
> //Examples://
{{{
→ $fruits = ["Apples", "Oranges", "Plums", "Oranges"]
    
    $fruits.countWith(
        function (fruit) { 
            return fruit === "Oranges"; 
        }
    )
}}}
This will return as 2, since there are 2 counts of {{{Oranges}}} in the array.
{{{
→ $numbers = [1, 2.3, 4, 76, 3.1]

    $numbers.countWith(
        Number.isInteger
    ) 
}}}
This will return as 3, since there are 3 counts of full numbers in the array. 
{{{
→ $items = [
    { name : 'Healing potion', kind : 'potion' },
    { name : 'Longsword', kind : 'weapon' },
    { name : 'Mana potion', kind : 'potion' },
    { name : 'Dead rat', kind : 'junk' },
    { name : 'Endurance potion', kind : 'potion' },
    { name : 'Shortbow', kind : 'weapon' }
  ]

    $items.countWith(
        function (item) { 
            return item.kind === 'junk';
        }
    )  
}}}
This will return as 1, since there is only 1 count of junk object in the array.
\
<h4>{{{<Array>.deleteWith()}}}</h4>\
This method will remove every element in an array fitting the defined function. It will be useful to remove elements in an array for complex conditions requiring functions.
{{{
    <Array>.deleteWith(predicate [, thisArg])
}}}
It has 2 parameters:
* {{{predicate}}}, the function used to test each member of the array. It is called with 3 arguments:
** {{{value}}}, the processed member 
** {{{index}}} (optional), the index of the member being processed
** {{{array}}} (optional), the array being processed
* {{{thisArg}}} (optional), the value used as {{{this}}}
\
> //Examples, assuming that:// {{{$fruits = ["Apples", "Apricots", "Oranges"]}}}
{{{
    $fruits.deleteWith(function (val) {
        return val === "Apricots";
    })

→ the function removes any instance of ["Apricots"]
    → $fruits = ["Apples", "Oranges"]
}}}
{{{
    $fruits.deleteWith(function (val) {
        return val.startsWith("Ap");
    })

→ the function removes any instance starting with ["Ap"]
    → $fruits = ["Oranges"]
}}}
> //Examples, assuming that:// {{{$fruits = [{ name : "Apples" }, { name : "Apricots" }, { name : "Oranges" }]}}}
{{{
    $fruits.deleteWith(function (val) {
        return val.name === "Apricots";
    })

→ the function will remove any iteration where {name : "Apricots"}
    → $fruits = [{ name : "Apples" }, { name : "Oranges" }]
}}}
{{{
    $fruits.deleteWith(function (val) {
        return val.name.startsWith("Ap");
    })

→ this function will remove any iteration where {name} starts with {"Ap"}
    → $fruits = [{ name : "Oranges" }]
}}}
\
<h4>{{{<Array>.flatMap()}}}</h4>\
This method will flatten an array in accordance to a defined function. 
{{{
    <Array>.flatMap(callback [, thisArg])
}}}
> ''Note:'' it is identical to {{{<Array>.map(…).flat()}}}.
It has 2 parameters:
* {{{callback}}}, the function used to produce members of the edited array. It is called with 3 arguments:
** {{{value}}}, the processed member 
** {{{index}}} (optional), the index of the member being processed
** {{{array}}} (optional), the array being processed
* {{{thisArg}}} (optional), the value used as {{{this}}} when executing {{{callback}}}
> //Assuming that:// {{{$npa = ["Alfa", "Bravo Charlie", "Delta Echo Foxtrot"]}}}
{{{
    $npa.flatMap(function (val) {
        return val.split(" ");
    })

→ this function will flatten the array 
  by removing all spaces between words
    → $npa = ["Alfa", "Bravo", "Charlie", "Delta", "Echo", "Foxtrot"]
}}}


:: Method-jQuery [page adv-methods] {"position":"1200,1900","size":"100,100"}
<h1 id="advmeth-jq">jQuery Methods and Interactivity</h1>
\
<h3>{{{<jQuery>.ariaClick()}}}</h3>\
This method will make the target element [[WAI-ARIA-compatible|https://www.w3.org/WAI/standards-guidelines/aria/]] clickable. This means the element will get accessibility attributes and can be activated with a mouse click, or key press (enter/return/spacebar).
{{{
    <jQuery>.ariaClick([options ,] handler)
}}}
The method has 2 parameters:
* {{{options}}} (optional), options to be used when creating the clickable
** {{{namespace}}}, list of event namespaces
** {{{one}}}, if indicated, the clickable is single-use 
** {{{selector}}}, if indicated, the selector will filter the descendants that triggered the event.
** {{{data}}}, to be passed to the handler 
** {{{tabindex}}}, value to make element selectable with the TAB key.
*** If omitted, defaults to 0 (always tab-able).
** {{{controls}}}, value for {{{aria-controls}}}
** {{{pressed}}}, value for {{{aria-pressed}}}
** {{{label}}}, value for {{{aria-label}}} and {{{title}}}
* {{{handler}}} (function), the callback to invoke when the element is activated.
\
> //Examples//
{{{
→ existing element: <a id="so-clicky">Click me</a>
    $('#so-clicky').ariaClick(function (event) {
        /* do stuff */
    });
}}}
{{{
→ creating a basic link + appending output:
    $('<a>Click me</a>')
        .ariaClick(function (event) {
            /* do stuff */
        })
	    .appendTo(output);
}}}
{{{
→ creating a basic button + appending output:
    $('<button>Click me</button>')
        .ariaClick(function (event) {
            /* do stuff */
        })
        .appendTo(output);
}}}
{{{
→ creating a link with options + appending output:
    $('<a>Click me</a>')
        .ariaClick({
            one   : true,
            label : 'This single-use link does stuff.'
        }, function (event) {
            /* do stuff */
        })
        .appendTo(output);
}}}
\
<h3>{{{<jQuery>.ariaDisabled()}}}</h3>\
This method will change the ''disabled'' state of the target WAI-ARIA-compatible clickable element(s).
{{{
    <jQuery>.ariaDisabled(state)
}}}
> ''Note:'' this method will only to work with clickables created via {{{<jQuery>.ariaClick()}}}, which is what SugarCube uses to handle the link markups and macros.
\
> //Examples://
{{{
$('.macro-link').ariaDisabled(true)   
    → Disable all <<link>> on the page
$('.macro-link').ariaDisabled(false)  
    → Enables  all <<link>> on the page
}}}
\
<h3>{{{<jQuery>.ariaIsDisabled()}}}</h3>\
This method will check whether the targetted WAI-ARIA-compatible clickable element(s) is(are) disabled.
{{{
    <jQuery>.ariaIsDisabled()
}}}
> ''Note:'' this method will only to work with clickables created via {{{<jQuery>.ariaClick()}}}, which is what SugarCube uses to handle the link markups and macros.
\
> //Examples assuming that an element {{{#so-clicky}}} exists//:
{{{
$('#so-clicky').ariaIsDisabled()
  → Returns true if {#so-clicky} is disabled
  → Returns false if {#so-clicky} is enabled
}}}
\
<h3>{{{jQuery.wiki()}}}</h3>\
This method will wikify the indicated content source(s) and discard the result (unless there are errors). This is only useful when you want to invoke a macro for its side-effects but don't need the output.
{{{
    jQuery.wiki()
}}}
It has 1 parameter:
* {{{sources}}}: the list of content sources 
> //Example://
{{{
    $.wiki('<<somemacro>>');  
→ Invokes the <<somemacro>> macro, not printing any output
}}}
\
<h3>{{{<jQuery>.wiki()}}}</h3>\
This method is similar to the previous one, except it will append the output of the content source(s) to the targetted element(s).
{{{
    <jQuery>.wiki(sources…)
}}}
It has 1 parameter:
* {{{sources}}}: the list of content sources 
> //Example given the element:// {{{<div id="the-box"></div>}}}
{{{
    $('#the-box').wiki('Who //are// you?'); 
→ will append to {#the-box}
    "Who <em>are</em> you?"
}}}
\
<h3>{{{jQuery.wikiPassage()}}}</h3>\
This method will wikify the content of the indicated passage and discard the result (unless there are errors). This is only useful when you want to invoke a passage full of code but don't need to display output.
{{{
    jQuery.wikiPassage()
}}}
It has 1 parameter:
* {{{name}}}: the name of the Passage 
> //Example://
{{{
    $.wikiPassage('TheSuperDuperLongHiddenCode');  
→ Runs the code inside the "TheSuperDuperLongHiddenCode" passage, not printing any output
}}}
\
<h3>{{{<jQuery>.wikiPassage()}}}</h3>\
This method is similar to the previous one, except it will append the output of the indicated passage to the targetted element(s).
{{{
    <jQuery>.wikiPassage(name)
}}}
It has 1 parameter:
* {{{name}}}: the name of the Passage 
> //Example given the element:// {{{<div id="the-box"></div>}}}
{{{
    $('#the-box').wikiPassage('ASuperLongImportantText'); 
→ will append the content to {#the-box}
}}}


:: Methods [chapter menu] {"position":"2600,1100","size":"200,100"}
<h1>Using Methods to change Variables</h1>
Methods are [[functions|Functions]], JavaScript blocks of code designed to do a specific task, linked to a receiver, like a variable, to run.
{{{
    <receiver>.method()
 → Example:
    $var.first()
}}}

In SugarCube, they are mainly used to handle arrays, change the formatting of strings values, or handle numbers.
\
* [[Methods and String Variables|Method-String]]
* [[Methods and Numbers|Method-Number]]
* [[Methods and Arrays|Method-Array]] (long!)
> ''Note:'' Other native JavaScript or jQuery methods can be used with SugarCube, but requires knowledge of those languages. The ones listed in this guide would be the most useful.


:: Methods-Adv [chapter menu] {"position":"1100,1800","size":"200,100"}
<h1>More Variable and Interaction Methods</h1>
In the [[Methods]] section, methods were defined JavaScript blocks of code designed to do a specific task, linked to a receiver, like a variable, to run. This section includes more complex methods, often involving functions. Knowledge of both JavaScript and jQuery is required here.

* [[More Methods to change Variables|Method-Variables]] 
* [[jQuery Methods and Interactivity|Method-jQuery]]


:: OnePage [one-page] {"position":"2000,250","size":"200,100"}
<div style="text-align:right;font-size:85%;">Last Updated: 29 Aug '24</div>
<h1 class="the-super-head">100% Good Twine SugarCube Guide</h1>\
This guide was created as an ''alternative'' to the SugarCube documentation, including simpler explanations to the macros and with clearer examples when possible. It is meant to make the SugarCube format more accessible to new and learning users.

The guide covers the different aspects of the SugarCube format, from its particular markup, to its macros, functions, and APIs. It also touches upon possible customisation of SugarCube projects, with editing the StyleSheet with CSS or the JavaScript passage. And, it brushes upon aspects of accessibility in terms of code, design, and formatting.
> This guide is based on the [[official SugarCube documentation|https://www.motoslave.net/sugarcube/2/docs/]], and is up to date as of the ''version 2.37.3''. For later version, please refer to the official documentation. /* It is unlikely this guide will get further updates, as SugarCube 2 is moving to maintaining-only state. Always refer to the documentation anyway when unsure about something*/
\
The guide is separated in different categories: ''The Basics(+)'', ''Intermediate Use'', and ''Advanced Mode''. 
Only the Basics are necessary to be able to create a game with SugarCube. 
Knowledge of CSS, JavaScript/jQuery may be required for more complex elements.
> ''Note:'' any coding done in SugarCube is case and character sensitive, meaning that 
> {{{name ≠ Name}}} or {{{" " ≠ “ ”}}}.

<hr class="categorybreak"><hr class="categorybreak2">
<h1 class="the-super-head">The Basics</h1>
<hr>
<<include "About">>
<hr>
<h1 id="basic-chapter" class="the-chapter">Starting with SugarCube</h1>
When setting up your first project with SugarCube, it is best to start with the Basics. 
This means creating links between story pages, allowing the player to move from one passage to another, saving information and player's choices inside variables, and tracking the value of those variables to display variations down the line.

To do this, you essentially only need the 3 following macros: {{{<<link>>}}}, {{{<<set>>}}}, and {{{<<if>>}}}.
> ''Note:'' Twine reads passages from top to bottom, so any code at the top of the passage can affect any code below.
> Want to see this in action? Try this [[Demo|Demo-Basic]]!
<hr class="small-section">\
<h1 id="basic-ui-element">The Elements on the Page</h1>
In a basic SugarCube project, there are essentially 3 main elements on the page:
* the passage (where this text is)
* the UI-Bar (on the left)
* the dialog box (<<link "click here">><<popup "Basic-UI-Dialog" "Dialog Box">><</link>>)
\
The content inside the ''passage'' is generated from the story passages created in Twine (i.e. any non-special passage). Every time the player clicks on a link to advance the story, the passage will refresh to display the new content.

In the ''UI-Bar'', also called //SideBar//, you will find arrows to go back and forth in the Game History (the visited passages), an arrow to hide/show the UI-Bar/sidebar, and, at the minimum, the //Save// and //Restart// buttons. 
The content of the sidebar can be edited through the [[Special Passages|SP-UIBar]], or when adding [[Settings]] or [[Saves|Config-Saves]].

''Dialog boxes'' are elements that will appear at the forefront of the page (like a popup). It is used by the Menu buttons (like //Save// and //Restart//), but can also contain content from a story passage (like the Index link in the SideBar) or coded through the passage. To create a dialog box, [[visit this page|Basic-API-Dialog]].

To edit how those elements look, you will need to edit the [[StyleSheet|Int-JS-CSS-Elements]] (intermediate).
\
<hr class="small-section">\
<<include "Macro-Link-Basic">>
<hr class="small-section">\
<<include "Variables-Base">>
<hr class="small-section">\
<<include "Macro-Set-Basic">>
<hr class="small-section">\
<<include "Macro-If-Basic">>
\
<hr class="categorybreak"><hr class="categorybreak2">
<h1 class="the-super-head">The Basics(+)</h1>
<hr>
\
<h1 id="basics-markup" class="the-chapter">SugarCube Markup and Basic Styling</h1>
To format your text or code in a specific way, SugarCube includes some special code, called ''markup'', separate from HTML and macros. 
There are different types of markups, from formatting your text (''bold'', //italics//, etc...) to more complex interactions between HTML and variables. This section will cover the basics, used in most projects. For more advanced Markup, see [[this page|Markup-Int]].
\
<hr class="small-section">\
<<include "Markup-Styling">>
<hr class="small-section">\
<<include "Markup-Image">>
<hr class="small-section">\
<<include "Markup-Variable">>
<hr class="small-section">\
<<include "Markup-Link">>
<hr class="small-section">\
<<include "Markup-Nobr">>
<hr>
\
<h1 id="basics-macros" class="the-chapter">Going Further with the Basics</h1>
With [[linking passages|Macro-Link-Basic]], [[setting variables|Macro-Set-Basic]], and creating some simple [[conditional statements|Macro-If-Basic]], you would have the basics required to make a textual game. However, if you want to push your project a bit further, and add onto that base, this section will cover slightly more complex uses for these macros, as well as include a few more related ones.
\
<hr class="small-section">\
<<include "Macro-Set">>
<hr class="small-section">\
<<include "Macro-Unset">>
<hr class="small-section">\
<<include "Macro-If">>
<hr class="small-section">\
<<include "Macro-Link">>
<hr class="small-section">\
<<include "Macro-Print">>
<hr>
\
<h1 id="basics-interact" class="the-chapter">Adding some Interactivity</h1>
While links make up for the majority of interactions in Twine games, SugarCube includes other types of interactivity through macros, which can help add different kinds of gameplay elements. The macros mentioned in this section are particularly useful for character creation, puzzles, and even combat systems.
\
<hr class="small-section">\
<<include "Macro-CheckRadio">>
<hr class="small-section">\
<<include "Macro-Cycle">>
<hr class="small-section">\
<<include "Accessibility-Cycle">>
<hr class="small-section">\
<<include "Macro-Listbox">>
<hr class="small-section">\
<<include "Macro-Input">>
<hr class="small-section">\
<<include "Macro-Link-AppPreRep">>
<hr>
\
<h1 id="basics-sp" class="the-chapter">Basic Special Passages</h1>
Your project can be customised further thanks to Special Passages. These passages are made special as they will affect how the page looks, where the content of the passage is displayed on the page, or when the code is triggered during loading. SugarCube includes 14 Special Passage names that, when use, will trigger those special properties. The ones included in this section will focus on Headers, Footers, the SideBar, and Initialisation.
> ''Note:'' You can check [[the demo|SP-Demo]] to see the Special Passages of this section in action!

To use a Special Passage in your project you will need to:
* create a new passage
* name it with the wanted Special Passage Name 
** it should be exactly as indicated in the [[Documentation|http://www.motoslave.net/sugarcube/2/docs/#special-passages]]! or it will not work 
* fill the passage however you want
** some Special Passages have restriction in content
> ''Note:'' you cannot have more that one of each Special Passage per project.
\
<hr class="small-section">\
<<include "SP-HeaderFooter">>
<hr class="small-section">\
<<include "SP-UIBar">>
<hr class="small-section">\
<<include "SP-Init">>
<hr>
<<include "Base-JS-CSS">>
<hr>
<<include "URL-Types">>
\
<hr class="categorybreak"><hr class="categorybreak2">
<h1 class="the-super-head">Intermediate Use</h1>
<hr>
\
<h1 id="int-markup" class="the-chapter">More SugarCube Markup</h1>
While [[Markup]] can help format text on the screen, display an image or create a link, it can also be useful in affecting HTML elements on the page (like updating stats bars), or display small variation (like changing pronouns). And, if you are trying to make a guide or tutorials in SugarCube, it will help display code!
\
<hr class="small-section">\
<<include "Markup-Attribute">>
<hr class="small-section">\
<<include "Markup-Code-Verbatim">>
<hr class="small-section">\
<<include "Markup-Template">>
<hr>
\
<h1 id="int-macro" class="the-chapter">More Interactivity Macros</h1>
While a previous section touched upon the [[Base Interactive Macros|Macro-Interact]], SugarCube still has more interactive macros, of a more intermediate use level. These macros will add different kinds of interactivity to the project, or more flexibility in said interactivity.
\
<hr class="small-section">\
<<include "Macro-Timed">>
<hr class="small-section">\
<<include "Macro-Type">>
<hr class="small-section">\
<<include "Macro-ApPreRepCopy">>
<hr class="small-section">\
<<include "Custom-Macro">>
<hr>
\
<h1 id="int-conv" class="the-chapter">Macros of Convenience</h1>
Whether you need a more convenient way to format your code or the text in passages, to send players to a specific varying story passage, or include more JavaScript in the game, SugarCube has a couple of very convenient macros.
\
<hr class="small-section">\
<<include "Macro-Switch">>
<hr class="small-section">\
<<include "Macro-Goto">>
<hr class="small-section">\
<<include "Macro-Back-Return">>
<hr class="small-section">\
<<include "Long-Return-JS">>
<hr class="small-section">\
<<include "Macro-Do-Redo">>
<hr class="small-section">\
<<include "Macro-Include">>
<hr class="small-section">\
<<include "Macro-Nobr-Silent">>
<hr class="small-section">\
<<include "Macro-Widget">>
<hr class="small-section">\
<<include "Macro-Script-Run">>
<hr>
\
<h1 id="sp-tags" class="the-chapter">More Special Passages and Tags</h1>
Aside from the [[Basic Special Passages|Special-Passage]], you can customise your project even further with more Special Passage Names and Special tags.
\
<hr class="small-section">\
<<include "Tags-Built">>
<hr class="small-section">\
<<include "SP-PassageReady-Done">>
<hr class="small-section">\
<<include "SP-StoryInterface">>
<hr class="small-section">\
<<include "Tags-CSS">>
<hr class="small-section">\
<<include "Tags-Asset">>
<hr class="small-section">\
<<include "SP-Variables">>
<hr>
\
<h1 id="functions" class="the-chapter">Harness the Power of Functions</h1>
Functions are JavaScript blocks of code designed to do a specific task, from importing outside scripts, to save information, or setting variables. While some of the functions explained in this section can be used in any passage in combination with SugarCube macros, some should be restricted to the JavaScript passage only.
\
<hr class="small-section">\
<<include "Function-Clone-Random">>
<hr class="small-section">\
<<include "Function-Pass-Tag">>
<hr class="small-section">\
<<include "Function-Metadata">>
<hr class="small-section">\
<<include "Function-Trigger">>
<hr class="small-section">\
<<include "Function-JS">>
<hr>
\
<h1 id="methods" class="the-chapter">Using Methods to change Variables</h1>
Methods are [[functions|Functions]], JavaScript blocks of code designed to do a specific task, linked to a reciever, like a variable, to run.
{{{
    <receiver>.method()
 → Example:
    $var.first()
}}}

In SugarCube, they are mainly used to handle arrays, change the formatting of strings values, or handle numbers.
> ''Note:'' Other native JavaScript or jQuery methods can be used with SugarCube, but requires knowledge of those languages. The ones listed in this guide would be the most useful.
\
<hr class="small-section">\
<<include "Method-String">>
<hr class="small-section">\
<<include "Method-Number">>
<hr class="small-section">\
<<include "Method-Array">>
<hr>
\
<h1 id="audioma" class="the-chapter">Adding Sound with the Audio Macros</h1>
Adding any asset to a project can be daunting, especially when it can involve so many macros. But adding audio is actually quite simple and, at the minimum, only requires the use of 2 macros: {{{<<audio>>}}} and {{{<<cacheaudio>>}}}.
\
<hr class="small-section">\
<<include "CacheAudio">>
<hr class="small-section">\
<<include "Macro-Group-Playlist">>
<hr class="small-section">\
<<include "Audio-Macro">>
<hr class="small-section">\
<<include "Audio-Other">>
<hr>
\
<h1 id="intjscss" class="the-chapter">Going further in Styling with CSS and JavaScript</h1>
If you want to change how a page looks or behaves, you will need to edit either the StyleSheet, the JavaScript, or a combination of both. If it is behaviour that needs setting, then you will most likely need the JavaScript. For most visual elements, you should turn to the StyleSheet.

While editing the StyleSheet, you may find the Inspect Tool of your browser to be a useful thing. From testing for different screen sizes and accessibility, to view the source code (HTML/CSS) of the displayed passage, or even messing with the CSS rules without going back and forth between the StyleSheet and the file, the tool will let you ensure a great visual for your project.
\
<hr class="small-section">\
<<include "Int-JS-CSS-Elements">>
<hr class="small-section">\
<<include "HTML-Full-List">>
<hr class="small-section">\
<<include "Int-JS-CSS-Events">>
<hr class="small-section">\
<<include "Int-JS-CSS-Font">>
<hr class="small-section">\
<<include "Int-JS-CSS-Icons">>
<hr class="small-section">\
<<include "Int-JS-CSS-Root">>
<hr class="small-section">\
<<include "Int-JS-CSS-Media">>
<hr class="small-section">\
<<include "Int-JS-CSS-Animation">>
<hr class="small-section">\
<<include "Int-JS-CSS-Stat">>
<hr class="small-section">\
<<include "Int-JS-CSS-LoadingScreen">>
<hr class="small-section">\
<<include "Accessibility">>
<hr>
\
<h1 id="basic-apis" class="the-chapter">Some Useful Basic APIs</h1>
Along with macros, there are basic APIs that can trigger an event in the game, such as undoing an action, opening a popup, or configuring some functionalities in the engine. 

Those APIs are JavaScript-based code that should either be included in the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros to work.
\
<hr class="small-section">\
<<include "Basic-API-Engine">>
<hr class="small-section">\
<<include "Basic-API-Dialog">>
<hr class="small-section">\
<<include "Basic-API-UIBar">>
<hr class="small-section">\
<<include "Basic-API-UI">>
<hr class="small-section">\
<<include "Basic-Config-Navig">>
<hr class="small-section">\
<<include "Basic-API-Config">>
<hr>
\
<h1 id="localization" class="the-chapter">Edit the Built-In Text or Change the Game's Language</h1>
Further customisation of a SugarCube project can be done with the {{{l10nStrings}}}, bits of JavaScript code that will change what text the Built-In elements will show. This can affect the buttons on the Sidebar, as well as the //Restart//, //Saves//, and //Settings// Popup. You can edit these strings to fit the vibe of your project, change its language entirely, or link them to a function to provide translation of your work. 
\
<hr class="small-section">\
<<include "Local-L10n">>
<hr class="small-section">\
<<include "Local-Trans">>
<hr class="small-section">\
<<include "Local-Setting">>
<hr>
\
<<include "DebugAPI">>
\
<hr class="categorybreak"><hr class="categorybreak2">
<h1 class="the-super-head">Advanced Mode</h1>
> ''Note:'' Many of the elements included in the following chapters will require knowledge of JavaScript, jQuery, and understanding of the core processes of SugarCube.
<hr>
<h1 id="adv-macros" class="the-chapter">Advanced Macros</h1>
Below, you will find the last of the macros that haven't been discussed in the previous sections. These macros are considered advanced, as they will either require some HTML/CSS knowledge, or full control of coding logics. They are usually not needed for basic projects. 
\
<hr class="small-section">\
<<include "Macro-DOM-Adv">>
<hr class="small-section">\
<<include "Macro-For-Repeat">>
<hr class="small-section">\
<<include "Macro-Capture">>
<hr class="small-section">\
<<include "Macro-Done">>
<hr>
\
<h1 id="adv-methods" class="the-chapter">More Variable and Interaction Methods</h1>
In the [[Methods]] section, methods were defined JavaScript blocks of code designed to do a specific task, linked to a reciever, like a variable, to run. This section includes more complex methods, often involving functions. Knowledge of both JavaScript and jQuery is required here.
\
<hr class="small-section">\
<<include "Method-Variables">>
<hr class="small-section">\
<<include "Method-jQuery">>
<hr>
\
<h1 id="adv-apis" class="the-chapter">Going Further with Basic APIs and More</h1>
While most of the Basic API were listed [[here|Basic-API]], this section will cover more advanced elements for the Dialog Box and the UI SideBar, as well as extra APIs dealing with elements on the screen.

Those APIs are JavaScript-based code that should either be included in the JavaScript or within the {{{<<run>>}}} or {{{<<script>>}}} macros to work.
\
<hr class="small-section">\
<<include "API-Dialog">>
<hr class="small-section">\
<<include "API-UIBar">>
<hr class="small-section">\
<<include "TemplateAPI">>
<hr class="small-section">\
<<include "API-Lock">>
<hr>
\
<h1 id="settings-apis" class="the-chapter">The Settings APIs</h1>
Settings can be a great way to customise your project, and make it more accessible for players. Whether it is to change the visual aspect (font, theme, etc), the audio (volume, track), or overall mechanics (difficulty, animation), there are many ways to reach your goal.

While including settings in a project can feel a bit overwhelming, as they //will// require some knowledge of JavaScript, the Setting APIs are there to make things easier. There are also many UI templates out there including some settings.
> ''Note:'' Do check the version of SugarCube attached to the template, as older templates may use correct code for their version that would be deprecated in later SugarCube version, requiring users to fix it.

The basic Settings API is built in this format:
{{{
    Settings.function(parameters)
}}}
> ''Note:'' The order in which you add the settings in the JavaScript passage will be the order you will see in the Settings popup.
\
> ''Note 2:'' you can find a Settings-Only Template with the most useful settings for Interactive Fiction on my [[itch page|https://manonamora.itch.io/twine-sugarcube-templates]].
\
<hr class="small-section">\
<<include "SettingsBasics">>
<hr class="small-section">\
<<include "SettingsToggle">>
<hr class="small-section">\
<<include "SettingsList">>
<hr class="small-section">\
<<include "SettingsRange">>
<hr class="small-section">\
<<include "Settings-More">>
<hr class="small-section">\
<<include "SettingsHeader">>
<hr>
\
<h1 id="engine-apis" class="the-chapter">The Engine APIs</h1>
Aside from [[moving back and forth|Basic-API-Engine]] in the player history, the Engine APIs include extra functions to customize the gameplay of your project. Some of these APIs are more useful in JavaScript than in passages.
\
<hr class="small-section">\
<<include "Engine-State">>
<hr class="small-section">\
<<include "Engine-Go">>
<hr class="small-section">\
<<include "Engine-Play">>
<hr class="small-section">\
<<include "Engine-Restart">>
<hr>
\
<h1 id="save-apis" class="the-chapter">The Save APIs and Further Saving Configurations</h1>
While the Config APIs have [[configuration settings|Config-Saves]] for saving playthroughs, it may not be enough for the customisation you may want to achieve. This is where the Save APIs come in.

The Save APIs can be grouped into different categories: Browsers (which will save in browser's [[cache|https://www.pcmag.com/encyclopedia/term/browser-cache]]), Disk (downloadable file), and Base64 (encoded string save). The latter two will allow for import/export of saves from the user.
> ''Note:'' Browser saves (autosave/slot saves) are largely incompatible with Private Browsing Mode and Cookies/Cache blockers. Users restricting access to cache may get an error message on start.
\
<hr class="small-section">\
<<include "SaveAPI-Objects">>
<hr class="small-section">\
<<include "SaveAPI-General">>
<hr class="small-section">\
<<include "SaveAPI-Slots">>
<hr class="small-section">\
<<include "SaveAPI-Autosave">>
<hr class="small-section">\
<<include "SaveAPI-Disk">>
<hr class="small-section">\
<<include "SaveAPI-Base64">>
<hr class="small-section">\
<<include "SaveAPI-Events">>
<hr>
\
<h1 id="config-apis" class="the-chapter">More Configuration APIs to Customise Interaction</h1>
If you need to configure how your project should run with more customisation, like saving playthroughs or changing how some macros operate, this section will cover the rest of the Configuration APIs that were not [[previously mentioned|Basic-API-Config]].

Those APIs are JavaScript-based code that should be included in the JavaScript (though some can be used along with the {{{<<run>>}}} or {{{<<script>>}}} macros inside a passage).
\
<hr class="small-section">\
<<include "Confic-Macro">>
<hr class="small-section">\
<<include "Config-Passage">>
<hr class="small-section">\
<<include "Config-Saves">>
<hr class="small-section">\
<<include "Config-Misc">>
<hr>
\
<<include "FullScreen">>
\
<hr>
\
<h1 id="events" class="the-chapter">Trigger Code with Special Events</h1>
Events are messages sent by the code within the game file to notify other bits of code that something has happened (automated or through player interaction). These are built-in the code of SugarCube, and can be used when creating a [[Custom Macro|Macro]], or wanting to customise elements on the page at a very specific moment (e.g. having a sound when closing a popup).

Each event is formatted as an object and contains information about the state at the moment of the event and what happened during the event. You can find these events used plainly in JavaScript (e.g. scroll back to the top) or within macros.
> ''Note:'' The events discussed here are specific to SugarCube. The format, however, does accept more [[standardized browser events|https://developer.mozilla.org/en-US/docs/Web/Events]].
\
<hr class="small-section">\
<<include "Events-Dialog">>
<hr class="small-section">\
<<include "Events-Passage">>
<hr class="small-section">\
<<include "Events-System">>
<hr class="small-section">\
<<include "Events-Type">>
<hr class="small-section">\
<<include "Events-Audio">>
<hr>
\
<h1 id="macro-apis" class="the-chapter">Creating your Own Macro</h1>
If you are looking to include a specific behaviour in your project that is not covered by the macros already built in SugarCube or custom ones available on the internet, you may want to consider creating your own.
SugarCube has many API to help you build your custom macros, or even chose to edit already-included macros.
> ''Note:'' Knowledge of JavaScript and understanding of the SugarCube format is very important here! 
\
<hr class="small-section">\
<<include "Macro-API">>
<hr class="small-section">\
<<include "Macro-Context">>
<hr>
\
<<include "StoryAPI">>
\
<<include "PassageAPI">>
\
<h1 id="state-apis" class="the-chapter">Dealing with the State of Play</h1>
Any started playthrough will contain a State, which will include moments (states) created during play used to navigate the history (undo/redo) and to save the (potentially modified) value of variables. If relevant, the State will include Metadata and a Seedable PRNG.
\
<hr class="small-section">\
<<include "StateAPI-Variable">>
<hr class="small-section">\
<<include "StateAPI-State">>
<hr class="small-section">\
<<include "StateAPI-Metadata">>
<hr class="small-section">\
<<include "StateAPI-PRNG">>
<hr>
\
<h1 id="audio-apis" class="the-chapter">Going Further with Audio with APIs</h1>
The Audio API is the largest group of APIs included in SugarCube, enabling you to have more control over sound in your project. It is the subsystem and backend for the [[audio macros|Macro-Audio]].
> ''Note:'' Aside from the SimpleAudio API, this chapter is for //very// advanced users. It is unlikely they will be of use for 99% of projects, as the audio macros will already cover most use.

Because the SugarCube Audio system is based on the HTML Media Elements APIs, it comes with limitations:
* no true gap-less transitions between tracks
* on mobile, playback volume is controlled ONLY by the device hardware (except for muting)
* playback at the start of the game must be initiated by player through a click/touch (it won't work otherwise)
\
<hr class="small-section">\
<<include "AudioAPI-General">>
<hr class="small-section">\
<<include "AudioApi-Track">>
<hr class="small-section">\
<<include "AudioApi-Runner">>
<hr class="small-section">\
<<include "AudioApi-List">>
<hr id='categorybreak'>


:: OnePagePopup [one-page popup] {"position":"1900,250","size":"100,100"}
You are about to move to the //One-Page// viewing of this Guide, which displays //''ALL''// the sections and pages in one single passage.

While it makes it much easier to find information ({{{CTRL + F}}}), the links on the passage will send you the selected page rather than scrolling to the relevant section. If this happens, you can return to the //One-Page// page view by clicking on the left-arrow in the SideBar or at the //Return to One-Page// at the bottom of the section.

If you want to scroll to a particular section, select the //Index// button in the SideBar.

<<button "Go to the //One-Page// view">>
  <<run Setting.setValue("onePage", true);>>
   <<goto "OnePage">>
  <<run Dialog.close()>>
<</button>>


:: Organise {"position":"2475,100","size":"100,100"}
<h1>Some Random Stuff That will be Organised Later</h1>
Here are some SugarCube relevant bits, which I haven't found a good place to put right now.
The links below won't change but may be located in a different Sub Menu at a later date. See [[Update Log]] for more information.
I should probably add here other examples of stuff I've done ?
Welp there is nothing there:P
<div id="link-menu">[[Back to the Start Menu|Start]]</div>


:: Passage {"position":"2475,225","size":"100,100"}
This is an empty passage for an interactive example.

<<back "Go back to the previous passage!">>


:: PassageAPI [chapter page] {"position":"3500,2000","size":"200,100"}
<h1 id="passage-apis" class="the-chapter">Managing Passage Properties with APIs</h1>
The APIs below deal with properties of the Passage object, which is returned by the {{{Story.get()}}} [[API|StoryAPI]].
> ''Note:'' the information in those properties should be treated as ''read-only'', as modifying them can lead to unexpected behaviour. /*Really. Don't mess with them.*/
\
<h3>{{{<Passage>.id}}}</h3>\
This API keeps the DOM ID of the passage, created from the slugified passage title.
{{{
    <Passage>.id
}}}
\
<h3>{{{<Passage>.tags}}}</h3>\
This API keeps the tags of the passage, as an array.
{{{
    <Passage>.tags
}}}
\
<h3>{{{<Passage>.text}}}</h3>\
This API will return the raw text of the passage.
{{{
    <Passage>.text
}}}
\
<h3>{{{<Passage>.name}}}</h3>\
This API keeps the title of the passage.
{{{
    <Passage>.name
}}}
\
<h3>{{{<Passage>.processText()}}}</h3>\
This API returns the processed text of the passage,  created from applying {{{nobr}}} tag and image passage processing to its raw text.
> //Example://
{{{
    var passage = Story.get("The Ducky");
    passage.processText()  
→ returns the fully processed text of "The Ducky" passage
}}}


:: PassageFooter {"position":"2100,100","size":"100,100"}
<<if tags().includes("sp-demo")>><hr>The Footer in action! included in a horizontal bar<<else>><<if !settings.onePage>><hr><</if>>\
  <<ChapterDependentTags>>\
  <center><<link "Lexicon">><<popup 'Lexicon' "Lexicon">><</link>> - <<if !settings.onePage>>[[Pages Index|Index]]<<else>><<link "Section Index">><<popup "Popup-Index" "Index">><</link>><</if>>
  [[Macros List]] - [[Function/Method List]] - [[API List]]
  <<link "Credits">><<popup "Credits" "Credits">><</link>> - [[Need More Help?|https://manonamora.itch.io/twine-sugarcube-guide]]</center>
<</if>>


:: PassageHeader {"position":"1975,100","size":"100,100"}
<<if tags().includes("sp-demo")>>The Header in action! included in a horizontal bar<hr><</if>>


:: Popup-Index [index] {"position":"1800,250","size":"100,100"}
<h1>Index</h1>\
/*This is only because I am lazy as heck and didn't want to create huge conditional statements....*/\
<h3>The Basics</h3>\
* ''<<link "About Twine and SugarCube">><<run setup.scrollToId("about-twine")>><</link>>''
* ''<<link "Starting with SugarCube">><<run setup.scrollToId("basic-chapter")>><</link>>''
** <<link "The Elements on the Page">><<run setup.scrollToId("basic-ui-element")>><</link>>
** <<link "Linking Passages">><<run setup.scrollToId("basic-links")>><</link>>
** <<link "The Basics of Variables">><<run setup.scrollToId("basic-variable")>><</link>>
** <<link "Tracking Information">><<run setup.scrollToId("basic-set")>><</link>>
** <<link "Display Variation">><<run setup.scrollToId("basic-if")>><</link>>
** [[Basic Demo|Demo-Basic]] (new page)
\
<h3> The Basics+</h3>\
* ''<<link "SugarCube Markup and Basic Styling">><<run setup.scrollToId("basics-markup")>><</link>>''
** <<link "Basic Text Styling">><<run setup.scrollToId("basics-mustyling")>><</link>>
** <<link "Display an Image, and turn an Image into a Link">><<run setup.scrollToId("basics-muimage")>><</link>>
** <<link "Showing the Value of a Variable">><<run setup.scrollToId("basics-muvariable")>><</link>>
** <<link "Using a Variable inside a Link">><<run setup.scrollToId("basics-mulink")>><</link>>
** <<link "Removing a Line-break">><<run setup.scrollToId("basics-munobr")>><</link>>
* ''<<link "Going Further with the Basics">><<run setup.scrollToId("basics-macros")>><</link>>''
** <<link "Setting and Changing Variables">><<run setup.scrollToId("basics-maset")>><</link>>
** <<link "Unsetting Variables">><<run setup.scrollToId("basics-maunset")>><</link>>
** <<link "More Conditional Statements">><<run setup.scrollToId("basics-maif")>><</link>>
** <<link "Displaying more than text in Links">><<run setup.scrollToId("basics-malinks")>><</link>>
** <<link "Display Variables, the Print Macro and Variants">><<run setup.scrollToId("basics-maprint")>><</link>>
* ''<<link "Adding some Interactivity">><<run setup.scrollToId("basics-interact")>><</link>>''
** <<link "Multi or Single Option Choices">><<run setup.scrollToId("basics-checkradio")>><</link>>
** <<link "Cycles and Conditional Options">><<run setup.scrollToId("basics-cycle")>><</link>>
*** <<link "Make the Cycle Macro Accessible">><<run setup.scrollToId("basics-cycleacc")>><</link>>
** <<link "Listboxes and Conditional Options">><<run setup.scrollToId("basics-listbox")>><</link>>
** <<link "Player Input in three macros">><<run setup.scrollToId("basics-input")>><</link>>
** <<link "Revealing Extra Text and Disappearing Links">><<run setup.scrollToId("basics-appprerep")>><</link>>
* ''<<link "Basic Special Passages">><<run setup.scrollToId("basics-sp")>><</link>>''
** <<link "Headers and Footers">><<run setup.scrollToId("basics-headfoot")>><</link>>
** <<link "Special Passages for the UI Bar">><<run setup.scrollToId("basics-uibar")>><</link>>
** <<link "Setting Important Variables before Start">><<run setup.scrollToId("basics-init")>><</link>>
** [[Special Passage Demo|SP-Demo]] (new page)
* ''<<link "About JavaScript and the StyleSheet">><<run setup.scrollToId("basics-jscss")>><</link>>''
* ''<<link "URLs for Assets and Testing">><<run setup.scrollToId("basics-urls")>><</link>>''
\
<h3>Intermediate Use</h3>\
* ''<<link "More SugarCube Markup">><<run setup.scrollToId("int-markup")>><</link>>''  
** <<link "Special Attributes and Directives">><<run setup.scrollToId("int-muattri")>><</link>>
** <<link "Displaying Code and Verbatim Text">><<run setup.scrollToId("int-mucode")>><</link>>
** <<link "Display Small Variation with Templates">><<run setup.scrollToId("int-mutemp")>><</link>> 
* ''<<link "More Interactivity Macros">><<run setup.scrollToId("int-macro")>><</link>>''
** <<link "Delaying Displaying Text or Running Code">><<run setup.scrollToId("int-timed")>><</link>>
** <<link "Displaying Text Letter by Letter">><<run setup.scrollToId("int-type")>><</link>>
** <<link "DOM Macros and Revealing Text in Targeted Spots">><<run setup.scrollToId("int-madom")>><</link>>
** <<link "Using Custom Macro">><<run setup.scrollToId("int-custommacro")>><</link>>
* ''<<link "Macros of Convenience">><<run setup.scrollToId("int-conv")>><</link>>''
** <<link "An Alternative to Conditional Statements">><<run setup.scrollToId("int-switch")>><</link>>
** <<link "Sending the Player to a Passage">><<run setup.scrollToId("int-goto")>><</link>>
** <<link "Going Back or Returning to a Passage with a Special Link">><<run setup.scrollToId("int-backreturn")>><</link>>
*** <<link "Arbitrarily Long Returns">><<run setup.scrollToId("int-long-return")>><</link>>
** <<link "Updating Parts of the Passage">><<run setup.scrollToId("int-doredo")>><</link>>
** <<link "Including a Passage inside Another">><<run setup.scrollToId("int-include")>><</link>> 
** <<link "Removing Blank Space and Hiding Code">><<run setup.scrollToId("int-nobrsilent")>><</link>>
** <<link "Creating and Using a Widget">><<run setup.scrollToId("int-widget")>><</link>> 
** <<link "Using JavaScript in the Passage">><<run setup.scrollToId("int-scriptrun")>><</link>>
* ''<<link "More Special Passages and Tags">><<run setup.scrollToId("sp-tags")>><</link>>''
** <<link "Special Tags creating Special Passages and Functionalities">><<run setup.scrollToId("sp-tagsbuilt")>><</link>>
** <<link "Process Code Before and After Rendering a Passage">><<run setup.scrollToId("sp-readydone")>><</link>>
** <<link "Changing the UI/Interface of the Project">><<run setup.scrollToId("sp-interface")>><</link>>
** <<link "Customising Passages with Tags">><<run setup.scrollToId("sp-tagscss")>><</link>>
** <<link "Including Assets with Tags">><<run setup.scrollToId("sp-tagsasset")>><</link>>
** <<link "The Special Variables">><<run setup.scrollToId("sp-variables")>><</link>>
* ''<<link "Harness the Power of Functions">><<run setup.scrollToId("functions")>><</link>>''
** <<link "Cloning Variables, and Random Values Functions">><<run setup.scrollToId("function-clone")>><</link>>
** <<link "Using Play, Passage, and Tags information">><<run setup.scrollToId("function-info")>><</link>>
** <<link "Memorizing Information and Metadata">><<run setup.scrollToId("function-meta")>><</link>>
** <<link "Triggering Events">><<run setup.scrollToId("function-event")>><</link>>
** <<link "JavaScript-only Functions">><<run setup.scrollToId("function-js")>><</link>>
* ''<<link "Using Methods to change Variables">><<run setup.scrollToId("methods")>><</link>> ''
** <<link "Methods and String Variables">><<run setup.scrollToId("methods-string")>><</link>>
** <<link "Methods and Numbers">><<run setup.scrollToId("methods-numbers")>><</link>>
** <<link "Methods and Arrays">><<run setup.scrollToId("methods-array")>><</link>>
* ''<<link "Adding Sound with the Audio Macros">><<run setup.scrollToId("audioma")>><</link>>''
** <<link "Setting up the Audio Tracks">><<run setup.scrollToId("audio-cache")>><</link>>
** <<link "Create Track Groups and Playlists">><<run setup.scrollToId("audio-groupplay")>><</link>>
** <<link "Playing Tracks in a Passage">><<run setup.scrollToId("audio-macro")>><</link>>
** <<link "Other Audio Macros">><<run setup.scrollToId("audio-othermacro")>><</link>>
* ''<<link "Going further in Styling with CSS and JavaScript">><<run setup.scrollToId("intjscss")>><</link>>''
** <<link "The Unique Targetable Elements">><<run setup.scrollToId("intstyle-elements")>><</link>> 
*** <<link "The Full List of Targetable Elements">><<run setup.scrollToId("intstyle-htmlfull")>><</link>> 
** <<link "Ensuring that Elements Start at the Top when Opened">><<run setup.scrollToId("intstyle-events")>><</link>>
** <<link "Import and Change the Font">><<run setup.scrollToId("intstyle-fonts")>><</link>>
*** <<link "Using the SG Icons">><<run setup.scrollToId("intstyle-icons")>><</link>>
** <<link "Using the Root and CSS var">><<run setup.scrollToId("intstyle-root")>><</link>> 
** <<link "Formatting for Different Screen Size">><<run setup.scrollToId("intstyle-media")>><</link>> 
** <<link "Intro to Animation">><<run setup.scrollToId("intstyle-animation")>><</link>>
** <<link "Creating Stats, Meter, and Progress Bars">><<run setup.scrollToId("intstyle-stats")>><</link>> (long) 
** <<link "Editing the Loading Screen">><<run setup.scrollToId("intstyle-load")>><</link>> 
** <<link "A Note on Interface Accessibility">><<run setup.scrollToId("intstyle-access")>><</link>>
* ''<<link "Some Useful Basic APIs">><<run setup.scrollToId("basic-apis")>><</link>>''
** <<link "Moving back and forth in the History">><<run setup.scrollToId("basicapis-engine")>><</link>>
** <<link "Create a PopUp">><<run setup.scrollToId("basicapis-dialog")>><</link>>
** <<link "Handle the SideBar">><<run setup.scrollToId("basicapis-sidebar")>><</link>>
** <<link "Open the Restart, Saves, and Settings PopUp">><<run setup.scrollToId("basicapis-ui")>><</link>>
** <<link "Overriding the Navigation to a Passage">><<run setup.scrollToId("basicapis-navig")>><</link>>
** <<link "Some Useful Configuration API for your Project">><<run setup.scrollToId("basicapis-config")>><</link>> 
* ''<<link "Edit the Built-In Text or Change the Game's Language">><<run setup.scrollToId("localization")>><</link>>''
** <<link "l10nStrings, and How to Edit Them">><<run setup.scrollToId("local-strings")>><</link>>
** <<link "Localization, and Pre-Translated Templates">><<run setup.scrollToId("local-translate")>><</link>>
** <<link "Providing Multiple Languages Options In-Game">><<run setup.scrollToId("local-langsetting")>><</link>>
* ''<<link "Testing and Debugging your Game">><<run setup.scrollToId("debug-api")>><</link>>''
\
<h3>''Advanced Mode''</h3>\
> ''Note:'' Many of the elements included in the following chapters will require knowledge of JavaScript, jQuery, and understanding of the core processes of SugarCube.
* ''<<link "Advanced Macros">><<run setup.scrollToId("adv-macros")>><</link>>''
** <<link "DOM Macros and Changing Class of an Element">><<run setup.scrollToId("adv-DOM")>><</link>> 
** <<link "Loops and Repeats - Two Ways">><<run setup.scrollToId("adv-forrepeat")>><</link>>
** <<link "Capturing the Value of a Variable">><<run setup.scrollToId("adv-capture")>><</link>>
** <<link "Emulating PassageDone for one Passage">><<run setup.scrollToId("adv-done")>><</link>>
* ''<<link "More Variable and Interaction Methods">><<run setup.scrollToId("adv-methods")>><</link>>''
** <<link "More Methods to change Variables">><<run setup.scrollToId("advmeth-var")>><</link>>
** <<link "jQuery Methods and Interactivity">><<run setup.scrollToId("advmeth-jq")>><</link>>  
* ''<<link "Going Further with Basic APIs and More">><<run setup.scrollToId("adv-apis")>><</link>>''
** <<link "More Popups APIs">><<run setup.scrollToId("adv-dialog")>><</link>>
** <<link "More SideBar APIs">><<run setup.scrollToId("adv-sidebar")>><</link>>
** <<link "The Template APIs">><<run setup.scrollToId("adv-template")>><</link>>
** <<link "(Un)Locking the Loading Screen">><<run setup.scrollToId("adv-lockload")>><</link>>
* ''<<link "The Settings API">><<run setup.scrollToId("settings-apis")>><</link>>''
** <<link "Creating a Setting">><<run setup.scrollToId("settings-basics")>><</link>>
** <<link "Creating a Toggle Setting">><<run setup.scrollToId("settings-toggle")>><</link>>
** <<link "Creating a List Setting">><<run setup.scrollToId("settings-list")>><</link>>
** <<link "Creating a Slider">><<run setup.scrollToId("settings-range")>><</link>>
** <<link "Going Further with Settings">><<run setup.scrollToId("settings-further")>><</link>>
** <<link "Adding Headers">><<run setup.scrollToId("settings-header")>><</link>>
* ''<<link "Going further with the Engine API">><<run setup.scrollToId("engine-apis")>><</link>>''
** <<link "Checking the State of the Game">><<run setup.scrollToId("engineapi-state")>><</link>>
** <<link "Move through the Player's History">><<run setup.scrollToId("engineapi-go")>><</link>>
** <<link "(Re-)Play a Passage">><<run setup.scrollToId("engineapi-play")>><</link>>
** <<link "Restarting without the Built-In PopUp">><<run setup.scrollToId("engineapi-restart")>><</link>>
* ''<<link "The Save APIs and Further Saving Configurations">><<run setup.scrollToId("save-apis")>><</link>>''
** <<link "Save Objects and Their Contents">><<run setup.scrollToId("saveapis-object")>><</link>> 
** <<link "The Basic APIs of the Save Elements">><<run setup.scrollToId("saveapi-general")>><</link>> 
** <<link "Managing the Save Slots">><<run setup.scrollToId("saveapi-slot")>><</link>> 
** <<link "Managing the Autosave Slot">><<run setup.scrollToId("saveapi-auto")>><</link>>
** <<link "Managing Disk Import and Export">><<run setup.scrollToId("saveapi-disk")>><</link>>
** <<link "Managing Base64 saves">><<run setup.scrollToId("saveapi-base")>><</link>>
** <<link "Using Save-related Events">><<run setup.scrollToId("saveapi-event")>><</link>>
* ''<<link "More Configuration APIs to Customise Interaction">><<run setup.scrollToId("config-apis")>><</link>>''
** <<link "Macro-relevant Configurations">><<run setup.scrollToId("config-macros")>><</link>>
** <<link "Editing the Behaviour and Display of Passage Elements">><<run setup.scrollToId("config-passage")>><</link>>
** <<link "Save Configurations">><<run setup.scrollToId("configs-saves")>><</link>>
** <<link "Other Config APIs">><<run setup.scrollToId("configs-misc")>><</link>>
* ''<<link "Getting the FullScreen Experience">><<run setup.scrollToId("fullscreen-apis")>><</link>>''
* ''<<link "Trigger Code with Special Events">><<run setup.scrollToId("events")>><</link>>''
** <<link "Dialog Events">><<run setup.scrollToId("event-dialog")>><</link>>
** <<link "Passage and Navigation Events">><<run setup.scrollToId("event-passage")>><</link>>
** <<link "System Events">><<run setup.scrollToId("event-system")>><</link>>
** <<link "Type Macro Events">><<run setup.scrollToId("event-type")>><</link>>
** <<link "Audio Events">><<run setup.scrollToId("event-audio")>><</link>>
* ''<<link "Creating your Own Macro">><<run setup.scrollToId("macro-apis")>><</link>>''
** <<link "The Base APIs for Macros">><<run setup.scrollToId("macro-apis-base")>><</link>>
** <<link "Using Macro Context Objects in the handler">><<run setup.scrollToId("macro-apis-context")>><</link>>
* ''<<link "Managing Story Elements with APIs">><<run setup.scrollToId("story-api")>><</link>>''
* ''<<link "Managing Passage Properties with APIs">><<run setup.scrollToId("passage-apis")>><</link>>''
* ''<<link "Dealing with the State of Play">><<run setup.scrollToId("state-apis")>><</link>>'' 
** <<link "Managing the State of Variables">><<run setup.scrollToId("state-variable")>><</link>>
** <<link "Exploring the Different Moments inside the State">><<run setup.scrollToId("state-state")>><</link>>
** <<link "Using the Story Metadata">><<run setup.scrollToId("state-metadata")>><</link>>
** <<link "Initialising a Seedable PRNG">><<run setup.scrollToId("state-seed")>><</link>>
* ''<<link "Going Further with Audio with APIs">><<run setup.scrollToId("audio-apis")>><</link>>''
** <<link "The SimpleAudio API, the alternative to Audio macros">><<run setup.scrollToId("audioapis-base")>><</link>>
** <<link "Going further with AudioTrack">><<run setup.scrollToId("audioapis-track")>><</link>>
** <<link "Going further with AudioRunner">><<run setup.scrollToId("audioapis-list")>><</link>>
** <<link "Going further with AudioList">><<run setup.scrollToId("audioapis-runner")>><</link>>


:: SP-Demo [sp-demo] {"position":"1800,800","size":"100,100"}
There is not much to say about the demo. I think the Special Passages speak for themselves.

<<back "Click Here to Go back">>


:: SP-HeaderFooter [page basic-sp] {"position":"1700,700","size":"100,100"}
<h1 id="basics-headfoot">Headers and Footers</h1>
Whether wanting to display Chapter titles at the top of the page, or links to special passages (like the bottom of this page), the Headers and Footers are respectively attached at the top of and below the main body of the passage. It will [[load along|Events-Passage]] with the story passage.

Those Special Passages, {{{PassageHeader}}} and {{{PassageFooter}}}, will accept anything from simple text to complex code.
For example:
{{{
    :: PassageHeader
        <<if def $chapter>>Chapter $chapter<</if>>

    :: PassageFooter
        <<if $name is "Jane">>
            [[Jane's Curiosities|Inventory]]
        <<else>>
            [[$name + "'s closet"|Inventory]]
        <</if>>
}}}
\
> ''Note:'' if you are looking to add plain code without output (visible text), {{{PassageReady}}} and {{{PassageDone}}} is preferred. See [[this page|SP-PassageReady-Done]].


:: SP-Init [page basic-sp] {"position":"1700,800","size":"100,100"}
<h1 id="basics-init">Setting Important Variables before Start</h1>
There are many reasons for needing {{{StoryInit}}} in your project. Running while the game loads, this Special Passage will initialise whatever code you include, such as setting variables, running blocks of code for [[loading audio tracks|Macro-Audio]]. 
> ''Note:'' {{{StoryInit}}} will only run, at the start of each new playthrough. If its content is modified, players will ''need to restart''.

It is particularly useful to set [[unchanging variables|Variables-Base]] ({{{setup}}}) use throughout the game, create a list of all important tracking variables (e.g. PC's information, relationship trackers, etc...), run special code (like defining stat-bars) or preload assets (like audio).
> ''Note:'' {{{StoryInit}}} will accept any type of code, but will //not// display any text on the page.
\
{{{
    :: StoryInit
    <<set $var to "Jane">>
    <<set $object to {
        property1: 1,
        property2: "Home",
        property3: true
    }>>
    <<set setup.treasure to ['coins', 'rubies', 'jewelry']>>
    <<include "MoreCode">>
    <<AlsoCodeWidget>>
    <<cacheaudio "rain" "extra/rain.mp3">>
}}}
> ''Note:'' when //testing// a project ([[Debug Mode|DebugAPI]]), Twine will display the list of macro used in {{{StoryInit}}} in a greyed box. This only happens in the Debug Mode.


:: SP-PassageReady-Done [page sp-tags] {"position":"2100,1200","size":"100,100"}
<h1 id="sp-readydone">Process Code Before and After Rendering a Passage</h1>
{{{PassageReady}}} and {{{PassageDone}}} are two Special Passages that will trigger respectively before and after the story passage renders. Those passages will not render any output (i.e. text) on the page, but will run code for every new story passage visited. 
They are best used for code meant to be used for multiple passages during the game, such as checking the location of the player to trigger some code or change the display of the page.
{{{
    :: PassageReady 
    <<if $var is 0>><<set $nextPassage to "END">><</if>>
    <<if $points is 100>><<set $level++, $point to 0>><</if>>
    <<if not tags().includes('noreturn')>><<set $return to passage()>><</if>>

    :: PassageDone
    <<if tags().includes('bar')>><<addclass ".bottle" "empty">><</if>>
}}}
> ''Note:'' for some functionality (like [[overriding navigations|Basic-Config-Navig]] or [[Arbitrarily long returns|Long-Return-JS]]), it may be best to use JavaScript instead.
\
<h3>{{{PassageReady}}} or {{{PassageDone}}}</h3>\
While the passages will allow most code on the page (aside from DOM macros ([[text|Macro-ApPreRepCopy]]/[[class|Macro-DOM-Adv]]), which should only be added to {{{PassageDone}}}), whether a code is loaded before or after the passage is rendered will affect the development of the story.
{{{
Loading order:
    → PassageReady
    → PassageHeader
    → the content of the current Passage
    → PassageFooter
    → PassageDone
}}}
> The full ordered lists of events happening when a new passage is rendering can be found in [[this page|Events-Passage]].

Because of the loading order, placing code in {{{PassageReady}}} or {{{PassageDone}}} will not only affect the currently displayed passage, but also code from the previous passage.
Assuming that {{{$var is 2}}} before moving to a passage:
{{{
    :: Next Passage 
    <<if $var is 2>>
        The dog sleeps in the cottage.
    <<elseif $var is 1>>
        The dog yaps at the door.
    <<else>>
        The dog is not here.
    <</if>>
}}}
If the value of {{{$var}}} is modified inside {{{PassageReady}}}, the code above will be affected, and the displayed sentence will be different. However, if the value of {{{$var}}} is changed inside {{{PassageDone}}}, the code above will not be affected, but it may affect future passages.


:: SP-StoryInterface [page sp-tags] {"position":"2000,1300","size":"100,100"}
<h1 id="sp-interface">Changing the UI/Interface of the Project</h1>
If you want to ditch the basic SugarCube UI and have something more custom for your project, you will need to use the Special Passage {{{StoryInterface}}}. This passage only accepts HTML, and JavaScript inside a {{{<script>}}} markup at the bottom of the passage.
> ''Note:'' while knowledge of HTML and CSS is necessary to create your own UI, there are many templates available to use as is. See <<link "Credits">><<popup "Credits" "Credits">><</link>> for the Masterlist. Still, it is heavily recommended to understand the basics of both languages, when starting on your own.

Any code added to {{{StoryInterface}}} will:
* remove the SideBar element {{{#ui-bar}}} and its nested children
** though, you can re-create it inside {{{StoryInterface}}}
* be included inside {{{<div id="story"></div>}}}
> ''Note:'' If you include an element with the ID {{{#story}}} in {{{StoryInterface}}}, you will get an error during loading.

This passage only has one requirement to run properly: include the {{{#passages}}} element (and only one).
{{{
    :: StoryInterface 
    <div id="passages"></div>
}}}
> ''Note:'' do not include anything inside the {{{#passages}}} div. It is the element that display the passage.

You can add any other element inside {{{StoryInterface}}}, even nesting elements inside one another:
{{{
    <div id="header">
        <h1>Title of the Game</h1>
    </div>
}}}
> //For a full example://
{{{
    <div id="parent">
        <div id="passages"></div>
        <div id="menu" data-passage="sidemenu">
            <!--Side menu, editable in the sidemenu passage-->
        </div>
    </div>
    <script>
        function myFunction() {
            document.getElementById("myMenu").classList.toggle("show");
        }
            
        /*Close the dropdown menu if the user clicks outside of it*/
        window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
                var dropdowns = document.getElementsByClassName("dropup-content");
                var i;
                for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>
}}}
> ''Note:'' This code can be found in my [[One Page Template|https://manonamora.itch.io/twine-sugarcube-templates]].
\
<h3>Formatting the elements</h3>\
When the wanted and required elements are defined in {{{StoryInterface}}}, you will need some CSS to place them on the page, and to format their contents. 
No matter how edited the interface has been, some elements will still keep their built-in CSS rules:
* {{{#passages}}} and its child {{{.passage}}}
* {{{#ui-overlay}}}, {{{#ui-dialog}}} and its children (the elements in a the dialog box)
\
If other [[base IDs and classes|HTML-Full-List]] were used when adding elements inside {{{StoryInterface}}}, those elements will also be displayed according to their respective built-in CSS rules.
> ''Note:'' like with the base UI, those rules can be changed in the StyleSheet.
{{{
    #parent {
        width: 50vh;
        margin: auto;
        display: flex;
    }
    #passages {
        width: 75%;
    }
    #menu {
        width: 25%;
    }
}}}
\
When setting sizes or placements of elements, it is important to keep in mind that your project may be viewed on ''different screens/browser window sizes''. This will affect the actual placement and display of elements on the screen. Testing the UI for different screen sizes can be done via the ''Inspect Tool'' of your browser.
> ''Note:'' testing on both Chromium and non-Chromium browsers should be done as well, as different CSS rules (ex: overflow) will render differently on screen. 
\
To help take this into account, the {{{@media}}} CSS rule will let you define different sizes and placement of elements on the page depending on the size of the window or device opening the project. See [[this page|Int-JS-CSS-Media]].
{{{
    @media screen and (max-width: 500px) {
        #parent {
            width: 100vw;
        }
    }
}}}
> ''Note:'' this should be placed at the bottom of the StyleSheet, and in order of most-restricting to most-inclusive.
\
<h3>Linking an Element to a passage</h3>\
To keep the code in {{{StoryInterface}}} simple, or because you need SugarCube code inside an element (which won't work inside {{{StoryInterface}}}), you can create connections between an element and a non-story passage. That passage will then display text and/or run the relevant code inside that element.
This can be done with either {{{data-passage}}} or {{{data-init-passage}}}.
{{{
    <div class="menu" data-passage="sidemenu">
        <!--Side menu, editable in the sidemenu passage-->
    </div>
    <div class="title" data-init-passage="title">
        <!-- Title, editable in the "title" passage-->
    </div>
}}}
> ''Note:'' any text coded inside the elements in {{{StoryInterface}}} will be overridden by the content of the linked passage.
\
While these two links seem interchangeable, there is a major difference between the two: {{{data-init-passage}}} will load at the start of the game and ''never'' change, while {{{data-passage}}} will update with every new passage visited (if an update is necessary).
> ''Note:'' you can also use {{{data-passages}}} with [[Special Asset Passages|Tags-Asset]]: {{{<img data-passage="TheCube">}}}


:: SP-UIBar [page basic-sp] {"position":"1800,700","size":"100,100"}
<h1 id="basics-uibar">Special Passages for the UI Bar</h1>
The SideBar on the left of the page can look pretty bare without some customisation, as it will only display the title of the project by default, as well as the //Save// and //Restart// buttons. However, this can be remedied pretty easily with the following Special Passages. From including images, changing the title, to adding extra text or links, there are //many// ways of customising this element.

The Special Passages listed below are ordered how they would appear in the SideBar (top → bottom).
> ''Note:'' the content of UI Bar will automatically update when the player moves to a new passage. 
\
<h3>{{{StoryBanner}}}</h3>\
As its name implies, this passage allows you to add a banner or icon to the sidebar, located above the title of the game. But you are not limited to adding images, you can also include text or code!
{{{
    :: StoryBanner
    <img src="extra/logo.png">
}}}
> ''Note:'' if you want to edit how this block looks directly from the StyleSheet, you can target the element {{{#story-banner}}}.
\
<h3>{{{StoryDisplayTitle}}}</h3>\
If this Special Passage is not included in your project, Twine will use the name of the project instead. Whether to include it depends more on how you name projects in Twine. 
If you name projects a certain way but want the title to be something else, then this Special Passage is for you. The passage also allows the inclusion of images and code.
{{{
    :: StoryDisplayTitle
    The Road Not Taken
}}}
> ''Note:'' no matter whether this Special Passage is in use, you can change the formatting of the title in the StyleSheet by targeting the element {{{#story-title}}}.
\
<h3>{{{StorySubtitle}}}</h3>\
This Special Passage will appear under the title, and is meant to show a tagline for the game. It will also accept images and code.
{{{
    :: StorySubtitle
    It's time to make a choice!
}}}
> ''Note:'' if you want to edit how this passage looks directly from the StyleSheet, you can target the element {{{#story-subtitle}}}
\
<h3>{{{StoryAuthor}}}</h3>\
This Special Passage is meant to display the name of the author, but does not limit you to this. You can also include images or code.
{{{
    :: StoryAuthor
    by [[manonamora|https://manonamora.itch.io/]]
}}}
> ''Note:'' this element has some special formatting, which you change in the StyleSheet by targeting the element {{{#story-author}}}
\
<h3>{{{StoryCaption}}}</h3>\
This Special Passage provides an extra space to include text or other elements. It is often used to show extra links towards side passage, like a Codex, or the state of certain variables, like a health bar.
{{{
    :: StoryCaption
    Coins: $coins
    [[Codex]]
}}}
> ''Note:'' this element has some special formatting, which you change in the StyleSheet by targeting the element {{{#story-caption}}}
\
<h3>{{{StoryMenu}}}</h3>\
This Special Passage adds a block of links, formatted in the same way as the //Save// and //Restart// buttons. This passage, however, ''only accepts links'' ({{{[[link]]}}}, {{{<<link>>}}} and {{{<a>}}}) and conditional statements (to hide/display the links). If you include text or non-linking macro (incl. buttons!), they will not appear on the page.
{{{
    :: StoryMenu
    [[Inventory]]
    [[$name|MC Page]]
}}}
> ''Note:'' this element has some special formatting, which you change in the StyleSheet by targeting the element {{{#menu-story}}}. The //Save// and //Restart// buttons are located inside the element {{{#menu-core}}}.


:: SP-Variables [page sp-tags] {"position":"2100,1400","size":"100,100"}
<h1 id="sp-variables">The Special Variables</h1>
SugarCube includes special variables, which can be used in the JavaScript passage or within the {{{<<script>>}}} [[macro|Macro-Script-Run]].
\
<h3>The API Variables</h3>\
The different APIs included in SugarCube are defined as Special Variables:
* {{{Config}}} refers to the [[Configuration API|Config-API]]
* {{{Dialog}}} refers to the [[Dialog API|Basic-API-Dialog]] (popups)
* {{{Engine}}} refers to the [[Engine API|Engine-API]] 
* {{{Fullscreen}}} refers to the [[Fullscreen API|FullScreen]]
* {{{LoadScreen}}} refers to the [[LoadScreen API|API-Lock]]
* {{{Macro}}} refers to the [[Macro API|Macro]]
* {{{Passage}}} refers to the [[Passage API|PassageAPI]]
* {{{Save}}} refers to the [[Save API|SaveAPI]]
* {{{Setting}}} refers to the [[Setting API|Settings]]
* {{{SimpleAudio}}} refers to the [[SimpleAudio API|AudioAPI-General]]
* {{{State}}} refers to the [[State API|StateAPI]]
* {{{Story}}} refers to the [[Story API|StoryAPI]]
* {{{Template}}} refers to the [[Template API|TemplateAPI]]
* {{{UI}}} refers to the [[UI API|Basic-API-UI]]
* {{{UIBar}}} refers to the [[UIBar API|Basic-API-UIBar]]
\
<h3>Other Special Variables</h3>\
* {{{jQuery}}} will refer to the jQuery library function, with {{{$}}} being an alias 
** the alias should not be confused with story variables {{{$var}}}, which should be called via {{{State.variables}}} or {{{State.getVar()}}}
* {{{l10nStrings}}} refers to the Strings localization
* {{{settings}}} are player setting object, set through the Setting API 
* {{{setup}}} are objects used for static data


:: SaveAPI [chapter menu] {"position":"2000,1800","size":"200,100"}
<h1>The Save APIs and Further Saving Configurations</h1>
While the Config APIs have [[configuration settings|Config-Saves]] for saving playthroughs, it may not be enough for the customisation you may want to achieve. This is where the Save APIs come in.

The Save APIs can be grouped into different categories: Browsers (which will save in browser's [[cache|https://www.pcmag.com/encyclopedia/term/browser-cache]]), Disk (downloadable file), and Base64 (encoded string save). The latter two will allow for import/export of saves from the user.
> ''Note:'' Browser saves (autosave/slot saves) are largely incompatible with Private Browsing Mode and Cookies/Cache blockers. Users restricting access to cache may get an error message on start.
\
* [[Save Objects and Their Contents|SaveAPI-Objects]] 
* [[The Basic APIs of the Save Elements|SaveAPI-General]] 
* [[Managing the Save Slots|SaveAPI-Slots]] 
* [[Managing the Autosave Slot|SaveAPI-Autosave]]
* [[Managing Disk Import and Export|SaveAPI-Disk]]
* [[Managing Base64 saves|SaveAPI-Base64]]
* [[Using Save-related Events|SaveAPI-Events]]


:: SaveAPI-Autosave [page saveapi] {"position":"2100,2000","size":"100,100"}
<h1 id="saveapi-auto">Managing the Autosave Slots</h1>
The APIs below will allow you to manage the available autosave slots. These can be especially useful when creating your own Save page. For manual save slots, see [[this page|SaveAPI-Slots]].
\
<h3>{{{Save.browser.auto.size}}}</h3>\
This API will return the total number of available autosaves slots. It will be influenced by the [[Config API|Basic-API-Config]].
{{{
    Save.browser.auto.size
}}}
\
<h3>{{{Save.browser.auto.delete()}}}</h3>\
This API will delete a save from the given autosave slot. This is what is behind the //Delete// buttons on the Save Popup.
{{{
    Save.browser.auto.delete(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.browser.auto.delete(5)  
→ Deletes the save in the sixth slot
}}}
\
<h3>{{{Save.browser.auto.clear()}}}</h3>\
This API will delete all the saves in the slots. This is what is behind the //Delete All// button on the Save Popup (but only for the Autosaves).
{{{
    Save.browser.auto.clear()
}}}
> //Example://
{{{
    <<run Save.browser.auto.clear()>>  
→ Deletes all the autosaves
}}}
\
<h3>{{{Save.browser.auto.entries()}}}</h3>
This API will return an array of objects, with information about all the autosaves saves.
> //Example://
{{{
    Save.browser.auto.entries().forEach(function (entry) {
        console.log(`Descriptor of the auto save at index ${entry.index}:`, entry.info);
    });
}}}
The save objects in this array will each have two properties: the {{{index}}} (position of the auto slot) and {{{info}}} (an object with the save's information).
\
<h3>{{{Save.browser.auto.get()}}}</h3>\
This API will return a save object from the given slot or NULL if it doesn't exist.
{{{
    Save.browser.auto.get(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the autosave slot index (0-based)
\
> //Example://
{{{
    Save.browser.auto.get(5)  
→ Returns the sixth autosave slot save
}}}
\
<h3>{{{Save.browser.auto.has()}}}</h3>\
This API will check whether the given autosave slot is filled.
{{{
    Save.browser.auto.has(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Examples://
{{{
    Save.browser.auto.has(5)  
→ checks the sixth autosave slot

    if (Save.browser.auto.has(5)) {
        /* Code to manipulate the sixth autosave slot. */
    }
}}}
\
<h3>{{{Save.browser.auto.isEnabled()}}}</h3>\
This API will check if autosaves are enabled (no slots by default, can be modified with [[Config API|Basic-API-Config]]).
> //Examples://
{{{
if (Save.browser.auto.isEnabled()) {
	/* Autosaves are enabled. */
}
}}}
\
<h3>{{{Save.browser.auto.load()}}}</h3>\
This API will load a save from the given autosave slot. This is the code behind the //Load// buttons in the Save Popup.
{{{
    Save.browser.auto.load(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.browser.auto.load(5)  
→ Loads the sixth autosave
}}}
\
<h3>{{{Save.browser.auto.save()}}}</h3>\
This API will save in the first available autosave slot. If all the autosaves are full, it will override the oldest autosave
{{{
    Save.browser.auto.save([desc [, metadata]])
}}}
It has 2 parameters:
* {{{desc}}} (optional), the description of the save
** if omitted or NULL, it defaults to the passage's description 
* {{{metadata}}} (optional), the data to be stored as metadata (JSON-serializable)
\
> //Examples://
{{{
    Save.browser.auto.save(5)
→ Save to the sixth slot 
  + default title and no metadata

    Save.browser.auto.save(5, "Midgar")
→ Save to the sixth slot 
  + title "Midgar" and no metadata

    Save.browser.auto.save(5, null, someMetadata)
→ Save to the sixth slot 
  + default title and metadata someMetadata

    Save.browser.auto.save(5, "Midgar", someMetadata)
→ Save to the sixth slot 
  + title "Midgar" and metadata someMetadata
}}}


:: SaveAPI-Base64 [page saveapi] {"position":"2100,2200","size":"100,100"}
<h1 id="saveapi-base">Managing Base64 saves</h1>
The following APIs are similar to the [[Disk Import/Export|SaveAPI-Disk]], except it will save it all in a Base64 string instead of a savefile.
> ''Note:'' these APIs are not recommended unless you //know// what you are doing. /* Which I do not at all, so you won't see me messing with those. */
\
<h3>Save and Load Single Saves</h3>\
\
<h4>{{{Save.base64.save()}}}</h4>\
This API will save the current story state (playthrough at the current moment) in a Base64 string.
{{{
    Save.base64.save([metadata])
}}}
\
This API has 1 parameter:
* {{{metadata}}}: (optional, JSON-serializable) extra data to be stored in the save object's metadata property.
\
> //Simple Example from the Documentation://
{{{
    try {
        const base64Save = Save.base64.save();
        /* Do something with the save. */
    }
    catch (error) {
        /* Failure.  Handle the error. */
        console.error(error);
        UI.alert(error);
    }
}}}
> //Example with Extra Metadata//:
{{{
    try {
        const saveMetadata = {
            chars : ['Celes', 'Locke', 'Edward'],
            gold  : 2345
        };
        const base64Save = Save.base64.save(saveMetadata);
        /* Do something with the save. */
    }
    catch (error) {
        /* Failure.  Handle the error. */
        console.error(error);
        UI.alert(error);
    }
}}}
\
<h4>{{{Save.base64.load()}}}</h4>\
This APi will load any given Base64 save string previously created with {{{Save.base64.save()}}}. If the selected string is valid, it will load the save's metadata and restore the game; if not, it will reject with an error.
{{{
    Save.base64.load(save)
}}}
\
This API has 1 parameter:
* {{{save}}}: (string) the Base64 save string.
\
> //Example from the Documentation//:
{{{
    Save.base64.load(base64Save)
	.then(metadata => {
		Engine.show();
	})
	.catch(error => {
		/* Failure.  Handle the error. */
		console.error(error);
		UI.alert(error);
	});
}}}
\
<h3>Import and Export Multiple Saves</h3>\
<h4>{{{Save.base64.export()}}}</h4>\
This API will export all existing browser saves (auto and slot) as a bundled file Base64 string, which can be restored with {{{Save.base64.import()}}}.
{{{
    Save.base64.export()
}}}
\
> //Simple Example from the Documentation://
{{{
    try {
        const base64Save = Save.base64.export();
        /* Do something with the saves bundle. */
    }
    catch (error) {
        /* Failure.  Handle the error. */
        console.error(error);
        UI.alert(error);
    }
}}}
\
<h4>{{{Save.base64.import()}}}</h4>\
This API will import any given Base64 save bundle string previously created with {{{Save.base64.export()}}}.If the selected file is valid, it will restore all the saves in the bundle; if not, it will reject with an error.
> ''IMPORTANT!'' Restoring a bundle will override any existing browser save.
\
{{{
    Save.base64.import(bundle)
}}}
\
This API has 1 parameter:
* {{{bundle}}}: (string) the Base64 saves bundle string.
\
> //Example from the Documentation://
{{{
    Save.base64.import(base64Bundle)
	.then(() => {
		/* Success.  Do something special. */
	})
	.catch(error => {
		/* Failure.  Handle the error. */
		console.error(error);
		UI.alert(error);
	});
}}}


:: SaveAPI-Disk [page saveapi] {"position":"2100,2100","size":"100,100"}
<h1 id="saveapi-disk">Managing Disk Import and Export</h1>
The following APIs enables you to import and export save files (as to avoid over-burdening the player's Browser Cache). Those APIs are behind the code of the //Save...// and //Load...// (single saves), as well as the //Export...// and //Import...// bundles (multiple saves).
> ''Note:'' These APIs are fairly advanced, and are most useful when creating your own Save System.
\
<h3>Save and Load Single Saves</h3>\
\
<h4>{{{Save.disk.save()}}}</h4>
This API will save the current story state (playthrough at the current moment) in a downloadable file, which can be restored with {{{Save.disk.load()}}}. Along with the [[current state of the game|SaveAPI-Objects]], you can tie further metadata to a savefile.
{{{
    Save.disk.save(filename [, metadata])
}}}
\
This API has 2 parameters:
* {{{filename}}}: (string) the base name for the file downloaded.
** this string will get slugified and appended with a datestamp (format: YYYYMMDD-hhmmss) and the extension (format: {{{.save}}})
* {{{metadata}}}: (optional, JSON-serializable) extra data to be stored in the save object's metadata property.
\
> //Simple Example from the Documentation://
{{{
    try {
        Save.disk.save("The 6th Fantasy");
    }
    catch (error) {
        /* Failure.  Handle the error. */
        console.error(error);
        UI.alert(error);
    }

 → unless failure, will create a savefile called:
    {the-6th-fantasy-YYYYMMDD-hhmmss.save}
    where {YYYYMMDD-hhmmss} is the datestamp at download
}}}
> //Example with Extra Metadata//:
{{{
    try {
        const saveMetadata = {
            chars : ['Celes', 'Locke', 'Edward'],
            gold  : 2345
        };
        Save.disk.save("The 6th Fantasy", saveMetadata);
    }
    catch (error) {
        /* Failure.  Handle the error. */
        console.error(error);
        UI.alert(error);
    }
}}}
\
<h4>{{{Save.disk.load()}}}</h4>\
This APi will load any given disk save previously created with {{{Save.disk.save()}}}. If the selected file is valid, it will load the save's metadata and restore the game; if not, it will reject with an error.
> ''Note:'' this must be used with a change event handler linked to a {{{<input type="file">}}} element (to "upload" the save file to the game).
{{{
    Save.disk.load(event)
}}}
\
This API has 1 parameter:
* {{{event}}}: the event object passed to the input change event handler.
\
> //Examples from the Documentation://
{{{
    jQuery(document.createElement('input'))
	.prop({
		id   : 'saves-disk-load-file',
		name : 'saves-disk-load-file',
		type : 'file'
	})
	.on('change', ev => {
		// You must provide the event to Save.disk.load()
		Save.disk.load(ev)
			.then(metadata => {
				Engine.show();
			})
			.catch(error => {
				/* Failure.  Handle the error. */
				console.error(error);
				UI.alert(error);
			});
	});
}}}
> //Using a SugarCube button//:
{{{
    <<button "Load From Disk">>
        <<script>>
        jQuery(document.createElement('input'))
            .prop('type', 'file')
            .on('change', ev => {
                // You must provide the event to Save.disk.load()
                Save.disk.load(ev)
                    .then(metadata => {
                        Engine.show();
                    })
                    .catch(error => {
                        /* Failure.  Handle the error. */
                        console.error(error);
                        UI.alert(error);
                    });
            })
            .trigger('click');
        <</script>>
    <</button>>
}}}
\
<h3>Import and Export Multiple Saves</h3>\
\
<h4>{{{Save.disk.export()}}}</h4>\
This API will export all existing browser saves (auto and slot) as a bundled file to disk, which can be restored with {{{Save.disk.import()}}}.
{{{
    Save.disk.export(filename)
}}}
\
This API has 1 parameter:
* {{{filename}}}: (string) the base name for the file downloaded.
** this string will get slugified and appended with a datestamp (format: YYYYMMDD-hhmmss) and the extension (format: {{{.savesbundle}}})
\
> //Simple Example from the Documentation://
{{{
    try {
        Save.disk.export('The 6th Fantasy');
    }
    catch (error) {
        /* Failure.  Handle the error. */
        console.error(error);
        UI.alert(error);
    }
 → unless failure, will create a savefile called:
    {the-6th-fantasy-YYYYMMDD-hhmmss.savesbundle}
    where {YYYYMMDD-hhmmss} is the datestamp at download
}}}
\
<h4>{{{Save.disk.import()}}}</h4>
This API will import any given disk save bundle previously created with {{{Save.disk.export()}}}.
> ''Note:'' this must be used with a change event handler linked to a {{{<input type="file">}}} element (to "upload" the save file to the game).
\
If the selected file is valid, it will restore all the saves in the bundle; if not, it will reject with an error.
> ''IMPORTANT!'' Restoring a bundle will override any existing browser saves.
\
{{{
    Save.disk.import(event)
}}}
\
This API has 1 parameter:
* {{{event}}}: the event object passed to the input change event handler.
\
> //Example from the Documentation://
{{{
    jQuery(document.createElement('input'))
	.prop({
		id   : 'saves-import-file',
		name : 'saves-import-file',
		type : 'file'
	})
	.on('change', function (ev) {
		// You must provide the event to Save.browser.import()
		Save.disk.import(ev)
			.then(() => {
				/* Success.  Do something special. */
			})
			.catch(error => {
				/* Failure.  Handle the error. */
				console.error(error);
				UI.alert(error);
			});
	});
}}}


:: SaveAPI-Events [page saveapi] {"position":"2000,2100","size":"100,100"}
<h1 id="saveapi-event">Using Save-related Events</h1>
\
<h3>Events during Save Load</h3>\
\
<h4>{{{Save.onLoad.add()}}}</h4>\
This API will perform any required processing before a save is loaded, like upgrading out-of-date save data. If the defined function encounters an unrecoverable problem during processing, it will give an error to the player and terminate the loading of the save.
{{{
    Save.onLoad.add(handler)
}}}
It has 1 parameter: 
* {{{handler}}}, the function to be executed when loading a save
** {{{save}}}, the save object to be processed
\
> //Example://
{{{
    Save.onLoad.add(function (save) {
        /* code to process the save object before it's loaded */
    });

→ Updating old saves to be compatible:
    Save.onLoad.add(function (save) {
        const history = save.state.history;
        if (save.version < 14) {
            /* 
                Code to fix all saves up to version 14 
            */
            save.version = 14;
            /* Updating the save file's version */
        }
    });
}}}
> ''Note:'' the {{{save.version}}} can be defined with the relevant [[Config API|Config-Saves]]
\
<h4>{{{Save.onLoad.clear()}}}</h4>\
This API will delete all currently defined on-load handlers.
{{{
    Save.onLoad.clear()
}}}
\
<h4>{{{Save.onLoad.delete()}}}</h4>\
This API will delete the specified on-load handler.
{{{
    Save.onLoad.delete(handler)
}}}
It has 1 parameter:
* {{{handler}}}, the function to be executed when loading a save
> //Assuming that:// {{{myOnLoadHandler = function (save) { /* handler */}}}}
{{{
    Save.onLoad.delete(myOnLoadHandler);
}}}
\
<h4>{{{Save.onLoad.size}}}</h4>\
This API will give the number of currently registered on-load handlers.
{{{
    Save.onLoad.size
}}}
> //Example://
{{{
    console.log('There are %d onLoad handlers registered.', Save.onLoad.size);
}}}
\
<h3>Events during Saving</h3>\
\
<h4>{{{Save.onSave.add()}}}</h4>\
This API will perform any required processing before data is saved. It can be useful when wanting to run different code depending on the type of save (auto/slot/disk), or formatting names of saves.
{{{
    Save.onSave.add(handler)
}}}
It has 1 parameter: 
* {{{handler}}}, the function to be executed when saving a save
** {{{save}}}, the save object to be processed
** {{{details}}}, the save operation details object
*** {{{type}}}, representing what cause the save ({{{'autosave'}}}, {{{'disk'}}}, {{{'serialize'}}}, {{{'slot'}}})
\
> //Examples://
{{{
    Save.onSave.add(function (save) {
        /* code to process the save object before it's saved */
    });

    Save.onSave.add(function (save, details) {
        switch (details.type) {
            case 'autosave': {
                /* Code processed for autosaves */
                break;
            }
            case 'disk': {
                /* Code processed for disk saves */
                break;
            }
            case 'serialize': {
                /* Code processed for serialized saves */
                break;
            }
            default: { 
                /* Code processed for slot saves */
                break;
            }
        }
    });

}}}
> ''Note:'' I use this API to format how saves and autosaves are named in my [[Setting Template|https://manonamora.itch.io/twine-sugarcube-templates]].
\
<h4>{{{Save.onSave.clear()}}}</h4>\
This API will delete all currently defined on-save handlers.
{{{
    Save.onSave.clear();
}}}
\
<h4>{{{Save.onSave.delete()}}}</h4>\
This API will delete the specified on-save handler.
{{{
    Save.onSave.delete(handler)
}}}
It has 1 parameter:
* {{{handler}}}, the function to be executed when loading a save
> //Assuming that:// {{{myOnLoadHandler = function (save, details) { /* handler */}}}}
{{{
    Save.onSave.delete(myOnLoadHandler);
}}}
\
<h4>{{{Save.onSave.size}}}</h4>\
This API will give the number of currently registered on-save handlers.
{{{
    Save.onSave.size
}}}
> //Example://
{{{
    console.log('There are %d onSave handlers registered.', Save.onSave.size);
}}}


:: SaveAPI-General [page saveapi] {"position":"2100,1900","size":"100,100"}
<h1 id="saveapi-general">The Basic APIs of the Save Elements</h1>
The APIs below are general functions and variable for Browser-based saves, both auto and slot saves.
\
<h3>General Variable</h3>\
{{{Save.browser.size}}} is the Save variable that tracks the number of existing browser saves, auto and slot saves combined.
> //Examples from the Documentation://
{{{
    console.log(`There are currently ${Save.browser.size} browser saves`);

    if (Save.browser.size > 0) {
        /* Browser saves exist. */
    }
    else if (Save.browser.size === 0) {
        /* No browser saves exist. */
    }
}}}
> //Other example:// 
{{{
    <<if Save.browser.size gt 0>>
        <<link "Load Save">>
            <<run UI.saves()>>
        <</link>>
    <</if>>
}}}
\
<h3>General Functions</h3>\
\
<h4>{{{Save.browser.isEnabled()}}}</h4>\
This API will check whether the project includes slot saves and autosaves.
{{{
    Save.browser.isEnabled()

    if (Save.browser.isEnabled()) {
	    /* Code to manipulate saves. */
    }

    <<if Save.browser.isEnabled()>> ... <</if>>
}}}
\
<h4>{{{Save.browser.continue()}}}</h4>\
This API will automatically load the most recent browser save (either auto or slot). 
> ''Note:'' This is the API behind the //Continue// button included in the SideBar of the default UI.

You can also use it to create special events or alerts if loading a save is successful or fails.
> //Example from the Documentation://
{{{
if (Save.browser.size > 0) {
	Save.browser.continue()
		.then(() => {
			/* Success.  Do something special. */
		})
		.catch(error => {
			/* Failure.  Handle the error. */
			console.error(error);
			UI.alert(error);
		});
}
else {
	/* No browser saves exist. */
}
}}}
\
<h4>{{{Save.browser.clear()}}}</h4>\
This API will delete all slot saves and the autosave (if enabled). This is the code behind the //Delete All// button in the Save Popup.
{{{
    Save.browser.clear()
}}}


:: SaveAPI-Objects [page saveapi] {"position":"2000,1900","size":"100,100"}
<h1 id="saveapis-object">Save Objects and Their Contents</h1>
When saved, a playthrough resides in a save object, with multiple property defined specifically for that playthrough.
> ''Note:'' the exported save (Save to Disk) is encoded by default

The save object has 6 properties:
* {{{date}}} (integer), the date the save was created
** this is indicated in [[milliseconds elpased since epoch|https://currentmillis.com/]]
* {{{desc}}} (string), the save's description
* {{{id}}}, the story's [[save ID|Config-Saves]]
* {{{metadata}}}, save metadata (end-user specified - JSON serializable)
* {{{state}}}, the marshaled story history 
** {{{expired}}} (optional), the array of expired moments (influenced by the [[Max State|Basic-API-Config]])
** {{{history}}}, the arrays of moment objects 
*** {{{pull}}} (optional), current pull count of SugarCube's seedable PRNG
*** {{{title}}}, the title of the associated passage 
*** {{{variables}}}, the current variable store object ({{{State.variables}}})
** {{{index}}}, the index of active moments 
** {{{seed}}} (optional), seed of SugarCube's seedable PRNG
* {{{type}}}, the save's type.
** defined in {{{Save.Type}}} as [[Base64|SaveAPI-Base64]], [[Disk|SaveAPI-Disk]], and browser saves ([[autosaves|SaveAPI-Autosave]] or [[slot|SaveAPI-Slots]])
* {{{version}}}, save [[version|Config-Saves]]
\
> ''Note:'' adding additional properties is not recommended. Instead use the metadata property.


:: SaveAPI-Slots [page saveapi] {"position":"2000,2000","size":"100,100"}
<h1 id="saveapi-slot">Managing the Save Slots</h1>
The APIs below will allow you to manage the available manual save slots. These can be especially useful when creating your own Save page. For autosave save slots, see [[this page|SaveAPI-Autosave]].
\
<h3>{{{Save.browser.slot.size}}}</h3>\
This API will return the total number of available slots. It will be influenced by the [[Config API|Basic-API-Config]].
{{{
    Save.browser.slot.size
}}}
\
<h3>{{{Save.browser.slot.delete()}}}</h3>\
This API will delete a save from the given slot. This is what is behind the //Delete// buttons on each slot line in the Save Popup.
{{{
    Save.browser.slot.delete(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.browser.slot.delete(5)  
→ Deletes the save in the sixth slot
}}}
\
<h3>{{{Save.browser.slot.clear()}}}</h3>\
This API will delete all the saves in the slots. This is what is behind the //Delete All// button on the Save Popup.
{{{
    Save.browser.slot.clear()
}}}
> //Example://
{{{
    <<run Save.browser.slot.clear()>>  
→ Deletes all the slot saves
}}}
\
<h3>{{{Save.browser.slot.entries()}}}</h3>
This API will return an array of save objects, with information about all the slot saves.
> //Example://
{{{
    Save.browser.slot.entries().forEach(function (entry) {
        console.log(`Descriptor of the slot save at index ${entry.index}:`, entry.info);
    });
}}}
The save objects in this array will each have two properties: the {{{index}}} (position of the slot) and {{{info}}} (an object with the save's information).
\
<h3>{{{Save.browser.slot.get()}}}</h3>\
This API will return a save object from the given slot or NULL if it doesn't exist.
{{{
    Save.browser.slot.get(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.browser.slot.get(5)  
→ Returns the sixth slot save
}}}
\
<h3>{{{Save.browser.slot.has()}}}</h3>\
This API will check whether the given slot is filled.
{{{
    Save.browser.slot.has(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Examples://
{{{
    Save.browser.slot.has(5)  
→ checks the sixth slot save

    if (Save.browser.slot.has(5)) {
        /* Code to manipulate the sixth slot save. */
    }
}}}
\
<h3>{{{Save.browser.slot.isEnabled()}}}</h3>\
This API will check if slot saves are enabled (true by default, can be modified with [[Config API|Basic-API-Config]]).
> //Examples://
{{{
if (Save.browser.slot.isEnabled()) {
	/* Slot saves are enabled. */
}
}}}
\
<h3>{{{Save.browser.slot.load()}}}</h3>\
This API will load a save from the given slot. This is the code behind the //Load// buttons in the Save Popup.
{{{
    Save.browser.slot.load(slot)
}}}
It has 1 parameter:
* {{{slot}}}, the save slot index (0-based)
\
> //Example://
{{{
    Save.browser.slot.load(5)  
→ Loads the sixth slot save
}}}
\
<h3>{{{Save.browser.slot.save()}}}</h3>\
This API will save to the given slot. This is the code behind the //Save// buttons in the Save Popup.
{{{
    Save.browser.slot.save(slot [, desc [, metadata]])
}}}
It has 3 parameters:
* {{{slot}}}, the save slot index (0-based)
* {{{desc}}} (optional), the description of the save
** if omitted or NULL, it defaults to the passage's description 
* {{{metadata}}} (optional), the data to be stored as metadata (JSON-serializable)
\
> //Examples://
{{{
    Save.browser.slot.save(5)
→ Save to the sixth slot 
  + default title and no metadata

    Save.browser.slot.save(5, "Midgar")
→ Save to the sixth slot 
  + title "Midgar" and no metadata

    Save.browser.slot.save(5, null, someMetadata)
→ Save to the sixth slot 
  + default title and metadata someMetadata

    Save.browser.slot.save(5, "Midgar", someMetadata)
→ Save to the sixth slot 
  + title "Midgar" and metadata someMetadata
}}}


:: Settings [chapter menu] {"position":"1400,1800","size":"200,100"}
<h1>The Settings APIs</h1>
Settings can be a great way to customise your project, and make it more accessible for players. Whether it is to change the visual aspect (font, theme, etc), the audio (volume, track), or overall mechanics (difficulty, animation), there are many ways to reach your goal.

While including settings in a project can feel a bit overwhelming, as they //will// require some knowledge of JavaScript, the Setting APIs are there to make things easier. There are also many UI templates out there including some settings.
> ''Note:'' Do check the version of SugarCube attached to the template, as older templates may use correct code for their version that would be deprecated in later SugarCube version, requiring users to fix it.

The basic Settings API is built in this format:
{{{
    Settings.function(parameters)
}}}
> ''Note:'' The order in which you add the settings in the JavaScript passage will be the order you will see in the Settings popup.
\
* [[Creating a Setting|SettingsBasics]]
* [[Creating a Toggle Setting|SettingsToggle]]
* [[Creating a List Setting|SettingsList]]
* [[Creating a Slider|SettingsRange]]
* [[Going Further with Settings|Settings-More]]
* [[Adding Headers|SettingsHeader]]
\
> ''Note:'' you can find a Settings-Only Template with the most useful settings for Interactive Fiction on my [[itch page|https://manonamora.itch.io/twine-sugarcube-templates]].


:: Settings-More [page settingsapi] {"position":"1400,2100","size":"100,100"}
<h1 id="settings-further">Going Further with Settings</h1>
The Settings APIs doesn't just allow you to create settings, but use the value of settings for code both in JavaScript and in story passages as well as change it outside of the Settings Dialog Box.

<h3>Use the value of a Setting in code</h3>\
To use the value of a Setting in code, you can either use the {{{settings}}} variable or the {{{Setting.getValue()}}} API.
{{{
    settings.nameOfTheSetting
    Setting.getValue('nameOfTheSetting')
}}}
Both can be used interchangeably, though the latter is preferred in JavaScript code.

Assuming that a setting has been set up with the name {{{notification}}}:
{{{
→ For a Toggle Setting:
    <<if settings.notification>>
        <<notify 5s>>This is a notification only seen if the notification setting is toggled on<</notify>>
    <</if>>
    <<if Setting.getValue('notification')>><</if>>

→ For a Range Setting:
    <<if settings.notification gt 9>>
        <<notify 5s>>This is very loud!<</notify>>
    <</if>>
    <<if Setting.getValue('notification') gt 9>><</if>>

→ For a List Setting:
    <<if settings.notification is "Easy">>
        <<notify 5s>>You are playing on BabyMode<</notify>>
    <</if>>
    <<if Setting.getValue('notification') is "Easy">><</if>>

→ In JavaScript (boolean):
    if (settings.notification) {
	    /* Notifications should be enabled */
    }
    if (Setting.getValue('notification')){}
}}}
> ''Note:'' the {{{<<notify>>}}} macro is a [[Custom Macro by Chapel|https://github.com/ChapelR/custom-macros-for-sugarcube-2/blob/master/docs/notify-macro.md]].

<h3>Changing the value of a Setting</h3>\
There are a handful of APIs to modify and save the value of Setting, outside of the Built-In Dialog Box that the players can interact with. These can be especially useful when building a custom Setting page or at the start of a game (Accessibility Settings or Language).
* {{{Setting.setValue()}}} will set a new value to the indicated setting and reload the setting.
* {{{Setting.save()}}} will save any change made to any {{{settings}}} variable.
** this API is automatically triggered in the Settings Dialog Box and when using {{{Setting.setValue()}}}.
* {{{Setting.reset()}}} will reset a(ll) setting(s) to its(their) default value.
> ''Note:'' the targeted setting needs to be set in the JavaScript beforehand.
> In a passage, you also need to use the macros {{{<<script>>}}} or {{{<<run>>}}}.
\
> //To save://
{{{
→ With setValue():
    Setting.setValue(name, value);
    <<run Setting.setValue('difficulty', 'Normal');>>

→ With save():
    <<set settings.difficulty to "Normal">>
    <<run Setting.save()>>
}}}
> ''Note:'' The new value for the setting must make sense for the setting (i.e. not indicating {{{true/false}}} for a string), or it will mess with the game running.
> ''Note 2:'' using {{{Setting.setValue()}}} will automatically reload the settings, in the same way changes happen when changing a setting in the Settings Dialog Box.
\
> //To reset://
{{{
→ all settings to default:
    Setting.reset()

→ only reset one setting: 
    Setting.reset('difficulty')

→ in a macro:
    <<run Setting.reset('difficulty')>>
}}}

> ''Note:'' while {{{Setting.load()}}} API does exist, it is called automatically every time the game is loaded. As such, it should never be called manually.


:: SettingsBasics [page settingsapi] {"position":"1400,1900","size":"100,100"}
<h1 id="settings-basics">Creating a Setting</h1>
This API lets you create a setting, without appearing as a control in the built-in Settings popup. It is most useful when building your own Settings controls (like a customised Settings page). This API was used for the //One Page// toggle in the SideBar.
> ''Note:'' this API is unnecessary if you are using the [[Toggle|SettingsToggle]], [[List|SettingsList]] or [[Slider|SettingsRange]] API for that particular setting.

To create a setting, you need the following API:
{{{
    Setting.addValue(name[, definition])
}}}
\
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object, optional)
The //definition// object has multiple options:
* {{{default}}}: default value for the setting (boolean, optional, undefined = false)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)
> ''Note:'' You can use a setting in the code a passage. You would write the variable as such: {{{settings.name}}}. See [[Going Further with Settings|Settings-More]] for use.

> //Basic Setting//:
{{{
    Setting.addValue("interfaceSetting");
}}}
> //Setting with definition//:
{{{
    Setting.addValue("meaningOfLife", {
        default  : "42%",
        onInit   : function () {
            var size = document.getElementById("life");
            size.style.fontSize = settings.meaningOfLife;
        },
        onChange : function () {
            var size = document.getElementById("life");
            size.style.fontSize = settings.meaningOfLife;
        }
    });
}}}
> ''Note:'' {{{Setting.addValue()}}} should not be used to create settings to affect the game like a regular variable would, as it will be shared with all playthroughs.


:: SettingsHeader [page settingsapi] {"position":"1500,2100","size":"100,100"}
<h1 id="settings-header">Adding Headers</h1>
If you want to customise the Settings Dialog Box or organise your settings, you can group those under a Header. This will indicate to users the kind of settings they can expect below.
{{{
    Setting.addHeader(name [, description])
}}}
\
This API has 2 parameters :
* {{{name}}}: the name of the header (string)
* {{{desc}}}: description of the group of settings (string, optional)

> //Examples://
{{{
 → Only a header
    Setting.addHeader("Font Settings");

 → A header and a description
    Setting.addHeader("Font Settings", "Settings controlling how the text is formatted.");

→ Only a description
    Setting.addHeader("", "Settings controlling how the text is formatted.");
}}}


:: SettingsList [page settingsapi] {"position":"1400,2000","size":"100,100"}
<h1 id="settings-list">Creating a List Setting</h1>
Like the name suggests, this type of settings create a (dropdown) list. This type is best used for settings with more than 2 options or options with names. For example: a theme change setting or font settings.

To add a Toggle setting, you need the following API:
{{{
    Setting.addList(name, definition)
}}}
\
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object)
The //definition// object has multiple options:
* {{{label}}}: visible description of the setting (string)
* {{{list}}}: the list of options (array of string)
* {{{desc}}}: further description of the setting (string, optional)
* {{{default}}}: default value for the setting (string from array, optional, undefined = 1st of array)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)
> ''Note:'' You can use a setting in the code a passage. You would write the variable as such: {{{settings.name}}}. See [[Going Further with Settings|Settings-More]] for use.

> //Basic List Setting, creating a string setting variable//:
{{{
    Setting.addList("difficulty", {
        label   : "Choose a difficulty level.",
        list    : ["Easy", "Normal", "Hard", "INSANE"],
        default : "Normal"
    });

    :: Story Passage
    <<if settings.difficulty is "Normal">> 
        /* your code/text  */
    <</if>>
}}}
> //List Setting to add/remove a CSS class//:
{{{
    var settingThemeNames = ["Base", "Reverse", "Night", "Light"];
    var settingThemeHandler = function () {
        var $html = $("html");
        // remove any existing theme class
            $html.removeClass("theme-reverse theme-night theme-light");
        // switch on the theme name to add the requested theme class
            switch (settings.theme) {
                case "Reverse":
                    $html.addClass("theme-reverse");
                    break;
                case "Night":
                    $html.addClass("theme-night");
                    break;
                case "Light":
                    $html.addClass("theme-light");
                    break;
            }
    };
    Setting.addList("theme", {
        label    : "Choose a theme.",
        desc     : "This will change the colour palette",
        list     : settingThemeNames,
        default  : "Base",
        onInit   : settingThemeHandler,
        onChange : settingThemeHandler
    });

 → In your CSS: 
    body {color: black;}
    html.theme-reverse body {color: white;}
    html.theme-night body {color: lightgrey;}
    html.theme-light body {color: darkgrey;}
}}}


:: SettingsRange [page settingsapi] {"position":"1500,2000","size":"100,100"}
<h1 id="settings-range">Creating a Slider</h1>
Like the name suggests, this type of settings create a slider. This type is best used for settings with a range of value. For example: sound volume.

To add a Toggle setting, you need the following API:
{{{
    Setting.addRange(name, definition)
}}}
\
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object)
The //definition// object has multiple options:
* {{{label}}}: visible description of the setting (string)
* {{{min}}}: the minimum value (number)
* {{{max}}}: the maximum value (number)
* {{{step}}}: the increment between each step (number, divisible by min & max)
* {{{desc}}}: further description of the setting (string, optional)
* {{{default}}}: default value for the setting (boolean, optional, undefined = false)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)
> ''Note:'' You can use a setting in the code a passage. You would write the variable as such: {{{settings.name}}}. See [[Going Further with Settings|Settings-More]] for use.

> //Basic Range Setting//:
{{{
    var settingMasterVolumeHandler = function () {
	    SimpleAudio.volume(settings.masterVolume / 10);
    };
    Setting.addRange("masterVolume", {
        label    : "Master volume.",
        min      : 0,
        max      : 10,
        step     : 1,
        onInit   : settingMasterVolumeHandler,
        onChange : settingMasterVolumeHandler
    });
}}}


:: SettingsToggle [page settingsapi] {"position":"1500,1900","size":"100,100"}
<h1 id="settings-toggle">Creating a Toggle Setting</h1>
Like the name suggests, this type of settings create a toggle. This type is best used for settings with a True/False options. For example: toggling a widescreen or autosaving.

To add a Toggle setting, you need the following API:
{{{
    Setting.addToggle(name, definition)
}}}
\
This API has 2 main parameters:
* {{{name}}}: the name of the settings variable (string)
* {{{definition}}}: definition of the setting (object)
The //definition// object has multiple options:
* {{{label}}}: visible description of the setting (string)
* {{{desc}}}: further description of the setting (string, optional)
* {{{default}}}: default value for the setting (boolean, optional, undefined = false)
* {{{onInit}}}: the function to call when the game starts (optional, function)
* {{{onChange}}}: the function to call when the setting is changed (optional, function)
> ''Note:'' You can use a setting in the code a passage. You would write the variable as such: {{{settings.name}}}. See [[Going Further with Settings|Settings-More]] for use.

> //Basic Toggle Setting to create a boolean setting//:
{{{
    Setting.addToggle("notifications", {
	    label : "Show notifications?" 
    });
 → the default value not defined, so false is used

    :: Story Passage
    <<if settings.notifications is true>> 
        /* your code/text  */
    <</if>>
}}}
> //Toggle Setting to add/remove a CSS class//:
{{{
    var settingNotifications = function () {
        if (settings.notifications) { // is true
            $("html").addClass("notifications");
        }
        else { // is false
            $("html").removeClass("notifications");
        }
    };
    Setting.addToggle("notifications", {
        label    : "Display Notifications?",
        desc     : "If enabled, you will be shown notifications throughout the game",
        default  : false,
        onInit   : settingNotifications,
        onChange : settingNotifications
    });

 → In your CSS, you'll need to include the following:
    html.notifications .macro-notif {
	    display: none;
    }
}}}
> ''Note:'' this assumes that the notification element/macro uses the class {{{.macro-notif}}}.


:: Special-Passage [chapter menu] {"position":"1700,600","size":"200,100"}
<h1>Basic Special Passages</h1>
Your project can be customised further thanks to Special Passages. These passages are made special as they will affect how the page looks, where the content of the passage is displayed on the page, or when the code is triggered during loading. SugarCube includes 14 Special Passage names that, when use, will trigger those special properties. The ones included in this section will focus on Headers, Footers, the SideBar, and Initialisation.
> ''Note:'' You can check [[the demo|SP-Demo]] to see the Special Passages of this section in action!

To use a Special Passage in your project you will need to:
* create a new passage
* name it with the wanted Special Passage Name 
** it should be exactly as indicated in the [[Documentation|http://www.motoslave.net/sugarcube/2/docs/#special-passages]]! or it will not work 
* fill the passage however you want
** some Special Passages have restriction in content
> ''Note:'' you cannot have more that one of each Special Passage per project.
\
* [[Headers and Footers|SP-HeaderFooter]]
* [[Special Passages for the UI Bar|SP-UIBar]] 
* [[Setting Important Variables before Start|SP-Init]]


:: Special-Tags [chapter menu] {"position":"2000,1100","size":"200,100"}
<h1>More Special Passages and Tags</h1>
Aside from the [[Basic Special Passages|Special-Passage]], you can customise your project even further with more Special Passage Names and Special tags.

* [[Special Tags creating Special Passages and Functionalities|Tags-Built]]
* [[Process Code Before and After Rendering a Passage|SP-PassageReady-Done]]
* [[Changing the UI/Interface of the Project|SP-StoryInterface]]
* [[Customising Passages with Tags|Tags-CSS]]
* [[Including Assets with Tags|Tags-Asset]] 
* [[The Special Variables|SP-Variables]]


:: Start [noreturn menu] {"position":"1500,100","size":"200,200"}
<div style="text-align:right;font-size:85%;">Last Updated: 29 Aug '24</div>
<h1>100% Good Twine SugarCube Guide</h1>\
This guide was created as an ''alternative'' to the SugarCube documentation, including simpler explanations to the macros and with clearer examples when possible. It is meant to make the SugarCube format more accessible to new and learning users.
> ''Note:'' the //One-Page// button on the SideBar will display the whole guide in one page for easier search.

The guide covers the different aspects of the SugarCube format, from its particular markup, to its macros, functions, and APIs. It also touches upon possible customisation of SugarCube projects, with editing the StyleSheet with CSS or the JavaScript passage. And, it brushes upon aspects of accessibility in terms of code, design, and formatting.
> This guide is based on the [[official SugarCube documentation|https://www.motoslave.net/sugarcube/2/docs/]], and is up to date as of the ''version 2.37.3''. For later version, please refer to the official documentation. /* It is unlikely this guide will get further updates, as SugarCube 2 is moving to maintaining-only state. Always refer to the documentation anyway when unsure about something*/
\
The guide is separated in different categories: ''The Basics(+)'', ''Intermediate Use'', and ''Advanced Mode''. 
Only the Basics are necessary to be able to create a game with SugarCube. 
Knowledge of CSS, JavaScript/jQuery may be required for more complex elements.
> ''Note:'' any coding done in SugarCube is case and character sensitive, meaning that 
> {{{name ≠ Name}}} or {{{" " ≠ “ ”}}}.

> ''The Basics''
* [[About Twine and SugarCube|About]]
* [[Starting with SugarCube|Basics]] 
\
> ''The Basics+''
* [[SugarCube Markup and Basic Styling|Markup]] 
* [[Going Further with the Basics|Macro-Basic]]
* [[Adding some Interactivity|Macro-Interact]]
* [[Basic Special Passages|Special-Passage]]
* [[About JavaScript and the StyleSheet|Base-JS-CSS]] 
* [[URLs for Assets and Testing|URL-Types]] 
\
> ''Intermediate Use''
* [[More SugarCube Markup|Markup-Int]]
* [[More Interactivity Macros|Macro-Interact-Adv]]
* [[Macros of Convenience|Macro-Conv]]
* [[More Special Passages and Tags|Special-Tags]]
* [[Harness the Power of Functions|Functions]] 
* [[Using Methods to change Variables|Methods]]
* [[Adding Sound with the Audio Macros|Macro-Audio]]
* [[Going further in Styling with CSS and JavaScript|Int-JS-CSS]]
* [[Some Useful Basic APIs|Basic-API]]
* [[Edit the Built-In Text or Change the Game's Language|Localization]]
* [[Testing and Debugging your Game|DebugAPI]]
\
> ''Advanced Mode''
> ''Note:'' Many of the elements included in the following chapters will require knowledge of JavaScript, jQuery, and understanding of the core processes of SugarCube.
* [[Advanced Macros|Macro-Adv]]
* [[More Variable and Interaction Methods|Methods-Adv]]
* [[Going Further with Basic APIs and More|API-Adv]]
* [[The Settings APIs|Settings]]
* [[Going Further with the Engine API|Engine-API]]
* [[The Save APIs and Further Saving Configurations|SaveAPI]] 
* [[More Configuration APIs to Customise Interaction|Config-API]]
* [[Getting the FullScreen Experience|FullScreen]] 
* [[Trigger Code with Special Events|Events]] 
* [[Creating your Own Macro|Macro]] 
* [[Managing Story Elements with APIs|StoryAPI]] 
* [[Managing Passage Properties with APIs|PassageAPI]] 
* [[Dealing with the State of Play|StateAPI]] 
* [[Going Further with Audio with APIs|AudioAPI]]

If something is unclear, if you find an error in this guide, if you think I missing an important element, or if I did not provide enough examples, please [[let me know|https://manonamora.itch.io/twine-sugarcube-guide]]!


:: StateAPI [chapter menu] {"position":"3200,1800","size":"200,100"}
<h1>Dealing with the State of Play</h1>
Any started playthrough will contain a State, which will include moments (states) created during play used to navigate the history (undo/redo) and to save the (potentially modified) value of variables. If relevant, the State will include Metadata and a Seedable PRNG.

* [[Managing the State of Variables|StateAPI-Variable]] 
* [[Exploring the Different Moments inside the State|StateAPI-State]] 
* [[Using the Story Metadata|StateAPI-Metadata]] 
* [[Initialising a Seedable PRNG|StateAPI-PRNG]]


:: StateAPI-Metadata [page state-api] {"position":"3200,2000","size":"100,100"}
<h1 id="state-metadata">Using the Story Metadata</h1>
Some of the APIs below functions similarly to the {{{memorize()}}}, {{{recall()}}}, and {{{forget()}}} [[functions|Function-Metadata]], in that it will affect the state of the Story Metadata. 
\
<h3>{{{State.metadata.size}}}</h3>\
This API will return the size of the story metadata.
{{{
    if (State.metadata.size > 0) {
	    /* code if some metadata */
    }
}}}
\
<h3>{{{State.metadata.clear()}}}</h3>\
This API will completely empty the story metadata.
{{{
    State.metadata.clear();
}}}
\
<h3>{{{State.metadata.delete()}}}</h3>\
This API will remove the specified key and its value from the story metadata.
{{{
    State.metadata.delete(key)
}}}
It has 1 parameter:
* {{{key}}}, the key to delete 
> //Assuming that:// {{{'achievements' = some value}}}
{{{
    State.metadata.delete('achievements');
}}}
\
<h3>{{{State.metadata.entries()}}}</h3>\
This API will return the array of the metadata key/value pair ({{{[key, value]}}}).
> //Examples://
{{{
→ going through the pairs with a {for} loop
    var metadata = State.metadata.entries();
    for (var i = 0; i < metadata.length; ++i) {
        var key   = metadata[i][0];
        var value = metadata[i][1];

        /* code to do something */
    }

→ going through the pairs with {<Array>.forEach()}
    State.metadata.entries().forEach(function (pair) {
        var key   = pair[0];
        var value = pair[1];

        /* code to do something */
    });
}}}
\
<h3>{{{State.metadata.get()}}}</h3>\
This API will return the value associated with the specified metadata key. This can be useful for conditional statements.
{{{
    State.metadata.get(key)
}}}
It has 1 parameter:
* {{{key}}}, the key to delete 
> //Assuming that:// {{{'achievements' = true}}}
{{{
    State.metadata.get('achievements');
→ will have the value {true}    
}}}
\
<h3>{{{State.metadata.has()}}}</h3>\
This API will check whether the specified metadata key is defined. This can be useful for conditional statements.
{{{
    State.metadata.has(key)
}}}
It has 1 parameter:
* {{{key}}}, the key to delete 
> //Assuming that:// {{{'achievements' = some value}}}
{{{
    State.metadata.has('achievements')  

    if (State.metadata.has('achievements')) {
	    /* code to do something */
    }
}}}
\
<h3>{{{State.metadata.keys()}}}</h3>\
This API will return the array of the current metadata keys.
> //Examples://
{{{
→ going through the keys with a {for} loop
    var metadataKeys = State.metadata.keys();
    for (var i = 0; i < metadataKeys.length; ++i) {
        var key = metadataKeys[i];

        /* do something */
    }
→ going through the keys with {<Array>.forEach()}
    State.metadata.keys().forEach(function (key) {
        /* do something */
    });
}}}
\
<h3>{{{State.metadata.set()}}}</h3>\
This API will set a value to the specified key within the story metadata, which will persist over the story and browser restarts.
> ''Notes:'' private browsing modes will interfere with this.
> The story metadata is tired to the specific story it was generated with.
> The metadata ''SHOULD NOT'' replace saves.
{{{
    State.metadata.set(key, value)
}}}
It has 2 parameters:
* {{{key}}}, the key that should be set 
* {{{value}}}, the value to set 
\
> //Examples://
{{{
→ simple key setting 
    State.metadata.set('ngplus', true);

→ setting the key as an object
    State.metadata.set('achievements', { ateYellowSnow : true });
}}}


:: StateAPI-PRNG [page state-api] {"position":"3300,2000","size":"100,100"}
<h1 id="state-seed">Initialising a Seedable PRNG</h1>
A PRNG, or pseudo-random number generator, is a deterministic algorithm for generating a sequence of numbers whose properties approximate the properties of sequences of random numbers.
The APIs below will be useful for procedural world building, factions alignment, loot drops, dungeon map layout etc... essential, anything that affects or involves randomness.
\
<h3>{{{State.prng.init()}}}</h3>\
This API will initialise the seedable PRNG and integrate it into the story state and saves. This will affect the result of methods and functions of {{{State.random()}}}, or the {{{random()}}} and {{{randomFloat()}}} [[functions|Function-Clone-Random]].

If used, {{{State.prng.init()}}} should be coded in the JavaScript section of your project, or inside {{{StoryInit}}}. It is strongly recommended not to add arguments to the API, but, if you do use an explicit seed, you must enable additional entropy (otherwise, all playthroughs will have the same results).
{{{
    State.prng.init([seed [, useEntropy]])
}}}
It has 2 parameters:
* {{{seed}}} (optional), the explicit seed used to initialise the PRNG 
* {{{useEntropy}}} (optional), enables the use of additional entropy to pad the seed.
\
> //Examples://
{{{
    State.prng.init()
→ automatically seed the PRNG

    State.prng.init("aVeryLongSeed")
→ seed with "aVeryLongSeed" (not recommended)

    State.prng.init("aVeryLongSeed", true)
→ seed with "aVeryLongSeed" and pad it (recommended)
}}}
\
<h3>{{{State.prng.isEnabled()}}}</h3>\
This API will check whether the seedable PRNG has been enabled.
{{{
    State.prng.isEnabled()
}}}
\
<h3>{{{State.prng.pull}}}</h3>\
This API will return the current pull count, meaning how many times a request has been made from the PRNG. 
> ''Note:'' the pull count is automatically included within saves and sessions, and is mainly useful for debugging purposes.
{{{
    State.prng.pull
}}}
\
<h3>{{{State.prng.seed}}}</h3>\
This API will return the seed from the PRNG.
> ''Note:'' the pull count is automatically included within saves and sessions, and is mainly useful for debugging purposes.
{{{
    State.prng.seed
}}}
\
<h3>{{{State.random()}}}</h3>\
This API will return a pseudo-random decimal number (floating-point) in the range 0 (inclusive) up to but not included 1 (exclusive).
> ''Note:'' by default, it simply returns results from {{{Math.random()}}}. 
{{{
    State.random()
→ returns a pseudo-random floating-point number in the range [0, 1)
}}}


:: StateAPI-State [page state-api] {"position":"3300,1900","size":"100,100"}
<h1 id="state-state">Exploring the Different Moments inside the State</h1>
The following APIs will look at the different moments of the state, from future to current to history. Some of these will look only at the current moment (active), some will focus on the in-play moments (influenced by the [[maxState|Basic-API-Config]]), while others will include the expired moments.
\
<h3>{{{State.active}}}</h3>\
This API will return the active/present moment.
However, it is generally unnecessary, as there are better shortcut properties with {{{State.passage}}} (below) and {{{State.variables}}} ([[here|StateAPI-Variable]]), or the [[functions|Functions]] {{{passage()}}} and {{{variables()}}}.
> //Examples://
{{{
    State.active.title      
→ title of the present moment

    State.active.variables  
→ variables of the present moment
}}}
\
<h3>{{{State.bottom}}}</h3>\
This API will return the bottommost (least recent) moment, within the full in-play history.
> //Examples://
{{{
    State.bottom.title      
→ title of the bottommost moment

    State.bottom.variables  
→ variables of the bottommost moment
}}}
\
<h3>{{{State.top}}}</h3>\
This API will return the topmost (most recent) moment, within the full in-play history.
>''Note:'' {{{State.top}}} is not synonymous to {{{State.active}}}. It is also extremely unlikely you will ever need {{{State.top}}}.
\
> //Examples://
{{{
    State.top.title      
→ title of the topmost moment

    State.top.variables  
→ variables of the topmost moment
}}}
\
<h3>{{{State.current}}}</h3>\
This API will return the current moment, within the full in-play history, which is the pre-play version of the active moment.
>''Note:'' {{{State.current}}} is not synonymous to {{{State.active}}}. It is also extremely unlikely you will ever need {{{State.current}}}.
\
> //Examples://
{{{
    State.current.title      
→ title of the current moment

    State.current.variables  
→ variables of the current moment
}}}
\
<h3>{{{State.length}}}</h3>\
This API will return the number of moments in the past in-play history. This includes all visited passages in order of their visit. 
> //Example://
{{{
    if (State.length === 0) {
        /* No moments within the past in-play history. Egad! */
    }
}}}
\
<h3>{{{State.size}}}</h3>\
This API will return the number of moments within the full in-play history.
It is particularly useful when specific bits of code need to run on the landing page when the game starts, but shouldn't run again if the player undoes their actions.
> //Examples://
{{{
    if (State.size === 0) {
        /* Code if no moments in the history */
    }
}}}
\
<h3>{{{State.turns}}}</h3>\
This API will return the number of played moments within the extended past history.
> //Examples://
{{{
    if (State.turns === 1) {
        /* Code to run on the starting passage */
    }
}}}
\
<h3>{{{State.passage}}}</h3>\
This API returns the passage of the active (present) moment. It is useful in JavaScript code requiring the name of a passage to run code.
> //Example://
{{{
   if (State.passage === "PassageName") {
    /* Code to run in that passage only */
   }
}}}
> ''Note:'' It is similar to the {{{passage()}}} [[function|Function-Pass-Tag]].
\
<h3>{{{State.has()}}}</h3>\
This API checks whether any moment(s) with the indicated title exist within the past in-play history.
> ''Note:'' {{{State.has()}}} does not check expired moments. You may want to use {{{State.hasPlayed()}}} or the {{{hasVisited()}}} [[function|Function-Pass-Tag]] instead.
{{{
    State.has(passageTitle)
}}}
It has 1 parameter:
* {{{passageTitle}}}, the title of the moment to check
> //Example://
{{{
    State.has("The Ducky")  
→ checks if a moment matching "The Ducky" exists
}}}
\
<h3>{{{State.hasPlayed()}}}</h3>\
This API checks whether any moment(s) with the indicated title exist within the past history.
> ''Note:'' if you need to check multiple passages, you may want to use the {{{hasVisited()}}}  [[function|Function-Pass-Tag]] instead.
{{{
    State.hasPlayed(passageTitle)
}}}
It has 1 parameter:
* {{{passageTitle}}}, the title of the moment to check
> //Example://
{{{
    State.hasPlayed("The Ducky")  
→ checks if a moment matching "The Ducky" exists
}}}
\
<h3>{{{State.index()}}}</h3>\
This API returns the moment relative to the bottom of the past in-play history, with the given index.
{{{
    State.index(index)
}}}
It has 1 parameter:
* {{{index}}}, the index of the relevant moment
> //Example://
{{{
    State.index(0)                 
→ the least recent moment

    State.index(1)
→ the second least recent moment

    State.index(State.length - 1)
→ the most recent moment
}}}
\
<h3>{{{State.isEmpty()}}}</h3>\
This API checks whether the full in-play history is empty.
> //Example://
{{{
    if (State.isEmpty()) {
        /* Code to run if history is empty */
    }
}}}
\
<h3>{{{State.peek()}}}</h3>\
This API return the moment, relative to the top of the past in-play history, with an optional offset.
{{{
    State.peek([offset])
}}}
It has 1 parameter:
* {{{offset}}} (optional), the offset from the top moment 
** default is 0
> //Examples://
{{{
    State.peek()
    State.peek(0)                  
→ most recent moment

    State.peek(1)
→ the second most recent moment 

    State.peek(State.length - 1)
→ the least recent moment
}}}


:: StateAPI-Variable [page state-api] {"position":"3200,1900","size":"100,100"}
<h1 id="state-variable">Managing the State of Variables</h1>
The following APIs will help check the state of current variables in the story, and can be used to set value to those variables. They are especially helpful in JavaScript/jQuery code requiring the value of a SugarCube variable or setting them. 
\
<h3>{{{State.temporary}}}</h3>\
This API will return the current temporary variables ({{{_temp}}}), as an object. 
A specific temporary variable can be targeted by using the name of the variable as a property. 
> //Assuming that// {{{_ThisIsATemp = [value]}}}:
{{{
    State.temporary.ThisIsATemp
}}}
\
<h3>{{{State.variables}}}</h3>\
This API will return the current active variables ({{{$var}}}), as an object. 
A specific variable can be targeted by using the name of the variable as a property.
> //Assuming that// {{{$aVariable = [value]}}}:
{{{
    State.variables.aVariable
}}}
\
<h3>{{{State.getVar()}}}</h3>\
This API will return the value of the indicated variable.
{{{
    State.getVar(varName)
}}}
It has 1 parameter:
* {{{varName}}}, the name of the variable, including its sigil 
> //Examples//
{{{
    State.getVar("$variable")
    State.getVar("_temporary")
    State.getVar("settings.alsothat")
}}}
> While the two first examples could be replaced with {{{State.variables}}} and {{{State.temporary}}}, {{{State.getVar()}}} will accept either type of variable. It is particularly useful when you don't know the type of the wanted variable ahead of time.
\
<h3>{{{State.setVar()}}}</h3>\
This API sets the value of the indicated variable, like the {{{<<set>>}}} macro does.
{{{
    State.setVar(varName, value)
}}}
It has 2 parameters:
* {{{varName}}}, the name of the variable, including its sigil 
* {{{value}}}, the value to assign 
> //Example://
{{{
    State.setVar("$charName", "Jane Doe")  
→ assigns the string "Jane Doe" to $charName
}}}


:: StoryAPI [chapter page] {"position":"3500,1900","size":"200,100"}
<h1 id="story-api" class="the-chapter">Managing Story Elements with APIs</h1>
The APIs listed below will help you check and manage different elements of your Story.
\
<h3>{{{Story.id}}}</h3>
This API keeps the DOM ID of the project, created from the slugified story title.
{{{
    Story.id
→ sugarcube-guide is the DOM ID of this project.
}}}
\
<h3>{{{Story.ifId}}}</h3>\
This API keeps the IFID ([[Interactive Fiction IDentifier|https://ifdb.org/help-ifid]]) of the story.
{{{
    Story.ifId
→ C15CE33F-61F6-4909-BB59-73EE7A3D57B1
  is the IFID of this project
}}}
\
<h3>{{{Story.name}}}</h3>
This API keeps the title of the project.
{{{
    Story.name
→ {SugarCube Guide} is the title of this project
}}}
\
<h3>{{{Story.get()}}}</h3>\
This API will return the Passage object of the referenced title (tags, classes, HTML element).
{{{
    Story.get(name)
}}}
It has 1 parameter:
* {{{name}}}, the title of the Passage object (i.e. the Passage Name)
> //Example://
{{{
    Story.get("Start")  
→ returns the Passage object of {:: Start}
}}}
> ''Note:'' this method won't return any passage with [[Special Tags|Special-Tags]]
\
<h3>{{{Story.has()}}}</h3>\
This API will check whether the Passage object of the referenced title (tags, classes, HTML element) exists.
> ''Note:'' this method won't return any passage with [[Special Tags|Special-Tags]]
{{{
    Story.has(name)
}}}
It has 1 parameter:
* {{{name}}}, the title of the Passage object (i.e. the Passage Name)
> //Example://
{{{
    Story.has("Start")  
→ checks that {:: Start} exists 
}}}
\
<h3>{{{Story.add()}}}</h3>\
This API will let you add a passage to the passage store.
{{{
    Story.add(descriptor)
}}}
It has 1 parameter:
* {{{descriptor}}}, the passage descriptor object
The parameter includes 3 properties:
* {{{name}}}: the passage's name to add 
* {{{tags}}}: the passage's tag(s), separated by a space 
* {{{text}}}: the passage's text
** this ''cannot'' include [[Special Passages|Special-Passage]], or passages with [[Special Tags|Special-Tags]]
> //Example://
{{{
    const descriptor = {
        name : "Forest 4",
        tags : "forest heavy",
        text : "You can barely see farther than arm's length for all the trees.",
    };

    if (Story.add(descriptor)) {
        /* The "Forest 4" passage was added. */
    }
}}}
> ''Note:'' it is unlikely you will ever need this API, as it is much simpler to add story passages outside of JavaScript.
\
<h3>{{{Story.delete()}}}</h3>\
This API will delete the Passage instance of the indicated name.
{{{
    Story.delete(name)
}}}
It has 1 parameter:
* {{{name}}}: the name of the passage 
** this ''cannot'' be any of the [[Special Passages|Special-Passage]], or passages with [[Special Tags|Special-Tags]]
> //Example://
{{{
    if (Story.delete("The Ducky")) {
        /* The "The Ducky" passage was deleted. */
    }
}}}
\
<h3>{{{Story.filter()}}}</h3>\
This API will return an array of Passage instances whose value matches the search prediction, given the function.
{{{
    Story.filter(predicate [, thisArg])
}}}
It has 2 parameters:
* {{{predicate}}}: the function used to test each passage instance 
* {{{thisArg}}} (optional) the value to use as {{{this}}} when executing the function
\
> //Example://
{{{
    Story.filter(function (p) {
        return p.tags.includes("forest");
    });
→ will list all Passages tagged 'forest'
}}}
> ''Note:'' this method won't accept any of the [[Special Tags|Special-Tags]]
\
<h3>{{{Story.find()}}}</h3>\
This API is similar to the previous, aside from only returning the ''first'' passage that passes the function test.
{{{
    Story.find(predicate [, thisArg])
}}}
It has 2 properties:
* {{{predicate}}}: the function used to test each passage instance 
* {{{thisArg}}} (optional) the value to use as {{{this}}} when executing the function
\
> //Example://
{{{
    var hasWhitespaceRegExp = /\s/;
    Story.find(function (p) {
        return hasWhitespaceRegExp.test(p.title);
    });
→ will list the first Passage containing whitespace
}}}
> ''Note:'' this method won't accept any of the [[Special Tags|Special-Tags]]


:: StoryAuthor {"position":"2300,400","size":"100,100"}
<<if tags().includes("sp-demo")>>This is made by me! Manon :D<</if>>


:: StoryBanner {"position":"2300,100","size":"100,100"}
<<if tags().includes("sp-demo")>><img data-passage="TheCube"><</if>>


:: StoryCaption {"position":"2300,500","size":"100,100"}
<<if tags().includes("sp-demo")>>I can't think of a good caption... so here's some text<<else>>\
<span id="fancy-button">''//One Page Toggle//''
<<button `(settings.onePage) ? "On" : "Off"`>>
  <<if settings.onePage>>
    <<run Setting.setValue("onePage", false);>>
    <<goto "Start">>
  <<else>>
    <<popup 'OnePagePopup' "Warning">>
  <</if>>  
<</button>></span><</if>>


:: StoryDisplayTitle {"position":"2300,200","size":"100,100"}
<<if tags().includes("sp-demo")>>SG SUPER GUIDE YO@!<<else>>100% Good Twine SugarCube Guide<</if>>


:: StoryMenu {"position":"2300,600","size":"100,100"}
<<if tags().includes("sp-demo")>>[[This will only accept links, and this one is broken]]
	[[But this one will send you back to the main menu!|Start]]
	And this won't appear, because it's not a link.
	<<button [[And neither will this, because a button is not a link]]>><</button>>
	<<else>><<if !settings.onePage>>[[Index]]<<else>><<link "Index">><<popup "Popup-Index" "Index">><</link>><</if>>
  <<link "Lexicon">><<popup 'Lexicon' "Lexicon">><</link>>
	<<link "Credits">><<popup "Credits" "Credits">><</link>>
	[[Update Log]]<</if>>


:: StorySubtitle {"position":"2300,300","size":"100,100"}
<<if tags().includes("sp-demo")>>The bestest of guides!<<else>>Version 2.0.0<</if>>


:: Tags-Asset [page sp-tags] {"position":"2000,1400","size":"100,100"}
<h1 id="sp-tagsasset">Including Assets with Tags</h1>
While you cannot import assets through the Twine app, it is possible with SugarCube to create //Media Passages// through a passage tag. The media embedded in your project, you can include those assets into other passages thanks to the {{{data-passage}}} [[attribute|Markup-Attribute]]. 
> ''Note:'' while it is meant for [[Base64-encoded|https://en.wikipedia.org/wiki/Data_URI_scheme]] media source {{{data:type/extension;format,code}}}, the passage will also accept URLs.

These media passages will support audio, image, video, and VTT elements. Each of those get a special tag:
* {{{Twine.audio}}}, will register the passage as an audio passage
* {{{Twine.image}}}, will register the passage as an image passage
* {{{Twine.video}}}, will register the passage as a video passage. 
* {{{Twine.vtt}}}, will register the passage as a VTT passage.
> ''Note:'' you can only include one asset per passage. 
> In Twine 2, it is strongly recommended to only create a handful of media passage, and use small sources.


:: Tags-Built [page sp-tags] {"position":"2000,1200","size":"100,100"}
<h1 id="sp-tagsbuilt">Special Tags creating Special Passages and Functionalities</h1>
Along with [[Special Passages|Special-Passage]], SugarCube uses special passage ''tags'' to either create new Special Passages or affect the passage itself.
> ''Note:'' only use those tags when needed, as it can affect how Twine loads the project.
\
To add a tag to a passage on Twine, open the relevant passage, click {{{+ Tag}}} in the passage menu, and fill in the blanks. If a tag has been assigned to another passage, it will show in the {{{Add Tag}}} listbox. You can also assign a colour to the tag.
For Twee files, add the tag inside {{{[ ]}}} next to the passage name. For tags with multiple words, add a {{{-}}} between them ({{{[like-this]}}}) For multiple tags, add a space in-between ({{{[nobr widget]}}}).
\
<h3>{{{nobr}}}</h3>\
Like the [[macro of the same name|Macro-Nobr-Silent]], the {{{nobr}}} tag removes every break to a new line in the passage. While the macro only affects a targetted section of the passage (what is within the macro), the tag will affect the //entire// passage. This tag is most useful in passages with a lot of code, like a [[widget|Macro-Widget]] passage.
{{{
    :: Passage [nobr]
    This passage will not have line breaks.
    Even if the code is formatted with line breaks.
}}}
> ''Note:'' to target the whole project rather than a passage, it is best to use the {{{Config.nobr}}} [[API|Basic-API-Config]] instead.
\
<h3>{{{widget}}}</h3>\
As the name suggest, this tag is meant to create a special passage to set up {{{<<widget>>}}} [[macros|Macro-Widget]]. 
{{{
    :: Some Widgets [widget]
    <<widget "Test">>this is a test widget<</widget>>
}}}
> ''Note:'' while you can have multiple passages with this tag, it is recommended to keep this amount to a minimum.
\
<h3>{{{script}}}</h3>\
This tag is meant to tell Twine that this passage only contains JavaScript code. It is not necessary for Twine users: JavaScript code should be placed in the {{{Edit JavaScript}}} passage, under the //Story// menu. 

As for Twee files, it is only necessary if the file should be imported into the Twine app, and only one passage should be tagged as such. If you are using a compile (like Tweego), it is recommended to simply use a separate {{{.js}}} file (or multiple files) rather than create a {{{script}}} tagged passage. The files will be loaded in alphabetical order.
{{{
    :: The JavaScript Code [script]
}}}
> ''Note:'' you cannot change the name of the JavaScript passage on Twine.
\
<h3>{{{stylesheet}}}</h3>\
This tag is meant to tell Twine that this passage only contains CSS code. It is not necessary for Twine users: CSS code should be placed in the {{{Edit Stylesheet}}} passage, under //Story// the menu. 

As for Twee files, it is only necessary if the file should be imported into the Twine app, and only one passage should be tagged as such. If you are using a compile (like Tweego), it is recommended to simply use a separate {{{.css}}} file (or multiple files) rather than create a {{{stylesheet}}} tagged passage. The files will be loaded in alphabetical order.
{{{
    :: The CSS Code [stylesheet]
}}}
> ''Note:'' you cannot change the name of the StyleSheet passage on Twine.
\
<h3>{{{init}}}</h3>\
This tag is meant to be used for add-ons/library, as it loads at the beginning initialization. It creates a passage that works like {{{StoryInit}}}. However, for 99% of projects created in Twine, this tag is unnecessary. Instead, the Special passage {{{StoryInit}}} should be used.
{{{
    :: initialization [init]
}}}


:: Tags-CSS [page sp-tags] {"position":"2100,1300","size":"100,100"}
<h1 id="sp-tagscss">Customising Passages with Tags</h1>
Aside from [[creating Special Passages or Functionalities|Tags-Built]], tags can also be used to customise how a passage looks. For example, if multiple passages are set in a forest, one can add a tag called {{{forest}}} to those passages, and use this tag to set an image of a forest in the background of those passages.

To add a tag to a passage on Twine, open the relevant passage, click {{{+ Tag}}} in the passage menu, and fill in the blanks. If a tag has been assigned to another passage, it will show in the {{{Add Tag}}} listbox. You can also assign a colour to the tag.
For Twee files, add the tag inside {{{[ ]}}} next to the passage name. For tags with multiple words, add a {{{-}}} between them ({{{[like-this]}}}) For multiple tags, add a space in between ({{{[nobr widget]}}}).

Adding a tag to a passage creates:
* a data-tag on {{{html}}}, {{{body}}}, and {{{.passage}}}
* a CSS class on {{{body}}} and {{{.passage}}}

Both the data-tag and class can be used in the StyleSheet to edit aspects of the page, but are coded differently. The data-tag will keep the formatting of the inserted tag (case-sensitive and punctuation), while the class will transform it into a lowercase string and without punctuation (save for {{{-}}}).
{{{
→ For a tag called: The-Name-Of-The-Tag:
    [data-tags~="The-Name-Of-The-Tag"]
    .the-name-of-the-tag

→ For a tag called: Super!
    [data-tags~="Super!"]
    .super

→ For a tag called: This-1
    [data-tags~="This-1"]
    .this-1
}}}
> ''Note:'' if you are unsure how a tag or class has been formatted, use the Inspect Tool of your browser and select the {{{<body>}}}.
\
As for positioning the data-tag or class on an element, you need to take into account the order of CSS rules and where the tags are located. For example:
{{{
    html[data-tags~="forest"] { background-image: url(forest-bg.jpg); }
→ will change the background to an image of a forest, because there is a data-tag on "html"

    html.forest { background-image: url(forest-bg.jpg); }
→ will not do anything, because there is no class on "html"

    html .forest { background-image: url(forest-bg.jpg); }
→ will add the image as a background to every element inside "html" with the class "forest"
}}}
> ''Note:'' it is recommended to be specific when targeting an element (so not like the last example), to avoid adding unnecessary rules to elements.
\
> ''Note:'' class can also be added to the {{{html}}} element, in the JavaScript passage, jQuery code or [[DOM Macros|Macro-DOM-Adv]].
\
> //Other examples://
{{{
→ Targeting a child element:
    html[data-tags~="forest"] .passage { color: darkgreen; }
        → will change the font colour of ".passage" if the passage is tagged "forest"
    body[data-tags~="forest"] a { color: green; }
        → will change the colour of every link inside "body"

→ Targeting an element without "body":
    [data-tags~="forest"] #ui-bar {background: red;}
    .forest #ui-bar {background: red;}
        → will change the background colour of the sidebar
}}}
> ''Note:'' Data-Tags are preferred over classes, because it is more stable (i.e. won't be messed up by custom macros or third party code).


:: TemplateAPI [page adv-api] {"position":"1100,1300","size":"100,100"}
<h1 id="adv-template">The Template APIs</h1>
Used in combination with the [[Template Markup|Markup-Template]], the Template APIs allows the inclusion of templates to display specific strings on the page. When defined, the Template API will look for any Template Markup ({{{?this}}}) and see if it can display a string instead.
This can be used to a wide range of elements and variation, but it might be the most useful for Pronouns display.
\
<h3>Creating a Template</h3>\
This API will allow you to define a template in your project. You can include as many as you want, as long as each template is named differently.
> ''Note:'' this API is case-sensitive!
{{{
    Template.add(name , definition);
}}}
The API has 2 parameters:
* {{{name}}}, the name (or array of names) of the template
** it must consist of basic Latin characters (A → Z) and start with a letter.
** it can include numbers (0 → 9), underscores ({{{ _ }}}), or hyphens ({{{ - }}})
* {{{definition}}}, what could be outputted when the template is used
** this can be a function, a string, or an array of either 
** if the definition is an array, the output will be randomly selected between all listed options
** functions should always produce string values
*** functions can use {{{this}}} to refer to the template's {{{name}}}
\
> //Basic Examples://
{{{
→ String template named ?sunrise:
    Template.add('sunrise', 'sunset');

→ Array template named ?pie-filling:
    Template.add('pie-filling', ['cherry', 'apple', 'chocolate', 'pumpkin']);

→ Function template named ?pet:
    Template.add('pet', function () {
        return either('a dog', 'a cat', 'a turtle');
    });
}}}
> ''Note:'' a Function template is used in [[HiEv's Pronoun Template|https://hiev-heavy-ind.com/Sample_Code/Sample_Code.html#Pronoun%20Templates]] 
\
> //Mixed Array Example://
{{{
→ Mixed array template (string + function) named ?cmyk:
    Template.add('cmyk', [
        'Cyan',
        function () {
            return either('Magenta', 'Yellow');
        },
        'Black'
    ]);
}}}
> //Function Example with context object// {{{this}}}:
{{{
→ Multi-Named template, whose output depends on the name:
    Template.add(['color', 'Color'], function () {
        var color = either('red', 'green', 'blue');
        return this.name === 'Color' ? color.toUpperFirst() : color;
    });
}}}
> ''Note:'' in this last example, the function will randomly select between //red//, //green//, and //blue//. Then it will look at whether the Template Markup is either {{{?color}}} or {{{?Color}}} to format the output (capitalised or lowercase).
\
<h3>Removing a Template</h3>\
To remove a template (or multiple), you need to use {{{Template.delete()}}}. Please note that deleting a template will affect any future iteration of that specific Template Markup.

The template has 1 parameter:
* {{{name}}}, the name (or arrays of names) of the template(s) to remove.
> //Examples://
{{{
→ Removes the template for ?sunrise
    Template.delete('sunrise');

→ Removes the templates ?color and ?Color
    Template.delete(['color', 'Color']);
}}}
\
<h3>Other Template APIs</h3>\
<h4>{{{Template.size}}}</h4>\
This API can tell how many templates exist within the code.
{{{
    if (Template.size === 0) {
        /* If no templates exist, run code */
    }
}}}
\
<h4>{{{Template.has()}}}</h4>\
This API will check whether a template, for which you need to indicate the name, exists within the code.
{{{
    Template.has()

    if (Template.has('sunrise')) {
	    /* if ?sunrise is defined, run code */
    }
}}}
\
<h4>{{{Template.get()}}}</h4>\
This API will indicate the definition of the template, whether it be a function ({{{[function]}}}), a string ({{{'word'}}}) or an array (list all elements), or will return NULL if the template is not defined.
{{{
    Template.get(name)

    var sunrise = Template.get('sunrise');
}}}
> ''Note:'' if {{{?sunrise}}} is defined as the first example on this page, this API will show {{{sunset}}} as a value.


:: TheCube [Twine.image] {"position":"2475,350","size":"100,100"}
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAAB3RJTUUH5AMQDQ4vazJd/wAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAzdJREFUeNrt3M1rGkEUAHDb/jO9tce20B5bUKOiLpqIH/9Gbh4CvQQCnsV6r7d4rh9gY8EYjYk5qQcPBmM8iB6E7E7nyS5Yu36s7uzne/BYFnZ25v2cdZaFXYfDgHF0dPTWgbE5XC7XN6/XW6VYxOPxXNHtV1SRQfL5fH8A6fj4WEilUiQcDguwL+LZHu0VnT0cxbgHlFgsxufzeTKbzch8Pl9sYT8ajfIi2j0cD+0QSURaTQkNjrMT2gKJXm7tXZBsiZZMJl+73e7Yvkjb0OC8pkdTG2kXNOgP+kUkK6FpjWRKNI7j3iwjxeNxTZFMgSYh0VXpwQhI69BgXMtoMG7dkBKJhKGQtqHBuJmjycwkwchI69Dgx2WGZnakDTNNUA3NakjM0GjDTzTrcJJIJCLkcjkymUwsgbSaUBfUd3JyIqHVoX4lD9++Q8N0Ov1oVSQ5tGw2+wh1Q/2KsarVKmk0GrdPT091K0PRS7L+/Px8OxgMyEFYtVptkVZEk5BGoxGBVA1rBe3GSkjMsMyMRpFu5JCYY5kJbRuSZlhGRtsVSXMsI6EpRdINaxltOBw2zICkO5aUzWbzmhZwxxJpOp02DkEyDBZLNDqT7sbj8fWhSIbDUhNNbSTDYh2CxgrJ8FhK0FgjmQZrE5pWSKbDEpNvtVq/KVCVwl3RAnitoMyItch2u13UEgmxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEAuxEMsaWOVy2VZYvV5POZbH4zmFRhzHvVxcXJBKpWJprH6/TzKZDAmFQi/iZxJOFb044Ha7P9KGl9DY7/fzZ2dnpFQqWQqr2+0S+CxCIBDgxRl1CXXv/VqKHmissVRH0hONFRZzJD3Q1MbSHElLNLWwOp3Of0g0P+j2+i90TleP/DJasVjUFWsVSRyffkgs0fbFMjwSCzSlWCtIguGRNqAJStF2xTI9khpo27AkpGAwKCH9dDqd7y3zAR8oBoraBW0dlhwSXZXfOawaUNw2tFUs2yEpQZOwbI8k84TjC4UowOoJf9Tn5+ekUChU0+k0PPWQbgF+wXEOjH/QiuKdNpGQXC7XZ9TZjPYDkTDsE38BhSF0jgiMpUIAAAAASUVORK5CYII=


:: URL-Types [chapter page] {"position":"2000,600","size":"200,100"}
<h1 id="basics-urls" class="the-chapter">URLs for Assets and Testing</h1>
When including any external element into a project (e.g. image, sound, font, etc...), you will need the URL of the file. Twine does not have an import function for assets (and neither does Tweego). This means the URL will be the link between the Twine project and the asset, as it will tell the code where find it and (dis)play it when the game is in use.

There are essentially two locations for assets:
* ''Online'' assets, requiring an Online URL ({{{html://website/file}}})
* ''Local'' assets:
** located in the user's device, using the ''Absolute'' path URL ({{{C:\User\Documents\Folder\file}}})
** located in the project folder, using ''Relative'' path URL ({{{Folder\file}}})
> ''Note:'' since every device is different and organise its folders differently, the Absolute path is ''absolutely not recommended'' for Twine projects meant to be shared (online or otherwise).
\
<h3>Online Assets</h3>\
For assets hosted on third-party platforms, you will only need the URL towards the wanted file. Some of these platforms will even provide you with the needed URL for your projects.
> ''Note:'' Some platforms, like DropBox or GoogleDrive, won't allow this form of hosting, and will block the loading of assets. You should check that the hosting platform allows third-party links.

For example, here is the URL for the Google-hosted font //Roboto//:
{{{
    https://fonts.googleapis.com/css2?family=Roboto&display=swap

Importing in the StyleSheet:
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
}}}

For the logo of the Wikimedia Foundation, the URL will look like this:
{{{
    https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Wikimedia_Foundation_logo_-_vertical.svg/1024px-Wikimedia_Foundation_logo_-_vertical.svg.png
}}}
> ''Note:'' if the project is played offline, those assets will not load.
\
<h3>Relative Path</h3>\
For assets located in the game folder, you will need their //Relative// paths. This is a path the operating system will take to find the wanted asset, starting from the file (or program) where the code is triggered. For Twine projects, that starting point is the project HTML file.

Assuming that the game folder is as follow:
{{{
    index.html
    images\
        introduction\
            cool.jpg
}}}
\
The image //cool.jpg// is located in the folder //introduction// which is located in the folder //images//. As such from the HTML file, the relative URL for that image would be:
{{{
    images\introduction\cool.jpg
}}}
\
''But'', to ensure this will work properly, the back slashes {{{\}}} from the relative path should become forward slashes {{{/}}}:
{{{
    images/introduction/cool.jpg

Using in the StyleSheet:
    background-image: url('images/introduction/cool.jpg');
}}}
\
<h3>Note on Case Sensitivity</h3>\
Both Online URLs and Relative paths are case sensitive: this means that the URL should match the paths in terms of lower- and upper-case characters, or the asset will not load. This is relevant for:
* folder names 
* asset names 
* file extension ({{{.png ≠ .PNG}}})
It is important that all these aspects are coded in the proper case.
\
<h3>Some Recommendations</h3>\
To avoid issues with loading assets, I recommend:
* using only plain letters (a-z) and numbers (if necessary), instead of special characters (é, ñ, à, etc…)
* using hyphens {{{-}}} or underscores {{{_}}} to replace space in the folder/file names
* be consistent in the casing (all upper or all lower case)
\
> ''Note:'' While there is no import function in Twine, it is possible to create "asset" passages for Base64-encoded media source, using an [[Asset Tag|Tags-Asset]]. This supports audio, images, video and VTT assets. It will, //however//, increase the size of your project file.


:: Update Log [side] {"position":"1975,400","size":"100,100"}
<h1>Update Log</h1>
This is the update log of the ''100% Good SugarCube Guide'', containing all the changes made for each update of the guide.
> ''Note:'' with development of SugarCube 2 ending, this guide will probably not receive further substantial updates.

> //Next Update// (TBA)
    -> if a new 2.37 version comes out (most likely small fixes)
<hr>
> ''Version 2.0.0'' - 29-Aug-24
[29-Aug] - Final clean up and compiling
[29-Aug] - Created {One Page View} Special Index (scroll-to-view)
[29-Aug] - Completed Styling the {One Page View}
[28-Aug] - Updated main Indexes
[28-Aug] - Another extra round of grammar check
[28-Aug] - Added {setPageElement()} to the {Function} chapter 
[28-Aug] - Edited the {Story API} page to replace deprecated code ({.filter}, {.find}, {.add}, {.delete})
[28-Aug] - Fixed the Indexes (General, APIs, Function/Methods, Macros)
[28-Aug] - Completed the {One Page View}
[28-Aug] - Fixed broken links
[28-Aug] - Rephrased some explanations for clarity and consistency
[28-Aug] - Fixed typos and formatting errors
[25-Aug] - Reorganised Pages orders
[25-Aug] - Rephrased some explanations for clarity and consistency
[25-Aug] - Fixed broken links
[25-Aug] - Fixed typos and formatting errors
[24-Aug] - Reorganised Pages orders
[24-Aug] - Rephrased some explanations for clarity and consistency
[24-Aug] - Fixed typos and formatting errors
[22-Aug] - Reorganised Pages orders
[22-Aug] - Rephrased some explanations for clarity and consistency
[22-Aug] - Fixed broken links
[22-Aug] - Fixed typos and formatting errors
[20-Aug] - Reorganised Pages orders
[20-Aug] - Rephrased some explanations for clarity and consistency
[20-Aug] - Fixed typos and formatting errors
[19-Aug] - Added extra tips to the {Accessibility Cycle} page
[19-Aug] - Reorganised Pages orders
[19-Aug] - Rephrased some explanations for clarity and consistency
[19-Aug] - Fixed typos and formatting errors
[18-Aug] - Reorganised Pages orders
[18-Aug] - Rephrased some explanations for clarity and consistency
[18-Aug] - Fixed typos and formatting errors
[17-Aug] - Rephrased some explanations for clarity and consistency
[17-Aug] - Fixed typos and formatting errors 
[17-Aug] - Started the {One Page View}
[17-Aug] - ''Completed updating the guide for SG v2.37.3''
[17-Aug] - Added the {Audio Events} page
[17-Aug] - Completed the {Audio API} chapter
[16-Aug] - Rephrased some explanations for clarity and consistency
[16-Aug] - Continued the {Audio API} chapter
[15-Aug] - Created the {Audio API} chapter
[15-Aug] - Edited the {Basic API} page to edit deprecated code ({Config.saves.maxSlotSaves/maxAutoSaves})
[15-Aug] - Edited the {Config API} page to edit and remove deprecated code ({Config.saves.descriptions}, {Config.saves.isAllowed} - removed {Config.saves.autoload}, {Config.saves.tryDiskOnMobile}, {Config.saves.autosave})
[15-Aug] - Edited the {Passage API} page to edit and remove deprecated code ({<‎Passage‎>.id}, {<‎Passage‎>.name})
[15-Aug] - Edited the {Methods} page to remove deprecated code ({<‎Number‎> .clamp()})
[15-Aug] - Edited the {Story API} page to replace deprecated code ({.id}, {.title})
[15-Aug] - Edited the {Macro API} page to replace deprecated code ({.contextSome()}, {.contextFind()}, {.contextFilter()})
[15-Aug] - Added the {SC-Icon Font} page
[15-Aug] - Added the {Debug API} page
[14-Aug] - Rephrased some explanations for clarity and consistency
[14-Aug] - Edited the {Save API} chapter with new information (due to complete re-work of the API) 
[08-Aug] - Created the {One Page View} page (unfilled)
[08-Aug] - Rephrased some explanations for clarity and consistency
[08-Aug] - Added the {Do/Redo} macro 
[08-Aug] - Added the {triggerEvent} function
[08-Aug] - Rephrased some explanations for clarity and consistency
[08-Aug] - Edited the {StoryInterface} page to update with new information
[07-Aug] - Added the {:uiupdate} to {System Events}
[07-Aug] - Edited the {silently} macro to its new {silent} name
[07-Aug] - Edited the {Widget} macro page
[07-Aug] - Edited the {Loop - Two Ways} page to update the {for} macro
[07-Aug] - Replaced {UIBar.update()} with {UI.update()}
[07-Aug] - Rephrased some explanations for clarity and consistency
[07-Aug] - Fixed typos and formatting errors
[07-Aug] - Edited the {Settings API} with new information. This includes: {Setting.addValue()}, {Setting.getValue()}, {Setting.setValue()}
[06-Aug] - Fixed typos and formatting errors 
[06-Aug] - Updated the {jQuery Methods} with new information ({.wikiPassage()})
[06-Aug] - Edited the {Array Methods} page to replace deprecated code and update information ({.deleteFirst/Last()}, {.toShuffled()}, {.toUnique()})
[06-Aug] - Updated information about {Config.cleanupWikifierOutput}
[06-Aug] - Updated information about the {back} and {return} macro
[06-Aug] - Updated information about the {unset} macro
[06-Aug] - Edited the {Dialog API} page to replace deprecated code and updated new information ({.create()}, {.empty()}, {.wikiPassage()})
[06-Aug] - Deleted deprecated information. This includes: {UI.jumpto()} and {bookmark} tag, {UI.share()} and {StoryShare} SP, and {UIBar.update()}, {action} and {choice} macros
[05-Aug] - Fixed typos previously raised 
[05-Aug] - Edited {Slider Setting} example for consistency 
[05-Aug] - Added example to {Include Macro}
<hr>
> ''Version 1.2.1'' - 24-Jan-24
[24-Jan] - Added Function/Method Index + API Index
[24-Jan] - Completed the TODO comments
[24-Jan] - Removed the //New// and //Updated// signs
[24-Jan] - Fixed typos, broken links
[24-Jan] - Reformatted the Macro Index
<hr>
> ''Version 1.2.0'' - 10-Dec-23
[10-Dec] - Released a Downloadable Form
[10-Dec] - Completed the SugarCube Theme 
[10-Dec] - Completed the Settings Options
[10-Dec] - Added the {Targetable HTML Elements} page
[10-Dec] - Added the {State APIs} pages 
[09-Dec] - Added the {Passage API} page
[09-Dec] - Added the {Story API} page
[08-Dec] - Added the {Methods Advanced} pages
[08-Dec] - Added the {FullScreen API} pages
[08-Dec] - Added the {Accessibility} page
[07-Dec] - Added the {Stats Bar} and {Loading Screen} pages
[07-Dec] - Added the {Save API} pages 
[06-Dec] - Added the {Custom Macro} pages
[05-Dec] - Added the {More Markup} pages 
[05-Dec] - Added the {More Basic API} pages 
[05-Dec] - Added the {Configuration API} pages
[04-Dec] - Added more and reformatted examples 
[04-Dec] - Rephrased some explanations for clarity and consistency
[04-Dec] - Added the {Special Variables} and {Asset Tags} pages
[04-Dec] - Added the {Settings API} pages
[03-Dec] - Added more and reformatted examples 
[03-Dec] - Rephrased some explanations for clarity and consistency
[03-Dec] - Corrected an error in the {Typing Events} page
[02-Dec] - Added more and reformatted examples 
[02-Dec] - Rephrased some explanations for clarity and consistency
[02-Dec] - Corrected an error in the {Script/Run Macro} page
[30-Nov] - Added more and reformatted examples 
[30-Nov] - Rephrased some explanations for clarity and consistency
[30-Nov] - Fixed error in text for the {Condition Statements}
[29-Nov] - Added more and reformatted examples 
[29-Nov] - Rephrased some explanations for clarity and consistency
[28-Nov] - Added more and reformatted examples 
[28-Nov] - Fixes some code examples (Settings, Markup-Link)
[28-Nov] - Rephrased some explanations for clarity and consistency
[28-Nov] - Fixed some external links
[28-Nov] - Added more links (internal guide)
<hr>
> ''Version 1.1.0'' - 05-Aug-23
[05-Aug] - Clean up and check for update
[02-Aug] - Added the {Event} pages
[02-Aug] - Added the {Intro to Animation} page
[01-Aug] - Addition in the {Going Further with Settings} page.
[01-Aug] - Added the {Engine API} pages
[01-Aug] - Added the {Localization} pages
<hr>
> ''Version 1.0.2'' - 30-Jul-23
[30-Jul] - Fixed broken links
[30-Jul] - Added external links
[30-Jul] - Added extra explanation on the {Back vs Return} macros, and the {Conditional Statements}.
[30-Jul] - Fixed errors in Typed code, Basic Macro code, Styling Markup
[30-Jul] - Corrected wrong information in the Further CSS, Interactive Macros (cycle, listbox)
[30-Jul] - Updated the {Index}
[30-Jul] - Completed the {Macro List} Page
[30-Jul] - Updated the {Lexicon}
<hr>
> ''Version 1.0.1'' - 29-Jul-23
[29-Jul] - Fixed errors in Method code (array, string)
[29-Jul] - Fixed broken links
[29-Jul] - Fixed markup errors
[29-Jul] - Fixed inconsistencies in formatting
[29-Jul] - Cleaned up TODO notes on published pages
<hr>
> ''Version 1.0.0'' - 20-Jun-23
[30-Jun] - Pre-Release

<<back>>


:: Variables-Base [page basics] {"position":"800,400","size":"100,100"}
<h1 id="basic-variable">Variables and Values in SugarCube</h1>
Variables can be an important component when creating stories with variations, as it will help you track actions done by the player, and affect their playthrough. Variables come in different shape and form, and can save different types of information.
\
<h3>Value Types</h3>\
Values are bits of information (data) stocked inside variables. 
There are different types of values, which can both affect how code behaves and be modified by macros. 

The different types of values are:
* numbers (also called //integer//), such as {{{ 0 }}}, {{{ 1.5 }}}, {{{ -3 }}}
* words (also called //strings//), such as {{{ "this small sentence is a string" }}}
* Boolean ({{{true/false}}} values)
* functions (advanced - covered [[here|Functions]])
> ''Note:'' Numbers can be saved as strings ({{{"1" ≠ 1}}}), but you won't be able to change the value of this number (unless you transform the value into an integer). Quotes transforms any value into a string.
\
<h3>Variable Types</h3>\
To track and organise those values, there are three types of variables to consider:
* //basic//: only one value
** {{{var = value}}}
* //array//: a list of values, each with a set position
** {{{var = [value, value, value]}}}
** the first position of the array starts at {{{ 0 }}}!
* //object//: values linked to properties
** {{{var = {property : value, property : value}}}}
\
Depending on the amount of information tracked within a project, the last two options can be helpful in keeping those values organised (even mixing them). However, they are not necessary (especially in simple IF projects). To set a variable, see [[the Set Macro|Macro-Set-Basic]] chapter.

In SugarCube, variables can been viewed as followed:
{{{
 → basic: 
    $variable = 5
    $variable = "some words"
    $variable = true
    
 → array:
    $variable = [5, "some words", true]
 
 → object:
    $variable = {number: 5, string: 'some words', boolean: true}
}}}
> ''Note:'' Single {{{ ' ' }}} and double {{{ " " }}} quotes are essentially interchangeable.
\
<h3>Variable Storage</h3>\
Aside from different types of variables, there are multiple ways to store those variables in the code. Depending on the need, a certain kind will be more useful than another. The different storage types are:
* temporary ({{{_temporary}}}), so the variable disappears when moving to a new passage
* permanent ({{{$variable}}}), so the variable is stored until you [[destroy|Macro-Unset]] it
* settings ({{{settings.var}}}), or variables related to the [[Settings]]
* setup ({{{setup.var}}} - should be set in [[StoryInit|SP-Init]]), which is meant for unchanging values (ex: the price of an object)
> ''Note:'' for a simple project, you will not need the last two types. You may not even need variables at all.


:: Widget [widget nobr] {"position":"1850,100","size":"100,100"}
<<widget "SomeWidget">>
    Wow Some Text
<</widget>>
<<widget "SimonSays">>
    <<set _array to ["Raise your hands!", "Jump!", "Dance!"]>>
    <<print _array.random()>>
<</widget>>
<<widget "SimonSpecialSay">>
    <<if _args[0]>>
        <<print _args[0]>>
    <<else>>
        <<SimonSays>>
    <</if>>
<</widget>>
<<widget "SimonDoes" container>>
    <div class="simon">
        <hr class="before-simon">
        <p class="simon-does">_contents</p>
    </div>
<</widget>>
<<widget "ChapterDependentTags">>
    <<if passage() isnot "Start">>
    <div id="link-menu">
        <<if tags().includes("basics")>>
            [[Back to the Basics Menu|Basics]] - 
        <<elseif tags().includes("basic-plus")>>
            [[Back to the Markup Menu|Markup]] - 
        <<elseif tags().includes("basic-macro")>>
            [[Back to the Base Macro Menu|Macro-Basic]] - 
        <<elseif tags().includes("basic-interact")>>
            [[Back to the Interactive Macro Menu|Macro-Interact]] - 
        <<elseif tags().includes("basic-sp")>>
            [[Back to the Special Passages Menu|Special-Passage]] - 
        <<elseif tags().includes("int-markup")>>
            [[Back to the Markup Menu|Markup-Int]] - 
        <<elseif tags().includes("int-macro")>>
            [[Back to the Advanced interactive Macro Menu|Macro-Interact-Adv]] - 
        <<elseif tags().includes("int-conv")>>
            [[Back to the Convenient Macro Menu|Macro-Conv]] - 
        <<elseif tags().includes("sp-tags")>>
            [[Back to the Special Passages and Tags Menu|Special-Tags]] - 
        <<elseif tags().includes("functions")>>
            [[Back to the Functions Menu|Functions]] -  
        <<elseif tags().includes("methods")>>
            [[Back to the Methods Menu|Methods]] - 
        <<elseif tags().includes("audio-macro")>>
            [[Back to the Audio Macros Menu|Macro-Audio]] - 
        <<elseif tags().includes("int-jscss")>>
            [[Back to the Styling Menu|Int-JS-CSS]] - 
        <<elseif tags().includes("basic-apis")>>
            [[Back to the Basic API Menu|Basic-API]] - 
        <<elseif tags().includes("translate")>>
            [[Back to the Localization Menu|Localization]] - 
        <<elseif tags().includes("adv-macro")>>
            [[Back to the Advanced Macro Menu|Macro-Adv]] - 
        <<elseif tags().includes("adv-methods")>>
            [[Back to the Methods Menu|Methods-Adv]] - 
        <<elseif tags().includes("adv-api")>>
            [[Back to the API Menu|API-Adv]] - 
        <<elseif tags().includes("engine")>>
            [[Back to the Engine API Menu|Engine-API]] - 
        <<elseif tags().includes("settingsapi")>>
            [[Back to the Settings API Menu|Settings]] - 
        <<elseif tags().includes("saveapi")>>
            [[Back to the Save APIs Menu|SaveAPI]] - 
        <<elseif tags().includes("configapi")>>
            [[Back to the Config API Menu|Config-API]] - 
        <<elseif tags().includes("events")>>
            [[Back to the Events Menu|Events]] - 
        <<elseif tags().includes("macro-apis")>>
            [[Back to the Macro API Menu|Macro]] - 
        <<elseif tags().includes("state-api")>>
            [[Back to State API Menu|StateAPI]] - 
        <<elseif tags().includes("audio-api")>>
            [[Back to Audio API Menu|AudioAPI]] - 
        <</if>>
        <<if settings.onePage && passage() isnot "OnePage">> [[Return to One-Page|OnePage]] - <</if>>
        [[Back to the Start Menu|Start]]
    </div>
    <hr style="width: 75%;margin: 0.5em auto;border-top-style: dashed;"><</if>>
<</widget>>


:: StoryScript [script]
//----UI BASE----
    //--Scrollback to top
$(document).on(":passagedisplay", function() {
    $("#passages").scrollTop(0);
});

setup.scrollToId = (id) => {
    Dialog.close();
    $(`#${id}`)[0].scrollIntoView({ behavior: "smooth"});
}

//----SETTINGS----

Setting.addValue("onePage");

Setting.addHeader("Visual Setting");

var settingThemeNames = ["Base SC", "SC Docu"];
var settingThemeHandler = function () {
    var $html = $("html");
        $html.removeClass("sc-docu");
        switch (settings.theme) {
            case "SC Docu":
                $html.addClass("sc-docu");
                break;
}};
Setting.addList("theme", {
    label    : "Change Theme",
    desc     : "Choose between the Base StyleSheet<br>or the SugarCube Documentation",
    list     : settingThemeNames,
    default  : "Base SC",
    onInit   : settingThemeHandler,
    onChange : settingThemeHandler
});

Setting.addHeader("Font Settings");

var settingFontFam = ["Sans-Serif", "Serif", "Monospace", "Cursive"];
var settingFontFamHandler = function () {
    var $html = $("html");
        $html.removeClass("cursive serif mono");
        switch (settings.fontFam) {
            case "Serif":
                $html.addClass("serif");
                break;
            case "Monospace":
                $html.addClass("mono");
                break;
            case "Cursive":
                $html.addClass("cursive");
                break;
}};
Setting.addList("fontFam", {
    label    : "Change Font",
    desc     : "This will use the default fonts of your device.",
    list     : settingFontFam,
    default  : "Sans-Serif",
    onInit   : settingFontFamHandler,
    onChange : settingFontFamHandler
});

    //--FONT SIZE--
var settingFontSize = ["100%", "130%", "150%"];
var resizeFont = function() {
    var size = document.getElementById("passages");
    switch (settings.fontSize) {
        case "100%":
            size.style.fontSize = "100%";
            break;
        case "130%":
            size.style.fontSize = "130%";
            break;
        case "150%":
            size.style.fontSize = "150%";
            break;
    }
};
Setting.addList("fontSize", {
    label		: "Change Font Size",
    list		: settingFontSize,
    default     : "100%",
    onInit		: resizeFont,
    onChange	: resizeFont
});

// dialog API macro set (minified), by chapel; for SugarCube 2
;Macro.add("dialog",{tags:["onopen","onclose"],handler:function(){var t="",s=null,n=null,o=this.args.length>0?this.args[0]:"",e=this.args.length>1?this.args.slice(1).flatten():[];this.payload.forEach((function(o,e){0===e?t=o.contents:"onopen"===o.name?s=s?s+o.contents:o.contents:n=n?n+o.contents:o.contents})),e.push("macro-"+this.name),Dialog.create(o,e.join(" ")),Dialog.wiki(t),s&&"string"==typeof s&&s.trim()&&$(document).one(":dialogopened",(function(){$.wiki(s)})),n&&"string"==typeof n&&n.trim()&&$(document).one(":dialogclosed",(function(){$.wiki(n)})),Dialog.open()}}),Macro.add("popup",{handler:function(){if(this.args.length<1)return this.error("need at least one argument; the passage to display");if(!Story.has(this.args[0]))return this.error("the passage "+this.args[0]+"does not exist");var t=this.args[0],s=this.args.length>1?this.args[1]:"",n=this.args.length>2?this.args.slice(2).flatten():[];n.push("macro-"+this.name),Dialog.create(s,n.join(" ")),Dialog.wikiPassage(t),Dialog.open()}}),Macro.add("dialogclose",{skipArgs:!0,handler:function(){Dialog.close()}});

// message-macro.min.js, for SugarCube 2, by Chapel
// v1.0.1, 2022-07-21, 3bdbdfbe5ae47a46e4f4e52766d78701939ae9a6
;setup.messageMacro={},setup.messageMacro.default="Help",Macro.add("message",{tags:null,handler:function(){var e=this.payload[0].contents,a=$(document.createElement("span")),s=$(document.createElement(this.args.includes("btn")?"button":"a")),t=$(document.createElement("span"));s.wiki(this.args.length>0&&"btn"!==this.args[0]?this.args[0]:setup.messageMacro.default).ariaClick(this.createShadowWrapper((function(){a.hasClass("open")?t.css("display","none").empty():t.css("display","block").wiki(e),a.toggleClass("open")}))),a.attr("id","macro-"+this.name+"-"+this.args.join("").replace(/[^A-Za-z0-9]/g,"")).addClass("message-text").append(s).append(t).appendTo(this.output)}});
// end message-macro.min.js


:: StoryStylesheet [stylesheet]
/*HTML*/
.sc-docu body {
    background-color:#fff;
    color:#111;
}

label {
    font-weight: bold;
}
    /*Headers*/
h1 {
    text-align: center;
}
#passages h1 {
    background: #0b1f0b;
    border-radius: 5px;
    padding: 0.5em;
}
.sc-docu #passages h1 {
    background-color: #ccc;
}
h3 {
    margin-top: 2em;
}
h4 {
    margin-left: 3em;
    font-size: 115%;
}
h5 {
    margin-left: 3em;
    text-decoration: underline dotted;
}
    /* Blockcode */
blockquote {
    border-left: 4px #0b1f0b solid;
    padding: 5px;
}
.sc-docu blockquote {
    border-left-color: #88f;
}
    /* Code */
code, pre {
    font-family:monospace,monospace;
    font-size:1em;
    background: #03350369;
    border-radius: 1em;
    padding: 0.2em 0.5em;
}
.sc-docu code, .sc-docu pre {
    background: #8888ff69;
}
pre {
    overflow:auto;
    white-space: pre-wrap;
}
code {
    display: inline-block;
}
pre code {
    background: transparent !important;
    border-radius: 0;
    padding: 0;
}
h4 code, h3 code {
    background-color: #013c01;
}
.sc-docu h4 code, .sc-docu h3 code {
    background: #89a6ff;
}
    /* Tables */
.passage th {
    text-align: center;
    font-size: 110%;
}
.passage td {
    padding-top: 6px;
    padding-bottom: 6px;
}
#audio tr th:nth-child(3), #audio tr td:nth-child(3) {width: 35%;}
table.basma-set td:first-of-type {width: 15%;text-align: center;}
.ifses td:nth-child(1), .ifses td:nth-child(2) {text-align:center;}
.ifses th:nth-child(3), .ifses td:nth-child(3) {width: 33%;}
#truthy td:first-child {width: 260px;}

/*SideBar*/
.sc-docu #ui-bar {
    background: #f5f5f5;
    border-right-color: purple;
}

.sc-docu #ui-bar-history [id|="history"], .sc-docu #ui-bar-toggle {
    color: #1d005e;
}
.sc-docu #ui-bar-history [id|="history"]:disabled {
    color: #80008036;
}
.sc-docu #ui-bar-history [id|="history"], .sc-docu #ui-bar-toggle {
    border-color: purple;
}

.sc-docu #menu li a {
    color: #111;
}
.sc-docu #menu li a:hover {
    color: #eee;
    background: #88f;
}
.sc-docu #menu ul {
    border-color: purple;
}
.sc-docu #menu li:not(:first-child) {
    border-color: purple;
}
.sc-docu #menu-core li[id|="menu-item"] a::before, .sc-docu #ui-bar-history [id|="history"], .sc-docu #ui-bar-toggle::before {
    color: #1d005e;
}

#fancy-button {
    font-size: 1.25em;
}
#fancy-button button {
    border-radius: 1em;
    padding: 0.3em;
    min-width: 3.5em;
    margin-top: 0.2em;
}

/*Popups*/
#ui-dialog {
    max-width: 750px;
}
.sc-docu #ui-dialog-titlebar {
    background: #ccc;
}
#ui-dialog-title {
    padding: 0.2em;
}
#ui-dialog-close {
    height: 100%;
}
.sc-docu #ui-dialog-close {
    color: #4722cc;
}
.sc-docu #ui-dialog-body {
    background-color:#fff;
}
#ui-dialog-body.settings div[id|="header-body"] {
    margin: 1em 0 0 0;
    text-align: center;
}
.sc-docu #ui-dialog-body.saves button.save::before {
    color: purple;
}
.sc-docu #ui-dialog-body.saves > h2 {
    background-color: unset;
    padding: .2em .6em;
    text-align: right;
    color: purple;
    text-shadow: 0 0 10px #e1a6f7;
    font-size: 1.2em;
}

/*Settings Font*/
html.serif {
    font-family: serif;
}
html.mono {
    font-family: monospace;
}
html.cursive {
    font-family: cursive;
}

/*Macros + Triggered by Macros*/
.sc-docu a {
    color: #4722cc;
}
.sc-docu a:hover {
    color: #8822cc;
}
.sc-docu #menu li a:hover {
    color: #eee;
    background: #88f;
}
.sc-docu button {
    background: purple;
    border-color: #b70bb7;
}
.sc-docu button:not([disabled]):hover {
    background: #b70bb7;
    border-color: purple;
}
.sc-docu button:disabled {
    background-color: #444;
    border: 1px solid #666;
}

.sc-docu input, .sc-docu select, .sc-docu textarea {
    color: #111;
}
.sc-docu input:not(:disabled):focus, 
.sc-docu input:not(:disabled):hover, 
.sc-docu select:not(:disabled):focus, 
.sc-docu select:not(:disabled):hover, 
.sc-docu textarea:not(:disabled):focus, 
.sc-docu textarea:not(:disabled):hover {
    color: #eee;
    background-color: #88f;
}
.accs .macro-cycle::after {
    content: "↴";
    color: blue;
}

.colour {
    color: green;
}
.sc-docu .colour {
    color: pink;
}

.simon {
    width: 134px;
    margin: auto;
}
hr.before-simon {
    border-color: darkgreen;
}
.sc-docu hr.before-simon {
    border-color: purple;
}  
.simon-does {
    text-transform: capitalize;
}

/*Progress/Meter Bars*/
#test-bar {
    background: #0b1f0b;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #013c01;
}
#test-bar::-moz-progress-bar {
    background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
    border-radius: 20px;
}
#test-bar::-webkit-progress-bar {
    background: #0b1f0b;
    border-radius: 20px;
}
#test-bar::-webkit-progress-value {
    background: linear-gradient(-90deg, #00800078, #6ecfff, #00800078);
    border-radius: 20px;
}

#test-metbar {
    background: #1d0b1f;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #3a013c;
}
#test-metbar::-moz-meter-bar {
    background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
    border-radius: 20px;
}

#test-metbar::-webkit-meter-bar {
	background: #1d0b1f;
    border-radius: 20px;
    height: 2em;
    border: 2px solid #3a013c;
}
#test-metbar::-webkit-meter-optimum-value {
    background: linear-gradient(-90deg, #76008078, #ffe26e, #76008078);
    border-radius: 20px;
}

.statBarContainer {
    background: #660303;
    width: 100%;
    height: 2em;
    border-radius: 20px;
    border: 2px solid #a40606;
}
.statBar {
    background: linear-gradient(-90deg, #ff489e78, #6effc2, #ff489e78);
    border-radius: 20px;
    height: inherit;
}

/*Icons*/
.icons x, .icons {
    font-family: sc-icons !important;
    font-style: normal;
    font-weight: normal;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

#icons-wrap {
    display: flex;
    flex-wrap: wrap;
    opacity: 0.8;
}
#icons-wrap .icons {
    display: flex;
    flex-direction: column;
    text-align: center;
    border: 1px solid;
    padding: 1%;
    border-radius: 1em;
    margin: 5px;
} 
.icons x {
    font-size: 200%;
}

/*Other stuff*/
#link-menu {
    text-align: center;
}

.flickering {
    animation: flicker 1s infinite;
}
@keyframes flicker {
    0% { opacity:1; }
    50% { opacity:0; } 
    100% { opacity:1; }
}

#bad-idea {
    color: #444;
}
/*Special Pages*/
[data-tags~="BasicUI"] body {
    color: #eee;
    background: #111;
}
[data-tags~="BasicUI"] #story {background: #012f01;} 
[data-tags~="BasicUI"] #ui-bar {background-color: #330404;}
[data-tags~="BasicUI"].sc-docu #passages h1 {background: transparent;}
[data-tags~="BasicUI"] .passage a {color: #dd6d66;}

[data-tags~="one-page"] .passage a.link-internal::after {
    font-family: sc-icons !important;
    font-style: normal;
    font-weight: normal;
    font-variant: normal;
    line-height: 1;
    speak: never;
    text-rendering: auto;
    text-transform: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    content: '\f56f';
    margin-left: 3px;
    opacity: 0.8;
}
[data-tags~="one-page"] hr {
  width: 85%;
  margin: 1em auto;
  border-top: 10px dotted;
  color: #009100;
}
[data-tags~="one-page"].sc-docu hr {
    color: #b70bb7;
}
[data-tags~="one-page"] hr.small-section {
  width: 65%;
  margin: 1em auto;
  border-top: 10px dotted;
}
[data-tags~="one-page"] hr.categorybreak {
  width: 100%;
  border-top: 15px dotted #009100;
  margin: 3em 0 1em;
}
[data-tags~="one-page"].sc-docu hr.categorybreak {
    border-top: 15px dotted #800080;
}
[data-tags~="one-page"] hr.categorybreak2 {
  width: 91%;
  border-top: 17px dotted #034603;
  margin: 0.5em auto;
}
[data-tags~="one-page"].sc-docu hr.categorybreak2 {
    border-top: 17px dotted #b70bb7;
}

[data-tags~="one-page"] h1 {
    margin: 0.67em 1em;
}
[data-tags~="one-page"] h1.the-super-head {
    font-size: 3em;
    text-shadow: 0 0 10px #009100, 0 0 20px #009100;
    padding: 0.7em !important;
    margin: 1em 0.1em;
}
[data-tags~="one-page"].sc-docu h1.the-super-head {
    text-shadow: 0 0 10px #ff16ff7a, 0 0 20px #ff16ff7a;
}
[data-tags~="one-page"] h1.the-chapter {
    font-size: 2.5em;
    margin: .67em 0;
    text-shadow: 0 0 10px #009100;
}
[data-tags~="one-page"].sc-docu h1.the-chapter {
    text-shadow: 0 0 10px #ff16ffbf;
}